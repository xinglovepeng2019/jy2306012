var kX=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var nVe=kX((an,on)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();function FC(e,t){const r=Object.create(null),i=e.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const Yt={},ad=[],ma=()=>{},BX=()=>!1,FX=/^on[^a-z]/,J_=e=>FX.test(e),VC=e=>e.startsWith("onUpdate:"),kr=Object.assign,UC=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},VX=Object.prototype.hasOwnProperty,yt=(e,t)=>VX.call(e,t),Je=Array.isArray,od=e=>Q_(e)==="[object Map]",b4=e=>Q_(e)==="[object Set]",lt=e=>typeof e=="function",Br=e=>typeof e=="string",GC=e=>typeof e=="symbol",er=e=>e!==null&&typeof e=="object",w4=e=>er(e)&&lt(e.then)&&lt(e.catch),S4=Object.prototype.toString,Q_=e=>S4.call(e),UX=e=>Q_(e).slice(8,-1),M4=e=>Q_(e)==="[object Object]",HC=e=>Br(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,m0=FC(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ex=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},GX=/-(\w)/g,bd=ex(e=>e.replace(GX,(t,r)=>r?r.toUpperCase():"")),HX=/\B([A-Z])/g,jd=ex(e=>e.replace(HX,"-$1").toLowerCase()),T4=ex(e=>e.charAt(0).toUpperCase()+e.slice(1)),Mb=ex(e=>e?`on${T4(e)}`:""),Tv=(e,t)=>!Object.is(e,t),Tb=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},a1=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},jX=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let HE;const MM=()=>HE||(HE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jC(e){if(Je(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=Br(i)?XX(i):jC(i);if(n)for(const a in n)t[a]=n[a]}return t}else{if(Br(e))return e;if(er(e))return e}}const WX=/;(?![^(]*\))/g,$X=/:([^]+)/,qX=/\/\*[^]*?\*\//g;function XX(e){const t={};return e.replace(qX,"").split(WX).forEach(r=>{if(r){const i=r.split($X);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function WC(e){let t="";if(Br(e))t=e;else if(Je(e))for(let r=0;r<e.length;r++){const i=WC(e[r]);i&&(t+=i+" ")}else if(er(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const YX="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ZX=FC(YX);function A4(e){return!!e||e===""}const sm=e=>Br(e)?e:e==null?"":Je(e)||er(e)&&(e.toString===S4||!lt(e.toString))?JSON.stringify(e,C4,2):String(e),C4=(e,t)=>t&&t.__v_isRef?C4(e,t.value):od(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n])=>(r[`${i} =>`]=n,r),{})}:b4(t)?{[`Set(${t.size})`]:[...t.values()]}:er(t)&&!Je(t)&&!M4(t)?String(t):t;let na;class KX{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=na,!t&&na&&(this.index=(na.scopes||(na.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=na;try{return na=this,t()}finally{na=r}}}on(){na=this}off(){na=this.parent}stop(t){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function JX(e,t=na){t&&t.active&&t.effects.push(e)}function QX(){return na}const $C=e=>{const t=new Set(e);return t.w=0,t.n=0,t},D4=e=>(e.w&Il)>0,P4=e=>(e.n&Il)>0,eY=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Il},tY=e=>{const{deps:t}=e;if(t.length){let r=0;for(let i=0;i<t.length;i++){const n=t[i];D4(n)&&!P4(n)?n.delete(e):t[r++]=n,n.w&=~Il,n.n&=~Il}t.length=r}},TM=new WeakMap;let Tp=0,Il=1;const AM=30;let ua;const oh=Symbol(""),CM=Symbol("");class qC{constructor(t,r=null,i){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,JX(this,i)}run(){if(!this.active)return this.fn();let t=ua,r=Sl;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ua,ua=this,Sl=!0,Il=1<<++Tp,Tp<=AM?eY(this):jE(this),this.fn()}finally{Tp<=AM&&tY(this),Il=1<<--Tp,ua=this.parent,Sl=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ua===this?this.deferStop=!0:this.active&&(jE(this),this.onStop&&this.onStop(),this.active=!1)}}function jE(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Sl=!0;const L4=[];function Wd(){L4.push(Sl),Sl=!1}function $d(){const e=L4.pop();Sl=e===void 0?!0:e}function Wi(e,t,r){if(Sl&&ua){let i=TM.get(e);i||TM.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=$C()),E4(n)}}function E4(e,t){let r=!1;Tp<=AM?P4(e)||(e.n|=Il,r=!D4(e)):r=!e.has(ua),r&&(e.add(ua),ua.deps.push(e))}function fs(e,t,r,i,n,a){const o=TM.get(e);if(!o)return;let s=[];if(t==="clear")s=[...o.values()];else if(r==="length"&&Je(e)){const l=Number(i);o.forEach((u,h)=>{(h==="length"||h>=l)&&s.push(u)})}else switch(r!==void 0&&s.push(o.get(r)),t){case"add":Je(e)?HC(r)&&s.push(o.get("length")):(s.push(o.get(oh)),od(e)&&s.push(o.get(CM)));break;case"delete":Je(e)||(s.push(o.get(oh)),od(e)&&s.push(o.get(CM)));break;case"set":od(e)&&s.push(o.get(oh));break}if(s.length===1)s[0]&&DM(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);DM($C(l))}}function DM(e,t){const r=Je(e)?e:[...e];for(const i of r)i.computed&&WE(i);for(const i of r)i.computed||WE(i)}function WE(e,t){(e!==ua||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const rY=FC("__proto__,__v_isRef,__isVue"),I4=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(GC)),iY=XC(),nY=XC(!1,!0),aY=XC(!0),$E=oY();function oY(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=At(this);for(let a=0,o=this.length;a<o;a++)Wi(i,"get",a+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(At)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Wd();const i=At(this)[t].apply(this,r);return $d(),i}}),e}function sY(e){const t=At(this);return Wi(t,"has",e),t.hasOwnProperty(e)}function XC(e=!1,t=!1){return function(i,n,a){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&a===(e?t?SY:k4:t?N4:z4).get(i))return i;const o=Je(i);if(!e){if(o&&yt($E,n))return Reflect.get($E,n,a);if(n==="hasOwnProperty")return sY}const s=Reflect.get(i,n,a);return(GC(n)?I4.has(n):rY(n))||(e||Wi(i,"get",n),t)?s:ii(s)?o&&HC(n)?s:s.value:er(s)?e?F4(s):Sg(s):s}}const lY=O4(),uY=O4(!0);function O4(e=!1){return function(r,i,n,a){let o=r[i];if(wd(o)&&ii(o)&&!ii(n))return!1;if(!e&&(!o1(n)&&!wd(n)&&(o=At(o),n=At(n)),!Je(r)&&ii(o)&&!ii(n)))return o.value=n,!0;const s=Je(r)&&HC(i)?Number(i)<r.length:yt(r,i),l=Reflect.set(r,i,n,a);return r===At(a)&&(s?Tv(n,o)&&fs(r,"set",i,n):fs(r,"add",i,n)),l}}function hY(e,t){const r=yt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&fs(e,"delete",t,void 0),i}function cY(e,t){const r=Reflect.has(e,t);return(!GC(t)||!I4.has(t))&&Wi(e,"has",t),r}function dY(e){return Wi(e,"iterate",Je(e)?"length":oh),Reflect.ownKeys(e)}const R4={get:iY,set:lY,deleteProperty:hY,has:cY,ownKeys:dY},fY={get:aY,set(e,t){return!0},deleteProperty(e,t){return!0}},pY=kr({},R4,{get:nY,set:uY}),YC=e=>e,tx=e=>Reflect.getPrototypeOf(e);function lm(e,t,r=!1,i=!1){e=e.__v_raw;const n=At(e),a=At(t);r||(t!==a&&Wi(n,"get",t),Wi(n,"get",a));const{has:o}=tx(n),s=i?YC:r?JC:Av;if(o.call(n,t))return s(e.get(t));if(o.call(n,a))return s(e.get(a));e!==n&&e.get(t)}function um(e,t=!1){const r=this.__v_raw,i=At(r),n=At(e);return t||(e!==n&&Wi(i,"has",e),Wi(i,"has",n)),e===n?r.has(e):r.has(e)||r.has(n)}function hm(e,t=!1){return e=e.__v_raw,!t&&Wi(At(e),"iterate",oh),Reflect.get(e,"size",e)}function qE(e){e=At(e);const t=At(this);return tx(t).has.call(t,e)||(t.add(e),fs(t,"add",e,e)),this}function XE(e,t){t=At(t);const r=At(this),{has:i,get:n}=tx(r);let a=i.call(r,e);a||(e=At(e),a=i.call(r,e));const o=n.call(r,e);return r.set(e,t),a?Tv(t,o)&&fs(r,"set",e,t):fs(r,"add",e,t),this}function YE(e){const t=At(this),{has:r,get:i}=tx(t);let n=r.call(t,e);n||(e=At(e),n=r.call(t,e)),i&&i.call(t,e);const a=t.delete(e);return n&&fs(t,"delete",e,void 0),a}function ZE(){const e=At(this),t=e.size!==0,r=e.clear();return t&&fs(e,"clear",void 0,void 0),r}function cm(e,t){return function(i,n){const a=this,o=a.__v_raw,s=At(o),l=t?YC:e?JC:Av;return!e&&Wi(s,"iterate",oh),o.forEach((u,h)=>i.call(n,l(u),l(h),a))}}function dm(e,t,r){return function(...i){const n=this.__v_raw,a=At(n),o=od(a),s=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=n[e](...i),h=r?YC:t?JC:Av;return!t&&Wi(a,"iterate",l?CM:oh),{next(){const{value:c,done:d}=u.next();return d?{value:c,done:d}:{value:s?[h(c[0]),h(c[1])]:h(c),done:d}},[Symbol.iterator](){return this}}}}function Ls(e){return function(...t){return e==="delete"?!1:this}}function vY(){const e={get(a){return lm(this,a)},get size(){return hm(this)},has:um,add:qE,set:XE,delete:YE,clear:ZE,forEach:cm(!1,!1)},t={get(a){return lm(this,a,!1,!0)},get size(){return hm(this)},has:um,add:qE,set:XE,delete:YE,clear:ZE,forEach:cm(!1,!0)},r={get(a){return lm(this,a,!0)},get size(){return hm(this,!0)},has(a){return um.call(this,a,!0)},add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear"),forEach:cm(!0,!1)},i={get(a){return lm(this,a,!0,!0)},get size(){return hm(this,!0)},has(a){return um.call(this,a,!0)},add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear"),forEach:cm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=dm(a,!1,!1),r[a]=dm(a,!0,!1),t[a]=dm(a,!1,!0),i[a]=dm(a,!0,!0)}),[e,r,t,i]}const[gY,mY,yY,_Y]=vY();function ZC(e,t){const r=t?e?_Y:yY:e?mY:gY;return(i,n,a)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(yt(r,n)&&n in i?r:i,n,a)}const xY={get:ZC(!1,!1)},bY={get:ZC(!1,!0)},wY={get:ZC(!0,!1)},z4=new WeakMap,N4=new WeakMap,k4=new WeakMap,SY=new WeakMap;function MY(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function TY(e){return e.__v_skip||!Object.isExtensible(e)?0:MY(UX(e))}function Sg(e){return wd(e)?e:KC(e,!1,R4,xY,z4)}function B4(e){return KC(e,!1,pY,bY,N4)}function F4(e){return KC(e,!0,fY,wY,k4)}function KC(e,t,r,i,n){if(!er(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=n.get(e);if(a)return a;const o=TY(e);if(o===0)return e;const s=new Proxy(e,o===2?i:r);return n.set(e,s),s}function sd(e){return wd(e)?sd(e.__v_raw):!!(e&&e.__v_isReactive)}function wd(e){return!!(e&&e.__v_isReadonly)}function o1(e){return!!(e&&e.__v_isShallow)}function V4(e){return sd(e)||wd(e)}function At(e){const t=e&&e.__v_raw;return t?At(t):e}function U4(e){return a1(e,"__v_skip",!0),e}const Av=e=>er(e)?Sg(e):e,JC=e=>er(e)?F4(e):e;function G4(e){Sl&&ua&&(e=At(e),E4(e.dep||(e.dep=$C())))}function H4(e,t){e=At(e);const r=e.dep;r&&DM(r)}function ii(e){return!!(e&&e.__v_isRef===!0)}function Mh(e){return j4(e,!1)}function AY(e){return j4(e,!0)}function j4(e,t){return ii(e)?e:new CY(e,t)}class CY{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:At(t),this._value=r?t:Av(t)}get value(){return G4(this),this._value}set value(t){const r=this.__v_isShallow||o1(t)||wd(t);t=r?t:At(t),Tv(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Av(t),H4(this))}}function En(e){return ii(e)?e.value:e}const DY={get:(e,t,r)=>En(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return ii(n)&&!ii(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function W4(e){return sd(e)?e:new Proxy(e,DY)}class PY{constructor(t,r,i,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new qC(t,()=>{this._dirty||(this._dirty=!0,H4(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=At(this);return G4(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function LY(e,t,r=!1){let i,n;const a=lt(e);return a?(i=e,n=ma):(i=e.get,n=e.set),new PY(i,n,a||!n,r)}function Ml(e,t,r,i){let n;try{n=i?e(...i):e()}catch(a){rx(a,t,r)}return n}function ya(e,t,r,i){if(lt(e)){const a=Ml(e,t,r,i);return a&&w4(a)&&a.catch(o=>{rx(o,t,r)}),a}const n=[];for(let a=0;a<e.length;a++)n.push(ya(e[a],t,r,i));return n}function rx(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let a=t.parent;const o=t.proxy,s=r;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,o,s)===!1)return}a=a.parent}const l=t.appContext.config.errorHandler;if(l){Ml(l,null,10,[e,o,s]);return}}EY(e,r,n,i)}function EY(e,t,r,i=!0){console.error(e)}let Cv=!1,PM=!1;const ei=[];let eo=0;const ld=[];let $o=null,Uu=0;const $4=Promise.resolve();let QC=null;function s1(e){const t=QC||$4;return e?t.then(this?e.bind(this):e):t}function IY(e){let t=eo+1,r=ei.length;for(;t<r;){const i=t+r>>>1;Dv(ei[i])<e?t=i+1:r=i}return t}function eD(e){(!ei.length||!ei.includes(e,Cv&&e.allowRecurse?eo+1:eo))&&(e.id==null?ei.push(e):ei.splice(IY(e.id),0,e),q4())}function q4(){!Cv&&!PM&&(PM=!0,QC=$4.then(Y4))}function OY(e){const t=ei.indexOf(e);t>eo&&ei.splice(t,1)}function RY(e){Je(e)?ld.push(...e):(!$o||!$o.includes(e,e.allowRecurse?Uu+1:Uu))&&ld.push(e),q4()}function KE(e,t=Cv?eo+1:0){for(;t<ei.length;t++){const r=ei[t];r&&r.pre&&(ei.splice(t,1),t--,r())}}function X4(e){if(ld.length){const t=[...new Set(ld)];if(ld.length=0,$o){$o.push(...t);return}for($o=t,$o.sort((r,i)=>Dv(r)-Dv(i)),Uu=0;Uu<$o.length;Uu++)$o[Uu]();$o=null,Uu=0}}const Dv=e=>e.id==null?1/0:e.id,zY=(e,t)=>{const r=Dv(e)-Dv(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function Y4(e){PM=!1,Cv=!0,ei.sort(zY);const t=ma;try{for(eo=0;eo<ei.length;eo++){const r=ei[eo];r&&r.active!==!1&&Ml(r,null,14)}}finally{eo=0,ei.length=0,X4(),Cv=!1,QC=null,(ei.length||ld.length)&&Y4()}}function NY(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||Yt;let n=r;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in i){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:c,trim:d}=i[h]||Yt;d&&(n=r.map(f=>Br(f)?f.trim():f)),c&&(n=r.map(jX))}let s,l=i[s=Mb(t)]||i[s=Mb(bd(t))];!l&&a&&(l=i[s=Mb(jd(t))]),l&&ya(l,e,6,n);const u=i[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,ya(u,e,6,n)}}function Z4(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const a=e.emits;let o={},s=!1;if(!lt(e)){const l=u=>{const h=Z4(u,t,!0);h&&(s=!0,kr(o,h))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!s?(er(e)&&i.set(e,null),null):(Je(a)?a.forEach(l=>o[l]=null):kr(o,a),er(e)&&i.set(e,o),o)}function ix(e,t){return!e||!J_(t)?!1:(t=t.slice(2).replace(/Once$/,""),yt(e,t[0].toLowerCase()+t.slice(1))||yt(e,jd(t))||yt(e,t))}let ao=null,nx=null;function l1(e){const t=ao;return ao=e,nx=e&&e.type.__scopeId||null,t}function kY(e){nx=e}function BY(){nx=null}function K4(e,t=ao,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&sI(-1);const a=l1(t);let o;try{o=e(...n)}finally{l1(a),i._d&&sI(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Ab(e){const{type:t,vnode:r,proxy:i,withProxy:n,props:a,propsOptions:[o],slots:s,attrs:l,emit:u,render:h,renderCache:c,data:d,setupState:f,ctx:p,inheritAttrs:v}=e;let g,m;const y=l1(e);try{if(r.shapeFlag&4){const x=n||i;g=Ka(h.call(x,x,c,a,f,d,p)),m=l}else{const x=t;g=Ka(x.length>1?x(a,{attrs:l,slots:s,emit:u}):x(a,null)),m=t.props?l:FY(l)}}catch(x){$p.length=0,rx(x,e,1),g=Vi(Th)}let _=g;if(m&&v!==!1){const x=Object.keys(m),{shapeFlag:w}=_;x.length&&w&7&&(o&&x.some(VC)&&(m=VY(m,o)),_=Sd(_,m))}return r.dirs&&(_=Sd(_),_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&(_.transition=r.transition),g=_,l1(y),g}const FY=e=>{let t;for(const r in e)(r==="class"||r==="style"||J_(r))&&((t||(t={}))[r]=e[r]);return t},VY=(e,t)=>{const r={};for(const i in e)(!VC(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function UY(e,t,r){const{props:i,children:n,component:a}=e,{props:o,children:s,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?JE(i,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let c=0;c<h.length;c++){const d=h[c];if(o[d]!==i[d]&&!ix(u,d))return!0}}}else return(n||s)&&(!s||!s.$stable)?!0:i===o?!1:i?o?JE(i,o,u):!0:!!o;return!1}function JE(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const a=i[n];if(t[a]!==e[a]&&!ix(r,a))return!0}return!1}function GY({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const HY=e=>e.__isSuspense;function jY(e,t){t&&t.pendingBranch?Je(e)?t.effects.push(...e):t.effects.push(e):RY(e)}const fm={};function y0(e,t,r){return J4(e,t,r)}function J4(e,t,{immediate:r,deep:i,flush:n,onTrack:a,onTrigger:o}=Yt){var s;const l=QX()===((s=ti)==null?void 0:s.scope)?ti:null;let u,h=!1,c=!1;if(ii(e)?(u=()=>e.value,h=o1(e)):sd(e)?(u=()=>e,i=!0):Je(e)?(c=!0,h=e.some(x=>sd(x)||o1(x)),u=()=>e.map(x=>{if(ii(x))return x.value;if(sd(x))return Xc(x);if(lt(x))return Ml(x,l,2)})):lt(e)?t?u=()=>Ml(e,l,2):u=()=>{if(!(l&&l.isUnmounted))return d&&d(),ya(e,l,3,[f])}:u=ma,t&&i){const x=u;u=()=>Xc(x())}let d,f=x=>{d=y.onStop=()=>{Ml(x,l,4)}},p;if(Lv)if(f=ma,t?r&&ya(t,l,3,[u(),c?[]:void 0,f]):u(),n==="sync"){const x=zZ();p=x.__watcherHandles||(x.__watcherHandles=[])}else return ma;let v=c?new Array(e.length).fill(fm):fm;const g=()=>{if(y.active)if(t){const x=y.run();(i||h||(c?x.some((w,b)=>Tv(w,v[b])):Tv(x,v)))&&(d&&d(),ya(t,l,3,[x,v===fm?void 0:c&&v[0]===fm?[]:v,f]),v=x)}else y.run()};g.allowRecurse=!!t;let m;n==="sync"?m=g:n==="post"?m=()=>Pi(g,l&&l.suspense):(g.pre=!0,l&&(g.id=l.uid),m=()=>eD(g));const y=new qC(u,m);t?r?g():v=y.run():n==="post"?Pi(y.run.bind(y),l&&l.suspense):y.run();const _=()=>{y.stop(),l&&l.scope&&UC(l.scope.effects,y)};return p&&p.push(_),_}function WY(e,t,r){const i=this.proxy,n=Br(e)?e.includes(".")?Q4(i,e):()=>i[e]:e.bind(i,i);let a;lt(t)?a=t:(a=t.handler,r=t);const o=ti;Md(this);const s=J4(n,a.bind(i),r);return o?Md(o):sh(),s}function Q4(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function Xc(e,t){if(!er(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ii(e))Xc(e.value,t);else if(Je(e))for(let r=0;r<e.length;r++)Xc(e[r],t);else if(b4(e)||od(e))e.forEach(r=>{Xc(r,t)});else if(M4(e))for(const r in e)Xc(e[r],t);return e}function Kl(e,t,r,i){const n=e.dirs,a=t&&t.dirs;for(let o=0;o<n.length;o++){const s=n[o];a&&(s.oldValue=a[o].value);let l=s.dir[i];l&&(Wd(),ya(l,r,8,[e.el,s,e,t]),$d())}}function tD(e,t){return lt(e)?(()=>kr({name:e.name},t,{setup:e}))():e}const _0=e=>!!e.type.__asyncLoader,eU=e=>e.type.__isKeepAlive;function $Y(e,t){tU(e,"a",t)}function qY(e,t){tU(e,"da",t)}function tU(e,t,r=ti){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(ax(t,i,r),r){let n=r.parent;for(;n&&n.parent;)eU(n.parent.vnode)&&XY(i,t,r,n),n=n.parent}}function XY(e,t,r,i){const n=ax(t,e,i,!0);iD(()=>{UC(i[t],n)},r)}function ax(e,t,r=ti,i=!1){if(r){const n=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...o)=>{if(r.isUnmounted)return;Wd(),Md(r);const s=ya(t,r,e,o);return sh(),$d(),s});return i?n.unshift(a):n.push(a),a}}const Ts=e=>(t,r=ti)=>(!Lv||e==="sp")&&ax(e,(...i)=>t(...i),r),YY=Ts("bm"),rD=Ts("m"),ZY=Ts("bu"),KY=Ts("u"),JY=Ts("bum"),iD=Ts("um"),QY=Ts("sp"),eZ=Ts("rtg"),tZ=Ts("rtc");function rZ(e,t=ti){ax("ec",e,t)}const iZ=Symbol.for("v-ndc"),LM=e=>e?pU(e)?uD(e)||e.proxy:LM(e.parent):null,Wp=kr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>LM(e.parent),$root:e=>LM(e.root),$emit:e=>e.emit,$options:e=>nD(e),$forceUpdate:e=>e.f||(e.f=()=>eD(e.update)),$nextTick:e=>e.n||(e.n=s1.bind(e.proxy)),$watch:e=>WY.bind(e)}),Cb=(e,t)=>e!==Yt&&!e.__isScriptSetup&&yt(e,t),nZ={get({_:e},t){const{ctx:r,setupState:i,data:n,props:a,accessCache:o,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return a[t]}else{if(Cb(i,t))return o[t]=1,i[t];if(n!==Yt&&yt(n,t))return o[t]=2,n[t];if((u=e.propsOptions[0])&&yt(u,t))return o[t]=3,a[t];if(r!==Yt&&yt(r,t))return o[t]=4,r[t];EM&&(o[t]=0)}}const h=Wp[t];let c,d;if(h)return t==="$attrs"&&Wi(e,"get",t),h(e);if((c=s.__cssModules)&&(c=c[t]))return c;if(r!==Yt&&yt(r,t))return o[t]=4,r[t];if(d=l.config.globalProperties,yt(d,t))return d[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:a}=e;return Cb(n,t)?(n[t]=r,!0):i!==Yt&&yt(i,t)?(i[t]=r,!0):yt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:a}},o){let s;return!!r[o]||e!==Yt&&yt(e,o)||Cb(t,o)||(s=a[0])&&yt(s,o)||yt(i,o)||yt(Wp,o)||yt(n.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:yt(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function QE(e){return Je(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let EM=!0;function aZ(e){const t=nD(e),r=e.proxy,i=e.ctx;EM=!1,t.beforeCreate&&eI(t.beforeCreate,e,"bc");const{data:n,computed:a,methods:o,watch:s,provide:l,inject:u,created:h,beforeMount:c,mounted:d,beforeUpdate:f,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:_,unmounted:x,render:w,renderTracked:b,renderTriggered:S,errorCaptured:M,serverPrefetch:A,expose:T,inheritAttrs:C,components:D,directives:P,filters:E}=t;if(u&&oZ(u,i,null),o)for(const B in o){const N=o[B];lt(N)&&(i[B]=N.bind(r))}if(n){const B=n.call(r,r);er(B)&&(e.data=Sg(B))}if(EM=!0,a)for(const B in a){const N=a[B],F=lt(N)?N.bind(r,r):lt(N.get)?N.get.bind(r,r):ma,G=!lt(N)&&lt(N.set)?N.set.bind(r):ma,H=ha({get:F,set:G});Object.defineProperty(i,B,{enumerable:!0,configurable:!0,get:()=>H.value,set:$=>H.value=$})}if(s)for(const B in s)rU(s[B],i,r,B);if(l){const B=lt(l)?l.call(r):l;Reflect.ownKeys(B).forEach(N=>{x0(N,B[N])})}h&&eI(h,e,"c");function z(B,N){Je(N)?N.forEach(F=>B(F.bind(r))):N&&B(N.bind(r))}if(z(YY,c),z(rD,d),z(ZY,f),z(KY,p),z($Y,v),z(qY,g),z(rZ,M),z(tZ,b),z(eZ,S),z(JY,y),z(iD,x),z(QY,A),Je(T))if(T.length){const B=e.exposed||(e.exposed={});T.forEach(N=>{Object.defineProperty(B,N,{get:()=>r[N],set:F=>r[N]=F})})}else e.exposed||(e.exposed={});w&&e.render===ma&&(e.render=w),C!=null&&(e.inheritAttrs=C),D&&(e.components=D),P&&(e.directives=P)}function oZ(e,t,r=ma){Je(e)&&(e=IM(e));for(const i in e){const n=e[i];let a;er(n)?"default"in n?a=is(n.from||i,n.default,!0):a=is(n.from||i):a=is(n),ii(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[i]=a}}function eI(e,t,r){ya(Je(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function rU(e,t,r,i){const n=i.includes(".")?Q4(r,i):()=>r[i];if(Br(e)){const a=t[e];lt(a)&&y0(n,a)}else if(lt(e))y0(n,e.bind(r));else if(er(e))if(Je(e))e.forEach(a=>rU(a,t,r,i));else{const a=lt(e.handler)?e.handler.bind(r):t[e.handler];lt(a)&&y0(n,a,e)}}function nD(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t);let l;return s?l=s:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(u=>u1(l,u,o,!0)),u1(l,t,o)),er(t)&&a.set(t,l),l}function u1(e,t,r,i=!1){const{mixins:n,extends:a}=t;a&&u1(e,a,r,!0),n&&n.forEach(o=>u1(e,o,r,!0));for(const o in t)if(!(i&&o==="expose")){const s=sZ[o]||r&&r[o];e[o]=s?s(e[o],t[o]):t[o]}return e}const sZ={data:tI,props:rI,emits:rI,methods:Ap,computed:Ap,beforeCreate:ci,created:ci,beforeMount:ci,mounted:ci,beforeUpdate:ci,updated:ci,beforeDestroy:ci,beforeUnmount:ci,destroyed:ci,unmounted:ci,activated:ci,deactivated:ci,errorCaptured:ci,serverPrefetch:ci,components:Ap,directives:Ap,watch:uZ,provide:tI,inject:lZ};function tI(e,t){return t?e?function(){return kr(lt(e)?e.call(this,this):e,lt(t)?t.call(this,this):t)}:t:e}function lZ(e,t){return Ap(IM(e),IM(t))}function IM(e){if(Je(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function ci(e,t){return e?[...new Set([].concat(e,t))]:t}function Ap(e,t){return e?kr(Object.create(null),e,t):t}function rI(e,t){return e?Je(e)&&Je(t)?[...new Set([...e,...t])]:kr(Object.create(null),QE(e),QE(t??{})):t}function uZ(e,t){if(!e)return t;if(!t)return e;const r=kr(Object.create(null),e);for(const i in t)r[i]=ci(e[i],t[i]);return r}function iU(){return{app:null,config:{isNativeTag:BX,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hZ=0;function cZ(e,t){return function(i,n=null){lt(i)||(i=kr({},i)),n!=null&&!er(n)&&(n=null);const a=iU(),o=new Set;let s=!1;const l=a.app={_uid:hZ++,_component:i,_props:n,_container:null,_context:a,_instance:null,version:NZ,get config(){return a.config},set config(u){},use(u,...h){return o.has(u)||(u&&lt(u.install)?(o.add(u),u.install(l,...h)):lt(u)&&(o.add(u),u(l,...h))),l},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),l},component(u,h){return h?(a.components[u]=h,l):a.components[u]},directive(u,h){return h?(a.directives[u]=h,l):a.directives[u]},mount(u,h,c){if(!s){const d=Vi(i,n);return d.appContext=a,h&&t?t(d,u):e(d,u,c),s=!0,l._container=u,u.__vue_app__=l,uD(d.component)||d.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,h){return a.provides[u]=h,l},runWithContext(u){h1=l;try{return u()}finally{h1=null}}};return l}}let h1=null;function x0(e,t){if(ti){let r=ti.provides;const i=ti.parent&&ti.parent.provides;i===r&&(r=ti.provides=Object.create(i)),r[e]=t}}function is(e,t,r=!1){const i=ti||ao;if(i||h1){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:h1._context.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&lt(t)?t.call(i&&i.proxy):t}}function dZ(e,t,r,i=!1){const n={},a={};a1(a,sx,1),e.propsDefaults=Object.create(null),nU(e,t,n,a);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);r?e.props=i?n:B4(n):e.type.props?e.props=n:e.props=a,e.attrs=a}function fZ(e,t,r,i){const{props:n,attrs:a,vnode:{patchFlag:o}}=e,s=At(n),[l]=e.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let c=0;c<h.length;c++){let d=h[c];if(ix(e.emitsOptions,d))continue;const f=t[d];if(l)if(yt(a,d))f!==a[d]&&(a[d]=f,u=!0);else{const p=bd(d);n[p]=OM(l,s,p,f,e,!1)}else f!==a[d]&&(a[d]=f,u=!0)}}}else{nU(e,t,n,a)&&(u=!0);let h;for(const c in s)(!t||!yt(t,c)&&((h=jd(c))===c||!yt(t,h)))&&(l?r&&(r[c]!==void 0||r[h]!==void 0)&&(n[c]=OM(l,s,c,void 0,e,!0)):delete n[c]);if(a!==s)for(const c in a)(!t||!yt(t,c))&&(delete a[c],u=!0)}u&&fs(e,"set","$attrs")}function nU(e,t,r,i){const[n,a]=e.propsOptions;let o=!1,s;if(t)for(let l in t){if(m0(l))continue;const u=t[l];let h;n&&yt(n,h=bd(l))?!a||!a.includes(h)?r[h]=u:(s||(s={}))[h]=u:ix(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(a){const l=At(r),u=s||Yt;for(let h=0;h<a.length;h++){const c=a[h];r[c]=OM(n,l,c,u[c],e,!yt(u,c))}}return o}function OM(e,t,r,i,n,a){const o=e[r];if(o!=null){const s=yt(o,"default");if(s&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&lt(l)){const{propsDefaults:u}=n;r in u?i=u[r]:(Md(n),i=u[r]=l.call(null,t),sh())}else i=l}o[0]&&(a&&!s?i=!1:o[1]&&(i===""||i===jd(r))&&(i=!0))}return i}function aU(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const a=e.props,o={},s=[];let l=!1;if(!lt(e)){const h=c=>{l=!0;const[d,f]=aU(c,t,!0);kr(o,d),f&&s.push(...f)};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!a&&!l)return er(e)&&i.set(e,ad),ad;if(Je(a))for(let h=0;h<a.length;h++){const c=bd(a[h]);iI(c)&&(o[c]=Yt)}else if(a)for(const h in a){const c=bd(h);if(iI(c)){const d=a[h],f=o[c]=Je(d)||lt(d)?{type:d}:kr({},d);if(f){const p=oI(Boolean,f.type),v=oI(String,f.type);f[0]=p>-1,f[1]=v<0||p<v,(p>-1||yt(f,"default"))&&s.push(c)}}}const u=[o,s];return er(e)&&i.set(e,u),u}function iI(e){return e[0]!=="$"}function nI(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function aI(e,t){return nI(e)===nI(t)}function oI(e,t){return Je(t)?t.findIndex(r=>aI(r,e)):lt(t)&&aI(t,e)?0:-1}const oU=e=>e[0]==="_"||e==="$stable",aD=e=>Je(e)?e.map(Ka):[Ka(e)],pZ=(e,t,r)=>{if(t._n)return t;const i=K4((...n)=>aD(t(...n)),r);return i._c=!1,i},sU=(e,t,r)=>{const i=e._ctx;for(const n in e){if(oU(n))continue;const a=e[n];if(lt(a))t[n]=pZ(n,a,i);else if(a!=null){const o=aD(a);t[n]=()=>o}}},lU=(e,t)=>{const r=aD(t);e.slots.default=()=>r},vZ=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=At(t),a1(t,"_",r)):sU(t,e.slots={})}else e.slots={},t&&lU(e,t);a1(e.slots,sx,1)},gZ=(e,t,r)=>{const{vnode:i,slots:n}=e;let a=!0,o=Yt;if(i.shapeFlag&32){const s=t._;s?r&&s===1?a=!1:(kr(n,t),!r&&s===1&&delete n._):(a=!t.$stable,sU(t,n)),o=t}else t&&(lU(e,t),o={default:1});if(a)for(const s in n)!oU(s)&&!(s in o)&&delete n[s]};function RM(e,t,r,i,n=!1){if(Je(e)){e.forEach((d,f)=>RM(d,t&&(Je(t)?t[f]:t),r,i,n));return}if(_0(i)&&!n)return;const a=i.shapeFlag&4?uD(i.component)||i.component.proxy:i.el,o=n?null:a,{i:s,r:l}=e,u=t&&t.r,h=s.refs===Yt?s.refs={}:s.refs,c=s.setupState;if(u!=null&&u!==l&&(Br(u)?(h[u]=null,yt(c,u)&&(c[u]=null)):ii(u)&&(u.value=null)),lt(l))Ml(l,s,12,[o,h]);else{const d=Br(l),f=ii(l);if(d||f){const p=()=>{if(e.f){const v=d?yt(c,l)?c[l]:h[l]:l.value;n?Je(v)&&UC(v,a):Je(v)?v.includes(a)||v.push(a):d?(h[l]=[a],yt(c,l)&&(c[l]=h[l])):(l.value=[a],e.k&&(h[e.k]=l.value))}else d?(h[l]=o,yt(c,l)&&(c[l]=o)):f&&(l.value=o,e.k&&(h[e.k]=o))};o?(p.id=-1,Pi(p,r)):p()}}}const Pi=jY;function mZ(e){return yZ(e)}function yZ(e,t){const r=MM();r.__VUE__=!0;const{insert:i,remove:n,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:h,parentNode:c,nextSibling:d,setScopeId:f=ma,insertStaticContent:p}=e,v=(R,k,V,q=null,Q=null,J=null,oe=!1,le=null,pe=!!k.dynamicChildren)=>{if(R===k)return;R&&!Sf(R,k)&&(q=U(R),$(R,Q,J,!0),R=null),k.patchFlag===-2&&(pe=!1,k.dynamicChildren=null);const{type:he,ref:xe,shapeFlag:Se}=k;switch(he){case ox:g(R,k,V,q);break;case Th:m(R,k,V,q);break;case Db:R==null&&y(k,V,q,oe);break;case Ko:D(R,k,V,q,Q,J,oe,le,pe);break;default:Se&1?w(R,k,V,q,Q,J,oe,le,pe):Se&6?P(R,k,V,q,Q,J,oe,le,pe):(Se&64||Se&128)&&he.process(R,k,V,q,Q,J,oe,le,pe,j)}xe!=null&&Q&&RM(xe,R&&R.ref,J,k||R,!k)},g=(R,k,V,q)=>{if(R==null)i(k.el=s(k.children),V,q);else{const Q=k.el=R.el;k.children!==R.children&&u(Q,k.children)}},m=(R,k,V,q)=>{R==null?i(k.el=l(k.children||""),V,q):k.el=R.el},y=(R,k,V,q)=>{[R.el,R.anchor]=p(R.children,k,V,q,R.el,R.anchor)},_=({el:R,anchor:k},V,q)=>{let Q;for(;R&&R!==k;)Q=d(R),i(R,V,q),R=Q;i(k,V,q)},x=({el:R,anchor:k})=>{let V;for(;R&&R!==k;)V=d(R),n(R),R=V;n(k)},w=(R,k,V,q,Q,J,oe,le,pe)=>{oe=oe||k.type==="svg",R==null?b(k,V,q,Q,J,oe,le,pe):A(R,k,Q,J,oe,le,pe)},b=(R,k,V,q,Q,J,oe,le)=>{let pe,he;const{type:xe,props:Se,shapeFlag:Oe,transition:ze,dirs:et}=R;if(pe=R.el=o(R.type,J,Se&&Se.is,Se),Oe&8?h(pe,R.children):Oe&16&&M(R.children,pe,null,q,Q,J&&xe!=="foreignObject",oe,le),et&&Kl(R,null,q,"created"),S(pe,R,R.scopeId,oe,q),Se){for(const wt in Se)wt!=="value"&&!m0(wt)&&a(pe,wt,null,Se[wt],J,R.children,q,Q,te);"value"in Se&&a(pe,"value",null,Se.value),(he=Se.onVnodeBeforeMount)&&Ia(he,q,R)}et&&Kl(R,null,q,"beforeMount");const bt=(!Q||Q&&!Q.pendingBranch)&&ze&&!ze.persisted;bt&&ze.beforeEnter(pe),i(pe,k,V),((he=Se&&Se.onVnodeMounted)||bt||et)&&Pi(()=>{he&&Ia(he,q,R),bt&&ze.enter(pe),et&&Kl(R,null,q,"mounted")},Q)},S=(R,k,V,q,Q)=>{if(V&&f(R,V),q)for(let J=0;J<q.length;J++)f(R,q[J]);if(Q){let J=Q.subTree;if(k===J){const oe=Q.vnode;S(R,oe,oe.scopeId,oe.slotScopeIds,Q.parent)}}},M=(R,k,V,q,Q,J,oe,le,pe=0)=>{for(let he=pe;he<R.length;he++){const xe=R[he]=le?Ks(R[he]):Ka(R[he]);v(null,xe,k,V,q,Q,J,oe,le)}},A=(R,k,V,q,Q,J,oe)=>{const le=k.el=R.el;let{patchFlag:pe,dynamicChildren:he,dirs:xe}=k;pe|=R.patchFlag&16;const Se=R.props||Yt,Oe=k.props||Yt;let ze;V&&Jl(V,!1),(ze=Oe.onVnodeBeforeUpdate)&&Ia(ze,V,k,R),xe&&Kl(k,R,V,"beforeUpdate"),V&&Jl(V,!0);const et=Q&&k.type!=="foreignObject";if(he?T(R.dynamicChildren,he,le,V,q,et,J):oe||N(R,k,le,null,V,q,et,J,!1),pe>0){if(pe&16)C(le,k,Se,Oe,V,q,Q);else if(pe&2&&Se.class!==Oe.class&&a(le,"class",null,Oe.class,Q),pe&4&&a(le,"style",Se.style,Oe.style,Q),pe&8){const bt=k.dynamicProps;for(let wt=0;wt<bt.length;wt++){const qt=bt[wt],Tt=Se[qt],mr=Oe[qt];(mr!==Tt||qt==="value")&&a(le,qt,Tt,mr,Q,R.children,V,q,te)}}pe&1&&R.children!==k.children&&h(le,k.children)}else!oe&&he==null&&C(le,k,Se,Oe,V,q,Q);((ze=Oe.onVnodeUpdated)||xe)&&Pi(()=>{ze&&Ia(ze,V,k,R),xe&&Kl(k,R,V,"updated")},q)},T=(R,k,V,q,Q,J,oe)=>{for(let le=0;le<k.length;le++){const pe=R[le],he=k[le],xe=pe.el&&(pe.type===Ko||!Sf(pe,he)||pe.shapeFlag&70)?c(pe.el):V;v(pe,he,xe,null,q,Q,J,oe,!0)}},C=(R,k,V,q,Q,J,oe)=>{if(V!==q){if(V!==Yt)for(const le in V)!m0(le)&&!(le in q)&&a(R,le,V[le],null,oe,k.children,Q,J,te);for(const le in q){if(m0(le))continue;const pe=q[le],he=V[le];pe!==he&&le!=="value"&&a(R,le,he,pe,oe,k.children,Q,J,te)}"value"in q&&a(R,"value",V.value,q.value)}},D=(R,k,V,q,Q,J,oe,le,pe)=>{const he=k.el=R?R.el:s(""),xe=k.anchor=R?R.anchor:s("");let{patchFlag:Se,dynamicChildren:Oe,slotScopeIds:ze}=k;ze&&(le=le?le.concat(ze):ze),R==null?(i(he,V,q),i(xe,V,q),M(k.children,V,xe,Q,J,oe,le,pe)):Se>0&&Se&64&&Oe&&R.dynamicChildren?(T(R.dynamicChildren,Oe,V,Q,J,oe,le),(k.key!=null||Q&&k===Q.subTree)&&uU(R,k,!0)):N(R,k,V,xe,Q,J,oe,le,pe)},P=(R,k,V,q,Q,J,oe,le,pe)=>{k.slotScopeIds=le,R==null?k.shapeFlag&512?Q.ctx.activate(k,V,q,oe,pe):E(k,V,q,Q,J,oe,pe):O(R,k,pe)},E=(R,k,V,q,Q,J,oe)=>{const le=R.component=DZ(R,q,Q);if(eU(R)&&(le.ctx.renderer=j),PZ(le),le.asyncDep){if(Q&&Q.registerDep(le,z),!R.el){const pe=le.subTree=Vi(Th);m(null,pe,k,V)}return}z(le,R,k,V,Q,J,oe)},O=(R,k,V)=>{const q=k.component=R.component;if(UY(R,k,V))if(q.asyncDep&&!q.asyncResolved){B(q,k,V);return}else q.next=k,OY(q.update),q.update();else k.el=R.el,q.vnode=k},z=(R,k,V,q,Q,J,oe)=>{const le=()=>{if(R.isMounted){let{next:xe,bu:Se,u:Oe,parent:ze,vnode:et}=R,bt=xe,wt;Jl(R,!1),xe?(xe.el=et.el,B(R,xe,oe)):xe=et,Se&&Tb(Se),(wt=xe.props&&xe.props.onVnodeBeforeUpdate)&&Ia(wt,ze,xe,et),Jl(R,!0);const qt=Ab(R),Tt=R.subTree;R.subTree=qt,v(Tt,qt,c(Tt.el),U(Tt),R,Q,J),xe.el=qt.el,bt===null&&GY(R,qt.el),Oe&&Pi(Oe,Q),(wt=xe.props&&xe.props.onVnodeUpdated)&&Pi(()=>Ia(wt,ze,xe,et),Q)}else{let xe;const{el:Se,props:Oe}=k,{bm:ze,m:et,parent:bt}=R,wt=_0(k);if(Jl(R,!1),ze&&Tb(ze),!wt&&(xe=Oe&&Oe.onVnodeBeforeMount)&&Ia(xe,bt,k),Jl(R,!0),Se&&ee){const qt=()=>{R.subTree=Ab(R),ee(Se,R.subTree,R,Q,null)};wt?k.type.__asyncLoader().then(()=>!R.isUnmounted&&qt()):qt()}else{const qt=R.subTree=Ab(R);v(null,qt,V,q,R,Q,J),k.el=qt.el}if(et&&Pi(et,Q),!wt&&(xe=Oe&&Oe.onVnodeMounted)){const qt=k;Pi(()=>Ia(xe,bt,qt),Q)}(k.shapeFlag&256||bt&&_0(bt.vnode)&&bt.vnode.shapeFlag&256)&&R.a&&Pi(R.a,Q),R.isMounted=!0,k=V=q=null}},pe=R.effect=new qC(le,()=>eD(he),R.scope),he=R.update=()=>pe.run();he.id=R.uid,Jl(R,!0),he()},B=(R,k,V)=>{k.component=R;const q=R.vnode.props;R.vnode=k,R.next=null,fZ(R,k.props,q,V),gZ(R,k.children,V),Wd(),KE(),$d()},N=(R,k,V,q,Q,J,oe,le,pe=!1)=>{const he=R&&R.children,xe=R?R.shapeFlag:0,Se=k.children,{patchFlag:Oe,shapeFlag:ze}=k;if(Oe>0){if(Oe&128){G(he,Se,V,q,Q,J,oe,le,pe);return}else if(Oe&256){F(he,Se,V,q,Q,J,oe,le,pe);return}}ze&8?(xe&16&&te(he,Q,J),Se!==he&&h(V,Se)):xe&16?ze&16?G(he,Se,V,q,Q,J,oe,le,pe):te(he,Q,J,!0):(xe&8&&h(V,""),ze&16&&M(Se,V,q,Q,J,oe,le,pe))},F=(R,k,V,q,Q,J,oe,le,pe)=>{R=R||ad,k=k||ad;const he=R.length,xe=k.length,Se=Math.min(he,xe);let Oe;for(Oe=0;Oe<Se;Oe++){const ze=k[Oe]=pe?Ks(k[Oe]):Ka(k[Oe]);v(R[Oe],ze,V,null,Q,J,oe,le,pe)}he>xe?te(R,Q,J,!0,!1,Se):M(k,V,q,Q,J,oe,le,pe,Se)},G=(R,k,V,q,Q,J,oe,le,pe)=>{let he=0;const xe=k.length;let Se=R.length-1,Oe=xe-1;for(;he<=Se&&he<=Oe;){const ze=R[he],et=k[he]=pe?Ks(k[he]):Ka(k[he]);if(Sf(ze,et))v(ze,et,V,null,Q,J,oe,le,pe);else break;he++}for(;he<=Se&&he<=Oe;){const ze=R[Se],et=k[Oe]=pe?Ks(k[Oe]):Ka(k[Oe]);if(Sf(ze,et))v(ze,et,V,null,Q,J,oe,le,pe);else break;Se--,Oe--}if(he>Se){if(he<=Oe){const ze=Oe+1,et=ze<xe?k[ze].el:q;for(;he<=Oe;)v(null,k[he]=pe?Ks(k[he]):Ka(k[he]),V,et,Q,J,oe,le,pe),he++}}else if(he>Oe)for(;he<=Se;)$(R[he],Q,J,!0),he++;else{const ze=he,et=he,bt=new Map;for(he=et;he<=Oe;he++){const si=k[he]=pe?Ks(k[he]):Ka(k[he]);si.key!=null&&bt.set(si.key,he)}let wt,qt=0;const Tt=Oe-et+1;let mr=!1,Zi=0;const Zl=new Array(Tt);for(he=0;he<Tt;he++)Zl[he]=0;for(he=ze;he<=Se;he++){const si=R[he];if(qt>=Tt){$(si,Q,J,!0);continue}let cn;if(si.key!=null)cn=bt.get(si.key);else for(wt=et;wt<=Oe;wt++)if(Zl[wt-et]===0&&Sf(si,k[wt])){cn=wt;break}cn===void 0?$(si,Q,J,!0):(Zl[cn-et]=he+1,cn>=Zi?Zi=cn:mr=!0,v(si,k[cn],V,null,Q,J,oe,le,pe),qt++)}const nm=mr?_Z(Zl):ad;for(wt=nm.length-1,he=Tt-1;he>=0;he--){const si=et+he,cn=k[si],am=si+1<xe?k[si+1].el:q;Zl[he]===0?v(null,cn,V,am,Q,J,oe,le,pe):mr&&(wt<0||he!==nm[wt]?H(cn,V,am,2):wt--)}}},H=(R,k,V,q,Q=null)=>{const{el:J,type:oe,transition:le,children:pe,shapeFlag:he}=R;if(he&6){H(R.component.subTree,k,V,q);return}if(he&128){R.suspense.move(k,V,q);return}if(he&64){oe.move(R,k,V,j);return}if(oe===Ko){i(J,k,V);for(let Se=0;Se<pe.length;Se++)H(pe[Se],k,V,q);i(R.anchor,k,V);return}if(oe===Db){_(R,k,V);return}if(q!==2&&he&1&&le)if(q===0)le.beforeEnter(J),i(J,k,V),Pi(()=>le.enter(J),Q);else{const{leave:Se,delayLeave:Oe,afterLeave:ze}=le,et=()=>i(J,k,V),bt=()=>{Se(J,()=>{et(),ze&&ze()})};Oe?Oe(J,et,bt):bt()}else i(J,k,V)},$=(R,k,V,q=!1,Q=!1)=>{const{type:J,props:oe,ref:le,children:pe,dynamicChildren:he,shapeFlag:xe,patchFlag:Se,dirs:Oe}=R;if(le!=null&&RM(le,null,V,R,!0),xe&256){k.ctx.deactivate(R);return}const ze=xe&1&&Oe,et=!_0(R);let bt;if(et&&(bt=oe&&oe.onVnodeBeforeUnmount)&&Ia(bt,k,R),xe&6)ne(R.component,V,q);else{if(xe&128){R.suspense.unmount(V,q);return}ze&&Kl(R,null,k,"beforeUnmount"),xe&64?R.type.remove(R,k,V,Q,j,q):he&&(J!==Ko||Se>0&&Se&64)?te(he,k,V,!1,!0):(J===Ko&&Se&384||!Q&&xe&16)&&te(pe,k,V),q&&Z(R)}(et&&(bt=oe&&oe.onVnodeUnmounted)||ze)&&Pi(()=>{bt&&Ia(bt,k,R),ze&&Kl(R,null,k,"unmounted")},V)},Z=R=>{const{type:k,el:V,anchor:q,transition:Q}=R;if(k===Ko){X(V,q);return}if(k===Db){x(R);return}const J=()=>{n(V),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(R.shapeFlag&1&&Q&&!Q.persisted){const{leave:oe,delayLeave:le}=Q,pe=()=>oe(V,J);le?le(R.el,J,pe):pe()}else J()},X=(R,k)=>{let V;for(;R!==k;)V=d(R),n(R),R=V;n(k)},ne=(R,k,V)=>{const{bum:q,scope:Q,update:J,subTree:oe,um:le}=R;q&&Tb(q),Q.stop(),J&&(J.active=!1,$(oe,R,k,V)),le&&Pi(le,k),Pi(()=>{R.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},te=(R,k,V,q=!1,Q=!1,J=0)=>{for(let oe=J;oe<R.length;oe++)$(R[oe],k,V,q,Q)},U=R=>R.shapeFlag&6?U(R.component.subTree):R.shapeFlag&128?R.suspense.next():d(R.anchor||R.el),W=(R,k,V)=>{R==null?k._vnode&&$(k._vnode,null,null,!0):v(k._vnode||null,R,k,null,null,null,V),KE(),X4(),k._vnode=R},j={p:v,um:$,m:H,r:Z,mt:E,mc:M,pc:N,pbc:T,n:U,o:e};let K,ee;return t&&([K,ee]=t(j)),{render:W,hydrate:K,createApp:cZ(W,K)}}function Jl({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function uU(e,t,r=!1){const i=e.children,n=t.children;if(Je(i)&&Je(n))for(let a=0;a<i.length;a++){const o=i[a];let s=n[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=n[a]=Ks(n[a]),s.el=o.el),r||uU(o,s)),s.type===ox&&(s.el=o.el)}}function _Z(e){const t=e.slice(),r=[0];let i,n,a,o,s;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(n=r[r.length-1],e[n]<u){t[i]=n,r.push(i);continue}for(a=0,o=r.length-1;a<o;)s=a+o>>1,e[r[s]]<u?a=s+1:o=s;u<e[r[a]]&&(a>0&&(t[i]=r[a-1]),r[a]=i)}}for(a=r.length,o=r[a-1];a-- >0;)r[a]=o,o=t[o];return r}const xZ=e=>e.__isTeleport,Ko=Symbol.for("v-fgt"),ox=Symbol.for("v-txt"),Th=Symbol.for("v-cmt"),Db=Symbol.for("v-stc"),$p=[];let ca=null;function Mg(e=!1){$p.push(ca=e?null:[])}function bZ(){$p.pop(),ca=$p[$p.length-1]||null}let Pv=1;function sI(e){Pv+=e}function hU(e){return e.dynamicChildren=Pv>0?ca||ad:null,bZ(),Pv>0&&ca&&ca.push(e),e}function cU(e,t,r,i,n,a){return hU(tt(e,t,r,i,n,a,!0))}function oD(e,t,r,i,n){return hU(Vi(e,t,r,i,n,!0))}function zM(e){return e?e.__v_isVNode===!0:!1}function Sf(e,t){return e.type===t.type&&e.key===t.key}const sx="__vInternal",dU=({key:e})=>e??null,b0=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Br(e)||ii(e)||lt(e)?{i:ao,r:e,k:t,f:!!r}:e:null);function tt(e,t=null,r=null,i=0,n=null,a=e===Ko?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&dU(t),ref:t&&b0(t),scopeId:nx,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:ao};return s?(sD(l,r),a&128&&e.normalize(l)):r&&(l.shapeFlag|=Br(r)?8:16),Pv>0&&!o&&ca&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&ca.push(l),l}const Vi=wZ;function wZ(e,t=null,r=null,i=0,n=null,a=!1){if((!e||e===iZ)&&(e=Th),zM(e)){const s=Sd(e,t,!0);return r&&sD(s,r),Pv>0&&!a&&ca&&(s.shapeFlag&6?ca[ca.indexOf(e)]=s:ca.push(s)),s.patchFlag|=-2,s}if(OZ(e)&&(e=e.__vccOpts),t){t=SZ(t);let{class:s,style:l}=t;s&&!Br(s)&&(t.class=WC(s)),er(l)&&(V4(l)&&!Je(l)&&(l=kr({},l)),t.style=jC(l))}const o=Br(e)?1:HY(e)?128:xZ(e)?64:er(e)?4:lt(e)?2:0;return tt(e,t,r,i,n,o,a,!0)}function SZ(e){return e?V4(e)||sx in e?kr({},e):e:null}function Sd(e,t,r=!1){const{props:i,ref:n,patchFlag:a,children:o}=e,s=t?TZ(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&dU(s),ref:t&&t.ref?r&&n?Je(n)?n.concat(b0(t)):[n,b0(t)]:b0(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ko?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Sd(e.ssContent),ssFallback:e.ssFallback&&Sd(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function fU(e=" ",t=0){return Vi(ox,null,e,t)}function MZ(e="",t=!1){return t?(Mg(),oD(Th,null,e)):Vi(Th,null,e)}function Ka(e){return e==null||typeof e=="boolean"?Vi(Th):Je(e)?Vi(Ko,null,e.slice()):typeof e=="object"?Ks(e):Vi(ox,null,String(e))}function Ks(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Sd(e)}function sD(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Je(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),sD(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(sx in t)?t._ctx=ao:n===3&&ao&&(ao.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else lt(t)?(t={default:t,_ctx:ao},r=32):(t=String(t),i&64?(r=16,t=[fU(t)]):r=8);e.children=t,e.shapeFlag|=r}function TZ(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=WC([t.class,i.class]));else if(n==="style")t.style=jC([t.style,i.style]);else if(J_(n)){const a=t[n],o=i[n];o&&a!==o&&!(Je(a)&&a.includes(o))&&(t[n]=a?[].concat(a,o):o)}else n!==""&&(t[n]=i[n])}return t}function Ia(e,t,r,i=null){ya(e,t,7,[r,i])}const AZ=iU();let CZ=0;function DZ(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||AZ,a={uid:CZ++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new KX(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:aU(i,n),emitsOptions:Z4(i,n),emit:null,emitted:null,propsDefaults:Yt,inheritAttrs:i.inheritAttrs,ctx:Yt,data:Yt,props:Yt,attrs:Yt,slots:Yt,refs:Yt,setupState:Yt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=NY.bind(null,a),e.ce&&e.ce(a),a}let ti=null,lD,Kh,lI="__VUE_INSTANCE_SETTERS__";(Kh=MM()[lI])||(Kh=MM()[lI]=[]),Kh.push(e=>ti=e),lD=e=>{Kh.length>1?Kh.forEach(t=>t(e)):Kh[0](e)};const Md=e=>{lD(e),e.scope.on()},sh=()=>{ti&&ti.scope.off(),lD(null)};function pU(e){return e.vnode.shapeFlag&4}let Lv=!1;function PZ(e,t=!1){Lv=t;const{props:r,children:i}=e.vnode,n=pU(e);dZ(e,r,n,t),vZ(e,i);const a=n?LZ(e,t):void 0;return Lv=!1,a}function LZ(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=U4(new Proxy(e.ctx,nZ));const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?IZ(e):null;Md(e),Wd();const a=Ml(i,e,0,[e.props,n]);if($d(),sh(),w4(a)){if(a.then(sh,sh),t)return a.then(o=>{uI(e,o,t)}).catch(o=>{rx(o,e,0)});e.asyncDep=a}else uI(e,a,t)}else vU(e,t)}function uI(e,t,r){lt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:er(t)&&(e.setupState=W4(t)),vU(e,r)}let hI;function vU(e,t,r){const i=e.type;if(!e.render){if(!t&&hI&&!i.render){const n=i.template||nD(e).template;if(n){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:s,compilerOptions:l}=i,u=kr(kr({isCustomElement:a,delimiters:s},o),l);i.render=hI(n,u)}}e.render=i.render||ma}Md(e),Wd(),aZ(e),$d(),sh()}function EZ(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return Wi(e,"get","$attrs"),t[r]}}))}function IZ(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return EZ(e)},slots:e.slots,emit:e.emit,expose:t}}function uD(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(W4(U4(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Wp)return Wp[r](e)},has(t,r){return r in t||r in Wp}}))}function OZ(e){return lt(e)&&"__vccOpts"in e}const ha=(e,t)=>LY(e,t,Lv);function c1(e,t,r){const i=arguments.length;return i===2?er(t)&&!Je(t)?zM(t)?Vi(e,null,[t]):Vi(e,t):Vi(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&zM(r)&&(r=[r]),Vi(e,t,r))}const RZ=Symbol.for("v-scx"),zZ=()=>is(RZ),NZ="3.3.4",kZ="http://www.w3.org/2000/svg",Gu=typeof document<"u"?document:null,cI=Gu&&Gu.createElement("template"),BZ={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t?Gu.createElementNS(kZ,e):Gu.createElement(e,r?{is:r}:void 0);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>Gu.createTextNode(e),createComment:e=>Gu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Gu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,n,a){const o=r?r.previousSibling:t.lastChild;if(n&&(n===a||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===a||!(n=n.nextSibling)););else{cI.innerHTML=i?`<svg>${e}</svg>`:e;const s=cI.content;if(i){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function FZ(e,t,r){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function VZ(e,t,r){const i=e.style,n=Br(r);if(r&&!n){if(t&&!Br(t))for(const a in t)r[a]==null&&NM(i,a,"");for(const a in r)NM(i,a,r[a])}else{const a=i.display;n?t!==r&&(i.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=a)}}const dI=/\s*!important$/;function NM(e,t,r){if(Je(r))r.forEach(i=>NM(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=UZ(e,t);dI.test(r)?e.setProperty(jd(i),r.replace(dI,""),"important"):e[i]=r}}const fI=["Webkit","Moz","ms"],Pb={};function UZ(e,t){const r=Pb[t];if(r)return r;let i=bd(t);if(i!=="filter"&&i in e)return Pb[t]=i;i=T4(i);for(let n=0;n<fI.length;n++){const a=fI[n]+i;if(a in e)return Pb[t]=a}return t}const pI="http://www.w3.org/1999/xlink";function GZ(e,t,r,i,n){if(i&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(pI,t.slice(6,t.length)):e.setAttributeNS(pI,t,r);else{const a=ZX(t);r==null||a&&!A4(r)?e.removeAttribute(t):e.setAttribute(t,a?"":r)}}function HZ(e,t,r,i,n,a,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,n,a),e[t]=r??"";return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){e._value=r;const u=s==="OPTION"?e.getAttribute("value"):e.value,h=r??"";u!==h&&(e.value=h),r==null&&e.removeAttribute(t);return}let l=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=A4(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{e[t]=r}catch{}l&&e.removeAttribute(t)}function jZ(e,t,r,i){e.addEventListener(t,r,i)}function WZ(e,t,r,i){e.removeEventListener(t,r,i)}function $Z(e,t,r,i,n=null){const a=e._vei||(e._vei={}),o=a[t];if(i&&o)o.value=i;else{const[s,l]=qZ(t);if(i){const u=a[t]=ZZ(i,n);jZ(e,s,u,l)}else o&&(WZ(e,s,o,l),a[t]=void 0)}}const vI=/(?:Once|Passive|Capture)$/;function qZ(e){let t;if(vI.test(e)){t={};let i;for(;i=e.match(vI);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):jd(e.slice(2)),t]}let Lb=0;const XZ=Promise.resolve(),YZ=()=>Lb||(XZ.then(()=>Lb=0),Lb=Date.now());function ZZ(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;ya(KZ(i,r.value),t,5,[i])};return r.value=e,r.attached=YZ(),r}function KZ(e,t){if(Je(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const gI=/^on[a-z]/,JZ=(e,t,r,i,n=!1,a,o,s,l)=>{t==="class"?FZ(e,i,n):t==="style"?VZ(e,r,i):J_(t)?VC(t)||$Z(e,t,r,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):QZ(e,t,i,n))?HZ(e,t,i,a,o,s,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),GZ(e,t,i,n))};function QZ(e,t,r,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&gI.test(t)&&lt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||gI.test(t)&&Br(r)?!1:t in e}const eK=kr({patchProp:JZ},BZ);let mI;function tK(){return mI||(mI=mZ(eK))}const rK=(...e)=>{const t=tK().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=iK(i);if(!n)return;const a=t._component;!lt(a)&&!a.render&&!a.template&&(a.template=n.innerHTML),n.innerHTML="";const o=r(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function iK(e){return Br(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Bc=typeof window<"u";function nK(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Et=Object.assign;function Eb(e,t){const r={};for(const i in t){const n=t[i];r[i]=Ma(n)?n.map(e):e(n)}return r}const qp=()=>{},Ma=Array.isArray,aK=/\/$/,oK=e=>e.replace(aK,"");function Ib(e,t,r="/"){let i,n={},a="",o="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(i=t.slice(0,l),a=t.slice(l+1,s>-1?s:t.length),n=e(a)),s>-1&&(i=i||t.slice(0,s),o=t.slice(s,t.length)),i=hK(i??t,r),{fullPath:i+(a&&"?")+a+o,path:i,query:n,hash:o}}function sK(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function yI(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function lK(e,t,r){const i=t.matched.length-1,n=r.matched.length-1;return i>-1&&i===n&&Td(t.matched[i],r.matched[n])&&gU(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Td(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function gU(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!uK(e[r],t[r]))return!1;return!0}function uK(e,t){return Ma(e)?_I(e,t):Ma(t)?_I(t,e):e===t}function _I(e,t){return Ma(t)?e.length===t.length&&e.every((r,i)=>r===t[i]):e.length===1&&e[0]===t}function hK(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),i=e.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let a=r.length-1,o,s;for(o=0;o<i.length;o++)if(s=i[o],s!==".")if(s==="..")a>1&&a--;else break;return r.slice(0,a).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var Ev;(function(e){e.pop="pop",e.push="push"})(Ev||(Ev={}));var Xp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Xp||(Xp={}));function cK(e){if(!e)if(Bc){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),oK(e)}const dK=/^[^#]+#/;function fK(e,t){return e.replace(dK,"#")+t}function pK(e,t){const r=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-r.left-(t.left||0),top:i.top-r.top-(t.top||0)}}const lx=()=>({left:window.pageXOffset,top:window.pageYOffset});function vK(e){let t;if("el"in e){const r=e.el,i=typeof r=="string"&&r.startsWith("#"),n=typeof r=="string"?i?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!n)return;t=pK(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function xI(e,t){return(history.state?history.state.position-t:-1)+e}const kM=new Map;function gK(e,t){kM.set(e,t)}function mK(e){const t=kM.get(e);return kM.delete(e),t}let yK=()=>location.protocol+"//"+location.host;function mU(e,t){const{pathname:r,search:i,hash:n}=t,a=e.indexOf("#");if(a>-1){let s=n.includes(e.slice(a))?e.slice(a).length:1,l=n.slice(s);return l[0]!=="/"&&(l="/"+l),yI(l,"")}return yI(r,e)+i+n}function _K(e,t,r,i){let n=[],a=[],o=null;const s=({state:d})=>{const f=mU(e,location),p=r.value,v=t.value;let g=0;if(d){if(r.value=f,t.value=d,o&&o===p){o=null;return}g=v?d.position-v.position:0}else i(f);n.forEach(m=>{m(r.value,p,{delta:g,type:Ev.pop,direction:g?g>0?Xp.forward:Xp.back:Xp.unknown})})};function l(){o=r.value}function u(d){n.push(d);const f=()=>{const p=n.indexOf(d);p>-1&&n.splice(p,1)};return a.push(f),f}function h(){const{history:d}=window;d.state&&d.replaceState(Et({},d.state,{scroll:lx()}),"")}function c(){for(const d of a)d();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:c}}function bI(e,t,r,i=!1,n=!1){return{back:e,current:t,forward:r,replaced:i,position:window.history.length,scroll:n?lx():null}}function xK(e){const{history:t,location:r}=window,i={value:mU(e,r)},n={value:t.state};n.value||a(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,u,h){const c=e.indexOf("#"),d=c>-1?(r.host&&document.querySelector("base")?e:e.slice(c))+l:yK()+e+l;try{t[h?"replaceState":"pushState"](u,"",d),n.value=u}catch(f){console.error(f),r[h?"replace":"assign"](d)}}function o(l,u){const h=Et({},t.state,bI(n.value.back,l,n.value.forward,!0),u,{position:n.value.position});a(l,h,!0),i.value=l}function s(l,u){const h=Et({},n.value,t.state,{forward:l,scroll:lx()});a(h.current,h,!0);const c=Et({},bI(i.value,l,null),{position:h.position+1},u);a(l,c,!1),i.value=l}return{location:i,state:n,push:s,replace:o}}function bK(e){e=cK(e);const t=xK(e),r=_K(e,t.state,t.location,t.replace);function i(a,o=!0){o||r.pauseListeners(),history.go(a)}const n=Et({location:"",base:e,go:i,createHref:fK.bind(null,e)},t,r);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function wK(e){return typeof e=="string"||e&&typeof e=="object"}function yU(e){return typeof e=="string"||typeof e=="symbol"}const Es={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},_U=Symbol("");var wI;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(wI||(wI={}));function Ad(e,t){return Et(new Error,{type:e,[_U]:!0},t)}function Eo(e,t){return e instanceof Error&&_U in e&&(t==null||!!(e.type&t))}const SI="[^/]+?",SK={sensitive:!1,strict:!1,start:!0,end:!0},MK=/[.+*?^${}()[\]/\\]/g;function TK(e,t){const r=Et({},SK,t),i=[];let n=r.start?"^":"";const a=[];for(const u of e){const h=u.length?[]:[90];r.strict&&!u.length&&(n+="/");for(let c=0;c<u.length;c++){const d=u[c];let f=40+(r.sensitive?.25:0);if(d.type===0)c||(n+="/"),n+=d.value.replace(MK,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:v,optional:g,regexp:m}=d;a.push({name:p,repeatable:v,optional:g});const y=m||SI;if(y!==SI){f+=10;try{new RegExp(`(${y})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+x.message)}}let _=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;c||(_=g&&u.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),n+=_,f+=20,g&&(f+=-8),v&&(f+=-20),y===".*"&&(f+=-50)}h.push(f)}i.push(h)}if(r.strict&&r.end){const u=i.length-1;i[u][i[u].length-1]+=.7000000000000001}r.strict||(n+="/?"),r.end?n+="$":r.strict&&(n+="(?:/|$)");const o=new RegExp(n,r.sensitive?"":"i");function s(u){const h=u.match(o),c={};if(!h)return null;for(let d=1;d<h.length;d++){const f=h[d]||"",p=a[d-1];c[p.name]=f&&p.repeatable?f.split("/"):f}return c}function l(u){let h="",c=!1;for(const d of e){(!c||!h.endsWith("/"))&&(h+="/"),c=!1;for(const f of d)if(f.type===0)h+=f.value;else if(f.type===1){const{value:p,repeatable:v,optional:g}=f,m=p in u?u[p]:"";if(Ma(m)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Ma(m)?m.join("/"):m;if(!y)if(g)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):c=!0);else throw new Error(`Missing required param "${p}"`);h+=y}}return h||"/"}return{re:o,score:i,keys:a,parse:s,stringify:l}}function AK(e,t){let r=0;for(;r<e.length&&r<t.length;){const i=t[r]-e[r];if(i)return i;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function CK(e,t){let r=0;const i=e.score,n=t.score;for(;r<i.length&&r<n.length;){const a=AK(i[r],n[r]);if(a)return a;r++}if(Math.abs(n.length-i.length)===1){if(MI(i))return 1;if(MI(n))return-1}return n.length-i.length}function MI(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const DK={type:0,value:""},PK=/[a-zA-Z0-9_]/;function LK(e){if(!e)return[[]];if(e==="/")return[[DK]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${r})/"${u}": ${f}`)}let r=0,i=r;const n=[];let a;function o(){a&&n.push(a),a=[]}let s=0,l,u="",h="";function c(){u&&(r===0?a.push({type:0,value:u}):r===1||r===2||r===3?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&r!==2){i=r,r=4;continue}switch(r){case 0:l==="/"?(u&&c(),o()):l===":"?(c(),r=1):d();break;case 4:d(),r=i;break;case 1:l==="("?r=2:PK.test(l)?d():(c(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:r=3:h+=l;break;case 3:c(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,h="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),c(),o(),n}function EK(e,t,r){const i=TK(LK(e.path),r),n=Et(i,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function IK(e,t){const r=[],i=new Map;t=CI({strict:!1,end:!0,sensitive:!1},t);function n(h){return i.get(h)}function a(h,c,d){const f=!d,p=OK(h);p.aliasOf=d&&d.record;const v=CI(t,h),g=[p];if("alias"in h){const _=typeof h.alias=="string"?[h.alias]:h.alias;for(const x of _)g.push(Et({},p,{components:d?d.record.components:p.components,path:x,aliasOf:d?d.record:p}))}let m,y;for(const _ of g){const{path:x}=_;if(c&&x[0]!=="/"){const w=c.record.path,b=w[w.length-1]==="/"?"":"/";_.path=c.record.path+(x&&b+x)}if(m=EK(_,c,v),d?d.alias.push(m):(y=y||m,y!==m&&y.alias.push(m),f&&h.name&&!AI(m)&&o(h.name)),p.children){const w=p.children;for(let b=0;b<w.length;b++)a(w[b],m,d&&d.children[b])}d=d||m,(m.record.components&&Object.keys(m.record.components).length||m.record.name||m.record.redirect)&&l(m)}return y?()=>{o(y)}:qp}function o(h){if(yU(h)){const c=i.get(h);c&&(i.delete(h),r.splice(r.indexOf(c),1),c.children.forEach(o),c.alias.forEach(o))}else{const c=r.indexOf(h);c>-1&&(r.splice(c,1),h.record.name&&i.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function s(){return r}function l(h){let c=0;for(;c<r.length&&CK(h,r[c])>=0&&(h.record.path!==r[c].record.path||!xU(h,r[c]));)c++;r.splice(c,0,h),h.record.name&&!AI(h)&&i.set(h.record.name,h)}function u(h,c){let d,f={},p,v;if("name"in h&&h.name){if(d=i.get(h.name),!d)throw Ad(1,{location:h});v=d.record.name,f=Et(TI(c.params,d.keys.filter(y=>!y.optional).map(y=>y.name)),h.params&&TI(h.params,d.keys.map(y=>y.name))),p=d.stringify(f)}else if("path"in h)p=h.path,d=r.find(y=>y.re.test(p)),d&&(f=d.parse(p),v=d.record.name);else{if(d=c.name?i.get(c.name):r.find(y=>y.re.test(c.path)),!d)throw Ad(1,{location:h,currentLocation:c});v=d.record.name,f=Et({},c.params,h.params),p=d.stringify(f)}const g=[];let m=d;for(;m;)g.unshift(m.record),m=m.parent;return{name:v,path:p,params:f,matched:g,meta:zK(g)}}return e.forEach(h=>a(h)),{addRoute:a,resolve:u,removeRoute:o,getRoutes:s,getRecordMatcher:n}}function TI(e,t){const r={};for(const i of t)i in e&&(r[i]=e[i]);return r}function OK(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:RK(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function RK(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const i in e.components)t[i]=typeof r=="object"?r[i]:r;return t}function AI(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function zK(e){return e.reduce((t,r)=>Et(t,r.meta),{})}function CI(e,t){const r={};for(const i in e)r[i]=i in t?t[i]:e[i];return r}function xU(e,t){return t.children.some(r=>r===e||xU(e,r))}const bU=/#/g,NK=/&/g,kK=/\//g,BK=/=/g,FK=/\?/g,wU=/\+/g,VK=/%5B/g,UK=/%5D/g,SU=/%5E/g,GK=/%60/g,MU=/%7B/g,HK=/%7C/g,TU=/%7D/g,jK=/%20/g;function hD(e){return encodeURI(""+e).replace(HK,"|").replace(VK,"[").replace(UK,"]")}function WK(e){return hD(e).replace(MU,"{").replace(TU,"}").replace(SU,"^")}function BM(e){return hD(e).replace(wU,"%2B").replace(jK,"+").replace(bU,"%23").replace(NK,"%26").replace(GK,"`").replace(MU,"{").replace(TU,"}").replace(SU,"^")}function $K(e){return BM(e).replace(BK,"%3D")}function qK(e){return hD(e).replace(bU,"%23").replace(FK,"%3F")}function XK(e){return e==null?"":qK(e).replace(kK,"%2F")}function d1(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function YK(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<i.length;++n){const a=i[n].replace(wU," "),o=a.indexOf("="),s=d1(o<0?a:a.slice(0,o)),l=o<0?null:d1(a.slice(o+1));if(s in t){let u=t[s];Ma(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function DI(e){let t="";for(let r in e){const i=e[r];if(r=$K(r),i==null){i!==void 0&&(t+=(t.length?"&":"")+r);continue}(Ma(i)?i.map(a=>a&&BM(a)):[i&&BM(i)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+r,a!=null&&(t+="="+a))})}return t}function ZK(e){const t={};for(const r in e){const i=e[r];i!==void 0&&(t[r]=Ma(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return t}const KK=Symbol(""),PI=Symbol(""),cD=Symbol(""),AU=Symbol(""),FM=Symbol("");function Mf(){let e=[];function t(i){return e.push(i),()=>{const n=e.indexOf(i);n>-1&&e.splice(n,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function Js(e,t,r,i,n){const a=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((o,s)=>{const l=c=>{c===!1?s(Ad(4,{from:r,to:t})):c instanceof Error?s(c):wK(c)?s(Ad(2,{from:t,to:c})):(a&&i.enterCallbacks[n]===a&&typeof c=="function"&&a.push(c),o())},u=e.call(i&&i.instances[n],t,r,l);let h=Promise.resolve(u);e.length<3&&(h=h.then(l)),h.catch(c=>s(c))})}function Ob(e,t,r,i){const n=[];for(const a of e)for(const o in a.components){let s=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(JK(s)){const u=(s.__vccOpts||s)[t];u&&n.push(Js(u,r,i,a,o))}else{let l=s();n.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const h=nK(u)?u.default:u;a.components[o]=h;const d=(h.__vccOpts||h)[t];return d&&Js(d,r,i,a,o)()}))}}return n}function JK(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function LI(e){const t=is(cD),r=is(AU),i=ha(()=>t.resolve(En(e.to))),n=ha(()=>{const{matched:l}=i.value,{length:u}=l,h=l[u-1],c=r.matched;if(!h||!c.length)return-1;const d=c.findIndex(Td.bind(null,h));if(d>-1)return d;const f=EI(l[u-2]);return u>1&&EI(h)===f&&c[c.length-1].path!==f?c.findIndex(Td.bind(null,l[u-2])):d}),a=ha(()=>n.value>-1&&rJ(r.params,i.value.params)),o=ha(()=>n.value>-1&&n.value===r.matched.length-1&&gU(r.params,i.value.params));function s(l={}){return tJ(l)?t[En(e.replace)?"replace":"push"](En(e.to)).catch(qp):Promise.resolve()}return{route:i,href:ha(()=>i.value.href),isActive:a,isExactActive:o,navigate:s}}const QK=tD({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:LI,setup(e,{slots:t}){const r=Sg(LI(e)),{options:i}=is(cD),n=ha(()=>({[II(e.activeClass,i.linkActiveClass,"router-link-active")]:r.isActive,[II(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const a=t.default&&t.default(r);return e.custom?a:c1("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:n.value},a)}}}),eJ=QK;function tJ(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function rJ(e,t){for(const r in t){const i=t[r],n=e[r];if(typeof i=="string"){if(i!==n)return!1}else if(!Ma(n)||n.length!==i.length||i.some((a,o)=>a!==n[o]))return!1}return!0}function EI(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const II=(e,t,r)=>e??t??r,iJ=tD({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const i=is(FM),n=ha(()=>e.route||i.value),a=is(PI,0),o=ha(()=>{let u=En(a);const{matched:h}=n.value;let c;for(;(c=h[u])&&!c.components;)u++;return u}),s=ha(()=>n.value.matched[o.value]);x0(PI,ha(()=>o.value+1)),x0(KK,s),x0(FM,n);const l=Mh();return y0(()=>[l.value,s.value,e.name],([u,h,c],[d,f,p])=>{h&&(h.instances[c]=u,f&&f!==h&&u&&u===d&&(h.leaveGuards.size||(h.leaveGuards=f.leaveGuards),h.updateGuards.size||(h.updateGuards=f.updateGuards))),u&&h&&(!f||!Td(h,f)||!d)&&(h.enterCallbacks[c]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=n.value,h=e.name,c=s.value,d=c&&c.components[h];if(!d)return OI(r.default,{Component:d,route:u});const f=c.props[h],p=f?f===!0?u.params:typeof f=="function"?f(u):f:null,g=c1(d,Et({},p,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(c.instances[h]=null)},ref:l}));return OI(r.default,{Component:g,route:u})||g}}});function OI(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const CU=iJ;function nJ(e){const t=IK(e.routes,e),r=e.parseQuery||YK,i=e.stringifyQuery||DI,n=e.history,a=Mf(),o=Mf(),s=Mf(),l=AY(Es);let u=Es;Bc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Eb.bind(null,U=>""+U),c=Eb.bind(null,XK),d=Eb.bind(null,d1);function f(U,W){let j,K;return yU(U)?(j=t.getRecordMatcher(U),K=W):K=U,t.addRoute(K,j)}function p(U){const W=t.getRecordMatcher(U);W&&t.removeRoute(W)}function v(){return t.getRoutes().map(U=>U.record)}function g(U){return!!t.getRecordMatcher(U)}function m(U,W){if(W=Et({},W||l.value),typeof U=="string"){const V=Ib(r,U,W.path),q=t.resolve({path:V.path},W),Q=n.createHref(V.fullPath);return Et(V,q,{params:d(q.params),hash:d1(V.hash),redirectedFrom:void 0,href:Q})}let j;if("path"in U)j=Et({},U,{path:Ib(r,U.path,W.path).path});else{const V=Et({},U.params);for(const q in V)V[q]==null&&delete V[q];j=Et({},U,{params:c(V)}),W.params=c(W.params)}const K=t.resolve(j,W),ee=U.hash||"";K.params=h(d(K.params));const R=sK(i,Et({},U,{hash:WK(ee),path:K.path})),k=n.createHref(R);return Et({fullPath:R,hash:ee,query:i===DI?ZK(U.query):U.query||{}},K,{redirectedFrom:void 0,href:k})}function y(U){return typeof U=="string"?Ib(r,U,l.value.path):Et({},U)}function _(U,W){if(u!==U)return Ad(8,{from:W,to:U})}function x(U){return S(U)}function w(U){return x(Et(y(U),{replace:!0}))}function b(U){const W=U.matched[U.matched.length-1];if(W&&W.redirect){const{redirect:j}=W;let K=typeof j=="function"?j(U):j;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=y(K):{path:K},K.params={}),Et({query:U.query,hash:U.hash,params:"path"in K?{}:U.params},K)}}function S(U,W){const j=u=m(U),K=l.value,ee=U.state,R=U.force,k=U.replace===!0,V=b(j);if(V)return S(Et(y(V),{state:typeof V=="object"?Et({},ee,V.state):ee,force:R,replace:k}),W||j);const q=j;q.redirectedFrom=W;let Q;return!R&&lK(i,K,j)&&(Q=Ad(16,{to:q,from:K}),H(K,K,!0,!1)),(Q?Promise.resolve(Q):T(q,K)).catch(J=>Eo(J)?Eo(J,2)?J:G(J):N(J,q,K)).then(J=>{if(J){if(Eo(J,2))return S(Et({replace:k},y(J.to),{state:typeof J.to=="object"?Et({},ee,J.to.state):ee,force:R}),W||q)}else J=D(q,K,!0,k,ee);return C(q,K,J),J})}function M(U,W){const j=_(U,W);return j?Promise.reject(j):Promise.resolve()}function A(U){const W=X.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(U):U()}function T(U,W){let j;const[K,ee,R]=aJ(U,W);j=Ob(K.reverse(),"beforeRouteLeave",U,W);for(const V of K)V.leaveGuards.forEach(q=>{j.push(Js(q,U,W))});const k=M.bind(null,U,W);return j.push(k),te(j).then(()=>{j=[];for(const V of a.list())j.push(Js(V,U,W));return j.push(k),te(j)}).then(()=>{j=Ob(ee,"beforeRouteUpdate",U,W);for(const V of ee)V.updateGuards.forEach(q=>{j.push(Js(q,U,W))});return j.push(k),te(j)}).then(()=>{j=[];for(const V of R)if(V.beforeEnter)if(Ma(V.beforeEnter))for(const q of V.beforeEnter)j.push(Js(q,U,W));else j.push(Js(V.beforeEnter,U,W));return j.push(k),te(j)}).then(()=>(U.matched.forEach(V=>V.enterCallbacks={}),j=Ob(R,"beforeRouteEnter",U,W),j.push(k),te(j))).then(()=>{j=[];for(const V of o.list())j.push(Js(V,U,W));return j.push(k),te(j)}).catch(V=>Eo(V,8)?V:Promise.reject(V))}function C(U,W,j){s.list().forEach(K=>A(()=>K(U,W,j)))}function D(U,W,j,K,ee){const R=_(U,W);if(R)return R;const k=W===Es,V=Bc?history.state:{};j&&(K||k?n.replace(U.fullPath,Et({scroll:k&&V&&V.scroll},ee)):n.push(U.fullPath,ee)),l.value=U,H(U,W,j,k),G()}let P;function E(){P||(P=n.listen((U,W,j)=>{if(!ne.listening)return;const K=m(U),ee=b(K);if(ee){S(Et(ee,{replace:!0}),K).catch(qp);return}u=K;const R=l.value;Bc&&gK(xI(R.fullPath,j.delta),lx()),T(K,R).catch(k=>Eo(k,12)?k:Eo(k,2)?(S(k.to,K).then(V=>{Eo(V,20)&&!j.delta&&j.type===Ev.pop&&n.go(-1,!1)}).catch(qp),Promise.reject()):(j.delta&&n.go(-j.delta,!1),N(k,K,R))).then(k=>{k=k||D(K,R,!1),k&&(j.delta&&!Eo(k,8)?n.go(-j.delta,!1):j.type===Ev.pop&&Eo(k,20)&&n.go(-1,!1)),C(K,R,k)}).catch(qp)}))}let O=Mf(),z=Mf(),B;function N(U,W,j){G(U);const K=z.list();return K.length?K.forEach(ee=>ee(U,W,j)):console.error(U),Promise.reject(U)}function F(){return B&&l.value!==Es?Promise.resolve():new Promise((U,W)=>{O.add([U,W])})}function G(U){return B||(B=!U,E(),O.list().forEach(([W,j])=>U?j(U):W()),O.reset()),U}function H(U,W,j,K){const{scrollBehavior:ee}=e;if(!Bc||!ee)return Promise.resolve();const R=!j&&mK(xI(U.fullPath,0))||(K||!j)&&history.state&&history.state.scroll||null;return s1().then(()=>ee(U,W,R)).then(k=>k&&vK(k)).catch(k=>N(k,U,W))}const $=U=>n.go(U);let Z;const X=new Set,ne={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:v,resolve:m,options:e,push:x,replace:w,go:$,back:()=>$(-1),forward:()=>$(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:z.add,isReady:F,install(U){const W=this;U.component("RouterLink",eJ),U.component("RouterView",CU),U.config.globalProperties.$router=W,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>En(l)}),Bc&&!Z&&l.value===Es&&(Z=!0,x(n.location).catch(ee=>{}));const j={};for(const ee in Es)Object.defineProperty(j,ee,{get:()=>l.value[ee],enumerable:!0});U.provide(cD,W),U.provide(AU,B4(j)),U.provide(FM,l);const K=U.unmount;X.add(U),U.unmount=function(){X.delete(U),X.size<1&&(u=Es,P&&P(),P=null,l.value=Es,Z=!1,B=!1),K()}}};function te(U){return U.reduce((W,j)=>W.then(()=>A(j)),Promise.resolve())}return ne}function aJ(e,t){const r=[],i=[],n=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const s=t.matched[o];s&&(e.matched.find(u=>Td(u,s))?i.push(s):r.push(s));const l=e.matched[o];l&&(t.matched.find(u=>Td(u,l))||n.push(l))}return[r,i,n]}const oJ={__name:"App",setup(e){return(t,r)=>(Mg(),oD(En(CU)))}},DU=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},sJ={};function lJ(e,t){return Mg(),cU("main",null," 首页 ")}const uJ=DU(sJ,[["render",lJ]]);var hJ=Object.create,dD=Object.defineProperty,cJ=Object.getOwnPropertyDescriptor,dJ=Object.getOwnPropertyNames,fJ=Object.getPrototypeOf,pJ=Object.prototype.hasOwnProperty,ux=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),vJ=(e,t)=>{for(var r in t)dD(e,r,{get:t[r],enumerable:!0})},gJ=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of dJ(t))!pJ.call(e,n)&&n!==r&&dD(e,n,{get:()=>t[n],enumerable:!(i=cJ(t,n))||i.enumerable});return e},Tg=(e,t,r)=>(r=e!=null?hJ(fJ(e)):{},gJ(t||!e||!e.__esModule?dD(r,"default",{value:e,enumerable:!0}):r,e)),mJ=ux((e,t)=>{(function(r,i){typeof e=="object"?t.exports=i():typeof define=="function"&&define.amd?define(i):r.Alea=i()})(e,function(){return r.importState=function(n){var a=new r;return a.importState(n),a},r;function r(){return function(n){var a=0,o=0,s=0,l=1;n.length==0&&(n=[+new Date]);var u=i();a=u(" "),o=u(" "),s=u(" ");for(var h=0;h<n.length;h++)a-=u(n[h]),a<0&&(a+=1),o-=u(n[h]),o<0&&(o+=1),s-=u(n[h]),s<0&&(s+=1);u=null;var c=function(){var d=2091639*a+l*23283064365386963e-26;return a=o,o=s,s=d-(l=d|0)};return c.next=c,c.uint32=function(){return c()*4294967296},c.fract53=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.version="Alea 0.9",c.args=n,c.exportState=function(){return[a,o,s,l]},c.importState=function(d){a=+d[0]||0,o=+d[1]||0,s=+d[2]||0,l=+d[3]||0},c}(Array.prototype.slice.call(arguments))}function i(){var n=4022871197,a=function(o){o=o.toString();for(var s=0;s<o.length;s++){n+=o.charCodeAt(s);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return a.version="Mash 0.9",a}})}),PU=ux((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,a,o,s){if(n=n===void 0||n,a=a===void 0||a,s=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,u,h,c,d,f,p,v,g,m,y,_,x=i[0].length,w=i.length;if(w<x)throw new TypeError("Invalid matrix: m < n");for(var b=[],S=[],M=[],A=n==="f"?w:x,T=m=p=0;T<w;T++)S[T]=new Array(A).fill(0);for(T=0;T<x;T++)M[T]=new Array(x).fill(0);var C,D=new Array(x).fill(0);for(T=0;T<w;T++)for(l=0;l<x;l++)S[T][l]=i[T][l];for(T=0;T<x;T++){for(b[T]=p,g=0,h=T+1,l=T;l<w;l++)g+=Math.pow(S[l][T],2);if(g<s)p=0;else for(v=(f=S[T][T])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,S[T][T]=f-p,l=h;l<x;l++){for(g=0,u=T;u<w;u++)g+=S[u][T]*S[u][l];for(f=g/v,u=T;u<w;u++)S[u][l]=S[u][l]+f*S[u][T]}for(D[T]=p,g=0,l=h;l<x;l++)g+=Math.pow(S[T][l],2);if(g<s)p=0;else{for(v=(f=S[T][T+1])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,S[T][T+1]=f-p,l=h;l<x;l++)b[l]=S[T][l]/v;for(l=h;l<w;l++){for(g=0,u=h;u<x;u++)g+=S[l][u]*S[T][u];for(u=h;u<x;u++)S[l][u]=S[l][u]+g*b[u]}}m<(y=Math.abs(D[T])+Math.abs(b[T]))&&(m=y)}if(a)for(T=x-1;0<=T;T--){if(p!==0){for(v=S[T][T+1]*p,l=h;l<x;l++)M[l][T]=S[T][l]/v;for(l=h;l<x;l++){for(g=0,u=h;u<x;u++)g+=S[T][u]*M[u][l];for(u=h;u<x;u++)M[u][l]=M[u][l]+g*M[u][T]}}for(l=h;l<x;l++)M[T][l]=0,M[l][T]=0;M[T][T]=1,p=b[T],h=T}if(n){if(n==="f")for(T=x;T<w;T++){for(l=x;l<w;l++)S[T][l]=0;S[T][T]=1}for(T=x-1;0<=T;T--){for(h=T+1,p=D[T],l=h;l<A;l++)S[T][l]=0;if(p!==0){for(v=S[T][T]*p,l=h;l<A;l++){for(g=0,u=h;u<w;u++)g+=S[u][T]*S[u][l];for(f=g/v,u=T;u<w;u++)S[u][l]=S[u][l]+f*S[u][T]}for(l=T;l<w;l++)S[l][T]=S[l][T]/p}else for(l=T;l<w;l++)S[l][T]=0;S[T][T]=S[T][T]+1}}for(o*=m,u=x-1;0<=u;u--)for(var P=0;P<50;P++){for(C=!1,h=u;0<=h;h--){if(Math.abs(b[h])<=o){C=!0;break}if(Math.abs(D[h-1])<=o)break}if(!C){for(d=0,c=h-(g=1),T=h;T<u+1&&(f=g*b[T],b[T]=d*b[T],!(Math.abs(f)<=o));T++)if(p=D[T],D[T]=Math.sqrt(f*f+p*p),d=p/(v=D[T]),g=-f/v,n)for(l=0;l<w;l++)y=S[l][c],_=S[l][T],S[l][c]=y*d+_*g,S[l][T]=-y*g+_*d}if(_=D[u],h===u){if(_<0&&(D[u]=-_,a))for(l=0;l<x;l++)M[l][u]=-M[l][u];break}for(m=D[h],f=(((y=D[u-1])-_)*(y+_)+((p=b[u-1])-(v=b[u]))*(p+v))/(2*v*y),p=Math.sqrt(f*f+1),f=((m-_)*(m+_)+v*(y/(f<0?f-p:f+p)-v))/m,T=h+(g=d=1);T<u+1;T++){if(p=b[T],y=D[T],v=g*p,p*=d,_=Math.sqrt(f*f+v*v),f=m*(d=f/(b[T-1]=_))+p*(g=v/_),p=-m*g+p*d,v=y*g,y*=d,a)for(l=0;l<x;l++)m=M[l][T-1],_=M[l][T],M[l][T-1]=m*d+_*g,M[l][T]=-m*g+_*d;if(_=Math.sqrt(f*f+v*v),f=(d=f/(D[T-1]=_))*p+(g=v/_)*y,m=-g*p+d*y,n)for(l=0;l<w;l++)y=S[l][T-1],_=S[l][T],S[l][T-1]=y*d+_*g,S[l][T]=-y*g+_*d}b[h]=0,b[u]=f,D[u]=m}for(T=0;T<x;T++)D[T]<o&&(D[T]=0);return{u:S,q:D,v:M}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),yJ=ux(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var c=this||r;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var d=this||r;if(c=parseFloat(c),d.ctx||h(),typeof c<"u"&&c>=0&&c<=1){if(d._volume=c,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),v=0;v<p.length;v++){var g=d._howls[f]._soundById(p[v]);g&&g._node&&(g._node.volume=g._volume*c)}return d}return d._volume},mute:function(c){var d=this||r;d.ctx||h(),d._muted=c,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c?0:d._volume,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),v=0;v<p.length;v++){var g=d._howls[f]._soundById(p[v]);g&&g._node&&(g._node.muted=c?!0:g._muted)}return d},stop:function(){for(var c=this||r,d=0;d<c._howls.length;d++)c._howls[d].stop();return c},unload:function(){for(var c=this||r,d=c._howls.length-1;d>=0;d--)c._howls[d].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,h()),c},codecs:function(c){return(this||r)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||r;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var d=new Audio;d.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||r,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return c}if(!d||typeof d.canPlayType!="function")return c;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),p=c._navigator?c._navigator.userAgent:"",v=p.match(/OPR\/([0-6].)/g),g=v&&parseInt(v[0].split("/")[1],10)<33,m=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,y=p.match(/Version\/(.*?) /),_=m&&y&&parseInt(y[1],10)<15;return c._codecs={mp3:!!(!g&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||r;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var d=function(f){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,c._releaseHtml5Audio(p)}catch{c.noAudio=!0;break}for(var v=0;v<c._howls.length;v++)if(!c._howls[v]._webAudio)for(var g=c._howls[v]._getSoundIds(),m=0;m<g.length;m++){var y=c._howls[v]._soundById(g[m]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}c._autoResume();var _=c.ctx.createBufferSource();_.buffer=c._scratchBuffer,_.connect(c.ctx.destination),typeof _.start>"u"?_.noteOn(0):_.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),_.onended=function(){_.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var x=0;x<c._howls.length;x++)c._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),c}},_obtainHtml5Audio:function(){var c=this||r;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var d=this||r;return c._unlocked&&d._html5AudioPool.push(c),d},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!r.usingWebAudio)){for(var d=0;d<c._howls.length;d++)if(c._howls[d]._webAudio){for(var f=0;f<c._howls[d]._sounds.length;f++)if(!c._howls[d]._sounds[f]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var p=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(p,p)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!r.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var r=new t,i=function(c){var d=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(c)};i.prototype={init:function(c){var d=this;return r.ctx||h(),d._autoplay=c.autoplay||!1,d._format=typeof c.format!="string"?c.format:[c.format],d._html5=c.html5||!1,d._muted=c.mute||!1,d._loop=c.loop||!1,d._pool=c.pool||5,d._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,d._rate=c.rate||1,d._sprite=c.sprite||{},d._src=typeof c.src!="string"?c.src:[c.src],d._volume=c.volume!==void 0?c.volume:1,d._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=c.onend?[{fn:c.onend}]:[],d._onfade=c.onfade?[{fn:c.onfade}]:[],d._onload=c.onload?[{fn:c.onload}]:[],d._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],d._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],d._onpause=c.onpause?[{fn:c.onpause}]:[],d._onplay=c.onplay?[{fn:c.onplay}]:[],d._onstop=c.onstop?[{fn:c.onstop}]:[],d._onmute=c.onmute?[{fn:c.onmute}]:[],d._onvolume=c.onvolume?[{fn:c.onvolume}]:[],d._onrate=c.onrate?[{fn:c.onrate}]:[],d._onseek=c.onseek?[{fn:c.onseek}]:[],d._onunlock=c.onunlock?[{fn:c.onunlock}]:[],d._onresume=[],d._webAudio=r.usingWebAudio&&!d._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var c=this,d=null;if(r.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var f=0;f<c._src.length;f++){var p,v;if(c._format&&c._format[f])p=c._format[f];else{if(v=c._src[f],typeof v!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(v),p||(p=/\.([^.]+)$/.exec(v.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&r.codecs(p)){d=c._src[f];break}}if(!d){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=d,c._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new n(c),c._webAudio&&o(c),c},play:function(c,d){var f=this,p=null;if(typeof c=="number")p=c,c=null;else{if(typeof c=="string"&&f._state==="loaded"&&!f._sprite[c])return null;if(typeof c>"u"&&(c="__default",!f._playLock)){for(var v=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(v++,p=f._sounds[g]._id);v===1?c=null:p=null}}var m=p?f._soundById(p):f._inactiveSound();if(!m)return null;if(p&&!c&&(c=m._sprite||"__default"),f._state!=="loaded"){m._sprite=c,m._ended=!1;var y=m._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(p&&!m._paused)return d||f._loadQueue("play"),m._id;f._webAudio&&r._autoResume();var _=Math.max(0,m._seek>0?m._seek:f._sprite[c][0]/1e3),x=Math.max(0,(f._sprite[c][0]+f._sprite[c][1])/1e3-_),w=x*1e3/Math.abs(m._rate),b=f._sprite[c][0]/1e3,S=(f._sprite[c][0]+f._sprite[c][1])/1e3;m._sprite=c,m._ended=!1;var M=function(){m._paused=!1,m._seek=_,m._start=b,m._stop=S,m._loop=!!(m._loop||f._sprite[c][2])};if(_>=S){f._ended(m);return}var A=m._node;if(f._webAudio){var T=function(){f._playLock=!1,M(),f._refreshBuffer(m);var E=m._muted||f._muted?0:m._volume;A.gain.setValueAtTime(E,r.ctx.currentTime),m._playStart=r.ctx.currentTime,typeof A.bufferSource.start>"u"?m._loop?A.bufferSource.noteGrainOn(0,_,86400):A.bufferSource.noteGrainOn(0,_,x):m._loop?A.bufferSource.start(0,_,86400):A.bufferSource.start(0,_,x),w!==1/0&&(f._endTimers[m._id]=setTimeout(f._ended.bind(f,m),w)),d||setTimeout(function(){f._emit("play",m._id),f._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?T():(f._playLock=!0,f.once("resume",T),f._clearTimer(m._id))}else{var C=function(){A.currentTime=_,A.muted=m._muted||f._muted||r._muted||A.muted,A.volume=m._volume*r.volume(),A.playbackRate=m._rate;try{var E=A.play();if(E&&typeof Promise<"u"&&(E instanceof Promise||typeof E.then=="function")?(f._playLock=!0,M(),E.then(function(){f._playLock=!1,A._unlocked=!0,d?f._loadQueue():f._emit("play",m._id)}).catch(function(){f._playLock=!1,f._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):d||(f._playLock=!1,M(),f._emit("play",m._id)),A.playbackRate=m._rate,A.paused){f._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||m._loop?f._endTimers[m._id]=setTimeout(f._ended.bind(f,m),w):(f._endTimers[m._id]=function(){f._ended(m),A.removeEventListener("ended",f._endTimers[m._id],!1)},A.addEventListener("ended",f._endTimers[m._id],!1))}catch(O){f._emit("playerror",m._id,O)}};A.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(A.src=f._src,A.load());var D=window&&window.ejecta||!A.readyState&&r._navigator.isCocoonJS;if(A.readyState>=3||D)C();else{f._playLock=!0,f._state="loading";var P=function(){f._state="loaded",C(),A.removeEventListener(r._canPlayEvent,P,!1)};A.addEventListener(r._canPlayEvent,P,!1),f._clearTimer(m._id)}}return m._id},pause:function(c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(c)}}),d;for(var f=d._getSoundIds(c),p=0;p<f.length;p++){d._clearTimer(f[p]);var v=d._soundById(f[p]);if(v&&!v._paused&&(v._seek=d.seek(f[p]),v._rateSeek=0,v._paused=!0,d._stopFade(f[p]),v._node))if(d._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||d._emit("pause",v?v._id:null)}return d},stop:function(c,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(c)}}),f;for(var p=f._getSoundIds(c),v=0;v<p.length;v++){f._clearTimer(p[v]);var g=f._soundById(p[v]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(p[v]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),d||f._emit("stop",g._id))}return f},mute:function(c,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(c,d)}}),f;if(typeof d>"u")if(typeof c=="boolean")f._muted=c;else return f._muted;for(var p=f._getSoundIds(d),v=0;v<p.length;v++){var g=f._soundById(p[v]);g&&(g._muted=c,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(c?0:g._volume,r.ctx.currentTime):g._node&&(g._node.muted=r._muted?!0:c),f._emit("mute",g._id))}return f},volume:function(){var c=this,d=arguments,f,p;if(d.length===0)return c._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var v=c._getSoundIds(),g=v.indexOf(d[0]);g>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var m;if(typeof f<"u"&&f>=0&&f<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,d)}}),c;typeof p>"u"&&(c._volume=f),p=c._getSoundIds(p);for(var y=0;y<p.length;y++)m=c._soundById(p[y]),m&&(m._volume=f,d[2]||c._stopFade(p[y]),c._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(f,r.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=f*r.volume()),c._emit("volume",m._id))}else return m=p?c._soundById(p):c._sounds[0],m?m._volume:0;return c},fade:function(c,d,f,p){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(c,d,f,p)}}),v;c=Math.min(Math.max(0,parseFloat(c)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),v.volume(c,p);for(var g=v._getSoundIds(p),m=0;m<g.length;m++){var y=v._soundById(g[m]);if(y){if(p||v._stopFade(g[m]),v._webAudio&&!y._muted){var _=r.ctx.currentTime,x=_+f/1e3;y._volume=c,y._node.gain.setValueAtTime(c,_),y._node.gain.linearRampToValueAtTime(d,x)}v._startFadeInterval(y,c,d,f,g[m],typeof p>"u")}}return v},_startFadeInterval:function(c,d,f,p,v,g){var m=this,y=d,_=f-d,x=Math.abs(_/.01),w=Math.max(4,x>0?p/x:p),b=Date.now();c._fadeTo=f,c._interval=setInterval(function(){var S=(Date.now()-b)/p;b=Date.now(),y+=_*S,y=Math.round(y*100)/100,_<0?y=Math.max(f,y):y=Math.min(f,y),m._webAudio?c._volume=y:m.volume(y,c._id,!0),g&&(m._volume=y),(f<d&&y<=f||f>d&&y>=f)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,m.volume(f,c._id),m._emit("fade",c._id))},w)},_stopFade:function(c){var d=this,f=d._soundById(c);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,c),f._fadeTo=null,d._emit("fade",c)),d},loop:function(){var c=this,d=arguments,f,p,v;if(d.length===0)return c._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],c._loop=f;else return v=c._soundById(parseInt(d[0],10)),v?v._loop:!1;else d.length===2&&(f=d[0],p=parseInt(d[1],10));for(var g=c._getSoundIds(p),m=0;m<g.length;m++)v=c._soundById(g[m]),v&&(v._loop=f,c._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=f,f&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,c.playing(g[m])&&(c.pause(g[m],!0),c.play(g[m],!0)))));return c},rate:function(){var c=this,d=arguments,f,p;if(d.length===0)p=c._sounds[0]._id;else if(d.length===1){var v=c._getSoundIds(),g=v.indexOf(d[0]);g>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var m;if(typeof f=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,d)}}),c;typeof p>"u"&&(c._rate=f),p=c._getSoundIds(p);for(var y=0;y<p.length;y++)if(m=c._soundById(p[y]),m){c.playing(p[y])&&(m._rateSeek=c.seek(p[y]),m._playStart=c._webAudio?r.ctx.currentTime:m._playStart),m._rate=f,c._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(f,r.ctx.currentTime):m._node&&(m._node.playbackRate=f);var _=c.seek(p[y]),x=(c._sprite[m._sprite][0]+c._sprite[m._sprite][1])/1e3-_,w=x*1e3/Math.abs(m._rate);(c._endTimers[p[y]]||!m._paused)&&(c._clearTimer(p[y]),c._endTimers[p[y]]=setTimeout(c._ended.bind(c,m),w)),c._emit("rate",m._id)}}else return m=c._soundById(p),m?m._rate:c._rate;return c},seek:function(){var c=this,d=arguments,f,p;if(d.length===0)c._sounds.length&&(p=c._sounds[0]._id);else if(d.length===1){var v=c._getSoundIds(),g=v.indexOf(d[0]);g>=0?p=parseInt(d[0],10):c._sounds.length&&(p=c._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,d)}}),c;var m=c._soundById(p);if(m)if(typeof f=="number"&&f>=0){var y=c.playing(p);y&&c.pause(p,!0),m._seek=f,m._ended=!1,c._clearTimer(p),!c._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=f);var _=function(){y&&c.play(p,!0),c._emit("seek",p)};if(y&&!c._webAudio){var x=function(){c._playLock?setTimeout(x,0):_()};setTimeout(x,0)}else _()}else if(c._webAudio){var w=c.playing(p)?r.ctx.currentTime-m._playStart:0,b=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(b+w*Math.abs(m._rate))}else return m._node.currentTime;return c},playing:function(c){var d=this;if(typeof c=="number"){var f=d._soundById(c);return f?!f._paused:!1}for(var p=0;p<d._sounds.length;p++)if(!d._sounds[p]._paused)return!0;return!1},duration:function(c){var d=this,f=d._duration,p=d._soundById(c);return p&&(f=d._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var c=this,d=c._sounds,f=0;f<d.length;f++)d[f]._paused||c.stop(d[f]._id),c._webAudio||(c._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(r._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),r._releaseHtml5Audio(d[f]._node)),delete d[f]._node,c._clearTimer(d[f]._id);var p=r._howls.indexOf(c);p>=0&&r._howls.splice(p,1);var v=!0;for(f=0;f<r._howls.length;f++)if(r._howls[f]._src===c._src||c._src.indexOf(r._howls[f]._src)>=0){v=!1;break}return a&&v&&delete a[c._src],r.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,d,f,p){var v=this,g=v["_on"+c];return typeof d=="function"&&g.push(p?{id:f,fn:d,once:p}:{id:f,fn:d}),v},off:function(c,d,f){var p=this,v=p["_on"+c],g=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(g=0;g<v.length;g++){var m=f===v[g].id;if(d===v[g].fn&&m||!d&&m){v.splice(g,1);break}}else if(c)p["_on"+c]=[];else{var y=Object.keys(p);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(p[y[g]])&&(p[y[g]]=[])}return p},once:function(c,d,f){var p=this;return p.on(c,d,f,1),p},_emit:function(c,d,f){for(var p=this,v=p["_on"+c],g=v.length-1;g>=0;g--)(!v[g].id||v[g].id===d||c==="load")&&(setTimeout((function(m){m.call(this,d,f)}).bind(p,v[g].fn),0),v[g].once&&p.off(c,v[g].fn,v[g].id));return p._loadQueue(c),p},_loadQueue:function(c){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===c&&(d._queue.shift(),d._loadQueue()),c||f.action()}return d},_ended:function(c){var d=this,f=c._sprite;if(!d._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(d._ended.bind(d,c),100),d;var p=!!(c._loop||d._sprite[f][2]);if(d._emit("end",c._id),!d._webAudio&&p&&d.stop(c._id,!0).play(c._id),d._webAudio&&p){d._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=r.ctx.currentTime;var v=(c._stop-c._start)*1e3/Math.abs(c._rate);d._endTimers[c._id]=setTimeout(d._ended.bind(d,c),v)}return d._webAudio&&!p&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,d._clearTimer(c._id),d._cleanBuffer(c._node),r._autoSuspend()),!d._webAudio&&!p&&d.stop(c._id,!0),d},_clearTimer:function(c){var d=this;if(d._endTimers[c]){if(typeof d._endTimers[c]!="function")clearTimeout(d._endTimers[c]);else{var f=d._soundById(c);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[c],!1)}delete d._endTimers[c]}return d},_soundById:function(c){for(var d=this,f=0;f<d._sounds.length;f++)if(c===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var c=this;c._drain();for(var d=0;d<c._sounds.length;d++)if(c._sounds[d]._ended)return c._sounds[d].reset();return new n(c)},_drain:function(){var c=this,d=c._pool,f=0,p=0;if(!(c._sounds.length<d)){for(p=0;p<c._sounds.length;p++)c._sounds[p]._ended&&f++;for(p=c._sounds.length-1;p>=0;p--){if(f<=d)return;c._sounds[p]._ended&&(c._webAudio&&c._sounds[p]._node&&c._sounds[p]._node.disconnect(0),c._sounds.splice(p,1),f--)}}},_getSoundIds:function(c){var d=this;if(typeof c>"u"){for(var f=[],p=0;p<d._sounds.length;p++)f.push(d._sounds[p]._id);return f}else return[c]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=r.ctx.createBufferSource(),c._node.bufferSource.buffer=a[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,r.ctx.currentTime),d},_cleanBuffer:function(c){var d=this,f=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),f))try{c.bufferSource.buffer=r._scratchBuffer}catch{}return c.bufferSource=null,d},_clearSound:function(c){var d=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);d||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(c){this._parent=c,this.init()};n.prototype={init:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,d._sounds.push(c),c.create(),c},create:function(){var c=this,d=c._parent,f=r._muted||c._muted||c._parent._muted?0:c._volume;return d._webAudio?(c._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),c._node.gain.setValueAtTime(f,r.ctx.currentTime),c._node.paused=!0,c._node.connect(r.masterGain)):r.noAudio||(c._node=r._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(r._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=d._src,c._node.preload=d._preload===!0?"auto":d._preload,c._node.volume=f*r.volume(),c._node.load()),c},reset:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,d=c._parent;d._duration=Math.ceil(c._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),c._node.removeEventListener(r._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,d=c._parent;d._duration===1/0&&(d._duration=Math.ceil(c._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var a={},o=function(c){var d=c._src;if(a[d]){c._duration=a[d].duration,u(c);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),p=new Uint8Array(f.length),v=0;v<f.length;++v)p[v]=f.charCodeAt(v);l(p.buffer,c)}else{var g=new XMLHttpRequest;g.open(c._xhr.method,d,!0),g.withCredentials=c._xhr.withCredentials,g.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(m){g.setRequestHeader(m,c._xhr.headers[m])}),g.onload=function(){var m=(g.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,c)},g.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete a[d],c.load())},s(g)}},s=function(c){try{c.send()}catch{c.onerror()}},l=function(c,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},p=function(v){v&&d._sounds.length>0?(a[d._src]=v,u(d,v)):f()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(c).then(p).catch(f):r.ctx.decodeAudioData(c,p,f)},u=function(c,d){d&&!c._duration&&(c._duration=d.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},h=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),d=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(c&&f&&f<9){var p=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!p&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:r,Howl:i}}),typeof e<"u"&&(e.Howler=r,e.Howl=i),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=r,global.Howl=i,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=i,window.Sound=n)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var n=i._howls.length-1;n>=0;n--)i._howls[n].stereo(r);return i},HowlerGlobal.prototype.pos=function(r,i,n){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(i=typeof i!="number"?a._pos[1]:i,n=typeof n!="number"?a._pos[2]:n,typeof r=="number")a._pos=[r,i,n],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(r,i,n,a,o,s){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(i=typeof i!="number"?u[1]:i,n=typeof n!="number"?u[2]:n,a=typeof a!="number"?u[3]:a,o=typeof o!="number"?u[4]:o,s=typeof s!="number"?u[5]:s,typeof r=="number")l._orientation=[r,i,n,a,o,s],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(r,i,n,a,o,s);else return u;return l},Howl.prototype.init=function(r){return function(i){var n=this;return n._orientation=i.orientation||[1,0,0],n._stereo=i.stereo||null,n._pos=i.pos||null,n._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},n._onstereo=i.onstereo?[{fn:i.onstereo}]:[],n._onpos=i.onpos?[{fn:i.onpos}]:[],n._onorientation=i.onorientation?[{fn:i.onorientation}]:[],r.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,i){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(r,i)}}),n;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof r=="number")n._stereo=r,n._pos=[r,0,0];else return n._stereo;for(var o=n._getSoundIds(i),s=0;s<o.length;s++){var l=n._soundById(o[s]);if(l)if(typeof r=="number")l._stereo=r,l._pos=[r,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,a),a==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(r,0,0):l._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(r,i,n,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,i,n,a)}}),o;if(i=typeof i!="number"?0:i,n=typeof n!="number"?-.5:n,typeof a>"u")if(typeof r=="number")o._pos=[r,i,n];else return o._pos;for(var s=o._getSoundIds(a),l=0;l<s.length;l++){var u=o._soundById(s[l]);if(u)if(typeof r=="number")u._pos=[r,i,n],u._node&&((!u._panner||u._panner.pan)&&t(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setPosition(r,i,n)),o._emit("pos",u._id);else return u._pos}return o},Howl.prototype.orientation=function(r,i,n,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,i,n,a)}}),o;if(i=typeof i!="number"?o._orientation[1]:i,n=typeof n!="number"?o._orientation[2]:n,typeof a>"u")if(typeof r=="number")o._orientation=[r,i,n];else return o._orientation;for(var s=o._getSoundIds(a),l=0;l<s.length;l++){var u=o._soundById(s[l]);if(u)if(typeof r=="number")u._orientation=[r,i,n],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),t(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setOrientation(r,i,n)),o._emit("orientation",u._id);else return u._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,i=arguments,n,a,o;if(!r._webAudio)return r;if(i.length===0)return r._pannerAttr;if(i.length===1)if(typeof i[0]=="object")n=i[0],typeof a>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),r._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(i[0],10)),o?o._pannerAttr:r._pannerAttr;else i.length===2&&(n=i[0],a=parseInt(i[1],10));for(var s=r._getSoundIds(a),l=0;l<s.length;l++)if(o=r._soundById(s[l]),o){var u=o._pannerAttr;u={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:u.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:u.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:u.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:u.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:u.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:u.panningModel};var h=o._panner;h?(h.coneInnerAngle=u.coneInnerAngle,h.coneOuterAngle=u.coneOuterAngle,h.coneOuterGain=u.coneOuterGain,h.distanceModel=u.distanceModel,h.maxDistance=u.maxDistance,h.refDistance=u.refDistance,h.rolloffFactor=u.rolloffFactor,h.panningModel=u.panningModel):(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var i=this,n=i._parent;i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,r.call(this),i._stereo?n.stereo(i._stereo):i._pos&&n.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var i=this,n=i._parent;return i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,i._stereo?n.stereo(i._stereo):i._pos?n.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,n._refreshBuffer(i)),r.call(this)}}(Sound.prototype.reset);var t=function(r,i){i=i||"spatial",i==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()}),_J=ux((e,t)=>{t.exports=function(r,i){for(var n=r.split("."),a=i.split("."),o=0;o<3;o++){var s=Number(n[o]),l=Number(a[o]);if(s>l)return 1;if(l>s)return-1;if(!isNaN(s)&&isNaN(l))return 1;if(isNaN(s)&&!isNaN(l))return-1}return 0}}),LU="149",Iv=0,EU=1,xJ=2,bJ=0,RI=1,wJ=100,SJ=204,MJ=205,TJ=3,AJ=0,IU=300,OU=301,CJ=302,DJ=306,zI=1e3,Yc=1001,NI=1002,f1=1003,VM=1006,PJ=1008,LJ=1009,EJ=1023,p1=3e3,RU=3001,qo="srgb",UM="srgb-linear",Rb=7680,IJ=519,GM=35044,Wl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},qr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],kI=1234567,Yp=Math.PI/180,Ov=180/Math.PI;function po(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qr[e&255]+qr[e>>8&255]+qr[e>>16&255]+qr[e>>24&255]+"-"+qr[t&255]+qr[t>>8&255]+"-"+qr[t>>16&15|64]+qr[t>>24&255]+"-"+qr[r&63|128]+qr[r>>8&255]+"-"+qr[r>>16&255]+qr[r>>24&255]+qr[i&255]+qr[i>>8&255]+qr[i>>16&255]+qr[i>>24&255]).toLowerCase()}function Rr(e,t,r){return Math.max(t,Math.min(r,e))}function fD(e,t){return(e%t+t)%t}function OJ(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function RJ(e,t,r){return e!==t?(r-e)/(t-e):0}function Zp(e,t,r){return(1-r)*e+r*t}function zJ(e,t,r,i){return Zp(e,t,1-Math.exp(-r*i))}function NJ(e,t=1){return t-Math.abs(fD(e,t*2)-t)}function kJ(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function BJ(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function FJ(e,t){return e+Math.floor(Math.random()*(t-e+1))}function VJ(e,t){return e+Math.random()*(t-e)}function UJ(e){return e*(.5-Math.random())}function GJ(e){e!==void 0&&(kI=e);let t=kI+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function HJ(e){return e*Yp}function jJ(e){return e*Ov}function WJ(e){return(e&e-1)===0&&e!==0}function $J(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function qJ(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function XJ(e,t,r,i,n){let a=Math.cos,o=Math.sin,s=a(r/2),l=o(r/2),u=a((t+i)/2),h=o((t+i)/2),c=a((t-i)/2),d=o((t-i)/2),f=a((i-t)/2),p=o((i-t)/2);switch(n){case"XYX":e.set(s*h,l*c,l*d,s*u);break;case"YZY":e.set(l*d,s*h,l*c,s*u);break;case"ZXZ":e.set(l*c,l*d,s*h,s*u);break;case"XZX":e.set(s*h,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*h,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*h,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function Qo(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Vt(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var pt=Object.freeze({__proto__:null,DEG2RAD:Yp,RAD2DEG:Ov,ceilPowerOfTwo:$J,clamp:Rr,damp:zJ,degToRad:HJ,denormalize:Qo,euclideanModulo:fD,floorPowerOfTwo:qJ,generateUUID:po,inverseLerp:RJ,isPowerOfTwo:WJ,lerp:Zp,mapLinear:OJ,normalize:Vt,pingpong:NJ,radToDeg:jJ,randFloat:VJ,randFloatSpread:UJ,randInt:FJ,seededRandom:GJ,setQuaternionFromProperEuler:XJ,smootherstep:BJ,smoothstep:kJ}),re=class{constructor(e=0,t=0){re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*r-a*i+e.x,this.y=n*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},ni=class{constructor(){ni.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,n,a,o,s,l){let u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=n,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[3],s=r[6],l=r[1],u=r[4],h=r[7],c=r[2],d=r[5],f=r[8],p=i[0],v=i[3],g=i[6],m=i[1],y=i[4],_=i[7],x=i[2],w=i[5],b=i[8];return n[0]=a*p+o*m+s*x,n[3]=a*v+o*y+s*w,n[6]=a*g+o*_+s*b,n[1]=l*p+u*m+h*x,n[4]=l*v+u*y+h*w,n[7]=l*g+u*_+h*b,n[2]=c*p+d*m+f*x,n[5]=c*v+d*y+f*w,n[8]=c*g+d*_+f*b,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-r*n*u+r*o*s+i*n*l-i*a*s}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],h=u*a-o*l,c=o*s-u*n,d=l*n-a*s,f=t*h+r*c+i*d;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return e[0]=h*p,e[1]=(i*l-u*r)*p,e[2]=(o*r-i*a)*p,e[3]=c*p,e[4]=(u*t-i*s)*p,e[5]=(i*n-o*t)*p,e[6]=d*p,e[7]=(r*s-l*t)*p,e[8]=(a*t-r*n)*p,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,a,o){let s=Math.cos(n),l=Math.sin(n);return this.set(r*s,r*l,-r*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(zb.makeScale(e,t)),this}rotate(e){return this.premultiply(zb.makeRotation(-e)),this}translate(e,t){return this.premultiply(zb.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},zb=new ni;function YJ(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var ZJ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function pm(e,t){return new ZJ[e](t)}function BI(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function lh(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function w0(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var Nb={[qo]:{[UM]:lh},[UM]:{[qo]:w0}},li={legacyMode:!0,get workingColorSpace(){return UM},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(Nb[t]&&Nb[t][r]!==void 0){let i=Nb[t][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},zU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sr={r:0,g:0,b:0},Xn={h:0,s:0,l:0},vm={h:0,s:0,l:0};function kb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function gm(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var Qe=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=qo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,li.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=li.workingColorSpace){return this.r=e,this.g=t,this.b=r,li.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=li.workingColorSpace){if(e=fD(e,1),t=Rr(t,0,1),r=Rr(r,0,1),t===0)this.r=this.g=this.b=r;else{let n=r<=.5?r*(1+t):r+t-r*t,a=2*r-n;this.r=kb(a,n,e+1/3),this.g=kb(a,n,e),this.b=kb(a,n,e-1/3)}return li.toWorkingColorSpace(this,i),this}setStyle(e,t=qo){function r(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,li.toWorkingColorSpace(this,t),r(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,li.toWorkingColorSpace(this,t),r(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let s=parseFloat(n[1])/360,l=parseFloat(n[2])/100,u=parseFloat(n[3])/100;return r(n[4]),this.setHSL(s,l,u,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=i[1],a=n.length;if(a===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,li.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,li.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=qo){let r=zU[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lh(e.r),this.g=lh(e.g),this.b=lh(e.b),this}copyLinearToSRGB(e){return this.r=w0(e.r),this.g=w0(e.g),this.b=w0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=qo){return li.fromWorkingColorSpace(gm(this,Sr),e),Rr(Sr.r*255,0,255)<<16^Rr(Sr.g*255,0,255)<<8^Rr(Sr.b*255,0,255)<<0}getHexString(e=qo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=li.workingColorSpace){li.fromWorkingColorSpace(gm(this,Sr),t);let r=Sr.r,i=Sr.g,n=Sr.b,a=Math.max(r,i,n),o=Math.min(r,i,n),s,l,u=(o+a)/2;if(o===a)s=0,l=0;else{let h=a-o;switch(l=u<=.5?h/(a+o):h/(2-a-o),a){case r:s=(i-n)/h+(i<n?6:0);break;case i:s=(n-r)/h+2;break;case n:s=(r-i)/h+4;break}s/=6}return e.h=s,e.s=l,e.l=u,e}getRGB(e,t=li.workingColorSpace){return li.fromWorkingColorSpace(gm(this,Sr),t),e.r=Sr.r,e.g=Sr.g,e.b=Sr.b,e}getStyle(e=qo){return li.fromWorkingColorSpace(gm(this,Sr),e),e!==qo?`color(${e} ${Sr.r} ${Sr.g} ${Sr.b})`:`rgb(${Sr.r*255|0},${Sr.g*255|0},${Sr.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Xn),Xn.h+=e,Xn.s+=t,Xn.l+=r,this.setHSL(Xn.h,Xn.s,Xn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Xn),e.getHSL(vm);let r=Zp(Xn.h,vm.h,t),i=Zp(Xn.s,vm.s,t),n=Zp(Xn.l,vm.l,t);return this.setHSL(r,i,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Qe.NAMES=zU;var Jh,KJ=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Jh===void 0&&(Jh=BI("canvas")),Jh.width=e.width,Jh.height=e.height;let r=Jh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Jh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=BI("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),n=i.data;for(let a=0;a<n.length;a++)n[a]=lh(n[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(lh(t[r]/255)*255):t[r]=lh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},JJ=class{constructor(e=null){this.isSource=!0,this.uuid=po(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let n;if(Array.isArray(i)){n=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?n.push(Bb(i[a].image)):n.push(Bb(i[a]))}else n=Bb(i);r.url=n}return t||(e.images[this.uuid]=r),r}};function Bb(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?KJ.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var QJ=0,Gi=class extends Wl{constructor(e=Gi.DEFAULT_IMAGE,t=Gi.DEFAULT_MAPPING,r=Yc,i=Yc,n=VM,a=PJ,o=EJ,s=LJ,l=Gi.DEFAULT_ANISOTROPY,u=p1){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:QJ++}),this.uuid=po(),this.name="",this.source=new JJ(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new re(0,0),this.repeat=new re(1,1),this.center=new re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ni,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==IU)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zI:e.x=e.x-Math.floor(e.x);break;case Yc:e.x=e.x<0?0:1;break;case NI:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zI:e.y=e.y-Math.floor(e.y);break;case Yc:e.y=e.y<0?0:1;break;case NI:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Gi.DEFAULT_IMAGE=null;Gi.DEFAULT_MAPPING=IU;Gi.DEFAULT_ANISOTROPY=1;var ir=class{constructor(e=0,t=0,r=0,i=1){ir.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],h=a[5],c=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(c-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(c+f)<.1&&Math.abs(o+h+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(o+1)/2,m=(h+1)/2,y=(p+1)/2,_=(s+u)/4,x=(l+d)/4,w=(c+f)/4;return g>m&&g>y?g<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=_/r,n=x/r):m>y?m<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(m),r=_/i,n=w/i):y<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(y),r=x/n,i=w/n),this.set(r,i,n,t),this}let v=Math.sqrt((f-c)*(f-c)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(v)<.001&&(v=1),this.x=(f-c)/v,this.y=(l-d)/v,this.z=(u-s)/v,this.w=Math.acos((o+h+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},eQ=class extends Gi{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=f1,this.minFilter=f1,this.wrapR=Yc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},tQ=class extends Gi{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=f1,this.minFilter=f1,this.wrapR=Yc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},It=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,n,a,o){let s=r[i+0],l=r[i+1],u=r[i+2],h=r[i+3],c=n[a+0],d=n[a+1],f=n[a+2],p=n[a+3];if(o===0){e[t+0]=s,e[t+1]=l,e[t+2]=u,e[t+3]=h;return}if(o===1){e[t+0]=c,e[t+1]=d,e[t+2]=f,e[t+3]=p;return}if(h!==p||s!==c||l!==d||u!==f){let v=1-o,g=s*c+l*d+u*f+h*p,m=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let x=Math.sqrt(y),w=Math.atan2(x,g*m);v=Math.sin(v*w)/x,o=Math.sin(o*w)/x}let _=o*m;if(s=s*v+c*_,l=l*v+d*_,u=u*v+f*_,h=h*v+p*_,v===1-o){let x=1/Math.sqrt(s*s+l*l+u*u+h*h);s*=x,l*=x,u*=x,h*=x}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,n,a){let o=r[i],s=r[i+1],l=r[i+2],u=r[i+3],h=n[a],c=n[a+1],d=n[a+2],f=n[a+3];return e[t]=o*f+u*h+s*d-l*c,e[t+1]=s*f+u*c+l*h-o*d,e[t+2]=l*f+u*d+o*c-s*h,e[t+3]=u*f-o*h-s*c-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let r=e._x,i=e._y,n=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(r/2),u=o(i/2),h=o(n/2),c=s(r/2),d=s(i/2),f=s(n/2);switch(a){case"XYZ":this._x=c*u*h+l*d*f,this._y=l*d*h-c*u*f,this._z=l*u*f+c*d*h,this._w=l*u*h-c*d*f;break;case"YXZ":this._x=c*u*h+l*d*f,this._y=l*d*h-c*u*f,this._z=l*u*f-c*d*h,this._w=l*u*h+c*d*f;break;case"ZXY":this._x=c*u*h-l*d*f,this._y=l*d*h+c*u*f,this._z=l*u*f+c*d*h,this._w=l*u*h-c*d*f;break;case"ZYX":this._x=c*u*h-l*d*f,this._y=l*d*h+c*u*f,this._z=l*u*f-c*d*h,this._w=l*u*h+c*d*f;break;case"YZX":this._x=c*u*h+l*d*f,this._y=l*d*h+c*u*f,this._z=l*u*f-c*d*h,this._w=l*u*h-c*d*f;break;case"XZY":this._x=c*u*h-l*d*f,this._y=l*d*h-c*u*f,this._z=l*u*f+c*d*h,this._w=l*u*h+c*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],h=t[10],c=r+o+h;if(c>0){let d=.5/Math.sqrt(c+1);this._w=.25/d,this._x=(u-s)*d,this._y=(n-l)*d,this._z=(a-i)*d}else if(r>o&&r>h){let d=2*Math.sqrt(1+r-o-h);this._w=(u-s)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(n+l)/d}else if(o>h){let d=2*Math.sqrt(1+o-r-h);this._w=(n-l)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(s+u)/d}else{let d=2*Math.sqrt(1+h-r-o);this._w=(a-i)/d,this._x=(n+l)/d,this._y=(s+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rr(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+a*o+i*l-n*s,this._y=i*u+a*s+n*o-r*l,this._z=n*u+a*l+r*s-i*o,this._w=a*u-r*o-i*s-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,a=this._w,o=a*e._w+r*e._x+i*e._y+n*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=n,this;let s=1-o*o;if(s<=Number.EPSILON){let d=1-t;return this._w=d*a+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),u=Math.atan2(l,o),h=Math.sin((1-t)*u)/l,c=Math.sin(t*u)/l;return this._w=a*h+this._w*c,this._x=r*h+this._x*c,this._y=i*h+this._y*c,this._z=n*h+this._z*c,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(n),r*Math.cos(n),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},L=class{constructor(e=0,t=0,r=0){L.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(FI.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FI.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,a=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*a,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*a,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*a,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*r,u=s*r+o*t-n*i,h=s*i+n*r-a*t,c=-n*t-a*r-o*i;return this.x=l*s+c*-n+u*-o-h*-a,this.y=u*s+c*-a+h*-n-l*-o,this.z=h*s+c*-o+l*-a-u*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-n*o,this.y=n*a-r*s,this.z=r*o-i*a,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Fb.copy(this).projectOnVector(e),this.sub(Fb)}reflect(e){return this.sub(Fb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Rr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Fb=new L,FI=new It,wr=class{constructor(e=new L(1/0,1/0,1/0),t=new L(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.length;s<l;s+=3){let u=e[s],h=e[s+1],c=e[s+2];u<t&&(t=u),h<r&&(r=h),c<i&&(i=c),u>n&&(n=u),h>a&&(a=h),c>o&&(o=c)}return this.min.set(t,r,i),this.max.set(n,a,o),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.count;s<l;s++){let u=e.getX(s),h=e.getY(s),c=e.getZ(s);u<t&&(t=u),h<r&&(r=h),c<i&&(i=c),u>n&&(n=u),h>a&&(a=h),c>o&&(o=c)}return this.min.set(t,r,i),this.max.set(n,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Ql.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let n=r.attributes.position;for(let a=0,o=n.count;a<o;a++)Ql.fromBufferAttribute(n,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Ql)}else r.boundingBox===null&&r.computeBoundingBox(),Vb.copy(r.boundingBox),Vb.applyMatrix4(e.matrixWorld),this.union(Vb);let i=e.children;for(let n=0,a=i.length;n<a;n++)this.expandByObject(i[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ql),Ql.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Tf),mm.subVectors(this.max,Tf),Qh.subVectors(e.a,Tf),ec.subVectors(e.b,Tf),tc.subVectors(e.c,Tf),Is.subVectors(ec,Qh),Os.subVectors(tc,ec),eu.subVectors(Qh,tc);let t=[0,-Is.z,Is.y,0,-Os.z,Os.y,0,-eu.z,eu.y,Is.z,0,-Is.x,Os.z,0,-Os.x,eu.z,0,-eu.x,-Is.y,Is.x,0,-Os.y,Os.x,0,-eu.y,eu.x,0];return!Ub(t,Qh,ec,tc,mm)||(t=[1,0,0,0,1,0,0,0,1],!Ub(t,Qh,ec,tc,mm))?!1:(ym.crossVectors(Is,Os),t=[ym.x,ym.y,ym.z],Ub(t,Qh,ec,tc,mm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ql.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ql).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Io[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Io[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Io[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Io[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Io[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Io[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Io[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Io[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Io),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Io=[new L,new L,new L,new L,new L,new L,new L,new L],Ql=new L,Vb=new wr,Qh=new L,ec=new L,tc=new L,Is=new L,Os=new L,eu=new L,Tf=new L,mm=new L,ym=new L,tu=new L;function Ub(e,t,r,i,n){for(let a=0,o=e.length-3;a<=o;a+=3){tu.fromArray(e,a);let s=n.x*Math.abs(tu.x)+n.y*Math.abs(tu.y)+n.z*Math.abs(tu.z),l=t.dot(tu),u=r.dot(tu),h=i.dot(tu);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>s)return!1}return!0}var rQ=new wr,Af=new L,Gb=new L,Vn=class{constructor(e=new L,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):rQ.setFromPoints(e).getCenter(r);let i=0;for(let n=0,a=e.length;n<a;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Af.subVectors(e,this.center);let t=Af.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Af,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Gb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Af.copy(e.center).add(Gb)),this.expandByPoint(Af.copy(e.center).sub(Gb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Oo=new L,Hb=new L,_m=new L,Rs=new L,jb=new L,xm=new L,Wb=new L,qd=class{constructor(e=new L,t=new L(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Oo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Oo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Oo.copy(this.direction).multiplyScalar(t).add(this.origin),Oo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Hb.copy(e).add(t).multiplyScalar(.5),_m.copy(t).sub(e).normalize(),Rs.copy(this.origin).sub(Hb);let n=e.distanceTo(t)*.5,a=-this.direction.dot(_m),o=Rs.dot(this.direction),s=-Rs.dot(_m),l=Rs.lengthSq(),u=Math.abs(1-a*a),h,c,d,f;if(u>0)if(h=a*s-o,c=a*o-s,f=n*u,h>=0)if(c>=-f)if(c<=f){let p=1/u;h*=p,c*=p,d=h*(h+a*c+2*o)+c*(a*h+c+2*s)+l}else c=n,h=Math.max(0,-(a*c+o)),d=-h*h+c*(c+2*s)+l;else c=-n,h=Math.max(0,-(a*c+o)),d=-h*h+c*(c+2*s)+l;else c<=-f?(h=Math.max(0,-(-a*n+o)),c=h>0?-n:Math.min(Math.max(-n,-s),n),d=-h*h+c*(c+2*s)+l):c<=f?(h=0,c=Math.min(Math.max(-n,-s),n),d=c*(c+2*s)+l):(h=Math.max(0,-(a*n+o)),c=h>0?n:Math.min(Math.max(-n,-s),n),d=-h*h+c*(c+2*s)+l);else c=a>0?-n:n,h=Math.max(0,-(a*c+o)),d=-h*h+c*(c+2*s)+l;return r&&r.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(_m).multiplyScalar(c).add(Hb),d}intersectSphere(e,t){Oo.subVectors(e.center,this.origin);let r=Oo.dot(this.direction),i=Oo.dot(Oo)-r*r,n=e.radius*e.radius;if(i>n)return null;let a=Math.sqrt(n-i),o=r-a,s=r+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,a,o,s,l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,c=this.origin;return l>=0?(r=(e.min.x-c.x)*l,i=(e.max.x-c.x)*l):(r=(e.max.x-c.x)*l,i=(e.min.x-c.x)*l),u>=0?(n=(e.min.y-c.y)*u,a=(e.max.y-c.y)*u):(n=(e.max.y-c.y)*u,a=(e.min.y-c.y)*u),r>a||n>i||((n>r||isNaN(r))&&(r=n),(a<i||isNaN(i))&&(i=a),h>=0?(o=(e.min.z-c.z)*h,s=(e.max.z-c.z)*h):(o=(e.max.z-c.z)*h,s=(e.min.z-c.z)*h),r>s||o>i)||((o>r||r!==r)&&(r=o),(s<i||i!==i)&&(i=s),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Oo)!==null}intersectTriangle(e,t,r,i,n){jb.subVectors(t,e),xm.subVectors(r,e),Wb.crossVectors(jb,xm);let a=this.direction.dot(Wb),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Rs.subVectors(this.origin,e);let s=o*this.direction.dot(xm.crossVectors(Rs,xm));if(s<0)return null;let l=o*this.direction.dot(jb.cross(Rs));if(l<0||s+l>a)return null;let u=-o*Rs.dot(Wb);return u<0?null:this.at(u/a,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ye=class{constructor(){ye.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,n,a,o,s,l,u,h,c,d,f,p,v){let g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=n,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=h,g[14]=c,g[3]=d,g[7]=f,g[11]=p,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ye().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/rc.setFromMatrixColumn(e,0).length(),n=1/rc.setFromMatrixColumn(e,1).length(),a=1/rc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,i=e.y,n=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(i),l=Math.sin(i),u=Math.cos(n),h=Math.sin(n);if(e.order==="XYZ"){let c=a*u,d=a*h,f=o*u,p=o*h;t[0]=s*u,t[4]=-s*h,t[8]=l,t[1]=d+f*l,t[5]=c-p*l,t[9]=-o*s,t[2]=p-c*l,t[6]=f+d*l,t[10]=a*s}else if(e.order==="YXZ"){let c=s*u,d=s*h,f=l*u,p=l*h;t[0]=c+p*o,t[4]=f*o-d,t[8]=a*l,t[1]=a*h,t[5]=a*u,t[9]=-o,t[2]=d*o-f,t[6]=p+c*o,t[10]=a*s}else if(e.order==="ZXY"){let c=s*u,d=s*h,f=l*u,p=l*h;t[0]=c-p*o,t[4]=-a*h,t[8]=f+d*o,t[1]=d+f*o,t[5]=a*u,t[9]=p-c*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if(e.order==="ZYX"){let c=a*u,d=a*h,f=o*u,p=o*h;t[0]=s*u,t[4]=f*l-d,t[8]=c*l+p,t[1]=s*h,t[5]=p*l+c,t[9]=d*l-f,t[2]=-l,t[6]=o*s,t[10]=a*s}else if(e.order==="YZX"){let c=a*s,d=a*l,f=o*s,p=o*l;t[0]=s*u,t[4]=p-c*h,t[8]=f*h+d,t[1]=h,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=d*h+f,t[10]=c-p*h}else if(e.order==="XZY"){let c=a*s,d=a*l,f=o*s,p=o*l;t[0]=s*u,t[4]=-h,t[8]=l*u,t[1]=c*h+p,t[5]=a*u,t[9]=d*h-f,t[2]=f*h-d,t[6]=o*u,t[10]=p*h+c}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(iQ,e,nQ)}lookAt(e,t,r){let i=this.elements;return Ki.subVectors(e,t),Ki.lengthSq()===0&&(Ki.z=1),Ki.normalize(),zs.crossVectors(r,Ki),zs.lengthSq()===0&&(Math.abs(r.z)===1?Ki.x+=1e-4:Ki.z+=1e-4,Ki.normalize(),zs.crossVectors(r,Ki)),zs.normalize(),bm.crossVectors(Ki,zs),i[0]=zs.x,i[4]=bm.x,i[8]=Ki.x,i[1]=zs.y,i[5]=bm.y,i[9]=Ki.y,i[2]=zs.z,i[6]=bm.z,i[10]=Ki.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],u=r[1],h=r[5],c=r[9],d=r[13],f=r[2],p=r[6],v=r[10],g=r[14],m=r[3],y=r[7],_=r[11],x=r[15],w=i[0],b=i[4],S=i[8],M=i[12],A=i[1],T=i[5],C=i[9],D=i[13],P=i[2],E=i[6],O=i[10],z=i[14],B=i[3],N=i[7],F=i[11],G=i[15];return n[0]=a*w+o*A+s*P+l*B,n[4]=a*b+o*T+s*E+l*N,n[8]=a*S+o*C+s*O+l*F,n[12]=a*M+o*D+s*z+l*G,n[1]=u*w+h*A+c*P+d*B,n[5]=u*b+h*T+c*E+d*N,n[9]=u*S+h*C+c*O+d*F,n[13]=u*M+h*D+c*z+d*G,n[2]=f*w+p*A+v*P+g*B,n[6]=f*b+p*T+v*E+g*N,n[10]=f*S+p*C+v*O+g*F,n[14]=f*M+p*D+v*z+g*G,n[3]=m*w+y*A+_*P+x*B,n[7]=m*b+y*T+_*E+x*N,n[11]=m*S+y*C+_*O+x*F,n[15]=m*M+y*D+_*z+x*G,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],h=e[6],c=e[10],d=e[14],f=e[3],p=e[7],v=e[11],g=e[15];return f*(+n*s*h-i*l*h-n*o*c+r*l*c+i*o*d-r*s*d)+p*(+t*s*d-t*l*c+n*a*c-i*a*d+i*l*u-n*s*u)+v*(+t*l*h-t*o*d-n*a*h+r*a*d+n*o*u-r*l*u)+g*(-i*o*u-t*s*h+t*o*c+i*a*h-r*a*c+r*s*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],h=e[9],c=e[10],d=e[11],f=e[12],p=e[13],v=e[14],g=e[15],m=h*v*l-p*c*l+p*s*d-o*v*d-h*s*g+o*c*g,y=f*c*l-u*v*l-f*s*d+a*v*d+u*s*g-a*c*g,_=u*p*l-f*h*l+f*o*d-a*p*d-u*o*g+a*h*g,x=f*h*s-u*p*s-f*o*c+a*p*c+u*o*v-a*h*v,w=t*m+r*y+i*_+n*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let b=1/w;return e[0]=m*b,e[1]=(p*c*n-h*v*n-p*i*d+r*v*d+h*i*g-r*c*g)*b,e[2]=(o*v*n-p*s*n+p*i*l-r*v*l-o*i*g+r*s*g)*b,e[3]=(h*s*n-o*c*n-h*i*l+r*c*l+o*i*d-r*s*d)*b,e[4]=y*b,e[5]=(u*v*n-f*c*n+f*i*d-t*v*d-u*i*g+t*c*g)*b,e[6]=(f*s*n-a*v*n-f*i*l+t*v*l+a*i*g-t*s*g)*b,e[7]=(a*c*n-u*s*n+u*i*l-t*c*l-a*i*d+t*s*d)*b,e[8]=_*b,e[9]=(f*h*n-u*p*n-f*r*d+t*p*d+u*r*g-t*h*g)*b,e[10]=(a*p*n-f*o*n+f*r*l-t*p*l-a*r*g+t*o*g)*b,e[11]=(u*o*n-a*h*n-u*r*l+t*h*l+a*r*d-t*o*d)*b,e[12]=x*b,e[13]=(u*p*i-f*h*i+f*r*c-t*p*c-u*r*v+t*h*v)*b,e[14]=(f*o*i-a*p*i-f*r*s+t*p*s+a*r*v-t*o*v)*b,e[15]=(a*h*i-u*o*i+u*r*s-t*h*s-a*r*c+t*o*c)*b,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,a=e.x,o=e.y,s=e.z,l=n*a,u=n*o;return this.set(l*a+r,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+r,u*s-i*a,0,l*s-i*o,u*s+i*a,n*s*s+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,a){return this.set(1,r,n,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,a=t._y,o=t._z,s=t._w,l=n+n,u=a+a,h=o+o,c=n*l,d=n*u,f=n*h,p=a*u,v=a*h,g=o*h,m=s*l,y=s*u,_=s*h,x=r.x,w=r.y,b=r.z;return i[0]=(1-(p+g))*x,i[1]=(d+_)*x,i[2]=(f-y)*x,i[3]=0,i[4]=(d-_)*w,i[5]=(1-(c+g))*w,i[6]=(v+m)*w,i[7]=0,i[8]=(f+y)*b,i[9]=(v-m)*b,i[10]=(1-(c+p))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=rc.set(i[0],i[1],i[2]).length(),a=rc.set(i[4],i[5],i[6]).length(),o=rc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],Yn.copy(this);let s=1/n,l=1/a,u=1/o;return Yn.elements[0]*=s,Yn.elements[1]*=s,Yn.elements[2]*=s,Yn.elements[4]*=l,Yn.elements[5]*=l,Yn.elements[6]*=l,Yn.elements[8]*=u,Yn.elements[9]*=u,Yn.elements[10]*=u,t.setFromRotationMatrix(Yn),r.x=n,r.y=a,r.z=o,this}makePerspective(e,t,r,i,n,a){let o=this.elements,s=2*n/(t-e),l=2*n/(r-i),u=(t+e)/(t-e),h=(r+i)/(r-i),c=-(a+n)/(a-n),d=-2*a*n/(a-n);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,r,i,n,a){let o=this.elements,s=1/(t-e),l=1/(r-i),u=1/(a-n),h=(t+e)*s,c=(r+i)*l,d=(a+n)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},rc=new L,Yn=new ye,iQ=new L(0,0,0),nQ=new L(1,1,1),zs=new L,bm=new L,Ki=new L,VI=new ye,UI=new It,zi=class{constructor(e=0,t=0,r=0,i=zi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],a=i[4],o=i[8],s=i[1],l=i[5],u=i[9],h=i[2],c=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Rr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Rr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-h,n),this._z=0);break;case"ZXY":this._x=Math.asin(Rr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,n));break;case"ZYX":this._y=Math.asin(-Rr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(c,d),this._z=Math.atan2(s,n)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Rr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,n)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Rr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(c,l),this._y=Math.atan2(o,n)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return VI.makeRotationFromQuaternion(e),this.setFromRotationMatrix(VI,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return UI.setFromEuler(this),this.setFromQuaternion(UI,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};zi.DEFAULT_ORDER="XYZ";var NU=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},aQ=0,GI=new L,ic=new It,Ro=new ye,wm=new L,Cf=new L,oQ=new L,sQ=new It,HI=new L(1,0,0),jI=new L(0,1,0),WI=new L(0,0,1),lQ={type:"added"},$I={type:"removed"},Wt=class extends Wl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:aQ++}),this.uuid=po(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Wt.DEFAULT_UP.clone();let e=new L,t=new zi,r=new It,i=new L(1,1,1);function n(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ye},normalMatrix:{value:new ni}}),this.matrix=new ye,this.matrixWorld=new ye,this.matrixAutoUpdate=Wt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Wt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new NU,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ic.setFromAxisAngle(e,t),this.quaternion.multiply(ic),this}rotateOnWorldAxis(e,t){return ic.setFromAxisAngle(e,t),this.quaternion.premultiply(ic),this}rotateX(e){return this.rotateOnAxis(HI,e)}rotateY(e){return this.rotateOnAxis(jI,e)}rotateZ(e){return this.rotateOnAxis(WI,e)}translateOnAxis(e,t){return GI.copy(e).applyQuaternion(this.quaternion),this.position.add(GI.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(HI,e)}translateY(e){return this.translateOnAxis(jI,e)}translateZ(e){return this.translateOnAxis(WI,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ro.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?wm.copy(e):wm.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),Cf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ro.lookAt(Cf,wm,this.up):Ro.lookAt(wm,Cf,this.up),this.quaternion.setFromRotationMatrix(Ro),i&&(Ro.extractRotation(i.matrixWorld),ic.setFromRotationMatrix(Ro),this.quaternion.premultiply(ic.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(lQ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($I)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent($I)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ro.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ro.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ro),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,n=this.children.length;i<n;i++){let a=this.children[i].getObjectsByProperty(e,t);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cf,e,oQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cf,sQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++){let n=t[r];(n.matrixWorldAutoUpdate===!0||e===!0)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,a=i.length;n<a;n++){let o=i[n];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(o,s){return o[s.uuid]===void 0&&(o[s.uuid]=s.toJSON(e)),s.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let s=o.shapes;if(Array.isArray(s))for(let l=0,u=s.length;l<u;l++){let h=s[l];n(e.shapes,h)}else n(e.shapes,s)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let s=0,l=this.material.length;s<l;s++)o.push(n(e.materials,this.material[s]));i.material=o}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){let s=this.animations[o];i.animations.push(n(e.animations,s))}}if(t){let o=a(e.geometries),s=a(e.materials),l=a(e.textures),u=a(e.images),h=a(e.shapes),c=a(e.skeletons),d=a(e.animations),f=a(e.nodes);o.length>0&&(r.geometries=o),s.length>0&&(r.materials=s),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),c.length>0&&(r.skeletons=c),d.length>0&&(r.animations=d),f.length>0&&(r.nodes=f)}return r.object=i,r;function a(o){let s=[];for(let l in o){let u=o[l];delete u.metadata,s.push(u)}return s}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};Wt.DEFAULT_UP=new L(0,1,0);Wt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Wt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Zn=new L,zo=new L,$b=new L,No=new L,nc=new L,ac=new L,qI=new L,qb=new L,Xb=new L,Yb=new L,Ni=class{constructor(e=new L,t=new L,r=new L){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Zn.subVectors(e,t),i.cross(Zn);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){Zn.subVectors(i,t),zo.subVectors(r,t),$b.subVectors(e,t);let a=Zn.dot(Zn),o=Zn.dot(zo),s=Zn.dot($b),l=zo.dot(zo),u=zo.dot($b),h=a*l-o*o;if(h===0)return n.set(-2,-1,-1);let c=1/h,d=(l*s-o*u)*c,f=(a*u-o*s)*c;return n.set(1-d-f,f,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,No),No.x>=0&&No.y>=0&&No.x+No.y<=1}static getUV(e,t,r,i,n,a,o,s){return this.getBarycoord(e,t,r,i,No),s.set(0,0),s.addScaledVector(n,No.x),s.addScaledVector(a,No.y),s.addScaledVector(o,No.z),s}static isFrontFacing(e,t,r,i){return Zn.subVectors(r,t),zo.subVectors(e,t),Zn.cross(zo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zn.subVectors(this.c,this.b),zo.subVectors(this.a,this.b),Zn.cross(zo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ni.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ni.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,n){return Ni.getUV(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return Ni.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ni.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,n=this.c,a,o;nc.subVectors(i,r),ac.subVectors(n,r),qb.subVectors(e,r);let s=nc.dot(qb),l=ac.dot(qb);if(s<=0&&l<=0)return t.copy(r);Xb.subVectors(e,i);let u=nc.dot(Xb),h=ac.dot(Xb);if(u>=0&&h<=u)return t.copy(i);let c=s*h-u*l;if(c<=0&&s>=0&&u<=0)return a=s/(s-u),t.copy(r).addScaledVector(nc,a);Yb.subVectors(e,n);let d=nc.dot(Yb),f=ac.dot(Yb);if(f>=0&&d<=f)return t.copy(n);let p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(r).addScaledVector(ac,o);let v=u*f-d*h;if(v<=0&&h-u>=0&&d-f>=0)return qI.subVectors(n,i),o=(h-u)/(h-u+(d-f)),t.copy(i).addScaledVector(qI,o);let g=1/(v+p+c);return a=p*g,o=c*g,t.copy(r).addScaledVector(nc,a).addScaledVector(ac,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},uQ=0,pD=class extends Wl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uQ++}),this.uuid=po(),this.name="",this.type="Material",this.blending=RI,this.side=Iv,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SJ,this.blendDst=MJ,this.blendEquation=wJ,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=TJ,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=IJ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rb,this.stencilZFail=Rb,this.stencilZPass=Rb,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==RI&&(r.blending=this.blending),this.side!==Iv&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(n){let a=[];for(let o in n){let s=n[o];delete s.metadata,a.push(s)}return a}if(t){let n=i(e.textures),a=i(e.images);n.length>0&&(r.textures=n),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Ag=class extends pD{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=AJ,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},yr=new L,Sm=new re,ft=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=GM,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Sm.fromBufferAttribute(this,t),Sm.applyMatrix3(e),this.setXY(t,Sm.x,Sm.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix3(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix4(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)yr.fromBufferAttribute(this,t),yr.applyNormalMatrix(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)yr.fromBufferAttribute(this,t),yr.transformDirection(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Qo(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Qo(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Qo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Qo(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),r=Vt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),r=Vt(r,this.array),i=Vt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),r=Vt(r,this.array),i=Vt(i,this.array),n=Vt(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==GM&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},hQ=class extends ft{constructor(e,t,r){super(new Uint16Array(e),t,r)}},Kp=class extends ft{constructor(e,t,r){super(new Uint32Array(e),t,r)}},Le=class extends ft{constructor(e,t,r){super(new Float32Array(e),t,r)}},cQ=0,dn=new ye,Zb=new Wt,oc=new L,Ji=new wr,Df=new wr,Er=new L,Ke=class extends Wl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cQ++}),this.uuid=po(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YJ(e)?Kp:hQ)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new ni().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return dn.makeRotationFromQuaternion(e),this.applyMatrix4(dn),this}rotateX(e){return dn.makeRotationX(e),this.applyMatrix4(dn),this}rotateY(e){return dn.makeRotationY(e),this.applyMatrix4(dn),this}rotateZ(e){return dn.makeRotationZ(e),this.applyMatrix4(dn),this}translate(e,t,r){return dn.makeTranslation(e,t,r),this.applyMatrix4(dn),this}scale(e,t,r){return dn.makeScale(e,t,r),this.applyMatrix4(dn),this}lookAt(e){return Zb.lookAt(e),Zb.updateMatrix(),this.applyMatrix4(Zb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(oc).negate(),this.translate(oc.x,oc.y,oc.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Le(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new wr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new L(-1/0,-1/0,-1/0),new L(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];Ji.setFromBufferAttribute(n),this.morphTargetsRelative?(Er.addVectors(this.boundingBox.min,Ji.min),this.boundingBox.expandByPoint(Er),Er.addVectors(this.boundingBox.max,Ji.max),this.boundingBox.expandByPoint(Er)):(this.boundingBox.expandByPoint(Ji.min),this.boundingBox.expandByPoint(Ji.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new L,1/0);return}if(e){let r=this.boundingSphere.center;if(Ji.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){let o=t[n];Df.setFromBufferAttribute(o),this.morphTargetsRelative?(Er.addVectors(Ji.min,Df.min),Ji.expandByPoint(Er),Er.addVectors(Ji.max,Df.max),Ji.expandByPoint(Er)):(Ji.expandByPoint(Df.min),Ji.expandByPoint(Df.max))}Ji.getCenter(r);let i=0;for(let n=0,a=e.count;n<a;n++)Er.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(Er));if(t)for(let n=0,a=t.length;n<a;n++){let o=t[n],s=this.morphTargetsRelative;for(let l=0,u=o.count;l<u;l++)Er.fromBufferAttribute(o,l),s&&(oc.fromBufferAttribute(e,l),Er.add(oc)),i=Math.max(i,r.distanceToSquared(Er))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,a=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ft(new Float32Array(4*o),4));let s=this.getAttribute("tangent").array,l=[],u=[];for(let A=0;A<o;A++)l[A]=new L,u[A]=new L;let h=new L,c=new L,d=new L,f=new re,p=new re,v=new re,g=new L,m=new L;function y(A,T,C){h.fromArray(i,A*3),c.fromArray(i,T*3),d.fromArray(i,C*3),f.fromArray(a,A*2),p.fromArray(a,T*2),v.fromArray(a,C*2),c.sub(h),d.sub(h),p.sub(f),v.sub(f);let D=1/(p.x*v.y-v.x*p.y);!isFinite(D)||(g.copy(c).multiplyScalar(v.y).addScaledVector(d,-p.y).multiplyScalar(D),m.copy(d).multiplyScalar(p.x).addScaledVector(c,-v.x).multiplyScalar(D),l[A].add(g),l[T].add(g),l[C].add(g),u[A].add(m),u[T].add(m),u[C].add(m))}let _=this.groups;_.length===0&&(_=[{start:0,count:r.length}]);for(let A=0,T=_.length;A<T;++A){let C=_[A],D=C.start,P=C.count;for(let E=D,O=D+P;E<O;E+=3)y(r[E+0],r[E+1],r[E+2])}let x=new L,w=new L,b=new L,S=new L;function M(A){b.fromArray(n,A*3),S.copy(b);let T=l[A];x.copy(T),x.sub(b.multiplyScalar(b.dot(T))).normalize(),w.crossVectors(S,T);let C=w.dot(u[A])<0?-1:1;s[A*4]=x.x,s[A*4+1]=x.y,s[A*4+2]=x.z,s[A*4+3]=C}for(let A=0,T=_.length;A<T;++A){let C=_[A],D=C.start,P=C.count;for(let E=D,O=D+P;E<O;E+=3)M(r[E+0]),M(r[E+1]),M(r[E+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ft(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let c=0,d=r.count;c<d;c++)r.setXYZ(c,0,0,0);let i=new L,n=new L,a=new L,o=new L,s=new L,l=new L,u=new L,h=new L;if(e)for(let c=0,d=e.count;c<d;c+=3){let f=e.getX(c+0),p=e.getX(c+1),v=e.getX(c+2);i.fromBufferAttribute(t,f),n.fromBufferAttribute(t,p),a.fromBufferAttribute(t,v),u.subVectors(a,n),h.subVectors(i,n),u.cross(h),o.fromBufferAttribute(r,f),s.fromBufferAttribute(r,p),l.fromBufferAttribute(r,v),o.add(u),s.add(u),l.add(u),r.setXYZ(f,o.x,o.y,o.z),r.setXYZ(p,s.x,s.y,s.z),r.setXYZ(v,l.x,l.y,l.z)}else for(let c=0,d=t.count;c<d;c+=3)i.fromBufferAttribute(t,c+0),n.fromBufferAttribute(t,c+1),a.fromBufferAttribute(t,c+2),u.subVectors(a,n),h.subVectors(i,n),u.cross(h),r.setXYZ(c+0,u.x,u.y,u.z),r.setXYZ(c+1,u.x,u.y,u.z),r.setXYZ(c+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Er.fromBufferAttribute(e,t),Er.normalize(),e.setXYZ(t,Er.x,Er.y,Er.z)}toNonIndexed(){function e(o,s){let l=o.array,u=o.itemSize,h=o.normalized,c=new l.constructor(s.length*u),d=0,f=0;for(let p=0,v=s.length;p<v;p++){o.isInterleavedBufferAttribute?d=s[p]*o.data.stride+o.offset:d=s[p]*u;for(let g=0;g<u;g++)c[f++]=l[d++]}return new ft(c,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Ke,r=this.index.array,i=this.attributes;for(let o in i){let s=i[o],l=e(s,r);t.setAttribute(o,l)}let n=this.morphAttributes;for(let o in n){let s=[],l=n[o];for(let u=0,h=l.length;u<h;u++){let c=l[u],d=e(c,r);s.push(d)}t.morphAttributes[o]=s}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let o=0,s=a.length;o<s;o++){let l=a[o];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let s=this.parameters;for(let l in s)s[l]!==void 0&&(e[l]=s[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let s in r){let l=r[s];e.data.attributes[s]=l.toJSON(e.data)}let i={},n=!1;for(let s in this.morphAttributes){let l=this.morphAttributes[s],u=[];for(let h=0,c=l.length;h<c;h++){let d=l[h];u.push(d.toJSON(e.data))}u.length>0&&(i[s]=u,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let u=i[l];this.setAttribute(l,u.clone(t))}let n=e.morphAttributes;for(let l in n){let u=[],h=n[l];for(let c=0,d=h.length;c<d;c++)u.push(h[c].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let l=0,u=a.length;l<u;l++){let h=a[l];this.addGroup(h.start,h.count,h.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let s=e.boundingSphere;return s!==null&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},XI=new ye,sc=new qd,Kb=new Vn,Pf=new L,Lf=new L,Ef=new L,Jb=new L,Mm=new L,Tm=new re,Am=new re,Cm=new re,Qb=new L,Dm=new L,vD=class extends Wt{constructor(e=new Ke,t=new Ag){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,n=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let o=this.morphTargetInfluences;if(n&&o){Mm.set(0,0,0);for(let s=0,l=n.length;s<l;s++){let u=o[s],h=n[s];u!==0&&(Jb.fromBufferAttribute(h,e),a?Mm.addScaledVector(Jb,u):Mm.addScaledVector(Jb.sub(t),u))}t.add(Mm)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Kb.copy(r.boundingSphere),Kb.applyMatrix4(n),e.ray.intersectsSphere(Kb)===!1)||(XI.copy(n).invert(),sc.copy(e.ray).applyMatrix4(XI),r.boundingBox!==null&&sc.intersectsBox(r.boundingBox)===!1))return;let a,o=r.index,s=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv2,h=r.groups,c=r.drawRange;if(o!==null)if(Array.isArray(i))for(let d=0,f=h.length;d<f;d++){let p=h[d],v=i[p.materialIndex],g=Math.max(p.start,c.start),m=Math.min(o.count,Math.min(p.start+p.count,c.start+c.count));for(let y=g,_=m;y<_;y+=3){let x=o.getX(y),w=o.getX(y+1),b=o.getX(y+2);a=Pm(this,v,e,sc,l,u,x,w,b),a&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{let d=Math.max(0,c.start),f=Math.min(o.count,c.start+c.count);for(let p=d,v=f;p<v;p+=3){let g=o.getX(p),m=o.getX(p+1),y=o.getX(p+2);a=Pm(this,i,e,sc,l,u,g,m,y),a&&(a.faceIndex=Math.floor(p/3),t.push(a))}}else if(s!==void 0)if(Array.isArray(i))for(let d=0,f=h.length;d<f;d++){let p=h[d],v=i[p.materialIndex],g=Math.max(p.start,c.start),m=Math.min(s.count,Math.min(p.start+p.count,c.start+c.count));for(let y=g,_=m;y<_;y+=3){let x=y,w=y+1,b=y+2;a=Pm(this,v,e,sc,l,u,x,w,b),a&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{let d=Math.max(0,c.start),f=Math.min(s.count,c.start+c.count);for(let p=d,v=f;p<v;p+=3){let g=p,m=p+1,y=p+2;a=Pm(this,i,e,sc,l,u,g,m,y),a&&(a.faceIndex=Math.floor(p/3),t.push(a))}}}};function dQ(e,t,r,i,n,a,o,s){let l;if(t.side===EU?l=i.intersectTriangle(o,a,n,!0,s):l=i.intersectTriangle(n,a,o,t.side===Iv,s),l===null)return null;Dm.copy(s),Dm.applyMatrix4(e.matrixWorld);let u=r.ray.origin.distanceTo(Dm);return u<r.near||u>r.far?null:{distance:u,point:Dm.clone(),object:e}}function Pm(e,t,r,i,n,a,o,s,l){e.getVertexPosition(o,Pf),e.getVertexPosition(s,Lf),e.getVertexPosition(l,Ef);let u=dQ(e,t,r,i,Pf,Lf,Ef,Qb);if(u){n&&(Tm.fromBufferAttribute(n,o),Am.fromBufferAttribute(n,s),Cm.fromBufferAttribute(n,l),u.uv=Ni.getUV(Qb,Pf,Lf,Ef,Tm,Am,Cm,new re)),a&&(Tm.fromBufferAttribute(a,o),Am.fromBufferAttribute(a,s),Cm.fromBufferAttribute(a,l),u.uv2=Ni.getUV(Qb,Pf,Lf,Ef,Tm,Am,Cm,new re));let h={a:o,b:s,c:l,normal:new L,materialIndex:0};Ni.getNormal(Pf,Lf,Ef,h.normal),u.face=h}return u}var Ah=class extends Ke{constructor(e=1,t=1,r=1,i=1,n=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a};let o=this;i=Math.floor(i),n=Math.floor(n),a=Math.floor(a);let s=[],l=[],u=[],h=[],c=0,d=0;f("z","y","x",-1,-1,r,t,e,a,n,0),f("z","y","x",1,-1,r,t,-e,a,n,1),f("x","z","y",1,1,e,r,t,i,a,2),f("x","z","y",1,-1,e,r,-t,i,a,3),f("x","y","z",1,-1,e,t,r,i,n,4),f("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(s),this.setAttribute("position",new Le(l,3)),this.setAttribute("normal",new Le(u,3)),this.setAttribute("uv",new Le(h,2));function f(p,v,g,m,y,_,x,w,b,S,M){let A=_/b,T=x/S,C=_/2,D=x/2,P=w/2,E=b+1,O=S+1,z=0,B=0,N=new L;for(let F=0;F<O;F++){let G=F*T-D;for(let H=0;H<E;H++){let $=H*A-C;N[p]=$*m,N[v]=G*y,N[g]=P,l.push(N.x,N.y,N.z),N[p]=0,N[v]=0,N[g]=w>0?1:-1,u.push(N.x,N.y,N.z),h.push(H/b),h.push(1-F/S),z+=1}}for(let F=0;F<S;F++)for(let G=0;G<b;G++){let H=c+G+E*F,$=c+G+E*(F+1),Z=c+(G+1)+E*(F+1),X=c+(G+1)+E*F;s.push(H,$,X),s.push($,Z,X),B+=6}o.addGroup(d,B,M),d+=B,c+=z}}static fromJSON(e){return new Ah(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function gD(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function fi(e){let t={};for(let r=0;r<e.length;r++){let i=gD(e[r]);for(let n in i)t[n]=i[n]}return t}function fQ(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}var Cg={clone:gD,merge:fi},pQ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vQ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Xd=class extends pD{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=pQ,this.fragmentShader=vQ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gD(e.uniforms),this.uniformsGroups=fQ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},Yd=class extends Wt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ye,this.projectionMatrix=new ye,this.projectionMatrixInverse=new ye}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},mD=class extends Yd{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Ov*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Yp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ov*2*Math.atan(Math.tan(Yp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Yp*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,a=this.view;if(this.view!==null&&this.view.enabled){let s=a.fullWidth,l=a.fullHeight;n+=a.offsetX*i/s,t-=a.offsetY*r/l,i*=a.width/s,r*=a.height/l}let o=this.filmOffset;o!==0&&(n+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},kU=class extends Gi{constructor(e,t,r,i,n,a,o,s,l,u){e=e!==void 0?e:[],t=t!==void 0?t:OU,super(e,t,r,i,n,a,o,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},ew=new L,gQ=new L,mQ=new ni,Cn=class{constructor(e=new L(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=ew.subVectors(r,t).cross(gQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(ew),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||mQ.getNormalMatrix(e),i=this.coplanarPoint(ew).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},lc=new Vn,Lm=new L,yQ=class{constructor(e=new Cn,t=new Cn,r=new Cn,i=new Cn,n=new Cn,a=new Cn){this.planes=[e,t,r,i,n,a]}set(e,t,r,i,n,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(n),o[5].copy(a),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],h=r[7],c=r[8],d=r[9],f=r[10],p=r[11],v=r[12],g=r[13],m=r[14],y=r[15];return t[0].setComponents(o-i,h-s,p-c,y-v).normalize(),t[1].setComponents(o+i,h+s,p+c,y+v).normalize(),t[2].setComponents(o+n,h+l,p+d,y+g).normalize(),t[3].setComponents(o-n,h-l,p-d,y-g).normalize(),t[4].setComponents(o-a,h-u,p-f,y-m).normalize(),t[5].setComponents(o+a,h+u,p+f,y+m).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),lc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(lc)}intersectsSprite(e){return lc.center.set(0,0,0),lc.radius=.7071067811865476,lc.applyMatrix4(e.matrixWorld),this.intersectsSphere(lc)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(Lm.x=i.normal.x>0?e.max.x:e.min.x,Lm.y=i.normal.y>0?e.max.y:e.min.y,Lm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Lm)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}},yD=class extends Ke{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,a=t/2,o=Math.floor(r),s=Math.floor(i),l=o+1,u=s+1,h=e/o,c=t/s,d=[],f=[],p=[],v=[];for(let g=0;g<u;g++){let m=g*c-a;for(let y=0;y<l;y++){let _=y*h-n;f.push(_,-m,0),p.push(0,0,1),v.push(y/o),v.push(1-g/s)}}for(let g=0;g<s;g++)for(let m=0;m<o;m++){let y=m+l*g,_=m+l*(g+1),x=m+1+l*(g+1),w=m+1+l*g;d.push(y,_,w),d.push(_,x,w)}this.setIndex(d),this.setAttribute("position",new Le(f,3)),this.setAttribute("normal",new Le(p,3)),this.setAttribute("uv",new Le(v,2))}static fromJSON(e){return new yD(e.width,e.height,e.widthSegments,e.heightSegments)}},_Q=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,xQ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bQ=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,wQ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,SQ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,MQ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,TQ="vec3 transformed = vec3( position );",AQ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,CQ=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,DQ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,PQ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,LQ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,EQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,IQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,OQ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,RQ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,NQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,kQ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,BQ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,FQ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,VQ=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,UQ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,GQ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,HQ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jQ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,WQ="gl_FragColor = linearToOutputTexel( gl_FragColor );",$Q=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XQ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,YQ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ZQ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,KQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,JQ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,QQ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,eee=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,tee=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ree=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,iee=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,nee=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,aee=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,oee=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,see=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lee=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,uee=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hee=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,cee=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,dee=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,fee=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,pee=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vee=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,gee=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,mee=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,yee=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_ee=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xee=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,bee=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,wee=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,See=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Mee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Tee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Aee=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Cee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Dee=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Pee=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Lee=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Eee=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Iee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Oee=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Ree=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Nee=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kee=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Bee=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Fee=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Vee=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Uee=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Gee=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Hee=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,jee=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Wee=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$ee=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qee=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Xee=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yee=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Zee=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Kee=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Jee=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Qee=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ete=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,tte=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,rte=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ite=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nte=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ate=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ote=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ste=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,lte=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,ute=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,hte=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,cte=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,dte=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,fte=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,pte=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,vte=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,gte=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,mte=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yte=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_te=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xte=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,bte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wte=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ste=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Mte=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Tte=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ate=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Cte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Dte=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Pte=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Lte=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ete=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Ite=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ote=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rte=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zte=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Nte=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kte=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Bte=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Fte=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vte=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ute=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Gte=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hte=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jte=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wte=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,$te=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qte=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xte=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Yte=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Zte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ct={alphamap_fragment:_Q,alphamap_pars_fragment:xQ,alphatest_fragment:bQ,alphatest_pars_fragment:wQ,aomap_fragment:SQ,aomap_pars_fragment:MQ,begin_vertex:TQ,beginnormal_vertex:AQ,bsdfs:CQ,iridescence_fragment:DQ,bumpmap_pars_fragment:PQ,clipping_planes_fragment:LQ,clipping_planes_pars_fragment:EQ,clipping_planes_pars_vertex:IQ,clipping_planes_vertex:OQ,color_fragment:RQ,color_pars_fragment:zQ,color_pars_vertex:NQ,color_vertex:kQ,common:BQ,cube_uv_reflection_fragment:FQ,defaultnormal_vertex:VQ,displacementmap_pars_vertex:UQ,displacementmap_vertex:GQ,emissivemap_fragment:HQ,emissivemap_pars_fragment:jQ,encodings_fragment:WQ,encodings_pars_fragment:$Q,envmap_fragment:qQ,envmap_common_pars_fragment:XQ,envmap_pars_fragment:YQ,envmap_pars_vertex:ZQ,envmap_physical_pars_fragment:lee,envmap_vertex:KQ,fog_vertex:JQ,fog_pars_vertex:QQ,fog_fragment:eee,fog_pars_fragment:tee,gradientmap_pars_fragment:ree,lightmap_fragment:iee,lightmap_pars_fragment:nee,lights_lambert_fragment:aee,lights_lambert_pars_fragment:oee,lights_pars_begin:see,lights_toon_fragment:uee,lights_toon_pars_fragment:hee,lights_phong_fragment:cee,lights_phong_pars_fragment:dee,lights_physical_fragment:fee,lights_physical_pars_fragment:pee,lights_fragment_begin:vee,lights_fragment_maps:gee,lights_fragment_end:mee,logdepthbuf_fragment:yee,logdepthbuf_pars_fragment:_ee,logdepthbuf_pars_vertex:xee,logdepthbuf_vertex:bee,map_fragment:wee,map_pars_fragment:See,map_particle_fragment:Mee,map_particle_pars_fragment:Tee,metalnessmap_fragment:Aee,metalnessmap_pars_fragment:Cee,morphcolor_vertex:Dee,morphnormal_vertex:Pee,morphtarget_pars_vertex:Lee,morphtarget_vertex:Eee,normal_fragment_begin:Iee,normal_fragment_maps:Oee,normal_pars_fragment:Ree,normal_pars_vertex:zee,normal_vertex:Nee,normalmap_pars_fragment:kee,clearcoat_normal_fragment_begin:Bee,clearcoat_normal_fragment_maps:Fee,clearcoat_pars_fragment:Vee,iridescence_pars_fragment:Uee,output_fragment:Gee,packing:Hee,premultiplied_alpha_fragment:jee,project_vertex:Wee,dithering_fragment:$ee,dithering_pars_fragment:qee,roughnessmap_fragment:Xee,roughnessmap_pars_fragment:Yee,shadowmap_pars_fragment:Zee,shadowmap_pars_vertex:Kee,shadowmap_vertex:Jee,shadowmask_pars_fragment:Qee,skinbase_vertex:ete,skinning_pars_vertex:tte,skinning_vertex:rte,skinnormal_vertex:ite,specularmap_fragment:nte,specularmap_pars_fragment:ate,tonemapping_fragment:ote,tonemapping_pars_fragment:ste,transmission_fragment:lte,transmission_pars_fragment:ute,uv_pars_fragment:hte,uv_pars_vertex:cte,uv_vertex:dte,uv2_pars_fragment:fte,uv2_pars_vertex:pte,uv2_vertex:vte,worldpos_vertex:gte,background_vert:mte,background_frag:yte,backgroundCube_vert:_te,backgroundCube_frag:xte,cube_vert:bte,cube_frag:wte,depth_vert:Ste,depth_frag:Mte,distanceRGBA_vert:Tte,distanceRGBA_frag:Ate,equirect_vert:Cte,equirect_frag:Dte,linedashed_vert:Pte,linedashed_frag:Lte,meshbasic_vert:Ete,meshbasic_frag:Ite,meshlambert_vert:Ote,meshlambert_frag:Rte,meshmatcap_vert:zte,meshmatcap_frag:Nte,meshnormal_vert:kte,meshnormal_frag:Bte,meshphong_vert:Fte,meshphong_frag:Vte,meshphysical_vert:Ute,meshphysical_frag:Gte,meshtoon_vert:Hte,meshtoon_frag:jte,points_vert:Wte,points_frag:$te,shadow_vert:qte,shadow_frag:Xte,sprite_vert:Yte,sprite_frag:Zte},be={common:{diffuse:{value:new Qe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ni},uv2Transform:{value:new ni},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new re(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ni}},sprite:{diffuse:{value:new Qe(16777215)},opacity:{value:1},center:{value:new re(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ni}}},YI={basic:{uniforms:fi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.fog]),vertexShader:ct.meshbasic_vert,fragmentShader:ct.meshbasic_frag},lambert:{uniforms:fi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new Qe(0)}}]),vertexShader:ct.meshlambert_vert,fragmentShader:ct.meshlambert_frag},phong:{uniforms:fi([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new Qe(0)},specular:{value:new Qe(1118481)},shininess:{value:30}}]),vertexShader:ct.meshphong_vert,fragmentShader:ct.meshphong_frag},standard:{uniforms:fi([be.common,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.roughnessmap,be.metalnessmap,be.fog,be.lights,{emissive:{value:new Qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ct.meshphysical_vert,fragmentShader:ct.meshphysical_frag},toon:{uniforms:fi([be.common,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.gradientmap,be.fog,be.lights,{emissive:{value:new Qe(0)}}]),vertexShader:ct.meshtoon_vert,fragmentShader:ct.meshtoon_frag},matcap:{uniforms:fi([be.common,be.bumpmap,be.normalmap,be.displacementmap,be.fog,{matcap:{value:null}}]),vertexShader:ct.meshmatcap_vert,fragmentShader:ct.meshmatcap_frag},points:{uniforms:fi([be.points,be.fog]),vertexShader:ct.points_vert,fragmentShader:ct.points_frag},dashed:{uniforms:fi([be.common,be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ct.linedashed_vert,fragmentShader:ct.linedashed_frag},depth:{uniforms:fi([be.common,be.displacementmap]),vertexShader:ct.depth_vert,fragmentShader:ct.depth_frag},normal:{uniforms:fi([be.common,be.bumpmap,be.normalmap,be.displacementmap,{opacity:{value:1}}]),vertexShader:ct.meshnormal_vert,fragmentShader:ct.meshnormal_frag},sprite:{uniforms:fi([be.sprite,be.fog]),vertexShader:ct.sprite_vert,fragmentShader:ct.sprite_frag},background:{uniforms:{uvTransform:{value:new ni},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ct.background_vert,fragmentShader:ct.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ct.backgroundCube_vert,fragmentShader:ct.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ct.cube_vert,fragmentShader:ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ct.equirect_vert,fragmentShader:ct.equirect_frag},distanceRGBA:{uniforms:fi([be.common,be.displacementmap,{referencePosition:{value:new L},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ct.distanceRGBA_vert,fragmentShader:ct.distanceRGBA_frag},shadow:{uniforms:fi([be.lights,be.fog,{color:{value:new Qe(0)},opacity:{value:1}}]),vertexShader:ct.shadow_vert,fragmentShader:ct.shadow_frag}};YI.physical={uniforms:fi([YI.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new re(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Qe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Qe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Qe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ct.meshphysical_vert,fragmentShader:ct.meshphysical_frag};var v1=class extends Yd{constructor(e=-1,t=1,r=1,i=-1,n=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,a=r+e,o=i+t,s=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,a=n+l*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(n,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};new v1;new Qe;var Lu=(1+Math.sqrt(5))/2,uc=1/Lu;new L(1,1,1),new L(-1,1,1),new L(1,1,-1),new L(-1,1,-1),new L(0,Lu,uc),new L(0,Lu,-uc),new L(uc,0,Lu),new L(-uc,0,Lu),new L(Lu,uc,0),new L(-Lu,uc,0);new Gi;new eQ;new tQ;new kU;var BU=class extends Wt{constructor(){super(),this.isGroup=!0,this.type="Group"}},FU=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Qe(e),this.near=t,this.far=r}clone(){return new FU(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},VU=class extends Wt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},Kte=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=GM,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=po()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=po()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=po()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},ui=new L,HM=class{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ui.fromBufferAttribute(this,t),ui.applyMatrix4(e),this.setXYZ(t,ui.x,ui.y,ui.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ui.fromBufferAttribute(this,t),ui.applyNormalMatrix(e),this.setXYZ(t,ui.x,ui.y,ui.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ui.fromBufferAttribute(this,t),ui.transformDirection(e),this.setXYZ(t,ui.x,ui.y,ui.z);return this}setX(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Qo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Qo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Qo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Qo(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),r=Vt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),r=Vt(r,this.array),i=Vt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),r=Vt(r,this.array),i=Vt(i,this.array),n=Vt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new ft(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new HM(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Jte=class extends ft{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Bh=class extends pD{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Qe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},ZI=new L,KI=new L,JI=new ye,tw=new qd,Em=new Vn,jM=class extends Wt{constructor(e=new Ke,t=new Bh){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)ZI.fromBufferAttribute(t,i-1),KI.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=ZI.distanceTo(KI);e.setAttribute("lineDistance",new Le(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Em.copy(r.boundingSphere),Em.applyMatrix4(i),Em.radius+=n,e.ray.intersectsSphere(Em)===!1)return;JI.copy(i).invert(),tw.copy(e.ray).applyMatrix4(JI);let o=n/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new L,u=new L,h=new L,c=new L,d=this.isLineSegments?2:1,f=r.index,p=r.attributes.position;if(f!==null){let v=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count);for(let m=v,y=g-1;m<y;m+=d){let _=f.getX(m),x=f.getX(m+1);if(l.fromBufferAttribute(p,_),u.fromBufferAttribute(p,x),tw.distanceSqToSegment(l,u,c,h)>s)continue;c.applyMatrix4(this.matrixWorld);let w=e.ray.origin.distanceTo(c);w<e.near||w>e.far||t.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else{let v=Math.max(0,a.start),g=Math.min(p.count,a.start+a.count);for(let m=v,y=g-1;m<y;m+=d){if(l.fromBufferAttribute(p,m),u.fromBufferAttribute(p,m+1),tw.distanceSqToSegment(l,u,c,h)>s)continue;c.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(c);_<e.near||_>e.far||t.push({distance:_,point:h.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},QI=new L,eO=new L,Dg=class extends jM{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)QI.fromBufferAttribute(t,i),eO.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+QI.distanceTo(eO);e.setAttribute("lineDistance",new Le(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Qte=class extends Gi{constructor(e,t,r,i,n,a,o,s,l){super(e,t,r,i,n,a,o,s,l),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:VM,this.magFilter=n!==void 0?n:VM,this.generateMipmaps=!1;let u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},Ao=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,a;t?a=t:a=e*r[n-1];let o=0,s=n-1,l;for(;o<=s;)if(i=Math.floor(o+(s-o)/2),l=r[i]-a,l<0)o=i+1;else if(l>0)s=i-1;else{s=i;break}if(i=s,r[i]===a)return i/(n-1);let u=r[i],h=r[i+1]-u,c=(a-u)/h;return(i+c)/(n-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);let n=this.getPoint(r),a=this.getPoint(i),o=t||(n.isVector2?new re:new L);return o.copy(a).sub(n).normalize(),o}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new L,i=[],n=[],a=[],o=new L,s=new ye;for(let d=0;d<=e;d++){let f=d/e;i[d]=this.getTangentAt(f,new L)}n[0]=new L,a[0]=new L;let l=Number.MAX_VALUE,u=Math.abs(i[0].x),h=Math.abs(i[0].y),c=Math.abs(i[0].z);u<=l&&(l=u,r.set(1,0,0)),h<=l&&(l=h,r.set(0,1,0)),c<=l&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],o),a[0].crossVectors(i[0],n[0]);for(let d=1;d<=e;d++){if(n[d]=n[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();let f=Math.acos(Rr(i[d-1].dot(i[d]),-1,1));n[d].applyMatrix4(s.makeRotationAxis(o,f))}a[d].crossVectors(i[d],n[d])}if(t===!0){let d=Math.acos(Rr(n[0].dot(n[e]),-1,1));d/=e,i[0].dot(o.crossVectors(n[0],n[e]))>0&&(d=-d);for(let f=1;f<=e;f++)n[f].applyMatrix4(s.makeRotationAxis(i[f],d*f)),a[f].crossVectors(i[f],n[f])}return{tangents:i,normals:n,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},hx=class extends Ao{constructor(e=0,t=0,r=1,i=1,n=0,a=Math.PI*2,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t){let r=t||new re,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,a=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(a?n=0:n=i),this.aClockwise===!0&&!a&&(n===i?n=-i:n=n-i);let o=this.aStartAngle+e*n,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),c=s-this.aX,d=l-this.aY;s=c*u-d*h+this.aX,l=c*h+d*u+this.aY}return r.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},ere=class extends hx{constructor(e,t,r,i,n,a){super(e,t,r,r,i,n,a),this.isArcCurve=!0,this.type="ArcCurve"}};function _D(){let e=0,t=0,r=0,i=0;function n(a,o,s,l){e=a,t=s,r=-3*a+3*o-2*s-l,i=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,u){n(o,s,u*(s-a),u*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,u,h,c){let d=(o-a)/u-(s-a)/(u+h)+(s-o)/h,f=(s-o)/h-(l-o)/(h+c)+(l-s)/c;d*=h,f*=h,n(o,s,d,f)},calc:function(a){let o=a*a,s=o*a;return e+t*a+r*o+i*s}}}var Im=new L,rw=new _D,iw=new _D,nw=new _D,tre=class extends Ao{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new L){let r=t,i=this.points,n=i.length,a=(n-(this.closed?0:1))*e,o=Math.floor(a),s=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/n)+1)*n:s===0&&o===n-1&&(o=n-2,s=1);let l,u;this.closed||o>0?l=i[(o-1)%n]:(Im.subVectors(i[0],i[1]).add(i[0]),l=Im);let h=i[o%n],c=i[(o+1)%n];if(this.closed||o+2<n?u=i[(o+2)%n]:(Im.subVectors(i[n-1],i[n-2]).add(i[n-1]),u=Im),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(h),d),p=Math.pow(h.distanceToSquared(c),d),v=Math.pow(c.distanceToSquared(u),d);p<1e-4&&(p=1),f<1e-4&&(f=p),v<1e-4&&(v=p),rw.initNonuniformCatmullRom(l.x,h.x,c.x,u.x,f,p,v),iw.initNonuniformCatmullRom(l.y,h.y,c.y,u.y,f,p,v),nw.initNonuniformCatmullRom(l.z,h.z,c.z,u.z,f,p,v)}else this.curveType==="catmullrom"&&(rw.initCatmullRom(l.x,h.x,c.x,u.x,this.tension),iw.initCatmullRom(l.y,h.y,c.y,u.y,this.tension),nw.initCatmullRom(l.z,h.z,c.z,u.z,this.tension));return r.set(rw.calc(s),iw.calc(s),nw.calc(s)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new L().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function tO(e,t,r,i,n){let a=(i-t)*.5,o=(n-r)*.5,s=e*e,l=e*s;return(2*r-2*i+a+o)*l+(-3*r+3*i-2*a-o)*s+a*e+r}function rre(e,t){let r=1-e;return r*r*t}function ire(e,t){return 2*(1-e)*e*t}function nre(e,t){return e*e*t}function Jp(e,t,r,i){return rre(e,t)+ire(e,r)+nre(e,i)}function are(e,t){let r=1-e;return r*r*r*t}function ore(e,t){let r=1-e;return 3*r*r*e*t}function sre(e,t){return 3*(1-e)*e*e*t}function lre(e,t){return e*e*e*t}function Qp(e,t,r,i,n){return are(e,t)+ore(e,r)+sre(e,i)+lre(e,n)}var da=class extends Ao{constructor(e=new re,t=new re,r=new re,i=new re){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new re){let r=t,i=this.v0,n=this.v1,a=this.v2,o=this.v3;return r.set(Qp(e,i.x,n.x,a.x,o.x),Qp(e,i.y,n.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},S0=class extends Ao{constructor(e=new L,t=new L,r=new L,i=new L){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new L){let r=t,i=this.v0,n=this.v1,a=this.v2,o=this.v3;return r.set(Qp(e,i.x,n.x,a.x,o.x),Qp(e,i.y,n.y,a.y,o.y),Qp(e,i.z,n.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},_a=class extends Ao{constructor(e=new re,t=new re){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new re){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new re;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},UU=class extends Ao{constructor(e=new L,t=new L){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new L){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Ol=class extends Ao{constructor(e=new re,t=new re,r=new re){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new re){let r=t,i=this.v0,n=this.v1,a=this.v2;return r.set(Jp(e,i.x,n.x,a.x),Jp(e,i.y,n.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ure=class extends Ao{constructor(e=new L,t=new L,r=new L){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new L){let r=t,i=this.v0,n=this.v1,a=this.v2;return r.set(Jp(e,i.x,n.x,a.x),Jp(e,i.y,n.y,a.y),Jp(e,i.z,n.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},xD=class extends Ao{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new re){let r=t,i=this.points,n=(i.length-1)*e,a=Math.floor(n),o=n-a,s=i[a===0?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],h=i[a>i.length-3?i.length-1:a+2];return r.set(tO(o,s.x,l.x,u.x,h.x),tO(o,s.y,l.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new re().fromArray(i))}return this}},hre=Object.freeze({__proto__:null,ArcCurve:ere,CatmullRomCurve3:tre,CubicBezierCurve:da,CubicBezierCurve3:S0,EllipseCurve:hx,LineCurve:_a,LineCurve3:UU,QuadraticBezierCurve:Ol,QuadraticBezierCurve3:ure,SplineCurve:xD}),GU=class extends Ao{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new _a(t,e))}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),n=0;for(;n<i.length;){if(i[n]>=r){let a=i[n]-r,o=this.curves[n],s=o.getLength(),l=s===0?0:1-a/s;return o.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let a=n[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let l=0;l<s.length;l++){let u=s[l];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new hre[i.type]().fromJSON(i))}return this}},g1=class extends GU{constructor(e){super(),this.type="Path",this.currentPoint=new re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new _a(this.currentPoint.clone(),new re(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new Ol(this.currentPoint.clone(),new re(e,t),new re(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,a){let o=new da(this.currentPoint.clone(),new re(e,t),new re(r,i),new re(n,a));return this.curves.push(o),this.currentPoint.set(n,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new xD(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,a){let o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,r,i,n,a),this}absarc(e,t,r,i,n,a){return this.absellipse(e,t,r,r,i,n,a),this}ellipse(e,t,r,i,n,a,o,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,i,n,a,o,s),this}absellipse(e,t,r,i,n,a,o,s){let l=new hx(e,t,r,i,n,a,o,s);if(this.curves.length>0){let h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},HU=class extends Ke{constructor(e=[new re(0,-.5),new re(.5,0),new re(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Rr(i,0,Math.PI*2);let n=[],a=[],o=[],s=[],l=[],u=1/t,h=new L,c=new re,d=new L,f=new L,p=new L,v=0,g=0;for(let m=0;m<=e.length-1;m++)switch(m){case 0:v=e[m+1].x-e[m].x,g=e[m+1].y-e[m].y,d.x=g*1,d.y=-v,d.z=g*0,p.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:v=e[m+1].x-e[m].x,g=e[m+1].y-e[m].y,d.x=g*1,d.y=-v,d.z=g*0,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),s.push(d.x,d.y,d.z),p.copy(f)}for(let m=0;m<=t;m++){let y=r+m*u*i,_=Math.sin(y),x=Math.cos(y);for(let w=0;w<=e.length-1;w++){h.x=e[w].x*_,h.y=e[w].y,h.z=e[w].x*x,a.push(h.x,h.y,h.z),c.x=m/t,c.y=w/(e.length-1),o.push(c.x,c.y);let b=s[3*w+0]*_,S=s[3*w+1],M=s[3*w+0]*x;l.push(b,S,M)}}for(let m=0;m<t;m++)for(let y=0;y<e.length-1;y++){let _=y+m*e.length,x=_,w=_+e.length,b=_+e.length+1,S=_+1;n.push(x,w,S),n.push(b,S,w)}this.setIndex(n),this.setAttribute("position",new Le(a,3)),this.setAttribute("uv",new Le(o,2)),this.setAttribute("normal",new Le(l,3))}static fromJSON(e){return new HU(e.points,e.segments,e.phiStart,e.phiLength)}},bD=class extends Ke{constructor(e=1,t=1,r=1,i=32,n=1,a=!1,o=0,s=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s};let l=this;i=Math.floor(i),n=Math.floor(n);let u=[],h=[],c=[],d=[],f=0,p=[],v=r/2,g=0;m(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Le(h,3)),this.setAttribute("normal",new Le(c,3)),this.setAttribute("uv",new Le(d,2));function m(){let _=new L,x=new L,w=0,b=(t-e)/r;for(let S=0;S<=n;S++){let M=[],A=S/n,T=A*(t-e)+e;for(let C=0;C<=i;C++){let D=C/i,P=D*s+o,E=Math.sin(P),O=Math.cos(P);x.x=T*E,x.y=-A*r+v,x.z=T*O,h.push(x.x,x.y,x.z),_.set(E,b,O).normalize(),c.push(_.x,_.y,_.z),d.push(D,1-A),M.push(f++)}p.push(M)}for(let S=0;S<i;S++)for(let M=0;M<n;M++){let A=p[M][S],T=p[M+1][S],C=p[M+1][S+1],D=p[M][S+1];u.push(A,T,D),u.push(T,C,D),w+=6}l.addGroup(g,w,0),g+=w}function y(_){let x=f,w=new re,b=new L,S=0,M=_===!0?e:t,A=_===!0?1:-1;for(let C=1;C<=i;C++)h.push(0,v*A,0),c.push(0,A,0),d.push(.5,.5),f++;let T=f;for(let C=0;C<=i;C++){let D=C/i*s+o,P=Math.cos(D),E=Math.sin(D);b.x=M*E,b.y=v*A,b.z=M*P,h.push(b.x,b.y,b.z),c.push(0,A,0),w.x=P*.5+.5,w.y=E*.5*A+.5,d.push(w.x,w.y),f++}for(let C=0;C<i;C++){let D=x+C,P=T+C;_===!0?u.push(P,P+1,D):u.push(P+1,P,D),S+=3}l.addGroup(g,S,_===!0?1:2),g+=S}}static fromJSON(e){return new bD(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},jU=class extends bD{constructor(e=1,t=1,r=32,i=1,n=!1,a=0,o=Math.PI*2){super(0,e,t,r,i,n,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}static fromJSON(e){return new jU(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},wD=class extends Ke{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],a=[];o(i),l(r),u(),this.setAttribute("position",new Le(n,3)),this.setAttribute("normal",new Le(n.slice(),3)),this.setAttribute("uv",new Le(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(m){let y=new L,_=new L,x=new L;for(let w=0;w<t.length;w+=3)d(t[w+0],y),d(t[w+1],_),d(t[w+2],x),s(y,_,x,m)}function s(m,y,_,x){let w=x+1,b=[];for(let S=0;S<=w;S++){b[S]=[];let M=m.clone().lerp(_,S/w),A=y.clone().lerp(_,S/w),T=w-S;for(let C=0;C<=T;C++)C===0&&S===w?b[S][C]=M:b[S][C]=M.clone().lerp(A,C/T)}for(let S=0;S<w;S++)for(let M=0;M<2*(w-S)-1;M++){let A=Math.floor(M/2);M%2===0?(c(b[S][A+1]),c(b[S+1][A]),c(b[S][A])):(c(b[S][A+1]),c(b[S+1][A+1]),c(b[S+1][A]))}}function l(m){let y=new L;for(let _=0;_<n.length;_+=3)y.x=n[_+0],y.y=n[_+1],y.z=n[_+2],y.normalize().multiplyScalar(m),n[_+0]=y.x,n[_+1]=y.y,n[_+2]=y.z}function u(){let m=new L;for(let y=0;y<n.length;y+=3){m.x=n[y+0],m.y=n[y+1],m.z=n[y+2];let _=v(m)/2/Math.PI+.5,x=g(m)/Math.PI+.5;a.push(_,1-x)}f(),h()}function h(){for(let m=0;m<a.length;m+=6){let y=a[m+0],_=a[m+2],x=a[m+4],w=Math.max(y,_,x),b=Math.min(y,_,x);w>.9&&b<.1&&(y<.2&&(a[m+0]+=1),_<.2&&(a[m+2]+=1),x<.2&&(a[m+4]+=1))}}function c(m){n.push(m.x,m.y,m.z)}function d(m,y){let _=m*3;y.x=e[_+0],y.y=e[_+1],y.z=e[_+2]}function f(){let m=new L,y=new L,_=new L,x=new L,w=new re,b=new re,S=new re;for(let M=0,A=0;M<n.length;M+=9,A+=6){m.set(n[M+0],n[M+1],n[M+2]),y.set(n[M+3],n[M+4],n[M+5]),_.set(n[M+6],n[M+7],n[M+8]),w.set(a[A+0],a[A+1]),b.set(a[A+2],a[A+3]),S.set(a[A+4],a[A+5]),x.copy(m).add(y).add(_).divideScalar(3);let T=v(x);p(w,A+0,m,T),p(b,A+2,y,T),p(S,A+4,_,T)}}function p(m,y,_,x){x<0&&m.x===1&&(a[y]=m.x-1),_.x===0&&_.z===0&&(a[y]=x/2/Math.PI+.5)}function v(m){return Math.atan2(m.z,-m.x)}function g(m){return Math.atan2(-m.y,Math.sqrt(m.x*m.x+m.z*m.z))}}static fromJSON(e){return new wD(e.vertices,e.indices,e.radius,e.details)}},WU=class extends wD{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new WU(e.radius,e.detail)}},m1=class extends g1{constructor(e){super(e),this.uuid=po(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new g1().fromJSON(i))}return this}},cre={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,a=$U(e,0,n,r,!0),o=[];if(!a||a.next===a.prev)return o;let s,l,u,h,c,d,f;if(i&&(a=gre(e,t,a,r)),e.length>80*r){s=u=e[0],l=h=e[1];for(let p=r;p<n;p+=r)c=e[p],d=e[p+1],c<s&&(s=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-s,h-l),f=f!==0?32767/f:0}return Rv(a,o,r,s,l,f,0),o}};function $U(e,t,r,i,n){let a,o;if(n===Cre(e,t,r,i)>0)for(a=t;a<r;a+=i)o=rO(a,e[a],e[a+1],o);else for(a=r-i;a>=t;a-=i)o=rO(a,e[a],e[a+1],o);return o&&cx(o,o.next)&&(Nv(o),o=o.next),o}function Ch(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(cx(r,r.next)||Jt(r.prev,r,r.next)===0)){if(Nv(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function Rv(e,t,r,i,n,a,o){if(!e)return;!o&&a&&bre(e,i,n,a);let s=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,a?fre(e,i,n,a):dre(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),Nv(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=pre(Ch(e),t,r),Rv(e,t,r,i,n,a,2)):o===2&&vre(e,t,r,i,n,a):Rv(Ch(e),t,r,i,n,a,1);break}}}function dre(e){let t=e.prev,r=e,i=e.next;if(Jt(t,r,i)>=0)return!1;let n=t.x,a=r.x,o=i.x,s=t.y,l=r.y,u=i.y,h=n<a?n<o?n:o:a<o?a:o,c=s<l?s<u?s:u:l<u?l:u,d=n>a?n>o?n:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u,p=i.next;for(;p!==t;){if(p.x>=h&&p.x<=d&&p.y>=c&&p.y<=f&&Zc(n,s,a,l,o,u,p.x,p.y)&&Jt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function fre(e,t,r,i){let n=e.prev,a=e,o=e.next;if(Jt(n,a,o)>=0)return!1;let s=n.x,l=a.x,u=o.x,h=n.y,c=a.y,d=o.y,f=s<l?s<u?s:u:l<u?l:u,p=h<c?h<d?h:d:c<d?c:d,v=s>l?s>u?s:u:l>u?l:u,g=h>c?h>d?h:d:c>d?c:d,m=WM(f,p,t,r,i),y=WM(v,g,t,r,i),_=e.prevZ,x=e.nextZ;for(;_&&_.z>=m&&x&&x.z<=y;){if(_.x>=f&&_.x<=v&&_.y>=p&&_.y<=g&&_!==n&&_!==o&&Zc(s,h,l,c,u,d,_.x,_.y)&&Jt(_.prev,_,_.next)>=0||(_=_.prevZ,x.x>=f&&x.x<=v&&x.y>=p&&x.y<=g&&x!==n&&x!==o&&Zc(s,h,l,c,u,d,x.x,x.y)&&Jt(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;_&&_.z>=m;){if(_.x>=f&&_.x<=v&&_.y>=p&&_.y<=g&&_!==n&&_!==o&&Zc(s,h,l,c,u,d,_.x,_.y)&&Jt(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=v&&x.y>=p&&x.y<=g&&x!==n&&x!==o&&Zc(s,h,l,c,u,d,x.x,x.y)&&Jt(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function pre(e,t,r){let i=e;do{let n=i.prev,a=i.next.next;!cx(n,a)&&qU(n,i,i.next,a)&&zv(n,a)&&zv(a,n)&&(t.push(n.i/r|0),t.push(i.i/r|0),t.push(a.i/r|0),Nv(i),Nv(i.next),i=e=a),i=i.next}while(i!==e);return Ch(i)}function vre(e,t,r,i,n,a){let o=e;do{let s=o.next.next;for(;s!==o.prev;){if(o.i!==s.i&&Mre(o,s)){let l=XU(o,s);o=Ch(o,o.next),l=Ch(l,l.next),Rv(o,t,r,i,n,a,0),Rv(l,t,r,i,n,a,0);return}s=s.next}o=o.next}while(o!==e)}function gre(e,t,r,i){let n=[],a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*i,l=a<o-1?t[a+1]*i:e.length,u=$U(e,s,l,i,!1),u===u.next&&(u.steiner=!0),n.push(Sre(u));for(n.sort(mre),a=0;a<n.length;a++)r=yre(n[a],r);return r}function mre(e,t){return e.x-t.x}function yre(e,t){let r=_re(e,t);if(!r)return t;let i=XU(r,e);return Ch(i,i.next),Ch(r,r.next)}function _re(e,t){let r=t,i=-1/0,n,a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){let d=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(d<=a&&d>i&&(i=d,n=r.x<r.next.x?r:r.next,d===a))return n}r=r.next}while(r!==t);if(!n)return null;let s=n,l=n.x,u=n.y,h=1/0,c;r=n;do a>=r.x&&r.x>=l&&a!==r.x&&Zc(o<u?a:i,o,l,u,o<u?i:a,o,r.x,r.y)&&(c=Math.abs(o-r.y)/(a-r.x),zv(r,e)&&(c<h||c===h&&(r.x>n.x||r.x===n.x&&xre(n,r)))&&(n=r,h=c)),r=r.next;while(r!==s);return n}function xre(e,t){return Jt(e.prev,e,t.prev)<0&&Jt(t.next,e,e.next)<0}function bre(e,t,r,i){let n=e;do n.z===0&&(n.z=WM(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,wre(n)}function wre(e){let t,r,i,n,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,i=r,s=0,t=0;t<u&&(s++,i=i.nextZ,!!i);t++);for(l=u;s>0||l>0&&i;)s!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(o>1);return e}function WM(e,t,r,i,n){return e=(e-r)*n|0,t=(t-i)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Sre(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Zc(e,t,r,i,n,a,o,s){return(n-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(i-s)>=(r-o)*(t-s)&&(r-o)*(a-s)>=(n-o)*(i-s)}function Mre(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Tre(e,t)&&(zv(e,t)&&zv(t,e)&&Are(e,t)&&(Jt(e.prev,e,t.prev)||Jt(e,t.prev,t))||cx(e,t)&&Jt(e.prev,e,e.next)>0&&Jt(t.prev,t,t.next)>0)}function Jt(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function cx(e,t){return e.x===t.x&&e.y===t.y}function qU(e,t,r,i){let n=Rm(Jt(e,t,r)),a=Rm(Jt(e,t,i)),o=Rm(Jt(r,i,e)),s=Rm(Jt(r,i,t));return!!(n!==a&&o!==s||n===0&&Om(e,r,t)||a===0&&Om(e,i,t)||o===0&&Om(r,e,i)||s===0&&Om(r,t,i))}function Om(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Rm(e){return e>0?1:e<0?-1:0}function Tre(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&qU(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function zv(e,t){return Jt(e.prev,e,e.next)<0?Jt(e,t,e.next)>=0&&Jt(e,e.prev,t)>=0:Jt(e,t,e.prev)<0||Jt(e,e.next,t)<0}function Are(e,t){let r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function XU(e,t){let r=new $M(e.i,e.x,e.y),i=new $M(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function rO(e,t,r,i){let n=new $M(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Nv(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function $M(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Cre(e,t,r,i){let n=0;for(let a=t,o=r-i;a<r;a+=i)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}var YU=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return YU.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];iO(e),nO(r,e);let a=e.length;t.forEach(iO);for(let s=0;s<t.length;s++)i.push(a),a+=t[s].length,nO(r,t[s]);let o=cre.triangulate(r,i);for(let s=0;s<o.length;s+=3)n.push(o.slice(s,s+3));return n}};function iO(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function nO(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var ZU=class extends wD{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ZU(e.radius,e.detail)}},SD=class extends Ke{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let s=Math.min(a+o,Math.PI),l=0,u=[],h=new L,c=new L,d=[],f=[],p=[],v=[];for(let g=0;g<=r;g++){let m=[],y=g/r,_=0;g==0&&a==0?_=.5/t:g==r&&s==Math.PI&&(_=-.5/t);for(let x=0;x<=t;x++){let w=x/t;h.x=-e*Math.cos(i+w*n)*Math.sin(a+y*o),h.y=e*Math.cos(a+y*o),h.z=e*Math.sin(i+w*n)*Math.sin(a+y*o),f.push(h.x,h.y,h.z),c.copy(h).normalize(),p.push(c.x,c.y,c.z),v.push(w+_,1-y),m.push(l++)}u.push(m)}for(let g=0;g<r;g++)for(let m=0;m<t;m++){let y=u[g][m+1],_=u[g][m],x=u[g+1][m],w=u[g+1][m+1];(g!==0||a>0)&&d.push(y,_,w),(g!==r-1||s<Math.PI)&&d.push(_,x,w)}this.setIndex(d),this.setAttribute("position",new Le(f,3)),this.setAttribute("normal",new Le(p,3)),this.setAttribute("uv",new Le(v,2))}static fromJSON(e){return new SD(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},KU=class extends Ke{constructor(e=1,t=.4,r=64,i=8,n=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:a},r=Math.floor(r),i=Math.floor(i);let o=[],s=[],l=[],u=[],h=new L,c=new L,d=new L,f=new L,p=new L,v=new L,g=new L;for(let y=0;y<=r;++y){let _=y/r*n*Math.PI*2;m(_,n,a,e,d),m(_+.01,n,a,e,f),v.subVectors(f,d),g.addVectors(f,d),p.crossVectors(v,g),g.crossVectors(p,v),p.normalize(),g.normalize();for(let x=0;x<=i;++x){let w=x/i*Math.PI*2,b=-t*Math.cos(w),S=t*Math.sin(w);h.x=d.x+(b*g.x+S*p.x),h.y=d.y+(b*g.y+S*p.y),h.z=d.z+(b*g.z+S*p.z),s.push(h.x,h.y,h.z),c.subVectors(h,d).normalize(),l.push(c.x,c.y,c.z),u.push(y/r),u.push(x/i)}}for(let y=1;y<=r;y++)for(let _=1;_<=i;_++){let x=(i+1)*(y-1)+(_-1),w=(i+1)*y+(_-1),b=(i+1)*y+_,S=(i+1)*(y-1)+_;o.push(x,w,S),o.push(w,b,S)}this.setIndex(o),this.setAttribute("position",new Le(s,3)),this.setAttribute("normal",new Le(l,3)),this.setAttribute("uv",new Le(u,2));function m(y,_,x,w,b){let S=Math.cos(y),M=Math.sin(y),A=x/_*y,T=Math.cos(A);b.x=w*(2+T)*.5*S,b.y=w*(2+T)*M*.5,b.z=w*Math.sin(A)*.5}}static fromJSON(e){return new KU(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},aO={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Dre=class{constructor(e,t,r){let i=this,n=!1,a=0,o=0,s,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){o++,n===!1&&i.onStart!==void 0&&i.onStart(u,a,o),n=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return s?s(u):u},this.setURLModifier=function(u){return s=u,this},this.addHandler=function(u,h){return l.push(u,h),this},this.removeHandler=function(u){let h=l.indexOf(u);return h!==-1&&l.splice(h,2),this},this.getHandler=function(u){for(let h=0,c=l.length;h<c;h+=2){let d=l[h],f=l[h+1];if(d.global&&(d.lastIndex=0),d.test(u))return f}return null}}},Pre=new Dre,JU=class{constructor(e){this.manager=e!==void 0?e:Pre,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},ko={},Lre=class extends Error{constructor(e,t){super(e),this.response=t}},Ere=class extends JU{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=aO.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(ko[e]!==void 0){ko[e].push({onLoad:t,onProgress:r,onError:i});return}ko[e]=[],ko[e].push({onLoad:t,onProgress:r,onError:i});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=ko[e],h=l.body.getReader(),c=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=c?parseInt(c):0,f=d!==0,p=0,v=new ReadableStream({start(g){m();function m(){h.read().then(({done:y,value:_})=>{if(y)g.close();else{p+=_.byteLength;let x=new ProgressEvent("progress",{lengthComputable:f,loaded:p,total:d});for(let w=0,b=u.length;w<b;w++){let S=u[w];S.onProgress&&S.onProgress(x)}g.enqueue(_),m()}})}}});return new Response(v)}else throw new Lre(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(s){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return l.json();default:if(o===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(o),h=u&&u[1]?u[1].toLowerCase():void 0,c=new TextDecoder(h);return l.arrayBuffer().then(d=>c.decode(d))}}}).then(l=>{aO.add(e,l);let u=ko[e];delete ko[e];for(let h=0,c=u.length;h<c;h++){let d=u[h];d.onLoad&&d.onLoad(l)}}).catch(l=>{let u=ko[e];if(u===void 0)throw this.manager.itemError(e),l;delete ko[e];for(let h=0,c=u.length;h<c;h++){let d=u[h];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Pg=class extends Wt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Qe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Ire=class extends Pg{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Wt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Qe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},aw=new ye,oO=new L,sO=new L,MD=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new re(512,512),this.map=null,this.mapPass=null,this.matrix=new ye,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yQ,this._frameExtents=new re(1,1),this._viewportCount=1,this._viewports=[new ir(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;oO.setFromMatrixPosition(e.matrixWorld),t.position.copy(oO),sO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(sO),t.updateMatrixWorld(),aw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aw),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(aw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},Ore=class extends MD{constructor(){super(new mD(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=Ov*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Rre=class extends Pg{constructor(e,t,r=0,i=Math.PI/3,n=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Wt.DEFAULT_UP),this.updateMatrix(),this.target=new Wt,this.distance=r,this.angle=i,this.penumbra=n,this.decay=a,this.map=null,this.shadow=new Ore}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},lO=new ye,If=new L,ow=new L,zre=class extends MD{constructor(){super(new mD(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new re(4,2),this._viewportCount=6,this._viewports=[new ir(2,1,1,1),new ir(0,1,1,1),new ir(3,1,1,1),new ir(1,1,1,1),new ir(3,0,1,1),new ir(1,0,1,1)],this._cubeDirections=[new L(1,0,0),new L(-1,0,0),new L(0,0,1),new L(0,0,-1),new L(0,1,0),new L(0,-1,0)],this._cubeUps=[new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,0,1),new L(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),If.setFromMatrixPosition(e.matrixWorld),r.position.copy(If),ow.copy(r.position),ow.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(ow),r.updateMatrixWorld(),i.makeTranslation(-If.x,-If.y,-If.z),lO.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lO)}},Nre=class extends Pg{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new zre}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},kre=class extends MD{constructor(){super(new v1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Bre=class extends Pg{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Wt.DEFAULT_UP),this.updateMatrix(),this.target=new Wt,this.shadow=new kre}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Fre=class extends Ke{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},QU=class extends JU{constructor(e){super(e)}load(e,t,r,i){let n=this,a=new Ere(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,function(o){try{t(n.parse(JSON.parse(o)))}catch(s){i?i(s):console.error(s),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(c,d){if(t[d]!==void 0)return t[d];let f=c.interleavedBuffers[d],p=n(c,f.buffer),v=pm(f.type,p),g=new Kte(v,f.stride);return g.uuid=f.uuid,t[d]=g,g}function n(c,d){if(r[d]!==void 0)return r[d];let f=c.arrayBuffers[d],p=new Uint32Array(f).buffer;return r[d]=p,p}let a=e.isInstancedBufferGeometry?new Fre:new Ke,o=e.data.index;if(o!==void 0){let c=pm(o.type,o.array);a.setIndex(new ft(c,1))}let s=e.data.attributes;for(let c in s){let d=s[c],f;if(d.isInterleavedBufferAttribute){let p=i(e.data,d.data);f=new HM(p,d.itemSize,d.offset,d.normalized)}else{let p=pm(d.type,d.array),v=d.isInstancedBufferAttribute?Jte:ft;f=new v(p,d.itemSize,d.normalized)}d.name!==void 0&&(f.name=d.name),d.usage!==void 0&&f.setUsage(d.usage),d.updateRange!==void 0&&(f.updateRange.offset=d.updateRange.offset,f.updateRange.count=d.updateRange.count),a.setAttribute(c,f)}let l=e.data.morphAttributes;if(l)for(let c in l){let d=l[c],f=[];for(let p=0,v=d.length;p<v;p++){let g=d[p],m;if(g.isInterleavedBufferAttribute){let y=i(e.data,g.data);m=new HM(y,g.itemSize,g.offset,g.normalized)}else{let y=pm(g.type,g.array);m=new ft(y,g.itemSize,g.normalized)}g.name!==void 0&&(m.name=g.name),f.push(m)}a.morphAttributes[c]=f}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let c=0,d=u.length;c!==d;++c){let f=u[c];a.addGroup(f.start,f.count,f.materialIndex)}let h=e.data.boundingSphere;if(h!==void 0){let c=new L;h.center!==void 0&&c.fromArray(h.center),a.boundingSphere=new Vn(c,h.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}},eG="\\[\\]\\.:\\/",TD="[^"+eG+"]",Vre="[^"+eG.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",TD);/(WCOD+)?/.source.replace("WCOD",Vre);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",TD);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",TD);var nl=class{constructor(e){this.value=e}clone(){return new nl(this.value.clone===void 0?this.value:this.value.clone())}},Ure=class{constructor(e,t,r=0,i=1/0){this.ray=new qd(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new NU,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return qM(e,this,r,t),r.sort(uO),r}intersectObjects(e,t=!0,r=[]){for(let i=0,n=e.length;i<n;i++)qM(e[i],this,r,t);return r.sort(uO),r}};function uO(e,t){return e.distance-t.distance}function qM(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let a=0,o=n.length;a<o;a++)qM(n[a],t,r,!0)}}var hO=new re,Gre=class{constructor(e=new re(1/0,1/0),t=new re(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=hO.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hO.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},cO=new L,zm=new L,Nn=class{constructor(e=new L,t=new L){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){cO.subVectors(e,this.start),zm.subVectors(this.end,this.start);let r=zm.dot(zm),i=zm.dot(cO)/r;return t&&(i=Rr(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},dO=new L,Hre=class extends Wt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let r=new Ke,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,s=32;a<s;a++,o++){let l=a/s*Math.PI*2,u=o/s*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Le(i,3));let n=new Bh({fog:!1,toneMapped:!1});this.cone=new Dg(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),dO.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(dO),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},jre=class extends vD{constructor(e,t,r){let i=new SD(t,4,2),n=new Ag({wireframe:!0,fog:!1,toneMapped:!1});super(i,n),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},fO=new L,Nm=new L,pO=new L,Wre=class extends Wt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Ke;i.setAttribute("position",new Le([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Bh({fog:!1,toneMapped:!1});this.lightPlane=new jM(i,n),this.add(this.lightPlane),i=new Ke,i.setAttribute("position",new Le([0,0,0,0,0,1],3)),this.targetLine=new jM(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),fO.setFromMatrixPosition(this.light.matrixWorld),Nm.setFromMatrixPosition(this.light.target.matrixWorld),pO.subVectors(Nm,fO),this.lightPlane.lookAt(Nm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Nm),this.targetLine.scale.z=pO.length()}},km=new L,tr=new Yd,y1=class extends Dg{constructor(e){let t=new Ke,r=new Bh({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(f,p){s(f),s(p)}function s(f){i.push(0,0,0),n.push(0,0,0),a[f]===void 0&&(a[f]=[]),a[f].push(i.length/3-1)}t.setAttribute("position",new Le(i,3)),t.setAttribute("color",new Le(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new Qe(16755200),u=new Qe(16711680),h=new Qe(43775),c=new Qe(16777215),d=new Qe(3355443);this.setColors(l,u,h,c,d)}setColors(e,t,r,i,n){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,n.r,n.g,n.b),a.setXYZ(41,n.r,n.g,n.b),a.setXYZ(42,n.r,n.g,n.b),a.setXYZ(43,n.r,n.g,n.b),a.setXYZ(44,n.r,n.g,n.b),a.setXYZ(45,n.r,n.g,n.b),a.setXYZ(46,n.r,n.g,n.b),a.setXYZ(47,n.r,n.g,n.b),a.setXYZ(48,n.r,n.g,n.b),a.setXYZ(49,n.r,n.g,n.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;tr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),lr("c",t,e,tr,0,0,-1),lr("t",t,e,tr,0,0,1),lr("n1",t,e,tr,-r,-i,-1),lr("n2",t,e,tr,r,-i,-1),lr("n3",t,e,tr,-r,i,-1),lr("n4",t,e,tr,r,i,-1),lr("f1",t,e,tr,-r,-i,1),lr("f2",t,e,tr,r,-i,1),lr("f3",t,e,tr,-r,i,1),lr("f4",t,e,tr,r,i,1),lr("u1",t,e,tr,r*.7,i*1.1,-1),lr("u2",t,e,tr,-r*.7,i*1.1,-1),lr("u3",t,e,tr,0,i*2,-1),lr("cf1",t,e,tr,-r,0,1),lr("cf2",t,e,tr,r,0,1),lr("cf3",t,e,tr,0,-i,1),lr("cf4",t,e,tr,0,i,1),lr("cn1",t,e,tr,-r,0,-1),lr("cn2",t,e,tr,r,0,-1),lr("cn3",t,e,tr,0,-i,-1),lr("cn4",t,e,tr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function lr(e,t,r,i,n,a,o){km.set(n,a,o).unproject(i);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,h=s.length;u<h;u++)l.setXYZ(s[u],km.x,km.y,km.z)}}var _1=class extends Dg{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new Ke;n.setIndex(new ft(r,1)),n.setAttribute("position",new Le(i,3)),super(n,new Bh({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},$re=class extends Dg{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ke;i.setAttribute("position",new Le(t,3)),i.setAttribute("color",new Le(r,3));let n=new Bh({vertexColors:!0,toneMapped:!1});super(i,n),this.type="AxesHelper"}setColors(e,t,r){let i=new Qe,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:LU}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=LU);function Bm(){return!0}function hc(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var qre=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Xre=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Yre={push:Bm,pop:Bm,shift:Bm,unshift:Bm,copyWithin:hc,reverse:hc,sort:hc,splice:hc,flat:hc,fill:hc};[...qre,...Xre,...Object.keys(Yre)];function Fm(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var tG=["keys","values","entries"],rG=new Set(["has","toString"]),Zre={add:Fm,clear:Fm,delete:Fm,forEach:Fm};[...rG,...Object.keys(Zre),...tG];function Vm(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var Kre=new Set([...rG,"get"]),Jre={set:Vm,clear:Vm,delete:Vm,forEach:Vm};[...Kre,...Object.keys(Jre),...tG];var Qre=typeof global=="object"&&global&&global.Object===Object&&global,iG=Qre,eie=typeof self=="object"&&self&&self.Object===Object&&self,tie=iG||eie||Function("return this")(),Da=tie,rie=Da.Symbol,Un=rie,nG=Object.prototype,iie=nG.hasOwnProperty,nie=nG.toString,Of=Un?Un.toStringTag:void 0;function aie(e){var t=iie.call(e,Of),r=e[Of];try{e[Of]=void 0;var i=!0}catch{}var n=nie.call(e);return i&&(t?e[Of]=r:delete e[Of]),n}var oie=aie,sie=Object.prototype,lie=sie.toString;function uie(e){return lie.call(e)}var hie=uie,cie="[object Null]",die="[object Undefined]",vO=Un?Un.toStringTag:void 0;function fie(e){return e==null?e===void 0?die:cie:vO&&vO in Object(e)?oie(e):hie(e)}var Fh=fie;function pie(e){return e!=null&&typeof e=="object"}var ps=pie,vie="[object Symbol]";function gie(e){return typeof e=="symbol"||ps(e)&&Fh(e)==vie}var dx=gie;function mie(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var aG=mie,yie=Array.isArray,mo=yie,_ie=1/0,gO=Un?Un.prototype:void 0,mO=gO?gO.toString:void 0;function oG(e){if(typeof e=="string")return e;if(mo(e))return aG(e,oG)+"";if(dx(e))return mO?mO.call(e):"";var t=e+"";return t=="0"&&1/e==-_ie?"-0":t}var xie=oG,bie=/\s/;function wie(e){for(var t=e.length;t--&&bie.test(e.charAt(t)););return t}var Sie=wie,Mie=/^\s+/;function Tie(e){return e&&e.slice(0,Sie(e)+1).replace(Mie,"")}var Aie=Tie;function Cie(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ta=Cie,yO=0/0,Die=/^[-+]0x[0-9a-f]+$/i,Pie=/^0b[01]+$/i,Lie=/^0o[0-7]+$/i,Eie=parseInt;function Iie(e){if(typeof e=="number")return e;if(dx(e))return yO;if(Ta(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ta(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Aie(e);var r=Pie.test(e);return r||Lie.test(e)?Eie(e.slice(2),r?2:8):Die.test(e)?yO:+e}var _O=Iie;function Oie(e){return e}var Rie=Oie,zie="[object AsyncFunction]",Nie="[object Function]",kie="[object GeneratorFunction]",Bie="[object Proxy]";function Fie(e){if(!Ta(e))return!1;var t=Fh(e);return t==Nie||t==kie||t==zie||t==Bie}var sG=Fie,Vie=Da["__core-js_shared__"],sw=Vie,xO=function(){var e=/[^.]+$/.exec(sw&&sw.keys&&sw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Uie(e){return!!xO&&xO in e}var Gie=Uie,Hie=Function.prototype,jie=Hie.toString;function Wie(e){if(e!=null){try{return jie.call(e)}catch{}try{return e+""}catch{}}return""}var Vh=Wie,$ie=/[\\^$.*+?()[\]{}|]/g,qie=/^\[object .+?Constructor\]$/,Xie=Function.prototype,Yie=Object.prototype,Zie=Xie.toString,Kie=Yie.hasOwnProperty,Jie=RegExp("^"+Zie.call(Kie).replace($ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qie(e){if(!Ta(e)||Gie(e))return!1;var t=sG(e)?Jie:qie;return t.test(Vh(e))}var ene=Qie;function tne(e,t){return e==null?void 0:e[t]}var rne=tne;function ine(e,t){var r=rne(e,t);return ene(r)?r:void 0}var Uh=ine,nne=Uh(Da,"WeakMap"),XM=nne,bO=Object.create,ane=function(){function e(){}return function(t){if(!Ta(t))return{};if(bO)return bO(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),one=ane;function sne(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var lne=sne;function une(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var hne=une,cne=800,dne=16,fne=Date.now;function pne(e){var t=0,r=0;return function(){var i=fne(),n=dne-(i-r);if(r=i,n>0){if(++t>=cne)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var vne=pne;function gne(e){return function(){return e}}var mne=gne,yne=function(){try{var e=Uh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),x1=yne,_ne=x1?function(e,t){return x1(e,"toString",{configurable:!0,enumerable:!1,value:mne(t),writable:!0})}:Rie,xne=_ne,bne=vne(xne),wne=bne;function Sne(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var Mne=Sne,Tne=9007199254740991,Ane=/^(?:0|[1-9]\d*)$/;function Cne(e,t){var r=typeof e;return t=t??Tne,!!t&&(r=="number"||r!="symbol"&&Ane.test(e))&&e>-1&&e%1==0&&e<t}var AD=Cne;function Dne(e,t,r){t=="__proto__"&&x1?x1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var lG=Dne;function Pne(e,t){return e===t||e!==e&&t!==t}var CD=Pne,Lne=Object.prototype,Ene=Lne.hasOwnProperty;function Ine(e,t,r){var i=e[t];(!(Ene.call(e,t)&&CD(i,r))||r===void 0&&!(t in e))&&lG(e,t,r)}var DD=Ine;function One(e,t,r,i){var n=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=i?i(r[s],e[s],s,r,e):void 0;l===void 0&&(l=e[s]),n?lG(r,s,l):DD(r,s,l)}return r}var Lg=One,wO=Math.max;function Rne(e,t,r){return t=wO(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=wO(i.length-t,0),o=Array(a);++n<a;)o[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(o),lne(e,this,s)}}var zne=Rne,Nne=9007199254740991;function kne(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nne}var PD=kne;function Bne(e){return e!=null&&PD(e.length)&&!sG(e)}var uG=Bne,Fne=Object.prototype;function Vne(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Fne;return e===r}var LD=Vne;function Une(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Gne=Une,Hne="[object Arguments]";function jne(e){return ps(e)&&Fh(e)==Hne}var SO=jne,hG=Object.prototype,Wne=hG.hasOwnProperty,$ne=hG.propertyIsEnumerable,qne=SO(function(){return arguments}())?SO:function(e){return ps(e)&&Wne.call(e,"callee")&&!$ne.call(e,"callee")},ED=qne;function Xne(){return!1}var Yne=Xne,cG=typeof an=="object"&&an&&!an.nodeType&&an,MO=cG&&typeof on=="object"&&on&&!on.nodeType&&on,Zne=MO&&MO.exports===cG,TO=Zne?Da.Buffer:void 0,Kne=TO?TO.isBuffer:void 0,Jne=Kne||Yne,b1=Jne,Qne="[object Arguments]",eae="[object Array]",tae="[object Boolean]",rae="[object Date]",iae="[object Error]",nae="[object Function]",aae="[object Map]",oae="[object Number]",sae="[object Object]",lae="[object RegExp]",uae="[object Set]",hae="[object String]",cae="[object WeakMap]",dae="[object ArrayBuffer]",fae="[object DataView]",pae="[object Float32Array]",vae="[object Float64Array]",gae="[object Int8Array]",mae="[object Int16Array]",yae="[object Int32Array]",_ae="[object Uint8Array]",xae="[object Uint8ClampedArray]",bae="[object Uint16Array]",wae="[object Uint32Array]",Xt={};Xt[pae]=Xt[vae]=Xt[gae]=Xt[mae]=Xt[yae]=Xt[_ae]=Xt[xae]=Xt[bae]=Xt[wae]=!0;Xt[Qne]=Xt[eae]=Xt[dae]=Xt[tae]=Xt[fae]=Xt[rae]=Xt[iae]=Xt[nae]=Xt[aae]=Xt[oae]=Xt[sae]=Xt[lae]=Xt[uae]=Xt[hae]=Xt[cae]=!1;function Sae(e){return ps(e)&&PD(e.length)&&!!Xt[Fh(e)]}var Mae=Sae;function Tae(e){return function(t){return e(t)}}var ID=Tae,dG=typeof an=="object"&&an&&!an.nodeType&&an,ev=dG&&typeof on=="object"&&on&&!on.nodeType&&on,Aae=ev&&ev.exports===dG,lw=Aae&&iG.process,Cae=function(){try{var e=ev&&ev.require&&ev.require("util").types;return e||lw&&lw.binding&&lw.binding("util")}catch{}}(),Cd=Cae,AO=Cd&&Cd.isTypedArray,Dae=AO?ID(AO):Mae,fG=Dae,Pae=Object.prototype,Lae=Pae.hasOwnProperty;function Eae(e,t){var r=mo(e),i=!r&&ED(e),n=!r&&!i&&b1(e),a=!r&&!i&&!n&&fG(e),o=r||i||n||a,s=o?Gne(e.length,String):[],l=s.length;for(var u in e)(t||Lae.call(e,u))&&!(o&&(u=="length"||n&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||AD(u,l)))&&s.push(u);return s}var pG=Eae;function Iae(e,t){return function(r){return e(t(r))}}var vG=Iae,Oae=vG(Object.keys,Object),Rae=Oae,zae=Object.prototype,Nae=zae.hasOwnProperty;function kae(e){if(!LD(e))return Rae(e);var t=[];for(var r in Object(e))Nae.call(e,r)&&r!="constructor"&&t.push(r);return t}var Bae=kae;function Fae(e){return uG(e)?pG(e):Bae(e)}var OD=Fae;function Vae(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Uae=Vae,Gae=Object.prototype,Hae=Gae.hasOwnProperty;function jae(e){if(!Ta(e))return Uae(e);var t=LD(e),r=[];for(var i in e)i=="constructor"&&(t||!Hae.call(e,i))||r.push(i);return r}var Wae=jae;function $ae(e){return uG(e)?pG(e,!0):Wae(e)}var RD=$ae,qae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xae=/^\w*$/;function Yae(e,t){if(mo(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||dx(e)?!0:Xae.test(e)||!qae.test(e)||t!=null&&e in Object(t)}var Zae=Yae,Kae=Uh(Object,"create"),kv=Kae;function Jae(){this.__data__=kv?kv(null):{},this.size=0}var Qae=Jae;function eoe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var toe=eoe,roe="__lodash_hash_undefined__",ioe=Object.prototype,noe=ioe.hasOwnProperty;function aoe(e){var t=this.__data__;if(kv){var r=t[e];return r===roe?void 0:r}return noe.call(t,e)?t[e]:void 0}var ooe=aoe,soe=Object.prototype,loe=soe.hasOwnProperty;function uoe(e){var t=this.__data__;return kv?t[e]!==void 0:loe.call(t,e)}var hoe=uoe,coe="__lodash_hash_undefined__";function doe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=kv&&t===void 0?coe:t,this}var foe=doe;function Zd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Zd.prototype.clear=Qae;Zd.prototype.delete=toe;Zd.prototype.get=ooe;Zd.prototype.has=hoe;Zd.prototype.set=foe;var CO=Zd;function poe(){this.__data__=[],this.size=0}var voe=poe;function goe(e,t){for(var r=e.length;r--;)if(CD(e[r][0],t))return r;return-1}var fx=goe,moe=Array.prototype,yoe=moe.splice;function _oe(e){var t=this.__data__,r=fx(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():yoe.call(t,r,1),--this.size,!0}var xoe=_oe;function boe(e){var t=this.__data__,r=fx(t,e);return r<0?void 0:t[r][1]}var woe=boe;function Soe(e){return fx(this.__data__,e)>-1}var Moe=Soe;function Toe(e,t){var r=this.__data__,i=fx(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var Aoe=Toe;function Kd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Kd.prototype.clear=voe;Kd.prototype.delete=xoe;Kd.prototype.get=woe;Kd.prototype.has=Moe;Kd.prototype.set=Aoe;var px=Kd,Coe=Uh(Da,"Map"),Bv=Coe;function Doe(){this.size=0,this.__data__={hash:new CO,map:new(Bv||px),string:new CO}}var Poe=Doe;function Loe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Eoe=Loe;function Ioe(e,t){var r=e.__data__;return Eoe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var vx=Ioe;function Ooe(e){var t=vx(this,e).delete(e);return this.size-=t?1:0,t}var Roe=Ooe;function zoe(e){return vx(this,e).get(e)}var Noe=zoe;function koe(e){return vx(this,e).has(e)}var Boe=koe;function Foe(e,t){var r=vx(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var Voe=Foe;function Jd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Jd.prototype.clear=Poe;Jd.prototype.delete=Roe;Jd.prototype.get=Noe;Jd.prototype.has=Boe;Jd.prototype.set=Voe;var gx=Jd,Uoe="Expected a function";function zD(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Uoe);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var o=e.apply(this,i);return r.cache=a.set(n,o)||a,o};return r.cache=new(zD.Cache||gx),r}zD.Cache=gx;var Goe=zD,Hoe=500;function joe(e){var t=Goe(e,function(i){return r.size===Hoe&&r.clear(),i}),r=t.cache;return t}var Woe=joe,$oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qoe=/\\(\\)?/g,Xoe=Woe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace($oe,function(r,i,n,a){t.push(n?a.replace(qoe,"$1"):i||r)}),t}),Yoe=Xoe;function Zoe(e){return e==null?"":xie(e)}var Koe=Zoe;function Joe(e,t){return mo(e)?e:Zae(e,t)?[e]:Yoe(Koe(e))}var Qd=Joe,Qoe=1/0;function ese(e){if(typeof e=="string"||dx(e))return e;var t=e+"";return t=="0"&&1/e==-Qoe?"-0":t}var mx=ese;function tse(e,t){t=Qd(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[mx(t[r++])];return r&&r==i?e:void 0}var gG=tse;function rse(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var ND=rse,DO=Un?Un.isConcatSpreadable:void 0;function ise(e){return mo(e)||ED(e)||!!(DO&&e&&e[DO])}var nse=ise;function mG(e,t,r,i,n){var a=-1,o=e.length;for(r||(r=nse),n||(n=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?mG(s,t-1,r,i,n):ND(n,s):i||(n[n.length]=s)}return n}var ase=mG;function ose(e){var t=e==null?0:e.length;return t?ase(e,1):[]}var sse=ose;function lse(e){return wne(zne(e,void 0,sse),e+"")}var yG=lse,use=vG(Object.getPrototypeOf,Object),kD=use,hse="[object Object]",cse=Function.prototype,dse=Object.prototype,_G=cse.toString,fse=dse.hasOwnProperty,pse=_G.call(Object);function vse(e){if(!ps(e)||Fh(e)!=hse)return!1;var t=kD(e);if(t===null)return!0;var r=fse.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&_G.call(r)==pse}var gse=vse;function mse(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a}var yse=mse;function _se(){this.__data__=new px,this.size=0}var xse=_se;function bse(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var wse=bse;function Sse(e){return this.__data__.get(e)}var Mse=Sse;function Tse(e){return this.__data__.has(e)}var Ase=Tse,Cse=200;function Dse(e,t){var r=this.__data__;if(r instanceof px){var i=r.__data__;if(!Bv||i.length<Cse-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new gx(i)}return r.set(e,t),this.size=r.size,this}var Pse=Dse;function ef(e){var t=this.__data__=new px(e);this.size=t.size}ef.prototype.clear=xse;ef.prototype.delete=wse;ef.prototype.get=Mse;ef.prototype.has=Ase;ef.prototype.set=Pse;var M0=ef;function Lse(e,t){return e&&Lg(t,OD(t),e)}var Ese=Lse;function Ise(e,t){return e&&Lg(t,RD(t),e)}var Ose=Ise,xG=typeof an=="object"&&an&&!an.nodeType&&an,PO=xG&&typeof on=="object"&&on&&!on.nodeType&&on,Rse=PO&&PO.exports===xG,LO=Rse?Da.Buffer:void 0,EO=LO?LO.allocUnsafe:void 0;function zse(e,t){if(t)return e.slice();var r=e.length,i=EO?EO(r):new e.constructor(r);return e.copy(i),i}var Nse=zse;function kse(e,t){for(var r=-1,i=e==null?0:e.length,n=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[n++]=o)}return a}var Bse=kse;function Fse(){return[]}var bG=Fse,Vse=Object.prototype,Use=Vse.propertyIsEnumerable,IO=Object.getOwnPropertySymbols,Gse=IO?function(e){return e==null?[]:(e=Object(e),Bse(IO(e),function(t){return Use.call(e,t)}))}:bG,BD=Gse;function Hse(e,t){return Lg(e,BD(e),t)}var jse=Hse,Wse=Object.getOwnPropertySymbols,$se=Wse?function(e){for(var t=[];e;)ND(t,BD(e)),e=kD(e);return t}:bG,wG=$se;function qse(e,t){return Lg(e,wG(e),t)}var Xse=qse;function Yse(e,t,r){var i=t(e);return mo(e)?i:ND(i,r(e))}var SG=Yse;function Zse(e){return SG(e,OD,BD)}var YM=Zse;function Kse(e){return SG(e,RD,wG)}var MG=Kse,Jse=Uh(Da,"DataView"),ZM=Jse,Qse=Uh(Da,"Promise"),KM=Qse,ele=Uh(Da,"Set"),JM=ele,OO="[object Map]",tle="[object Object]",RO="[object Promise]",zO="[object Set]",NO="[object WeakMap]",kO="[object DataView]",rle=Vh(ZM),ile=Vh(Bv),nle=Vh(KM),ale=Vh(JM),ole=Vh(XM),Eu=Fh;(ZM&&Eu(new ZM(new ArrayBuffer(1)))!=kO||Bv&&Eu(new Bv)!=OO||KM&&Eu(KM.resolve())!=RO||JM&&Eu(new JM)!=zO||XM&&Eu(new XM)!=NO)&&(Eu=function(e){var t=Fh(e),r=t==tle?e.constructor:void 0,i=r?Vh(r):"";if(i)switch(i){case rle:return kO;case ile:return OO;case nle:return RO;case ale:return zO;case ole:return NO}return t});var Fv=Eu,sle=Object.prototype,lle=sle.hasOwnProperty;function ule(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&lle.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var hle=ule,cle=Da.Uint8Array,w1=cle;function dle(e){var t=new e.constructor(e.byteLength);return new w1(t).set(new w1(e)),t}var FD=dle;function fle(e,t){var r=t?FD(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ple=fle,vle=/\w*$/;function gle(e){var t=new e.constructor(e.source,vle.exec(e));return t.lastIndex=e.lastIndex,t}var mle=gle,BO=Un?Un.prototype:void 0,FO=BO?BO.valueOf:void 0;function yle(e){return FO?Object(FO.call(e)):{}}var _le=yle;function xle(e,t){var r=t?FD(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var ble=xle,wle="[object Boolean]",Sle="[object Date]",Mle="[object Map]",Tle="[object Number]",Ale="[object RegExp]",Cle="[object Set]",Dle="[object String]",Ple="[object Symbol]",Lle="[object ArrayBuffer]",Ele="[object DataView]",Ile="[object Float32Array]",Ole="[object Float64Array]",Rle="[object Int8Array]",zle="[object Int16Array]",Nle="[object Int32Array]",kle="[object Uint8Array]",Ble="[object Uint8ClampedArray]",Fle="[object Uint16Array]",Vle="[object Uint32Array]";function Ule(e,t,r){var i=e.constructor;switch(t){case Lle:return FD(e);case wle:case Sle:return new i(+e);case Ele:return ple(e,r);case Ile:case Ole:case Rle:case zle:case Nle:case kle:case Ble:case Fle:case Vle:return ble(e,r);case Mle:return new i;case Tle:case Dle:return new i(e);case Ale:return mle(e);case Cle:return new i;case Ple:return _le(e)}}var Gle=Ule;function Hle(e){return typeof e.constructor=="function"&&!LD(e)?one(kD(e)):{}}var jle=Hle,Wle="[object Map]";function $le(e){return ps(e)&&Fv(e)==Wle}var qle=$le,VO=Cd&&Cd.isMap,Xle=VO?ID(VO):qle,Yle=Xle,Zle="[object Set]";function Kle(e){return ps(e)&&Fv(e)==Zle}var Jle=Kle,UO=Cd&&Cd.isSet,Qle=UO?ID(UO):Jle,eue=Qle,tue=1,rue=2,iue=4,TG="[object Arguments]",nue="[object Array]",aue="[object Boolean]",oue="[object Date]",sue="[object Error]",AG="[object Function]",lue="[object GeneratorFunction]",uue="[object Map]",hue="[object Number]",CG="[object Object]",cue="[object RegExp]",due="[object Set]",fue="[object String]",pue="[object Symbol]",vue="[object WeakMap]",gue="[object ArrayBuffer]",mue="[object DataView]",yue="[object Float32Array]",_ue="[object Float64Array]",xue="[object Int8Array]",bue="[object Int16Array]",wue="[object Int32Array]",Sue="[object Uint8Array]",Mue="[object Uint8ClampedArray]",Tue="[object Uint16Array]",Aue="[object Uint32Array]",Gt={};Gt[TG]=Gt[nue]=Gt[gue]=Gt[mue]=Gt[aue]=Gt[oue]=Gt[yue]=Gt[_ue]=Gt[xue]=Gt[bue]=Gt[wue]=Gt[uue]=Gt[hue]=Gt[CG]=Gt[cue]=Gt[due]=Gt[fue]=Gt[pue]=Gt[Sue]=Gt[Mue]=Gt[Tue]=Gt[Aue]=!0;Gt[sue]=Gt[AG]=Gt[vue]=!1;function T0(e,t,r,i,n,a){var o,s=t&tue,l=t&rue,u=t&iue;if(r&&(o=n?r(e,i,n,a):r(e)),o!==void 0)return o;if(!Ta(e))return e;var h=mo(e);if(h){if(o=hle(e),!s)return hne(e,o)}else{var c=Fv(e),d=c==AG||c==lue;if(b1(e))return Nse(e,s);if(c==CG||c==TG||d&&!n){if(o=l||d?{}:jle(e),!s)return l?Xse(e,Ose(o,e)):jse(e,Ese(o,e))}else{if(!Gt[c])return n?e:{};o=Gle(e,c,s)}}a||(a=new M0);var f=a.get(e);if(f)return f;a.set(e,o),eue(e)?e.forEach(function(g){o.add(T0(g,t,r,g,e,a))}):Yle(e)&&e.forEach(function(g,m){o.set(m,T0(g,t,r,m,e,a))});var p=u?l?MG:YM:l?RD:OD,v=h?void 0:p(e);return Mne(v||e,function(g,m){v&&(m=g,g=e[m]),DD(o,m,T0(g,t,r,m,e,a))}),o}var DG=T0,Cue=1,Due=4;function Pue(e){return DG(e,Cue|Due)}var yx=Pue,Lue="__lodash_hash_undefined__";function Eue(e){return this.__data__.set(e,Lue),this}var Iue=Eue;function Oue(e){return this.__data__.has(e)}var Rue=Oue;function S1(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new gx;++t<r;)this.add(e[t])}S1.prototype.add=S1.prototype.push=Iue;S1.prototype.has=Rue;var zue=S1;function Nue(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var kue=Nue;function Bue(e,t){return e.has(t)}var Fue=Bue,Vue=1,Uue=2;function Gue(e,t,r,i,n,a){var o=r&Vue,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),h=a.get(t);if(u&&h)return u==t&&h==e;var c=-1,d=!0,f=r&Uue?new zue:void 0;for(a.set(e,t),a.set(t,e);++c<s;){var p=e[c],v=t[c];if(i)var g=o?i(v,p,c,t,e,a):i(p,v,c,e,t,a);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!kue(t,function(m,y){if(!Fue(f,y)&&(p===m||n(p,m,r,i,a)))return f.push(y)})){d=!1;break}}else if(!(p===v||n(p,v,r,i,a))){d=!1;break}}return a.delete(e),a.delete(t),d}var PG=Gue;function Hue(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var jue=Hue;function Wue(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var $ue=Wue,que=1,Xue=2,Yue="[object Boolean]",Zue="[object Date]",Kue="[object Error]",Jue="[object Map]",Que="[object Number]",ehe="[object RegExp]",the="[object Set]",rhe="[object String]",ihe="[object Symbol]",nhe="[object ArrayBuffer]",ahe="[object DataView]",GO=Un?Un.prototype:void 0,uw=GO?GO.valueOf:void 0;function ohe(e,t,r,i,n,a,o){switch(r){case ahe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case nhe:return!(e.byteLength!=t.byteLength||!a(new w1(e),new w1(t)));case Yue:case Zue:case Que:return CD(+e,+t);case Kue:return e.name==t.name&&e.message==t.message;case ehe:case rhe:return e==t+"";case Jue:var s=jue;case the:var l=i&que;if(s||(s=$ue),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;i|=Xue,o.set(e,t);var h=PG(s(e),s(t),i,n,a,o);return o.delete(e),h;case ihe:if(uw)return uw.call(e)==uw.call(t)}return!1}var she=ohe,lhe=1,uhe=Object.prototype,hhe=uhe.hasOwnProperty;function che(e,t,r,i,n,a){var o=r&lhe,s=YM(e),l=s.length,u=YM(t),h=u.length;if(l!=h&&!o)return!1;for(var c=l;c--;){var d=s[c];if(!(o?d in t:hhe.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var v=!0;a.set(e,t),a.set(t,e);for(var g=o;++c<l;){d=s[c];var m=e[d],y=t[d];if(i)var _=o?i(y,m,d,t,e,a):i(m,y,d,e,t,a);if(!(_===void 0?m===y||n(m,y,r,i,a):_)){v=!1;break}g||(g=d=="constructor")}if(v&&!g){var x=e.constructor,w=t.constructor;x!=w&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)&&(v=!1)}return a.delete(e),a.delete(t),v}var dhe=che,fhe=1,HO="[object Arguments]",jO="[object Array]",Um="[object Object]",phe=Object.prototype,WO=phe.hasOwnProperty;function vhe(e,t,r,i,n,a){var o=mo(e),s=mo(t),l=o?jO:Fv(e),u=s?jO:Fv(t);l=l==HO?Um:l,u=u==HO?Um:u;var h=l==Um,c=u==Um,d=l==u;if(d&&b1(e)){if(!b1(t))return!1;o=!0,h=!1}if(d&&!h)return a||(a=new M0),o||fG(e)?PG(e,t,r,i,n,a):she(e,t,l,r,i,n,a);if(!(r&fhe)){var f=h&&WO.call(e,"__wrapped__"),p=c&&WO.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,g=p?t.value():t;return a||(a=new M0),n(v,g,r,i,a)}}return d?(a||(a=new M0),dhe(e,t,r,i,n,a)):!1}var ghe=vhe;function LG(e,t,r,i,n){return e===t?!0:e==null||t==null||!ps(e)&&!ps(t)?e!==e&&t!==t:ghe(e,t,r,i,LG,n)}var mhe=LG;function yhe(e,t){return e!=null&&t in Object(e)}var _he=yhe;function xhe(e,t,r){t=Qd(t,e);for(var i=-1,n=t.length,a=!1;++i<n;){var o=mx(t[i]);if(!(a=e!=null&&r(e,o)))break;e=e[o]}return a||++i!=n?a:(n=e==null?0:e.length,!!n&&PD(n)&&AD(o,n)&&(mo(e)||ED(e)))}var bhe=xhe;function whe(e,t){return e!=null&&bhe(e,t,_he)}var She=whe,Mhe=function(){return Da.Date.now()},hw=Mhe,The="Expected a function",Ahe=Math.max,Che=Math.min;function Dhe(e,t,r){var i,n,a,o,s,l,u=0,h=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(The);t=_O(t)||0,Ta(r)&&(h=!!r.leading,c="maxWait"in r,a=c?Ahe(_O(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d);function f(b){var S=i,M=n;return i=n=void 0,u=b,o=e.apply(M,S),o}function p(b){return u=b,s=setTimeout(m,t),h?f(b):o}function v(b){var S=b-l,M=b-u,A=t-S;return c?Che(A,a-M):A}function g(b){var S=b-l,M=b-u;return l===void 0||S>=t||S<0||c&&M>=a}function m(){var b=hw();if(g(b))return y(b);s=setTimeout(m,v(b))}function y(b){return s=void 0,d&&i?f(b):(i=n=void 0,o)}function _(){s!==void 0&&clearTimeout(s),u=0,i=l=n=s=void 0}function x(){return s===void 0?o:y(hw())}function w(){var b=hw(),S=g(b);if(i=arguments,n=this,l=b,S){if(s===void 0)return p(l);if(c)return clearTimeout(s),s=setTimeout(m,t),f(l)}return s===void 0&&(s=setTimeout(m,t)),o}return w.cancel=_,w.flush=x,w}var Phe=Dhe;function Lhe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ehe=Lhe;function Ihe(e,t){return t.length<2?e:gG(e,yse(t,0,-1))}var Ohe=Ihe;function Rhe(e,t){return mhe(e,t)}var VD=Rhe;function zhe(e,t){return t=Qd(t,e),e=Ohe(e,t),e==null||delete e[mx(Ehe(t))]}var Nhe=zhe;function khe(e){return gse(e)?void 0:e}var Bhe=khe,Fhe=1,Vhe=2,Uhe=4,Ghe=yG(function(e,t){var r={};if(e==null)return r;var i=!1;t=aG(t,function(a){return a=Qd(a,e),i||(i=a.length>1),a}),Lg(e,MG(e),r),i&&(r=DG(r,Fhe|Vhe|Uhe,Bhe));for(var n=t.length;n--;)Nhe(r,t[n]);return r}),QM=Ghe;function Hhe(e,t,r,i){if(!Ta(e))return e;t=Qd(t,e);for(var n=-1,a=t.length,o=a-1,s=e;s!=null&&++n<a;){var l=mx(t[n]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=o){var h=s[l];u=i?i(h,l,s):void 0,u===void 0&&(u=Ta(h)?h:AD(t[n+1])?[]:{})}DD(s,l,u),s=s[l]}return e}var jhe=Hhe;function Whe(e,t,r){for(var i=-1,n=t.length,a={};++i<n;){var o=t[i],s=gG(e,o);r(s,o)&&jhe(a,Qd(o,e),s)}return a}var $he=Whe;function qhe(e,t){return $he(e,t,function(r,i){return She(e,i)})}var Xhe=qhe,Yhe=yG(function(e,t){return e==null?{}:Xhe(e,t)}),Zhe=Yhe,Khe="Expected a function";function Jhe(e,t,r){var i=!0,n=!0;if(typeof e!="function")throw new TypeError(Khe);return Ta(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),Phe(e,t,{leading:i,maxWait:t,trailing:n})}var Qhe=Jhe;function ece(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function M1(e,t){return Object.setPrototypeOf(e,t),e}var tce=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),rce=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),ice=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,nce=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,ace=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},oce=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]};tce();rce();ice();var $O=nce(),qO=ace(),XO=Number(oce());function EG(e){return Array.isArray(e)?e:[e]}function sce(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var lce=new Promise(e=>{}),uce=new Promise(e=>{}),Ur=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i={...r,[e]:t};return Object.setPrototypeOf(i,Ur.prototype),i}}add(e,t){var r;return((r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)??this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],i;r===void 0?i={type:2,id:e.id}:i={type:1,id:e.id,data:r};let{id:n,data:a}=e,o={...t,[n]:a};return Object.setPrototypeOf(o,Ur.prototype),{data:o,actual:e,reverse:i}}else if(e.type===2){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,Ur.prototype),delete n[r],{data:n,actual:e,reverse:{type:1,id:r,data:i}}}}return null}};function UD(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&UD(i)}return Object.freeze(e)}function hce(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var IG=class extends Error{};function cw(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function sl(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let a=e;e=t,t=a}let i=[],n=1/(r+1);for(let a=0;a<r;a++){let o=e+(t-e)*(a+.75+Math.random()*.5)*n;i.push(o)}return i}function GD(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function cce(){return typeof process<"u"}function OG(e,t){for(let r of e)t(r.id,r.data)!==!0&&OG(r.children,t)}function RG(e,t){if(t(e.id,e.data)!==!0)for(let r of e.children)RG(r,t)}var Hi=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Hi.prototype)}deepFreeze(){let e=0;for(;e<this.length;)UD(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&RG(r,t)}}traverse(e){OG(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(o=>o.id===e);if(n<0)throw new Error("not expected");let a=i[n];return i=[...i],i[n]={...a,data:t},this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let a=i,o=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let s=i.findIndex(l=>l.id===o);if(s<0)throw new Error;i=[...i],i[s]={...i[s],children:a}}Object.setPrototypeOf(i,Hi.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:i,data:n,children:a}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let o=t,s=this.childrenArray(o),l={fi:r,id:i,data:n,children:a};return s=[...s,l],s.sort((u,h)=>u.fi-h.fi),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(o,s),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(o=>o.id===t);e.localIndex=n,i=[...i];let a=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:{type:7,...a,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:i});if(t!==null){let c=t;for(;c!==null;){if(c===void 0)throw new Error;if(c===i)throw new IG("cyclic tree");c=this.parent(c)}}let n=this.parent(i);if(n===void 0)return null;let a=n,o=this.childrenArray(n),s=o.findIndex(c=>c.id===i);o=[...o];let l=o.splice(s,1)[0],u=this.modifyArrayBy(n,o);n=t,o=u.childrenArray(n);let h=l.fi;return l={...l,fi:r},o=[...o,l],o.sort((c,d)=>c.fi-d.fi),e.localIndex=o.indexOf(l),u=u.modifyArrayBy(n,o),{data:u,actual:e,reverse:{type:9,parent:a,fi:h,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push({...r,...i})}t.sort((r,i)=>hce(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return{...n,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return sl(0,r,r);{let n=i[0].fi;return sl(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let a=i.find(o=>o.fi>n.fi);if(a===void 0){let o=i[i.length-1].fi;return sl(o,o+r,r)}else return sl(n.fi,a.fi,r)}}},T1;(e=>{function t(r,i){if(i.type!==0)return null;if(Array.isArray(r)){let n=i.props,a={},o=[...r],s=!1;if(n)for(let l of Object.keys(n)){let u=parseInt(l);if(isNaN(u))throw new Error("wrong index");a[l]=o[u],o[u]=n[l],s=!0}return s?{data:o,actual:i,reverse:{type:0,props:a}}:null}else{let n=i.props,a={},o={...r},s=!1;if(n)for(let l of Object.keys(n)){a[l]=o[l];let u=n[l];u===void 0?delete o[l]:o[l]=u,s=!0}return s?{data:o,actual:i,reverse:{type:0,props:a}}:null}}e.runOp=t})(T1||(T1={}));var gt=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,gt.prototype)}deepFreeze(){let e=0;for(;e<this.length;)UD(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(a=>a.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]={...n,data:t},this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,gt.prototype);let t=e;return cce()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:r,data:i}=e,n=this,a={fi:t,id:r,data:i};return n=[...n,a],n.sort((o,s)=>o.fi-s.fi),e.localIndex=n.indexOf(a),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(a=>a.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(s=>s.id===r);if(n===-1)return null;let a=i[n].fi,o={...i[n],fi:t};return i[n]=o,i.sort((s,l)=>s.fi-l.fi),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:a,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return sl(0,t,t);{let i=r[0].fi;return sl(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(a=>a.fi>i.fi);if(n===void 0){let a=r[r.length-1].fi;return sl(a,a+t,t)}else return sl(i.fi,n.fi,t)}}};function Dd(e){return e&&typeof e=="object"&&e instanceof ji}var ji=class{unusedFunOverridesTable(e){}runOp(e){let t=[],r=this,i=0,n={};for(;i<e.path.length;){if(t.push(r),r=r===void 0?void 0:r[e.path[i]],r!==void 0&&!Dd(r))return null;i+=1}r=r?cw(r):new ji;for(let[s,l]of Object.entries(e.props)){let u=r[s];n[s]=u,l===void 0?delete r[s]:r[s]=l}for(;i>0;){if(Object.keys(r).length===0){let s=t[i-1];s&&(r=cw(s),delete r[e.path[i-1]])}else{let s=t[i-1];if(s){let l=cw(s);l[e.path[i-1]]=r,r=l}else{let l=new ji;l[e.path[i-1]]=r,r=l}}i-=1}let a=Object.setPrototypeOf(r,ji.prototype),o={...e,props:n};return{data:a,actual:e,reverse:o}}},uh;(e=>{function t(n,a){return Vv(n,a)??n}e.apply=t;function r(n,a){return jD(n,a)}e.merge=r;function i(n,a){let o=0,s=a.path,l=n;for(;o<s.length&&l!==void 0;){if(l=vo.zoomOnce(l,s[o]),l===void 0)return a;if(!Dd(l))return;o+=1}if(l===void 0)return a;if(Dd(l))if(a.type===0){let u={...a.props};for(let h of Object.keys(l))delete u[h];return{...a,props:u}}else if(a.type===1||a.type===4||a.type===7){let u=HD([a],l);return u?(console.log(u),u):a}else return a}e.filterOp=i})(uh||(uh={}));function HD(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let a=n.id,o=Vv(n.data,t[a]);if(r=r||o!==void 0,o===void 0&&(o=n.data),n.children){let s=HD(n.children,t);return s!==void 0?r=!0:s=n.children,{...n,id:a,data:o,children:s}}else return{...n,id:a,data:o}});if(r)return i}function dce(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let a=n.id,o=Vv(n.data,t[a]);return r=r||o!==void 0,o===void 0&&(o=n.data),{...n,id:a,data:o}});if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function Vv(e,t){if(!Dd(t))return t;if(e instanceof Hi){let r=HD(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof gt)return dce(e,t);if(Array.isArray(e)){let r=!1,i=e.map((n,a)=>{let o=Vv(n,t[a]);return r=r||o!==void 0,o===void 0&&(o=n),o});return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else{if(e instanceof ji)return jD(e,t);if(e&&typeof e=="object"){let r={},i=!1;for(let[n,a]of Object.entries(e)){let o=Vv(a,t[n]);i=i||o!==void 0,o===void 0&&(o=a),r[n]=o}return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}}}}function jD(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!Dd(t))return t;if(!Dd(e))return uh.apply(e,t);let r=new Set;for(let n of Object.keys(e))r.add(n);for(let n of Object.keys(t))r.add(n);let i=new ji;for(let n of r){let a=jD(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);i[n]=a}return i}function fce(e,t){let r={cur:[],result:[],len:0};return e=Uv(e,t,r)??e,[e,r.result]}function A1(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function C1(e){e&&(e.len-=1)}function pce(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function zG(e,t,r){let i=!1,n=e.map(a=>{let o=a.id,s=t[o];if(s!==void 0&&typeof s=="string"&&(i=!0,o=s,r!==null))throw new Error("not supported");let l=Uv(a.data,t,A1(r,o));C1(r),i=i||l!==void 0,l===void 0&&(l=a.data);let u=zG(a.children,t,r);return u!==void 0?i=!0:u=a.children,{...a,id:o,data:l,children:u}});if(i)return n}function vce(e,t,r){let i=!1,n=e.map(a=>{let o=a.id,s=t[o];if(s!==void 0&&typeof s=="string"&&(i=!0,o=s,r!==null))throw new Error("not supported");let l=Uv(a.data,t,A1(r,o));return C1(r),i=i||l!==void 0,l===void 0&&(l=a.data),{...a,id:o,data:l}});if(i)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function Uv(e,t,r){if(e instanceof Hi){let i=zG(e,t,r);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof gt)return vce(e,t,r);if(Array.isArray(e)){let i=!1,n=e.map((a,o)=>{let s=Uv(a,t,A1(r,o));return C1(r),i=i||s!==void 0,s===void 0&&(s=a),s});return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!GD(e)){let i={},n=!1;for(let[a,o]of Object.entries(e))if(a!=="name"&&a!=="text"){let s=t[a];if(typeof s=="string"){if(r!==null)throw new Error("not supported");n=!0,a=s}let l=Uv(o,t,A1(r,a));C1(r),n=n||l!==void 0,l===void 0&&(l=o),i[a]=l}else i[a]=o;return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(typeof e=="string"){let i=t[e];if(i!==void 0){if(e.length!==36)throw new Error("for now you should only call this method when the key is a uuid");pce(r)}return i}else return}}var eT;(e=>{function t(r,i){let n=vo.zoom(i,r.path);if(typeof n=="object"){let a={};for(let o of Object.keys(r.props))a[o]=n[o];return{...r,props:a}}else return{...r,props:{}}}e.replaceProps=t})(eT||(eT={}));var nn;(e=>{function t(l,u){return{...l,path:l.path.slice(u)}}e.drop=t;function r(l,u){var h;return((h=i(l,u))==null?void 0:h.data)??l}e.applySimple=r;function i(l,u){var d,f;let h=u.path;for(var c=[];;){let p;if(l instanceof ji&&u.type===0&&(p=l.runOp({...u,path:h.slice(c.length)}),p===null&&(p=void 0)),p===void 0&&c.length===h.length&&(l instanceof Hi||l instanceof gt||l instanceof Ur?p=l.runOp(u):p=T1.runOp(l,u)),p!==void 0)if(p!==null){let m=p.data;for(let y=c.length-1;y>=0;y--){let _=h[y],x=c[y];if(x instanceof Hi){if(typeof _=="number")throw new Error("illegal arg");m=x.modifyById(_,m)}else if(x instanceof gt){if(typeof _=="number")throw new Error("illegal arg");m=x.modifyById(_,m)}else if(x instanceof Ur){if(typeof _=="number")throw new Error("illegal arg");m=x.modifyById(_,m)}else if(x instanceof ji){let w={...x,[_]:m};m=Object.setPrototypeOf(w,ji.prototype)}else if(typeof x=="object")if(Array.isArray(x)){if(typeof _=="string"&&(_=parseInt(_),isNaN(_)))throw new Error("Invalid path");let w=m;m=[...x],m[_]=w}else m={...x,[_]:m};else return null}return{data:m,actual:{...p.actual,path:h},reverse:{...p.reverse,path:h}}}else return null;let v=h[c.length],g;if(l instanceof Hi){if(typeof v=="number")throw new Error("");g=(d=l.get(v))==null?void 0:d.data}else if(l instanceof gt){if(typeof v=="number")throw new Error("");g=(f=l.get(v))==null?void 0:f.data}else l!==null&&(g=l[v]);if(g!==void 0)c.push(l),l=g;else return null}}e.apply=i;function n(l,u){for(let h=0;h<l.length&&h<u.length;h++)if(l[h]!==u[h])return!0;return!1}e.pathDisjoint=n;function a(l,u){if(l.length!==u.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==u[h])return!1;return!0}e.pathEq=a;function o(l,u){return n(l.path,u.path)}e.commutative=o;function s(l,u){return l.type===0&&u.type===0&&a(l.path,u.path)?Object.keys(l.props).every(h=>u.props[h]!==void 0):!1}e.subsumed=s})(nn||(nn={}));var YO;(e=>{function t(){return[]}e.empty=t;function r(u,h){let c=[];for(let d of u){let[f,...p]=d.path;f===h&&c.push({...d,path:p})}return c}e.removePrefix=r;function i(u,h){return u.map(c=>({...c,path:[h,...c.path]}))}e.addPrefix=i;function n(u,h){return[...u,...h]}e.concat=n;function a(u,h){return[...u.filter(c=>!h.some(d=>nn.subsumed(c,d))),...h]}e.compress=a;function o(u,h){return u.every(c=>h.every(d=>nn.commutative(c,d)))}e.commutative=o;function s(u,h){for(let c of h){let d=l(u,c);d!==null&&(u=d.data)}return u}e.applyAll=s;function l(u,h){var c=u;let d=[],f=[];for(let p of h)try{if(p.type===3){let v=vo.zoom(c,[...p.path,p.id]),g=nn.apply(c,{...p,type:2});if(g!==null){c=g.data;let[m,y]=fce(c,{[p.id]:v});c=m;for(let _ of y){let x=_[_.length-1];_.splice(_.length-1,1),d.push({type:0,path:_,props:{[x]:v}}),f.push({type:0,path:_,props:{[x]:p.id}})}f.push(g.reverse),d.push(g.actual)}}else{let v=nn.apply(c,p);v!==null&&(d.push(v.actual),c=v.data,f.push(v.reverse))}}catch(v){if(v instanceof IG)return null;throw v}return{data:c,actual:d,reverse:f.reverse()}}e.apply=l})(YO||(YO={}));var NG=Symbol(),gce=Symbol(),_x=Symbol(),Eg=class{reportOp(e,t,r=[]){let i=this;if(t===null)return;i._current=t.data;let n=r;for(;!(i instanceof BG);){let a=i._path,o=i._current;if(a!==""&&n.splice(0,0,a),i=i._parent,i===null)return;i.update(a,o)}i.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[_x];r&&r(),delete this._children[e]}}}},mce=class extends Eg{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,T1.runOp(this._current,e),e.path)}},yce=class extends Eg{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Ur.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},kG={get(e,t){if(t===_x)return()=>{e._parent=null};if(t===NG)return e._current;if(t===gce)return e;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let a=r[t],o=xx(e,t,a);return o!==a?(i===void 0&&(i={},e._children=i),i[t]=o,o):a},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},_ce={...kG,set(e,t,r){let i={type:0,props:{[t]:wce(r)??r}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},xce={...kG,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},WD=class extends Eg{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[_x]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var o;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(o=t.get(e))==null?void 0:o.data,a=xx(this,e,n);return a!==n?(r===void 0&&(r={},this._children=r),r[e]=a,a):n}add(e,t,r,i,n){this.runOp({type:7,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.add(e,i[n],a.id,a.data,a.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.add(e,i[n],a.id,a.data,a.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.move(e,i[n],a)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.move(e,i[n],a)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},$D=class extends Eg{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[_x]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id,n=this._current[r].fi;e(this.data(this._current[r].id),i,n)}}find(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;if(e(this.data(i),i))return this.get(i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var o;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(o=t.get(e))==null?void 0:o.data,a=xx(this,e,n);return a!==n?(r===void 0&&(r={},this._children=r),r[e]=a,a):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function dw(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===0&&t.type===0&&vo.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push({...t,path:r})}var BG=class extends Eg{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){dw(this.ts,t,e),dw(this.actual,r,e),dw(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function xx(e,t,r){return r instanceof Hi?new WD(e,t,r):r instanceof gt?new $D(e,t,r):r instanceof Ur?new Proxy(new yce(e,t,r),xce):r!==null&&typeof r=="object"?GD(r)?r:new Proxy(new mce(e,t,r),_ce):r}function bce(e){let t=new BG(e);return[xx(t,"",e),t]}function D1(e,t){let[r,i]=bce(e);return t(r),i.result()}function wce(e){return e instanceof WD||e instanceof $D?e._current:e!==null&&typeof e=="object"?e[NG]:e}var vo;(e=>{function t(a,o){if(o.length===a.length)for(var s=0;s<a.length;){if(a[s]!==o[s])return!1;s+=1}else return!1;return!0}e.equal=t;function r(a,o,s){let l=n(s,a);if(l!==void 0&&typeof l=="object"&&l!==null){let u={...o};return Object.keys(l).forEach(h=>{delete u[h]}),u}else return o}e.removeOverridden=r;function i(a,o){if((a instanceof Hi||a instanceof WD)&&typeof o=="string"||(a instanceof gt||a instanceof $D)&&typeof o=="string")return a.data(o);if(typeof o=="number"&&Array.isArray(a)||typeof o=="string"&&typeof a=="object"&&a!==null)return a[o]}e.zoomOnce=i;function n(a,o,s=0){for(;s<o.length&&a!==void 0;)a=i(a,o[s]),s+=1;return a}e.zoom=n})(vo||(vo={}));function Sce(e,t){let r=[];if(t.length===e.length)for(var i=0;i<e.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}function al(e,t){let r=[];if(t.length<=e.length)for(var i=0;i<t.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}var FG=class{},ZO=class extends FG{constructor(e){super(),this.id=e}},KO=class extends FG{constructor(e){super(),this.data=e}},tT;try{tT=new TextDecoder}catch{}var Te,Tl,ie=0,ki={},St,ll,Mn=0,to=0,tn,ns,bi=[],Dt,JO={useRecords:!1,mapsAsObjects:!0},VG=class{},UG=new VG;UG.name="MessagePack 0xC1";var Pd=!1,P1=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Te)return qG(()=>(iT(),this?this.unpack(e,t):P1.prototype.unpack.call(JO,e,t)));Tl=t>-1?t:e.length,ie=0,to=0,ll=null,tn=null,Te=e;try{Dt=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw Te=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof P1){if(ki=this,this.structures)return St=this.structures,Gm();(!St||St.length>0)&&(St=[])}else ki=JO,(!St||St.length>0)&&(St=[]);return Gm()}unpackMultiple(e,t){let r,i=0;try{Pd=!0;let n=e.length,a=this?this.unpack(e,n):Sx.unpack(e,n);if(t){for(t(a);ie<n;)if(i=ie,t(Gm())===!1)return}else{for(r=[a];ie<n;)i=ie,r.push(Gm());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{Pd=!1,iT()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Gm(){try{if(!ki.trusted&&!Pd){let t=St.sharedLength||0;t<St.length&&(St.length=t)}let e=nr();if(ie==Tl)St.restoreStructures&&QO(),St=null,Te=null,ns&&(ns=null);else if(ie>Tl){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!Pd)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw St.restoreStructures&&QO(),iT(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function QO(){for(let e in St.restoreStructures)St[e]=St.restoreStructures[e];St.restoreStructures=null}function nr(){let e=Te[ie++];if(e<160)if(e<128){if(e<64)return e;{let t=St[e&63]||ki.getStructures&&GG()[e&63];return t?(t.read||(t.read=qD(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,ki.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[jG()]=nr();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(nr(),nr());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=nr();return t}else if(e<192){let t=e-160;if(to>=ie)return ll.slice(ie-Mn,(ie+=t)-Mn);if(to==0&&Tl<140){let r=t<16?XD(t):HG(t);if(r!=null)return r}return rT(t)}else{let t;switch(e){case 192:return null;case 193:return tn?(t=nr(),t>0?tn[1].slice(tn.position1,tn.position1+=t):tn[0].slice(tn.position0,tn.position0-=t)):UG;case 194:return!1;case 195:return!0;case 196:return fw(Te[ie++]);case 197:return t=Dt.getUint16(ie),ie+=2,fw(t);case 198:return t=Dt.getUint32(ie),ie+=4,fw(t);case 199:return ru(Te[ie++]);case 200:return t=Dt.getUint16(ie),ie+=2,ru(t);case 201:return t=Dt.getUint32(ie),ie+=4,ru(t);case 202:if(t=Dt.getFloat32(ie),ki.useFloat32>2){let r=YD[(Te[ie]&127)<<1|Te[ie+1]>>7];return ie+=4,(r*t+(t>0?.5:-.5)>>0)/r}return ie+=4,t;case 203:return t=Dt.getFloat64(ie),ie+=8,t;case 204:return Te[ie++];case 205:return t=Dt.getUint16(ie),ie+=2,t;case 206:return t=Dt.getUint32(ie),ie+=4,t;case 207:return ki.int64AsNumber?(t=Dt.getUint32(ie)*4294967296,t+=Dt.getUint32(ie+4)):t=Dt.getBigUint64(ie),ie+=8,t;case 208:return Dt.getInt8(ie++);case 209:return t=Dt.getInt16(ie),ie+=2,t;case 210:return t=Dt.getInt32(ie),ie+=4,t;case 211:return ki.int64AsNumber?(t=Dt.getInt32(ie)*4294967296,t+=Dt.getUint32(ie+4)):t=Dt.getBigInt64(ie),ie+=8,t;case 212:if(t=Te[ie++],t==114)return n3(Te[ie++]&63);{let r=bi[t];if(r)return r.read?(ie++,r.read(nr())):r.noBuffer?(ie++,r()):r(Te.subarray(ie,++ie));throw new Error("Unknown extension "+t)}case 213:return t=Te[ie],t==114?(ie++,n3(Te[ie++]&63,Te[ie++])):ru(2);case 214:return ru(4);case 215:return ru(8);case 216:return ru(16);case 217:return t=Te[ie++],to>=ie?ll.slice(ie-Mn,(ie+=t)-Mn):Tce(t);case 218:return t=Dt.getUint16(ie),ie+=2,to>=ie?ll.slice(ie-Mn,(ie+=t)-Mn):Ace(t);case 219:return t=Dt.getUint32(ie),ie+=4,to>=ie?ll.slice(ie-Mn,(ie+=t)-Mn):Cce(t);case 220:return t=Dt.getUint16(ie),ie+=2,t3(t);case 221:return t=Dt.getUint32(ie),ie+=4,t3(t);case 222:return t=Dt.getUint16(ie),ie+=2,r3(t);case 223:return t=Dt.getUint32(ie),ie+=4,r3(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var Mce=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function qD(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(a=>Mce.test(a)?a+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}}")(nr);return e.highByte===0&&(e.read=e3(t,e.read)),n()}let i={};for(let n=0,a=e.length;n<a;n++){let o=e[n];i[o]=nr()}return i}return r.count=0,e.highByte===0?e3(t,r):r}var e3=(e,t)=>function(){let r=Te[ie++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=St[i]||GG()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=qD(n,e)),n.read()};function GG(){let e=qG(()=>(Te=null,ki.getStructures()));return St=ki._mergeStructures(e,St)}var rT=bx,Tce=bx,Ace=bx,Cce=bx;function bx(e){let t;if(e<16&&(t=XD(e)))return t;if(e>64&&tT)return tT.decode(Te.subarray(ie,ie+=e));let r=ie+e,i=[];for(t="";ie<r;){let n=Te[ie++];if(!(n&128))i.push(n);else if((n&224)===192){let a=Te[ie++]&63;i.push((n&31)<<6|a)}else if((n&240)===224){let a=Te[ie++]&63,o=Te[ie++]&63;i.push((n&31)<<12|a<<6|o)}else if((n&248)===240){let a=Te[ie++]&63,o=Te[ie++]&63,s=Te[ie++]&63,l=(n&7)<<18|a<<12|o<<6|s;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=Ir.apply(String,i),i.length=0)}return i.length>0&&(t+=Ir.apply(String,i)),t}function t3(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=nr();return t}function r3(e){if(ki.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[jG()]=nr();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(nr(),nr());return t}}var Ir=String.fromCharCode;function HG(e){let t=ie,r=new Array(e);for(let i=0;i<e;i++){let n=Te[ie++];if((n&128)>0){ie=t;return}r[i]=n}return Ir.apply(String,r)}function XD(e){if(e<4)if(e<2){if(e===0)return"";{let t=Te[ie++];if((t&128)>1){ie-=1;return}return Ir(t)}}else{let t=Te[ie++],r=Te[ie++];if((t&128)>0||(r&128)>0){ie-=2;return}if(e<3)return Ir(t,r);let i=Te[ie++];if((i&128)>0){ie-=3;return}return Ir(t,r,i)}else{let t=Te[ie++],r=Te[ie++],i=Te[ie++],n=Te[ie++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){ie-=4;return}if(e<6){if(e===4)return Ir(t,r,i,n);{let a=Te[ie++];if((a&128)>0){ie-=5;return}return Ir(t,r,i,n,a)}}else if(e<8){let a=Te[ie++],o=Te[ie++];if((a&128)>0||(o&128)>0){ie-=6;return}if(e<7)return Ir(t,r,i,n,a,o);let s=Te[ie++];if((s&128)>0){ie-=7;return}return Ir(t,r,i,n,a,o,s)}else{let a=Te[ie++],o=Te[ie++],s=Te[ie++],l=Te[ie++];if((a&128)>0||(o&128)>0||(s&128)>0||(l&128)>0){ie-=8;return}if(e<10){if(e===8)return Ir(t,r,i,n,a,o,s,l);{let u=Te[ie++];if((u&128)>0){ie-=9;return}return Ir(t,r,i,n,a,o,s,l,u)}}else if(e<12){let u=Te[ie++],h=Te[ie++];if((u&128)>0||(h&128)>0){ie-=10;return}if(e<11)return Ir(t,r,i,n,a,o,s,l,u,h);let c=Te[ie++];if((c&128)>0){ie-=11;return}return Ir(t,r,i,n,a,o,s,l,u,h,c)}else{let u=Te[ie++],h=Te[ie++],c=Te[ie++],d=Te[ie++];if((u&128)>0||(h&128)>0||(c&128)>0||(d&128)>0){ie-=12;return}if(e<14){if(e===12)return Ir(t,r,i,n,a,o,s,l,u,h,c,d);{let f=Te[ie++];if((f&128)>0){ie-=13;return}return Ir(t,r,i,n,a,o,s,l,u,h,c,d,f)}}else{let f=Te[ie++],p=Te[ie++];if((f&128)>0||(p&128)>0){ie-=14;return}if(e<15)return Ir(t,r,i,n,a,o,s,l,u,h,c,d,f,p);let v=Te[ie++];if((v&128)>0){ie-=15;return}return Ir(t,r,i,n,a,o,s,l,u,h,c,d,f,p,v)}}}}}function fw(e){return ki.copyBuffers?Uint8Array.prototype.slice.call(Te,ie,ie+=e):Te.subarray(ie,ie+=e)}function ru(e){let t=Te[ie++];if(bi[t])return bi[t](Te.subarray(ie,ie+=e));throw new Error("Unknown extension type "+t)}var i3=new Array(4096);function jG(){let e=Te[ie++];if(e>=160&&e<192){if(e=e-160,to>=ie)return ll.slice(ie-Mn,(ie+=e)-Mn);if(!(to==0&&Tl<180))return rT(e)}else return ie--,nr();let t=(e<<5^(e>1?Dt.getUint16(ie):e>0?Te[ie]:0))&4095,r=i3[t],i=ie,n=ie+e-3,a,o=0;if(r&&r.bytes==e){for(;i<n;){if(a=Dt.getUint32(i),a!=r[o++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(a=Te[i++],a!=r[o++]){i=1879048192;break}if(i===n)return ie=i,r.string;n-=3,i=ie}for(r=[],i3[t]=r,r.bytes=e;i<n;)a=Dt.getUint32(i),r.push(a),i+=4;for(n+=3;i<n;)a=Te[i++],r.push(a);let s=e<16?XD(e):HG(e);return s!=null?r.string=s:r.string=rT(e)}var n3=(e,t)=>{var r=nr();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=St[e];return n&&n.isShared&&((St.restoreStructures||(St.restoreStructures=[]))[e]=n),St[e]=r,r.read=qD(r,i),r.read()},WG=typeof self=="object"?self:global;bi[0]=()=>{};bi[0].noBuffer=!0;bi[101]=()=>{let e=nr();return(WG[e[0]]||Error)(e[1])};bi[105]=e=>{let t=Dt.getUint32(ie-4);ns||(ns=new Map);let r=Te[ie],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};ns.set(t,n);let a=nr();return n.used?Object.assign(i,a):(n.target=a,a)};bi[112]=e=>{let t=Dt.getUint32(ie-4),r=ns.get(t);return r.used=!0,r.target};bi[115]=()=>new Set(nr());var $G=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");bi[116]=e=>{let t=e[0],r=$G[t];if(!r)throw new Error("Could not find typed array for code "+t);return new WG[r](Uint8Array.prototype.slice.call(e,1).buffer)};bi[120]=()=>{let e=nr();return new RegExp(e[0],e[1])};bi[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=ie;ie+=t-4,tn=[nr(),nr()],tn.position0=0,tn.position1=0;let i=ie;ie=r;try{return nr()}finally{ie=i}};bi[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function qG(e){let t=Tl,r=ie,i=Mn,n=to,a=ll,o=ns,s=tn,l=new Uint8Array(Te.slice(0,Tl)),u=St,h=St.slice(0,St.length),c=ki,d=Pd,f=e();return Tl=t,ie=r,Mn=i,to=n,ll=a,ns=o,tn=s,Te=l,Pd=d,St=u,St.splice(0,St.length,...h),ki=c,Dt=new DataView(Te.buffer,Te.byteOffset,Te.byteLength),f}function iT(){Te=null,ns=null,St=null}function Dce(e){e.unpack?bi[e.type]=e.unpack:bi[e.type]=e}var YD=new Array(147);for(let e=0;e<256;e++)YD[e]=+("1e"+Math.floor(45.15-e*.30103));var Sx=new P1({useRecords:!1});Sx.unpack;Sx.unpackMultiple;Sx.unpack;var Pce=new Float32Array(1);new Uint8Array(Pce.buffer,0,4);var A0;try{A0=new TextEncoder}catch{}var L1,ZD,Mx=typeof Buffer<"u",pw=Mx?Buffer.allocUnsafeSlow:Uint8Array,XG=Mx?Buffer:Uint8Array,a3=Mx?4294967296:2144337920,de,ur,se=0,Oa,Ra=null,Lce=/[\u0080-\uFFFF]/,Rf=Symbol("record-id"),YG=class extends P1{constructor(e){super(e),this.offset=0;let t,r,i,n,a,o=0,s=XG.prototype.utf8Write?function(b,S,M){return de.utf8Write(b,S,M)}:A0&&A0.encodeInto?function(b,S){return A0.encodeInto(b,de.subarray(S)).written}:!1,l=this;e||(e={});let u=e&&e.sequential,h=e.structures||e.saveStructures,c=e.maxSharedStructures;if(c==null&&(c=h?32:0),c>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;d==null&&(d=h?32:64),u&&!e.saveStructures&&(this.structures=[]);let f=c>32||d+c>64,p=c+64,v=c+d+64;if(v>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],m=0,y=0;this.pack=this.encode=function(b,S){if(de||(de=new pw(8192),ur=new DataView(de.buffer,0,8192),se=0),Oa=de.length-10,Oa-se<2048?(de=new pw(de.length),ur=new DataView(de.buffer,0,de.length),Oa=de.length-10,se=0):se=se+7&2147483640,t=se,a=l.structuredClone?new Map:null,l.bundleStrings?(Ra=["",""],de[se++]=214,de[se++]=98,Ra.position=se-t,se+=4):Ra=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let M=r.sharedLength||0;if(M>c)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let A=0;A<M;A++){let T=r[A];if(!T)continue;let C,D=r.transitions;for(let P=0,E=T.length;P<E;P++){let O=T[P];C=D[O],C||(C=D[O]=Object.create(null)),D=C}D[Rf]=A+64}o=M}u||(r.nextId=M+64)}i&&(i=!1),n=r||[];try{if(_(b),Ra){ur.setUint32(Ra.position+t,se-Ra.position-t);let M=Ra;Ra=null,_(M[0]),_(M[1])}if(l.offset=se,a&&a.idsToInsert){se+=a.idsToInsert.length*6,se>Oa&&w(se),l.offset=se;let M=Ice(de.subarray(t,se),a.idsToInsert);return a=null,M}return S&Oce?(de.start=t,de.end=se,de):de.subarray(t,se)}finally{if(r){if(y<10&&y++,m>1e4)r.transitions=null,y=0,m=0,g.length>0&&(g=[]);else if(g.length>0&&!u){for(let M=0,A=g.length;M<A;M++)g[M][Rf]=0;g=[]}if(i&&l.saveStructures){let M=r.sharedLength||c;r.length>M&&(r=r.slice(0,M));let A=de.subarray(t,se);return l.saveStructures(r,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(b)):(o=M,A)}}S&Rce&&(se=t)}};let _=b=>{se>Oa&&(de=w(se));var S=typeof b,M;if(S==="string"){let A=b.length;if(Ra&&A>=8&&A<4096){let D=Lce.test(b);Ra[D?0:1]+=b,de[se++]=193,_(D?-A:A);return}let T;A<32?T=1:A<256?T=2:A<65536?T=3:T=5;let C=A*3;if(se+C>Oa&&(de=w(se+C)),A<64||!s){let D,P,E,O=se+T;for(D=0;D<A;D++)P=b.charCodeAt(D),P<128?de[O++]=P:P<2048?(de[O++]=P>>6|192,de[O++]=P&63|128):(P&64512)===55296&&((E=b.charCodeAt(D+1))&64512)===56320?(P=65536+((P&1023)<<10)+(E&1023),D++,de[O++]=P>>18|240,de[O++]=P>>12&63|128,de[O++]=P>>6&63|128,de[O++]=P&63|128):(de[O++]=P>>12|224,de[O++]=P>>6&63|128,de[O++]=P&63|128);M=O-se-T}else M=s(b,se+T,C);M<32?de[se++]=160|M:M<256?(T<2&&de.copyWithin(se+2,se+1,se+1+M),de[se++]=217,de[se++]=M):M<65536?(T<3&&de.copyWithin(se+3,se+2,se+2+M),de[se++]=218,de[se++]=M>>8,de[se++]=M&255):(T<5&&de.copyWithin(se+5,se+3,se+3+M),de[se++]=219,ur.setUint32(se,M),se+=4),se+=M}else if(S==="number")if(b>>>0===b)b<64?de[se++]=b:b<256?(de[se++]=204,de[se++]=b):b<65536?(de[se++]=205,de[se++]=b>>8,de[se++]=b&255):(de[se++]=206,ur.setUint32(se,b),se+=4);else if(b>>0===b)b>=-32?de[se++]=256+b:b>=-128?(de[se++]=208,de[se++]=b+256):b>=-32768?(de[se++]=209,ur.setInt16(se,b),se+=2):(de[se++]=210,ur.setInt32(se,b),se+=4);else{let A;if((A=this.useFloat32)>0&&b<4294967296&&b>=-2147483648){de[se++]=202,ur.setFloat32(se,b);let T;if(A<4||(T=b*YD[(de[se]&127)<<1|de[se+1]>>7])>>0===T){se+=4;return}else se--}de[se++]=203,ur.setFloat64(se,b),se+=8}else if(S==="object")if(!b)de[se++]=192;else{if(a){let T=a.get(b);if(T){if(!T.id){let C=a.idsToInsert||(a.idsToInsert=[]);T.id=C.push(T)}de[se++]=214,de[se++]=112,ur.setUint32(se,T.id),se+=4;return}else a.set(b,{offset:se-t})}let A=b.constructor;if(A===Object)x(b,!0);else if(A===Array){M=b.length,M<16?de[se++]=144|M:M<65536?(de[se++]=220,de[se++]=M>>8,de[se++]=M&255):(de[se++]=221,ur.setUint32(se,M),se+=4);for(let T=0;T<M;T++)_(b[T])}else if(A===Map){M=b.size,M<16?de[se++]=128|M:M<65536?(de[se++]=222,de[se++]=M>>8,de[se++]=M&255):(de[se++]=223,ur.setUint32(se,M),se+=4);for(let[T,C]of b)_(T),_(C)}else{for(let T=0,C=L1.length;T<C;T++){let D=ZD[T];if(b instanceof D){let P=L1[T];if(P.write){P.type&&(de[se++]=212,de[se++]=P.type,de[se++]=0),_(P.write.call(this,b));return}let E=de,O=ur,z=se;de=null;let B;try{B=P.pack.call(this,b,N=>(de=E,E=null,se+=N,se>Oa&&w(se),{target:de,targetView:ur,position:se-N}),_)}finally{E&&(de=E,ur=O,se=z,Oa=de.length-10)}B&&(B.length+se>Oa&&w(B.length+se),se=Ece(B,de,se,P.type));return}}x(b,!b.hasOwnProperty)}}else if(S==="boolean")de[se++]=b?195:194;else if(S==="bigint"){if(b<BigInt(1)<<BigInt(63)&&b>=-(BigInt(1)<<BigInt(63)))de[se++]=211,ur.setBigInt64(se,b);else if(b<BigInt(1)<<BigInt(64)&&b>0)de[se++]=207,ur.setBigUint64(se,b);else if(this.largeBigIntToFloat)de[se++]=203,ur.setFloat64(se,Number(b));else throw new RangeError(b+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");se+=8}else if(S==="undefined")this.encodeUndefinedAsNil?de[se++]=192:(de[se++]=212,de[se++]=0,de[se++]=0);else if(S==="function")_(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+S)},x=this.useRecords===!1?this.variableMapSize?b=>{let S=Object.keys(b),M=S.length;M<16?de[se++]=128|M:M<65536?(de[se++]=222,de[se++]=M>>8,de[se++]=M&255):(de[se++]=223,ur.setUint32(se,M),se+=4);let A;for(let T=0;T<M;T++)_(A=S[T]),_(b[A])}:(b,S)=>{de[se++]=222;let M=se-t;se+=2;let A=0;for(let T in b)(S||b.hasOwnProperty(T))&&(_(T),_(b[T]),A++);de[M+++t]=A>>8,de[M+t]=A&255}:b=>{let S=Object.keys(b),M,A=n.transitions||(n.transitions=Object.create(null)),T=0;for(let D=0,P=S.length;D<P;D++){let E=S[D];M=A[E],M||(M=A[E]=Object.create(null),T++),A=M}let C=A[Rf];if(C)C>=96&&f?(de[se++]=((C-=96)&31)+96,de[se++]=C>>5):de[se++]=C;else{C=n.nextId,C||(C=64),C<p&&this.shouldShareStructure&&!this.shouldShareStructure(S)?(C=n.nextOwnId,C<v||(C=p),n.nextOwnId=C+1):(C>=v&&(C=p),n.nextId=C+1);let D=S.highByte=C>=96&&f?C-96>>5:-1;A[Rf]=C,n[C-64]=S,C<p?(S.isShared=!0,n.sharedLength=C-63,i=!0,D>=0?(de[se++]=(C&31)+96,de[se++]=D):de[se++]=C):(D>=0?(de[se++]=213,de[se++]=114,de[se++]=(C&31)+96,de[se++]=D):(de[se++]=212,de[se++]=114,de[se++]=C),T&&(m+=y*T),g.length>=d&&(g.shift()[Rf]=0),g.push(A),_(S))}for(let D=0,P=S.length;D<P;D++)_(b[S[D]])},w=b=>{let S;if(b>16777216){if(b-t>a3)throw new Error("Packed buffer would be larger than maximum buffer size");S=Math.min(a3,Math.round(Math.max((b-t)*(b>67108864?1.25:2),4194304)/4096)*4096)}else S=(Math.max(b-t<<2,de.length-1)>>12)+1<<12;let M=new pw(S);return ur=new DataView(M.buffer,0,S),de.copy?de.copy(M,0,t,b):M.set(de.slice(t,b)),se-=t,t=0,Oa=M.length-10,de=M}}useBuffer(e){de=e,ur=new DataView(de.buffer,de.byteOffset,de.byteLength),se=0}};ZD=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,VG];L1=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:a,position:o}=t(6);n[o++]=214,n[o++]=255,a.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:n,targetView:a,position:o}=t(10);n[o++]=215,n[o++]=255,a.setUint32(o,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),a.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:a,position:o}=t(3);n[o++]=212,n[o++]=255,n[o++]=255}else{let{target:n,targetView:a,position:o}=t(15);n[o++]=199,n[o++]=12,n[o++]=255,a.setUint32(o,e.getMilliseconds()*1e6),a.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(n[a++]=212,n[a++]=115,n[a++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?o3(e,16,t):s3(Mx?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==XG&&this.structuredClone?o3(e,$G.indexOf(r.name),t):s3(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function o3(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:a,position:o}=r(4+n);a[o++]=199,a[o++]=n+1}else if(n+1<65536){var{target:a,position:o}=r(5+n);a[o++]=200,a[o++]=n+1>>8,a[o++]=n+1&255}else{var{target:a,position:o,targetView:s}=r(7+n);a[o++]=201,s.setUint32(o,n+1),o+=4}a[o++]=116,a[o++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function s3(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:a}=t(r+5);i[n++]=198,a.setUint32(n,r),n+=4}i.set(e,n)}function Ece(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function Ice(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((a,o)=>a.offset>o.offset?1:-1);r=t.pop();){let a=r.offset,o=r.id;e.copyWithin(a+i,a,n),i-=6;let s=a+i;e[s++]=214,e[s++]=105,e[s++]=o>>24,e[s++]=o>>16&255,e[s++]=o>>8&255,e[s++]=o&255,n=a}return e}function tf(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");ZD.unshift(e.Class),L1.unshift(e)}Dce(e)}var ZG=new YG({useRecords:!1});ZG.pack;ZG.pack;var Oce=512,Rce=1024,l3=new YG({structuredClone:!0});tf({Class:Ur.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Ur.prototype),e}});tf({Class:gt.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,gt.prototype),e}});tf({Class:Hi.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Hi.prototype),e}});tf({Class:ZO.prototype.constructor,type:4,write(e){return e.id},read(e){return new ZO(e)}});tf({Class:KO.prototype.constructor,type:5,write(e){return e.data},read(e){return new KO(e)}});tf({Class:ji.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,ji.prototype),e}});function zce(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}function nT(e){if(GD(e))return e;if(Array.isArray(e))return e.map(nT);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=nT(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var u3;(e=>{function t(n){return l3.pack(n)}e.serialize=t;function r(n){return l3.unpack(n)}e.deserialize=r;function i(n){return zce(t(nT(n))).toString()}e.checksum=i})(u3||(u3={}));var h3;(e=>{function t(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}e.is=t;function r(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,mode:"Object",disabled:!1,toggle:!1,actions:new gt}:{type:i,disabled:!1,key:void 0,toggle:!1,actions:new gt}}e.defaultData=r})(h3||(h3={}));var E1;(e=>{function t(r){return{type:"Property",value:[r??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(E1||(E1={}));var aT;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:E1.propertyDefaultData(n),rOperand:{...E1.valueDefaultData}}}e.comparisonDefaultData=t;function r(n){return{type:"Distance",toObject:n??null,fromObject:n??null,distance:200}}e.distanceDefaultData=r;function i(n,a){return{type:"State",object:n??null,state:a??null}}e.stateDefaultData=i})(aT||(aT={}));var c3;(e=>{function t(i){return i.type==="Conditional"}e.is=t;function r(i){return{type:"Conditional",disabled:!1,inActions:new gt,outActions:new gt,condition:aT.distanceDefaultData(i)}}e.defaultData=r})(c3||(c3={}));var d3;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new gt,drop:new gt}})(d3||(d3={}));var f3;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new gt})(f3||(f3={}));var p3;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(p3||(p3={}));var v3;(e=>{function t(i){return i.type==="MouseHover"}e.is=t;function r(){return{type:"MouseHover",disabled:!1,actions:new gt}}e.defaultData=r})(v3||(v3={}));var g3;(e=>{function t(i){return i.type==="Scroll"}e.is=t;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new gt}}e.defaultData=r})(g3||(g3={}));var m3;(e=>{function t(i){return i.type==="Start"}e.is=t;function r(){return{type:"Start",disabled:!1,actions:new gt}}e.defaultData=r})(m3||(m3={}));var y3;(e=>{function t(i){return i.type==="Collision"}e.is=t;function r(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new gt}}e.defaultData=r})(y3||(y3={}));var Kc;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]}e.isEqual=t;function r(i,n,a){return[i[0]+(n[0]-i[0])*a,i[1]+(n[1]-i[1])*a]}e.lerp=r})(Kc||(Kc={}));var hh;(e=>{function t(l,u){return l[0]===u[0]&&l[1]===u[1]&&l[2]===u[2]}e.isEqual=t;function r(l,u){return[l[0]+u[0],l[1]+u[1],l[2]+u[2]]}e.add=r;function i(l,u){return[l[0]-u[0],l[1]-u[1],l[2]-u[2]]}e.sub=i;function n(l,u){return[l[0]/u[0],l[1]/u[1],l[2]/u[2]]}e.div=n;function a(l,u){return[l[0]*u[0],l[1]*u[1],l[2]*u[2]]}e.mul=a;function o(l,u){return Math.hypot(l[0]-u[0],l[1]-u[1],l[2]-u[2])}e.dist=o;function s(l,u,h){return[l[0]+(u[0]-l[0])*h,l[1]+(u[1]-l[1])*h,l[2]+(u[2]-l[2])*h]}e.lerp=s})(hh||(hh={}));var I1;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]}e.isEqual=t;function r(i,n,a){return[i[0]+(n[0]-i[0])*a,i[1]+(n[1]-i[1])*a,i[2]+(n[2]-i[2])*a,i[3]+(n[3]-i[3])*a]}e.lerp=r})(I1||(I1={}));var Ld;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,a){for(let o=0;o<16;o++)if(n[o]!==a[o])return!1;return!0}e.isEqual=t;function r(n){return n??e.identity}e.simplify=r;function i(n,a){let o=a.slice(0);for(var s=0,l=a.length;s<l;s+=3){let u=n[3]*a[s]+n[7]*a[s+1]+n[11]*a[s+2]+n[15];o[s]=(n[0]*a[s]+n[4]*a[s+1]+n[8]*a[s+2]+n[12])/u,o[s+1]=(n[1]*a[s]+n[5]*a[s+1]+n[9]*a[s+2]+n[13])/u,o[s+2]=(n[2]*a[s]+n[6]*a[s+1]+n[10]*a[s+2]+n[14])/u}return o}e.applyMatrix4=i})(Ld||(Ld={}));var Qr;(e=>{function t(l){return typeof l=="object"&&typeof l.r=="number"&&typeof l.g=="number"&&typeof l.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:1}}e.toRgb255a1=r;function i(l){return{r:l.r,g:l.g,b:l.b}}e.clone=i;function n(l){return l=Math.floor(l),{r:(l>>16&255)/255,g:(l>>8&255)/255,b:(l&255)/255}}e.fromHex=n;function a(l){return Math.round(l.r*255)*65536+Math.round(l.g*255)*256+Math.round(l.b*255)}e.toHex=a;function o(l,u){return l.r===u.r&&l.g===u.g&&l.b===u.b}e.equals=o;function s(l,u,h){return{r:l.r+(u.r-l.r)*h,g:l.g+(u.g-l.g)*h,b:l.b+(u.b-l.b)*h}}e.lerp=s})(Qr||(Qr={}));var Rn;(e=>{e.white={...Qr.white,a:1},e.transparent={...Qr.white,a:0};function t(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}e.from0to1=t;function r(o,s){return{...Qr.fromHex(o),a:s}}e.fromHexAndA=r;function i(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}e.toRgb255a1=i;function n(o,s){return Qr.equals(o,s)&&o.a===s.a}e.equals=n;function a(o,s,l){return{r:o.r+(s.r-o.r)*l,g:o.g+(s.g-o.g)*l,b:o.b+(s.b-o.b)*l,a:o.a+(s.a-o.a)*l}}e.lerp=a})(Rn||(Rn={}));var oT;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(oT||(oT={}));var _3;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(_3||(_3={}));var x3;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(x3||(x3={}));var Qs;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Qs||(Qs={}));var Dh;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(Dh||(Dh={}));var Gv;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1,autoZoom:!1,autoZoomFrustumSize:790},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(Gv||(Gv={}));var ul;(e=>{function t(i,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*n,0,0]},grid:{count:[2,2,2],size:i.map(a=>a*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function r(i,n){let a={...i};if(KG.forEach(o=>{Object.assign(a,{[o]:n[o]??i[o]})}),a.radial={...i.radial},n.radial){let o=i.radial,s=n.radial;JG.forEach(l=>{Object.assign(a.radial,{[l]:s[l]??o[l]})})}if(a.linear={...i.linear},n.linear){let o=i.linear,s=n.linear;QG.forEach(l=>{Object.assign(a.linear,{[l]:s[l]??o[l]})})}if(a.grid={...i.grid},n.grid){let o=i.grid,s=n.grid;eH.forEach(l=>{Object.assign(a.grid,{[l]:s[l]??o[l]})})}if(a.toObject={...i.toObject},n.toObject){let o=i.toObject,s=n.toObject;tH.forEach(l=>{Object.assign(a.toObject,{[l]:s[l]??o[l]})})}if(a.randomnessObject={...i.randomnessObject},n.randomnessObject){let o=i.randomnessObject,s=n.randomnessObject;rH.forEach(l=>{Object.assign(a.randomnessObject,{[l]:s[l]??o[l]})})}return a}e.merge=r})(ul||(ul={}));var sT;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function r(i,n){let a=[];i.count!==void 0&&a.push({type:0,path:n,props:{count:i.count}});for(let o of t){let s=i[o];s&&Object.keys(s).length>0&&a.push({type:0,path:[...n,o],props:s})}return a}e.toOps=r})(sT||(sT={}));var KG=["count"],JG=["radius","start","end","position","scale","rotation"],QG=["position","scale","rotation"],eH=["count","size"],tH=["count","position","scale","rotation"],rH=["strength","scale","rotation","position","movement","seed","freqScale"],O1;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(O1||(O1={}));var lT;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(lT||(lT={}));var uT;(e=>{function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:Rn.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(i==="SpotLight")return{type:i,color:Rn.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:Rn.white,intensity:1,shadows:!0,size:2e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(uT||(uT={}));var hT;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(hT||(hT={}));var cT;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(cT||(cT={}));var dT;(e=>e.defaultData={...cT.defaultData,...hT.defaultData})(dT||(dT={}));var R1;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(R1||(R1={}));var b3;(e=>{function t(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}e.is=t})(b3||(b3={}));var w3;(e=>{function t(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}e.is=t})(w3||(w3={}));var Nce=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],la;(e=>{function t(a,o){let{texture:s,...l}=o;if(Object.assign(a,l),s){let u=a.texture;u&&Object.assign(u,s)}}e.patch=t;function r(a,o){return a==="light"&&o?i(o):n(a)}e.defaultData=r;function i(a){let o={mode:0,isMask:!1,visible:!0};switch(a){case"phong":return{...o,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...o,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...o,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...o,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function n(a){let o={alpha:1,mode:0,isMask:!1,visible:!0};switch(a){case"texture":return{...o,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{...o,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:R1.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1};case"color":return{...o,type:"color",color:Qr.fromHex(5526619)};case"depth":return{...o,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...o,type:"normal",cnormal:[1,1,1]};case"gradient":return{...o,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...o,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Qr.fromHex(6710886),a:1},colorB:{...Qr.fromHex(6710886),a:1},colorC:{...Qr.fromHex(16777215),a:1},colorD:{...Qr.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...o,type:"fresnel",color:Rn.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...o,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...o,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Rn.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...o,type:"outline",outlineColor:Rn.fromHexAndA(0,1),contourColor:Rn.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...o,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{...o,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...o,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Qr.fromHex(0),a:1},colorB:{...Qr.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(la||(la={}));var ch;(e=>{function t(u){return!u.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}e.isMergable=t;function r(u){let h="";return u.layers.forEach(c=>{Object.entries(c.data).forEach(([d,f])=>{h+=`${d}${f}`,Array.isArray(f)?f.forEach(p=>h+=`${p}`):typeof f=="object"?Object.values(f).forEach(p=>{typeof p=="number"?h+=`${p.toFixed(4)}`:h+=`${p}`}):h+=`${f}`})}),h}e.getHash=r;function i(){return{layers:new gt}}e.defaultEmptyData=i;function n(u="layer1",h="layer2"){return o("phong",u,h)}e.defaultData=n;function a(u,h){return{...u,name:h}}e.withName=a;function o(u,h="layer1",c="layer2"){let d=new gt;return d.push({fi:0,data:la.defaultData("light",u),id:h}),d.push({fi:1,data:la.defaultData("color"),id:c}),{layers:d}}e.defaultTwoLayerData=o;function s(u,h="phong",c="layer1",d="layer2"){let f=la.defaultData("texture");Object.assign(f.texture,{image:u});let p=new gt;return p.push({fi:0,data:f,id:c}),p.push({fi:1,data:la.defaultData("light",h),id:d}),{layers:p}}e.defaultTwoLayerTextureData=s;function l(u,h="phong",c="layer1",d="layer2"){let f=la.defaultData("video");Object.assign(f.texture,{video:u});let p=new gt;return p.push({fi:0,data:f,id:c}),p.push({fi:1,data:la.defaultData("light",h),id:d}),{layers:p}}e.defaultTwoLayerVideoTextureData=l})(ch||(ch={}));var z1;(e=>{function t(){return{points:new gt,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(z1||(z1={}));var N1;(e=>{function t(){return{points:new gt,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(N1||(N1={}));var iH={type:"Ellipse",width:100,height:100,spikes:64,angle:360,innerRadius:0},fT;(e=>{function t(r,i){let n={...r};return aH.forEach(a=>{Object.assign(n,{[a]:i[a]??r[a]})}),n}e.merge=t})(fT||(fT={}));var nH={shape:iH,depth:1,offset:0,bevel:0,bevelSides:1,angle:0,twist:0,startScale:1,endScale:1},aH=["depth","offset","angle","twist","startScale","endScale"],k1;(e=>{function t(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}e.is2DParametricMesh=t;function r(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"}e.isParametricMesh=r})(k1||(k1={}));var pT;(e=>{function t(r,i){let n={...r};return Object.assign(n,i),n.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(n.extrusion={...r.extrusion},Object.assign(n.extrusion,fT.merge(n.extrusion,i.extrusion))),n}e.merge=t})(pT||(pT={}));var tv;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:N1.defaultData(),extrusion:nH};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:z1.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI};throw new Error("not implemented")}e.defaultData=t})(tv||(tv={}));var S3=["width","height","depth"],M3;(e=>{function t(i){return i==="Component"||i==="Instance"}e.isComponentRelated=t;function r(i){return i==="Empty"||i==="Instance"}e.isEmptyOrComponent=r})(M3||(M3={}));var Ed;(e=>{e.identity={...oT.identity,hiddenMatrix:Ld.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,a){return{position:(a==null?void 0:a.position)||n.position,rotation:(a==null?void 0:a.rotation)||n.rotation,scale:(a==null?void 0:a.scale)||n.scale,hiddenMatrix:(a==null?void 0:a.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,a){return ece({position:hh.isEqual(n.position,a.position)?void 0:a.position,rotation:hh.isEqual(n.rotation,a.rotation)?void 0:a.rotation,scale:hh.isEqual(n.scale,a.scale)?null:a.scale,hiddenMatrix:Ld.isEqual(n.hiddenMatrix,a.hiddenMatrix)?void 0:a.hiddenMatrix})}e.diff=i})(Ed||(Ed={}));var T3;(e=>e.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(T3||(T3={}));var xa;(e=>e.defaultData={states:new gt,events:new gt,visible:!0,raycastLock:!1,collision:"visibility",physics:null,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Ed.identity,cloner:null})(xa||(xa={}));var A3;(e=>e.defaultData={type:"Empty",...xa.defaultData})(A3||(A3={}));var C3;(e=>e.defaultData={type:"Component",...xa.defaultData})(C3||(C3={}));var rv;(e=>e.defaultData={type:"Mesh",...xa.defaultData,...dT.defaultData})(rv||(rv={}));var B1;(e=>e.defaultData={...xa.defaultData,...Ed.identity,...Gv.defaultData})(B1||(B1={}));var vT;(e=>{function t(r){return{...xa.defaultData,...uT.defaultData(r)}}e.defaultData=t})(vT||(vT={}));var F1;(e=>{function t(i,n,a=0){for(;a<n.length;){let o=i?i[n[a]]:void 0;if(n.length===a+1)return o;if(o)i=o.descendants,a+=1;else return}}e.resolveWithDes=t;function r(i,n,a=0){let o=t(i,n,a);if(o){let s=Object.keys(o);if(s.length===1&&s[0]==="descendants")return}return o}e.resolve=r})(F1||(F1={}));var Id;(e=>{e.rootOverrideProps=["physics"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(i,n){return{...xa.defaultData,...n,component:i,overrides:new ji,physics:void 0,type:"Instance"}}e.ofComponent=t;function r(i){let n=Ed.fromObject(i.data);return t(i.id,n)}e.fromComponentData=r})(Id||(Id={}));var gT;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Ld.identity,name:"Play Camera",visible:!0,raycastLock:!1,collision:"visibility",physics:null,states:new gt,events:new gt,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Gv.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...xa.defaultData,...rv.defaultData,geometry:tv.defaultData("RectangleGeometry"),material:ch.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...xa.defaultData,...rv.defaultData,geometry:tv.defaultData("BooleanGeometry"),material:ch.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...xa.defaultData,...rv.defaultData,geometry:tv.defaultData("TextGeometry"),material:ch.defaultTwoLayerData("phong","layer1","layer2")}))(gT||(gT={}));var Jc;(e=>{function t(a,o){let s={name:o};return a.type==="Mesh"?(s.geometry={},"material"in a&&(s.material={layers:new ji}),"materials"in a&&(s.materials=a.materials.map(l=>({layers:new ji})))):Dh.is(a.type)&&(s.perspective={},s.orthographic={}),s}e.newEmpty=t;function r(a,o){if(o===void 0)return a;let s={...a};return"material"in s&&"material"in o&&o.material&&(s.material=D1(s.material,l=>{if(typeof l!="string")for(let[u,h]of Object.entries(o.material.layers)){let c=l.layers.data(u);c&&la.patch(c,h)}}).data),s.materials&&o.materials&&(s.materials=D1(s.materials,l=>{var u,h;for(let c=0;c<s.materials.length;c++){let d=o.materials[c];if(typeof d!="string")for(let[f,p]of Object.entries(d.layers)){let v=(h=(u=l[c])==null?void 0:u.layers)==null?void 0:h.data(f);v&&la.patch(v,p)}}}).data),s}function i(a,o){let s,l=[],u={orthographic:0,perspective:0,geometry:0};function h(c,d){for(let[f,p]of Object.entries(d.layers)){let{texture:v,...g}=p;if(v!==void 0&&Object.keys(v).length>0){let m={path:[...c,"layers",f,"texture"],props:v,type:0};l.push(m)}if(Object.keys(g).length>0){let m={path:[...c,"layers",f],props:g,type:0};l.push(m)}}}for(let[c,d]of Object.entries(o))if(c!=="name")if(c==="cloner")l.push(...sT.toOps(d,["cloner"]));else if(c==="pathSnapping")l.push({path:[c],props:{slide:d.slide,offset:d.offset},type:0});else if(c==="material")h(["material"],d);else if(c==="materials")for(let[f,p]of Object.entries(d))h(["materials",f],p);else if(u[c]===0){if(c==="geometry"&&d.extrusion!==void 0){let f={path:[c,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[c],props:d,type:0};l.push(f)}}else s===void 0&&(s={path:[],props:{},type:0},l.push(s)),s.props[c]=d;return l}e.toOps=i;function n(a,o){var l,u,h,c,d,f;if(o===void 0)return a;let s={...a};if(Object.assign(s,Ed.merge(s,o)),Object.assign(s,{pathSnapping:Object.assign({},s.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??((u=s.pathSnapping)==null?void 0:u.slide)??0,offset:((h=o.pathSnapping)==null?void 0:h.offset)??((c=s.pathSnapping)==null?void 0:c.offset)??0})}),Dh.is(a.type)){s.orthographic={...s.orthographic},s.perspective={...s.perspective};let p=o;((d=p.orthographic)==null?void 0:d.zoom)!==void 0&&(s.orthographic.zoom=p.orthographic.zoom),((f=p.perspective)==null?void 0:f.zoom)!==void 0&&(s.perspective.zoom=p.perspective.zoom),p.isUpVectorFlipped!==void 0&&(s.isUpVectorFlipped=p.isUpVectorFlipped),p.targetOffset!==void 0&&(s.targetOffset=p.targetOffset)}else if(a.type==="Mesh")"geometry"in o&&Object.assign(s,{geometry:pT.merge(s.geometry,o.geometry)}),(o.material||o.materials)&&(s=r(s,o)),s.cloner&&"cloner"in o&&Object.assign(s,{cloner:ul.merge(s.cloner,o.cloner)});else if(a.type==="Empty")s.cloner&&"cloner"in o&&Object.assign(s,{cloner:ul.merge(s.cloner,o.cloner)});else if(lT.is(a.type)){let p=o;p.intensity!==void 0&&(s.intensity=p.intensity),p.color!==void 0&&(typeof p.color=="string"?s.color=p.color:s.color=Qr.clone(p.color))}return s}e.patch=n})(Jc||(Jc={}));var V1;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Qr.white,near:.1,far:2e3})(V1||(V1={}));var mT;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0,autoZoom:!1})(mT||(mT={}));var U1;(e=>e.defaultData={orbitControls:mT.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let i=0,n=0;return r<5?n=-30:r<10&&(n=30),r===0||r===10||r===5?i=30:(r===4||r===11||r===9)&&(i=-30),[120,[i,n],"show"]}),gameControlObject:null,hdTransmission:!1})(U1||(U1={}));var yT;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(yT||(yT={}));var _T;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(_T||(_T={}));var G1;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...yT.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:_T.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(G1||(G1={}));var Ja;(e=>e.defaultData={ambientLight:{enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75,depth:100,groundColor:{r:.5098039215686274,g:.5098039215686274,b:.5098039215686274},softShadows:!0,softShadowQuality:"low",occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}},usePhysics:!1,gravity:-10,pixelsPerMeter:200,skinWidthRelative:.02,stepThreshRelative:.3,slopeThresh:65})(Ja||(Ja={}));var D3;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function t(n={withLight:!0,withSquare:!0}){let a=new Hi,o=gT.defaultMeshObject;return n.withLight===!0&&a.push({fi:-1,data:{...vT.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7},id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),n.withSquare===!0&&a.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]}),a}e.defaultData={backgroundColor:Rn.fromHexAndA(2960946,1),postprocessing:O1.defaultData,fog:V1.defaultData,objects:t(),environment:Ja.defaultData,publish:U1.defaultData,styles:G1.defaultData()},e.emptyData=function(n){return{backgroundColor:Rn.fromHexAndA(2960946,1),postprocessing:O1.defaultData,fog:V1.defaultData,objects:n?t(n):new Hi,environment:Ja.defaultData,publish:U1.defaultData,styles:G1.defaultData()}};function r(n){return{...e.defaultData,objects:M1(n,Hi.prototype)}}e.withObjs=r;function i(n,a){return r([{id:n,data:a,children:[],fi:0}])}e.withObj=i})(D3||(D3={}));var H1;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(H1||(H1={}));var xT;(e=>{function t(){let n={};return n["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},M1(n,Ur.prototype)}e.defaultColors=t;function r(n){let a={};return n!=null&&n.withAITexture&&(a["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...H1.emptyImage,name:"AI generated image"}),M1(a,Ur.prototype)}e.defaultImages=r;function i(){return{materials:new Ur,images:new Ur,videos:new Ur,colors:new Ur,audios:new Ur,fonts:new Ur,penumbraSize:[2,2,2]}}e.emptyData=i})(xT||(xT={}));var bT;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",speedTranslate:1e3,speedRotate:100,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new gt,move:new gt,jump:new gt},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Rn.fromHexAndA(3728051,1)}}))(bT||(bT={}));function kce(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,l=new Ke,u=0;for(let h=0;h<e.length;++h){let c=e[h],d=0;if(r!==(c.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in c.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;a[f]===void 0&&(a[f]=[]),a[f].push(c.attributes[f]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(s!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in c.morphAttributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(c.morphAttributes[f])}if(t){let f;if(r)f=c.index.count;else if(c.attributes.position!==void 0)f=c.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,f,h),u+=f}}if(r){let h=0,c=[];for(let d=0;d<e.length;++d){let f=e[d].index;for(let p=0;p<f.count;++p)c.push(f.getX(p)+h);h+=e[d].attributes.position.count}l.setIndex(c)}for(let h in a){let c=P3(a[h]);if(!c)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,c)}for(let h in o){let c=o[h][0].length;if(c===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<c;++d){let f=[];for(let v=0;v<o[h].length;++v)f.push(o[h][v][d]);let p=P3(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(p)}}return l}function P3(e){let t,r,i,n=0;for(let s=0;s<e.length;++s){let l=e[s];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let a=new t(n),o=0;for(let s=0;s<e.length;++s)a.set(e[s].array,o),o+=e[s].array.length;return new ft(a,r,i)}var Bce=Math.pow(2,-24),Hm=class{constructor(){}};function ro(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function L3(e){let t=-1,r=-1/0;for(let i=0;i<3;i++){let n=e[i+3]-e[i];n>r&&(r=n,t=i)}return t}function E3(e,t){t.set(e)}function I3(e,t,r){let i,n;for(let a=0;a<3;a++){let o=a+3;i=e[a],n=t[a],r[a]=i<n?i:n,i=e[o],n=t[o],r[o]=i>n?i:n}}function jm(e,t,r){for(let i=0;i<3;i++){let n=t[e+2*i],a=t[e+2*i+1],o=n-a,s=n+a;o<r[i]&&(r[i]=o),s>r[i+3]&&(r[i+3]=s)}}function zf(e){let t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return 2*(t*r+r*i+i*t)}function Fce(e,t){if(!e.index){let r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;r>65535?n=new Uint32Array(new i(4*r)):n=new Uint16Array(new i(2*r)),e.setIndex(new ft(n,1));for(let a=0;a<r;a++)n[a]=a}}function Vce(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let n of e.groups)r.add(n.start),r.add(n.start+n.count);let i=Array.from(r.values()).sort((n,a)=>n-a);for(let n=0;n<i.length-1;n++){let a=i[n],o=i[n+1];t.push({offset:a/3,count:(o-a)/3})}return t}function vw(e,t,r,i,n=null){let a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,h=-1/0,c=1/0,d=1/0,f=1/0,p=-1/0,v=-1/0,g=-1/0,m=n!==null;for(let y=t*6,_=(t+r)*6;y<_;y+=6){let x=e[y+0],w=e[y+1],b=x-w,S=x+w;b<a&&(a=b),S>l&&(l=S),m&&x<c&&(c=x),m&&x>p&&(p=x);let M=e[y+2],A=e[y+3],T=M-A,C=M+A;T<o&&(o=T),C>u&&(u=C),m&&M<d&&(d=M),m&&M>v&&(v=M);let D=e[y+4],P=e[y+5],E=D-P,O=D+P;E<s&&(s=E),O>h&&(h=O),m&&D<f&&(f=D),m&&D>g&&(g=D)}i[0]=a,i[1]=o,i[2]=s,i[3]=l,i[4]=u,i[5]=h,m&&(n[0]=c,n[1]=d,n[2]=f,n[3]=p,n[4]=v,n[5]=g)}function Uce(e,t,r,i){let n=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,u=-1/0;for(let h=t*6,c=(t+r)*6;h<c;h+=6){let d=e[h+0];d<n&&(n=d),d>s&&(s=d);let f=e[h+2];f<a&&(a=f),f>l&&(l=f);let p=e[h+4];p<o&&(o=p),p>u&&(u=p)}i[0]=n,i[1]=a,i[2]=o,i[3]=s,i[4]=l,i[5]=u}function Gce(e,t,r,i,n){let a=r,o=r+i-1,s=n.pos,l=n.axis*2;for(;;){for(;a<=o&&t[a*6+l]<s;)a++;for(;a<=o&&t[o*6+l]>=s;)o--;if(a<o){for(let u=0;u<3;u++){let h=e[a*3+u];e[a*3+u]=e[o*3+u],e[o*3+u]=h;let c=t[a*6+u*2+0];t[a*6+u*2+0]=t[o*6+u*2+0],t[o*6+u*2+0]=c;let d=t[a*6+u*2+1];t[a*6+u*2+1]=t[o*6+u*2+1],t[o*6+u*2+1]=d}a++,o--}else return a}}var Ho=32,Hce=(e,t)=>e.candidate-t.candidate,Ns=new Array(Ho).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Wm=new Float32Array(6);function jce(e,t,r,i,n,a){let o=-1,s=0;if(a===0)o=L3(t),o!==-1&&(s=(t[o]+t[o+3])/2);else if(a===1)o=L3(e),o!==-1&&(s=Wce(r,i,n,o));else if(a===2){let l=zf(e),u=1.25*n,h=i*6,c=(i+n)*6;for(let d=0;d<3;d++){let f=t[d],p=(t[d+3]-f)/Ho;if(n<Ho/4){let v=[...Ns];v.length=n;let g=0;for(let y=h;y<c;y+=6,g++){let _=v[g];_.candidate=r[y+2*d],_.count=0;let{bounds:x,leftCacheBounds:w,rightCacheBounds:b}=_;for(let S=0;S<3;S++)b[S]=1/0,b[S+3]=-1/0,w[S]=1/0,w[S+3]=-1/0,x[S]=1/0,x[S+3]=-1/0;jm(y,r,x)}v.sort(Hce);let m=n;for(let y=0;y<m;y++){let _=v[y];for(;y+1<m&&v[y+1].candidate===_.candidate;)v.splice(y+1,1),m--}for(let y=h;y<c;y+=6){let _=r[y+2*d];for(let x=0;x<m;x++){let w=v[x];_>=w.candidate?jm(y,r,w.rightCacheBounds):(jm(y,r,w.leftCacheBounds),w.count++)}}for(let y=0;y<m;y++){let _=v[y],x=_.count,w=n-_.count,b=_.leftCacheBounds,S=_.rightCacheBounds,M=0;x!==0&&(M=zf(b)/l);let A=0;w!==0&&(A=zf(S)/l);let T=1+1.25*(M*x+A*w);T<u&&(o=d,u=T,s=_.candidate)}}else{for(let m=0;m<Ho;m++){let y=Ns[m];y.count=0,y.candidate=f+p+m*p;let _=y.bounds;for(let x=0;x<3;x++)_[x]=1/0,_[x+3]=-1/0}for(let m=h;m<c;m+=6){let y=~~((r[m+2*d]-f)/p);y>=Ho&&(y=Ho-1);let _=Ns[y];_.count++,jm(m,r,_.bounds)}let v=Ns[Ho-1];E3(v.bounds,v.rightCacheBounds);for(let m=Ho-2;m>=0;m--){let y=Ns[m],_=Ns[m+1];I3(y.bounds,_.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let m=0;m<Ho-1;m++){let y=Ns[m],_=y.count,x=y.bounds,w=Ns[m+1].rightCacheBounds;_!==0&&(g===0?E3(x,Wm):I3(x,Wm,Wm)),g+=_;let b=0,S=0;g!==0&&(b=zf(Wm)/l);let M=n-g;M!==0&&(S=zf(w)/l);let A=1+1.25*(b*g+S*M);A<u&&(o=d,u=A,s=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${a} used.`);return{axis:o,pos:s}}function Wce(e,t,r,i){let n=0;for(let a=t,o=t+r;a<o;a++)n+=e[a*6+i*2];return n/r}function $ce(e,t){let r=e.attributes.position,i=r.array,n=e.index.array,a=n.length/3,o=new Float32Array(a*6),s=r.offset||0,l=3;r.isInterleavedBufferAttribute&&(l=r.data.stride);for(let u=0;u<a;u++){let h=u*3,c=u*6,d=n[h+0]*l+s,f=n[h+1]*l+s,p=n[h+2]*l+s;for(let v=0;v<3;v++){let g=i[d+v],m=i[f+v],y=i[p+v],_=g;m<_&&(_=m),y<_&&(_=y);let x=g;m>x&&(x=m),y>x&&(x=y);let w=(x-_)/2,b=v*2;o[c+b+0]=_+w,o[c+b+1]=w+(Math.abs(_)+w)*Bce,_<t[v]&&(t[v]=_),x>t[v+3]&&(t[v+3]=x)}}return o}function qce(e,t){function r(m){d&&d(m/f)}function i(m,y,_,x=null,w=0){if(!p&&w>=l&&(p=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),_<=h||w>=l)return r(y+_),m.offset=y,m.count=_,m;let b=jce(m.boundingData,x,o,y,_,c);if(b.axis===-1)return r(y+_),m.offset=y,m.count=_,m;let S=Gce(s,o,y,_,b);if(S===y||S===y+_)r(y+_),m.offset=y,m.count=_;else{m.splitAxis=b.axis;let M=new Hm,A=y,T=S-y;m.left=M,M.boundingData=new Float32Array(6),vw(o,A,T,M.boundingData,a),i(M,A,T,a,w+1);let C=new Hm,D=S,P=_-T;m.right=C,C.boundingData=new Float32Array(6),vw(o,D,P,C.boundingData,a),i(C,D,P,a,w+1)}return m}Fce(e,t);let n=new Float32Array(6),a=new Float32Array(6),o=$ce(e,n),s=e.index.array,l=t.maxDepth,u=t.verbose,h=t.maxLeafTris,c=t.strategy,d=t.onProgress,f=e.index.count/3,p=!1,v=[],g=Vce(e);if(g.length===1){let m=g[0],y=new Hm;y.boundingData=n,Uce(o,m.offset,m.count,a),i(y,m.offset,m.count,a),v.push(y)}else for(let m of g){let y=new Hm;y.boundingData=new Float32Array(6),vw(o,m.offset,m.count,y.boundingData,a),i(y,m.offset,m.count,a),v.push(y)}return v}function Xce(e,t){let r=qce(e,t),i,n,a,o=[],s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<r.length;h++){let c=r[h],d=l(c),f=new s(32*d);i=new Float32Array(f),n=new Uint32Array(f),a=new Uint16Array(f),u(0,c),o.push(f)}return o;function l(h){return h.count?1:1+l(h.left)+l(h.right)}function u(h,c){let d=h/4,f=h/2,p=!!c.count,v=c.boundingData;for(let g=0;g<6;g++)i[d+g]=v[g];if(p){let g=c.offset,m=c.count;return n[d+6]=g,a[f+14]=m,a[f+15]=65535,h+32}else{let g=c.left,m=c.right,y=c.splitAxis,_;if(_=u(h+32,g),_/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[d+6]=_/4,_=u(_,m),n[d+7]=y,_}}}var vs=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let n=0,a=e.length;n<a;n++){let o=e[n][t];r=o<r?o:r,i=o>i?o:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let n=0,a=t.length;n<a;n++){let o=t[n],s=e.dot(o);r=s<r?s:r,i=s>i?s:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};vs.prototype.setFromBox=function(){let e=new L;return function(t,r){let i=r.min,n=r.max,a=1/0,o=-1/0;for(let s=0;s<=1;s++)for(let l=0;l<=1;l++)for(let u=0;u<=1;u++){e.x=i.x*s+n.x*(1-s),e.y=i.y*l+n.y*(1-l),e.z=i.z*u+n.z*(1-u);let h=t.dot(e);a=Math.min(h,a),o=Math.max(h,o)}this.min=a,this.max=o}}();var Yce=function(){let e=new L,t=new L,r=new L;return function(i,n,a){let o=i.start,s=e,l=n.start,u=t;r.subVectors(o,l),e.subVectors(i.end,n.start),t.subVectors(n.end,n.start);let h=r.dot(u),c=u.dot(s),d=u.dot(u),f=r.dot(s),p=s.dot(s)*d-c*c,v,g;p!==0?v=(h*c-f*d)/p:v=0,g=(h+v*c)/d,a.x=v,a.y=g}}(),KD=function(){let e=new re,t=new L,r=new L;return function(i,n,a,o){Yce(i,n,e);let s=e.x,l=e.y;if(s>=0&&s<=1&&l>=0&&l<=1){i.at(s,a),n.at(l,o);return}else if(s>=0&&s<=1){l<0?n.at(0,o):n.at(1,o),i.closestPointToPoint(o,!0,a);return}else if(l>=0&&l<=1){s<0?i.at(0,a):i.at(1,a),n.closestPointToPoint(a,!0,o);return}else{let u;s<0?u=i.start:u=i.end;let h;l<0?h=n.start:h=n.end;let c=t,d=r;if(i.closestPointToPoint(h,!0,t),n.closestPointToPoint(u,!0,r),c.distanceToSquared(h)<=d.distanceToSquared(u)){a.copy(c),o.copy(h);return}else{a.copy(u),o.copy(d);return}}}}(),Zce=function(){let e=new L,t=new L,r=new Cn,i=new Nn;return function(n,a){let{radius:o,center:s}=n,{a:l,b:u,c:h}=a;if(i.start=l,i.end=u,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o||(i.start=l,i.end=h,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o)||(i.start=u,i.end=h,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o))return!0;let c=a.getPlane(r);if(Math.abs(c.distanceToPoint(s))<=o){let d=c.projectPoint(s,t);if(a.containsPoint(d))return!0}return!1}}(),Kce=1e-15;function cc(e){return Math.abs(e)<Kce}var gs=class extends Ni{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new L),this.satBounds=new Array(4).fill().map(()=>new vs),this.points=[this.a,this.b,this.c],this.sphere=new Vn,this.plane=new Cn,this.needsUpdate=!0}intersectsSphere(e){return Zce(e,this)}update(){let e=this.a,t=this.b,r=this.c,i=this.points,n=this.satAxes,a=this.satBounds,o=n[0],s=a[0];this.getNormal(o),s.setFromPoints(o,i);let l=n[1],u=a[1];l.subVectors(e,t),u.setFromPoints(l,i);let h=n[2],c=a[2];h.subVectors(t,r),c.setFromPoints(h,i);let d=n[3],f=a[3];d.subVectors(r,e),f.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}};gs.prototype.closestPointToSegment=function(){let e=new L,t=new L,r=new Nn;return function(i,n=null,a=null){let{start:o,end:s}=i,l=this.points,u,h=1/0;for(let c=0;c<3;c++){let d=(c+1)%3;r.start.copy(l[c]),r.end.copy(l[d]),KD(r,i,e,t),u=e.distanceToSquared(t),u<h&&(h=u,n&&n.copy(e),a&&a.copy(t))}return this.closestPointToPoint(o,e),u=o.distanceToSquared(e),u<h&&(h=u,n&&n.copy(e),a&&a.copy(o)),this.closestPointToPoint(s,e),u=s.distanceToSquared(e),u<h&&(h=u,n&&n.copy(e),a&&a.copy(s)),Math.sqrt(h)}}();gs.prototype.intersectsTriangle=function(){let e=new gs,t=new Array(3),r=new Array(3),i=new vs,n=new vs,a=new L,o=new L,s=new L,l=new L,u=new Nn,h=new Nn,c=new Nn;return function(d,f=null){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let p=this.plane,v=d.plane;if(Math.abs(p.normal.dot(v.normal))>1-1e-10){let g=this.satBounds,m=this.satAxes;r[0]=d.a,r[1]=d.b,r[2]=d.c;for(let x=0;x<4;x++){let w=g[x],b=m[x];if(i.setFromPoints(b,r),w.isSeparated(i))return!1}let y=d.satBounds,_=d.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let x=0;x<4;x++){let w=y[x],b=_[x];if(i.setFromPoints(b,t),w.isSeparated(i))return!1}for(let x=0;x<4;x++){let w=m[x];for(let b=0;b<4;b++){let S=_[b];if(a.crossVectors(w,S),i.setFromPoints(a,t),n.setFromPoints(a,r),i.isSeparated(n))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let g=this.points,m=!1,y=0;for(let D=0;D<3;D++){let P=g[D],E=g[(D+1)%3];u.start.copy(P),u.end.copy(E),u.delta(o);let O=m?h.start:h.end,z=cc(v.distanceToPoint(P));if(cc(v.normal.dot(o))&&z){h.copy(u),y=2;break}if((v.intersectLine(u,O)||z)&&!cc(O.distanceTo(E))){if(y++,m)break;m=!0}}if(y===1&&this.containsPoint(h.start))return f&&(f.start.copy(h.start),f.end.copy(h.start)),!0;if(y!==2)return!1;let _=d.points,x=!1,w=0;for(let D=0;D<3;D++){let P=_[D],E=_[(D+1)%3];u.start.copy(P),u.end.copy(E),u.delta(s);let O=x?c.start:c.end,z=cc(p.distanceToPoint(P));if(cc(p.normal.dot(s))&&z){c.copy(u),w=2;break}if((p.intersectLine(u,O)||z)&&!cc(O.distanceTo(E))){if(w++,x)break;x=!0}}if(w===1&&this.containsPoint(c.start))return f&&(f.start.copy(c.start),f.end.copy(c.start)),!0;if(w!==2)return!1;if(h.delta(o),c.delta(s),o.dot(s)<0){let D=c.start;c.start=c.end,c.end=D}let b=h.start.dot(o),S=h.end.dot(o),M=c.start.dot(o),A=c.end.dot(o),T=S<M,C=b<A;return b!==A&&M!==S&&T===C?!1:(f&&(l.subVectors(h.start,c.start),l.dot(o)>0?f.start.copy(h.start):f.start.copy(c.start),l.subVectors(h.end,c.end),l.dot(o)<0?f.end.copy(h.end):f.end.copy(c.end)),!0)}}}();gs.prototype.distanceToPoint=function(){let e=new L;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();gs.prototype.distanceToTriangle=function(){let e=new L,t=new L,r=["a","b","c"],i=new Nn,n=new Nn;return function(a,o=null,s=null){let l=o||s?i:null;if(this.intersectsTriangle(a,l))return(o||s)&&(o&&l.getCenter(o),s&&l.getCenter(s)),0;let u=1/0;for(let h=0;h<3;h++){let c,d=r[h],f=a[d];this.closestPointToPoint(f,e),c=f.distanceToSquared(e),c<u&&(u=c,o&&o.copy(e),s&&s.copy(f));let p=this[d];a.closestPointToPoint(p,e),c=p.distanceToSquared(e),c<u&&(u=c,o&&o.copy(p),s&&s.copy(e))}for(let h=0;h<3;h++){let c=r[h],d=r[(h+1)%3];i.set(this[c],this[d]);for(let f=0;f<3;f++){let p=r[f],v=r[(f+1)%3];n.set(a[p],a[v]),KD(i,n,e,t);let g=e.distanceToSquared(t);g<u&&(u=g,o&&o.copy(e),s&&s.copy(t))}}return Math.sqrt(u)}}();var yo=class extends wr{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new ye,this.invMatrix=new ye,this.points=new Array(8).fill().map(()=>new L),this.satAxes=new Array(3).fill().map(()=>new L),this.satBounds=new Array(3).fill().map(()=>new vs),this.alignedSatBounds=new Array(3).fill().map(()=>new vs),this.needsUpdate=!1}set(e,t,r){super.set(e,t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}};yo.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,i=this.points;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let h=0;h<=1;h++){let c=1*l|2*u|4*h,d=i[c];d.x=l?r.x:t.x,d.y=u?r.y:t.y,d.z=h?r.z:t.z,d.applyMatrix4(e)}let n=this.satBounds,a=this.satAxes,o=i[0];for(let l=0;l<3;l++){let u=a[l],h=n[l],c=1<<l,d=i[c];u.subVectors(o,d),h.setFromPoints(u,i)}let s=this.alignedSatBounds;s[0].setFromPointsField(i,"x"),s[1].setFromPointsField(i,"y"),s[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();yo.prototype.intersectsBox=function(){let e=new vs;return function(t){this.needsUpdate&&this.update();let r=t.min,i=t.max,n=this.satBounds,a=this.satAxes,o=this.alignedSatBounds;if(e.min=r.x,e.max=i.x,o[0].isSeparated(e)||(e.min=r.y,e.max=i.y,o[1].isSeparated(e))||(e.min=r.z,e.max=i.z,o[2].isSeparated(e)))return!1;for(let s=0;s<3;s++){let l=a[s],u=n[s];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}();yo.prototype.intersectsTriangle=function(){let e=new gs,t=new Array(3),r=new vs,i=new vs,n=new L;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);let o=this.satBounds,s=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(let c=0;c<3;c++){let d=o[c],f=s[c];if(r.setFromPoints(f,t),d.isSeparated(r))return!1}let l=a.satBounds,u=a.satAxes,h=this.points;for(let c=0;c<3;c++){let d=l[c],f=u[c];if(r.setFromPoints(f,h),d.isSeparated(r))return!1}for(let c=0;c<3;c++){let d=s[c];for(let f=0;f<4;f++){let p=u[f];if(n.crossVectors(d,p),r.setFromPoints(n,t),i.setFromPoints(n,h),r.isSeparated(i))return!1}}return!0}}();yo.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();yo.prototype.distanceToPoint=function(){let e=new L;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();yo.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Nn),r=new Array(12).fill().map(()=>new Nn),i=new L,n=new L;return function(a,o=0,s=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(s||l)&&(a.getCenter(n),this.closestPointToPoint(n,i),a.closestPointToPoint(i,n),s&&s.copy(i),l&&l.copy(n)),0;let u=o*o,h=a.min,c=a.max,d=this.points,f=1/0;for(let v=0;v<8;v++){let g=d[v];n.copy(g).clamp(h,c);let m=g.distanceToSquared(n);if(m<f&&(f=m,s&&s.copy(g),l&&l.copy(n),m<u))return Math.sqrt(m)}let p=0;for(let v=0;v<3;v++)for(let g=0;g<=1;g++)for(let m=0;m<=1;m++){let y=(v+1)%3,_=(v+2)%3,x=g<<y|m<<_,w=1<<v|g<<y|m<<_,b=d[x],S=d[w];t[p].set(b,S);let M=e[v],A=e[y],T=e[_],C=r[p],D=C.start,P=C.end;D[M]=h[M],D[A]=g?h[A]:c[A],D[T]=m?h[T]:c[A],P[M]=c[M],P[A]=g?h[A]:c[A],P[T]=m?h[T]:c[A],p++}for(let v=0;v<=1;v++)for(let g=0;g<=1;g++)for(let m=0;m<=1;m++){n.x=v?c.x:h.x,n.y=g?c.y:h.y,n.z=m?c.z:h.z,this.closestPointToPoint(n,i);let y=n.distanceToSquared(i);if(y<f&&(f=y,s&&s.copy(i),l&&l.copy(n),y<u))return Math.sqrt(y)}for(let v=0;v<12;v++){let g=t[v];for(let m=0;m<12;m++){let y=r[m];KD(g,y,i,n);let _=i.distanceToSquared(n);if(_<f&&(f=_,s&&s.copy(i),l&&l.copy(n),_<u))return Math.sqrt(_)}}return Math.sqrt(f)}}();var $m=new L,qm=new L,Xm=new L,O3=new re,R3=new re,z3=new re,N3=new L;function Jce(e,t,r,i,n,a){let o;return a===EU?o=e.intersectTriangle(i,r,t,!0,n):o=e.intersectTriangle(t,r,i,a!==xJ,n),o===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function Qce(e,t,r,i,n,a,o){$m.fromBufferAttribute(t,i),qm.fromBufferAttribute(t,n),Xm.fromBufferAttribute(t,a);let s=Jce(e,$m,qm,Xm,N3,o);if(s){r&&(O3.fromBufferAttribute(r,i),R3.fromBufferAttribute(r,n),z3.fromBufferAttribute(r,a),s.uv=Ni.getUV(N3,$m,qm,Xm,O3,R3,z3,new re));let l={a:i,b:n,c:a,normal:new L,materialIndex:0};Ni.getNormal($m,qm,Xm,l.normal),s.face=l,s.faceIndex=i}return s}function oH(e,t,r,i,n){let a=i*3,o=e.index.getX(a),s=e.index.getX(a+1),l=e.index.getX(a+2),u=Qce(r,e.attributes.position,e.attributes.uv,o,s,l,t);return u?(u.faceIndex=i,n&&n.push(u),u):null}function ede(e,t,r,i,n,a){for(let o=i,s=i+n;o<s;o++)oH(e,t,r,o,a)}function tde(e,t,r,i,n){let a=1/0,o=null;for(let s=i,l=i+n;s<l;s++){let u=oH(e,t,r,s);u&&u.distance<a&&(o=u,a=u.distance)}return o}function sH(e,t,r){return e===null||(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(r.ray.origin),e.object=t,e.distance<r.near||e.distance>r.far)?null:e}function Qa(e,t,r,i){let n=e.a,a=e.b,o=e.c,s=t,l=t+1,u=t+2;r&&(s=r.getX(t),l=r.getX(t+1),u=r.getX(t+2)),n.x=i.getX(s),n.y=i.getY(s),n.z=i.getZ(s),a.x=i.getX(l),a.y=i.getY(l),a.z=i.getZ(l),o.x=i.getX(u),o.y=i.getY(u),o.z=i.getZ(u)}function k3(e,t,r,i,n,a,o){let s=r.index,l=r.attributes.position;for(let u=e,h=t+e;u<h;u++)if(Qa(o,u*3,s,l),o.needsUpdate=!0,i(o,u,n,a))return!0;return!1}var lH=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function ol(e,t){return t[e+15]===65535}function ud(e,t){return t[e+6]}function Hv(e,t){return t[e+14]}function jv(e){return e+8}function Wv(e,t){return t[e+6]}function rde(e,t){return t[e+7]}var Qc=new wr,j1=new L,ide=["x","y","z"];function wT(e,t,r,i,n){let a=e*2,o=rf,s=Al,l=Cl;if(ol(a,s)){let u=ud(e,l),h=Hv(a,s);ede(t,r,i,u,h,n)}else{let u=jv(e);W1(u,o,i,j1)&&wT(u,t,r,i,n);let h=Wv(e,l);W1(h,o,i,j1)&&wT(h,t,r,i,n)}}function ST(e,t,r,i){let n=e*2,a=rf,o=Al,s=Cl;if(ol(n,o)){let l=ud(e,s),u=Hv(n,o);return tde(t,r,i,l,u)}else{let l=rde(e,s),u=ide[l],h=i.direction[u]>=0,c,d;h?(c=jv(e),d=Wv(e,s)):(c=Wv(e,s),d=jv(e));let f=W1(c,a,i,j1)?ST(c,t,r,i):null;if(f){let v=f.point[u];if(h?v<=a[d+l]:v>=a[d+l+3])return f}let p=W1(d,a,i,j1)?ST(d,t,r,i):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}var nde=function(){let e,t,r=[],i=new lH(()=>new wr);return function(...a){e=i.getPrimitive(),t=i.getPrimitive(),r.push(e,t);let o=n(...a);i.releasePrimitive(e),i.releasePrimitive(t),r.pop(),r.pop();let s=r.length;return s>0&&(t=r[s-1],e=r[s-2]),o};function n(a,o,s,l,u=null,h=0,c=0){function d(y){let _=y*2,x=Al,w=Cl;for(;!ol(_,x);)y=jv(y),_=y*2;return ud(y,w)}function f(y){let _=y*2,x=Al,w=Cl;for(;!ol(_,x);)y=Wv(y,w),_=y*2;return ud(y,w)+Hv(_,x)}let p=a*2,v=rf,g=Al,m=Cl;if(ol(p,g)){let y=ud(a,m),_=Hv(p,g);return ro(a,v,e),l(y,_,!1,c,h+a,e)}else{let y=jv(a),_=Wv(a,m),x=y,w=_,b,S,M,A;if(u&&(M=e,A=t,ro(x,v,M),ro(w,v,A),b=u(M),S=u(A),S<b)){x=_,w=y;let z=b;b=S,S=z,M=A}M||(M=e,ro(x,v,M));let T=ol(x*2,g),C=s(M,T,b,c+1,h+x),D;if(C===2){let z=d(x),B=f(x)-z;D=l(z,B,!0,c+1,h+x,M)}else D=C&&n(x,o,s,l,u,h,c+1);if(D)return!0;A=t,ro(w,v,A);let P=ol(w*2,g),E=s(A,P,S,c+1,h+w),O;if(E===2){let z=d(w),B=f(w)-z;O=l(z,B,!0,c+1,h+w,A)}else O=E&&n(w,o,s,l,u,h,c+1);return!!O}}}(),ade=function(){let e=new gs,t=new gs,r=new ye,i=new yo,n=new yo;return function a(o,s,l,u,h=null){let c=o*2,d=rf,f=Al,p=Cl;if(h===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,u),h=i),ol(c,f)){let v=s,g=v.index,m=v.attributes.position,y=l.index,_=l.attributes.position,x=ud(o,p),w=Hv(c,f);if(r.copy(u).invert(),l.boundsTree)return ro(o,d,n),n.matrix.copy(r),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:b=>n.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(u),b.b.applyMatrix4(u),b.c.applyMatrix4(u),b.needsUpdate=!0;for(let S=x*3,M=(w+x)*3;S<M;S+=3)if(Qa(t,S,g,m),t.needsUpdate=!0,b.intersectsTriangle(t))return!0;return!1}});for(let b=x*3,S=w+x*3;b<S;b+=3){Qa(e,b,g,m),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let M=0,A=y.count;M<A;M+=3)if(Qa(t,M,y,_),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let v=o+8,g=p[o+6];return ro(v,d,Qc),!!(h.intersectsBox(Qc)&&a(v,s,l,u,h)||(ro(g,d,Qc),h.intersectsBox(Qc)&&a(g,s,l,u,h)))}}}();function W1(e,t,r,i){return ro(e,t,Qc),r.intersectBox(Qc,i)}var MT=[],C0,rf,Al,Cl;function Cp(e){C0&&MT.push(C0),C0=e,rf=new Float32Array(e),Al=new Uint16Array(e),Cl=new Uint32Array(e)}function Ym(){C0=null,rf=null,Al=null,Cl=null,MT.length&&Cp(MT.pop())}var gw=Symbol("skip tree generation"),mw=new wr,yw=new wr,dc=new ye,iu=new yo,Nf=new yo,kf=new L,Zm=new L,ode=new L,sde=new L,lde=new L,B3=new wr,za=new lH(()=>new gs),_i=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),_i.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,i=e._roots,n=r.getIndex(),a;return t.cloneBuffers?a={roots:i.map(o=>o.slice()),index:n.array.slice()}:a={roots:i,index:n.array},a}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),_i.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:i,roots:n}=e,a=new _i(t,{...r,[gw]:!0});if(a._roots=n,r.setIndex){let o=t.getIndex();if(o===null){let s=new ft(e.index,1,!1);t.setIndex(s)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return a}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[gw]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[gw]||(this._roots=Xce(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new wr))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,i=t.attributes.position,n=i.array,a=i.offset||0,o=3;i.isInterleavedBufferAttribute&&(o=i.data.stride);let s,l,u,h,c=0,d=this._roots;for(let p=0,v=d.length;p<v;p++)s=d[p],l=new Uint32Array(s),u=new Uint16Array(s),h=new Float32Array(s),f(0,c),c+=s.byteLength;function f(p,v,g=!1){let m=p*2;if(u[m+15]===65535){let y=l[p+6],_=u[m+14],x=1/0,w=1/0,b=1/0,S=-1/0,M=-1/0,A=-1/0;for(let T=3*y,C=3*(y+_);T<C;T++){let D=r[T]*o+a,P=n[D+0],E=n[D+1],O=n[D+2];P<x&&(x=P),P>S&&(S=P),E<w&&(w=E),E>M&&(M=E),O<b&&(b=O),O>A&&(A=O)}return h[p+0]!==x||h[p+1]!==w||h[p+2]!==b||h[p+3]!==S||h[p+4]!==M||h[p+5]!==A?(h[p+0]=x,h[p+1]=w,h[p+2]=b,h[p+3]=S,h[p+4]=M,h[p+5]=A,!0):!1}else{let y=p+8,_=l[p+6],x=y+v,w=_+v,b=g,S=!1,M=!1;e?b||(S=e.has(x),M=e.has(w),b=!S&&!M):(S=!0,M=!0);let A=b||S,T=b||M,C=!1;A&&(C=f(y,v,b));let D=!1;T&&(D=f(_,v,b));let P=C||D;if(P)for(let E=0;E<3;E++){let O=y+E,z=_+E,B=h[O],N=h[O+3],F=h[z],G=h[z+3];h[p+E]=B<F?B:F,h[p+E+3]=N>G?N:G}return P}}}traverse(e,t=0){let r=this._roots[t],i=new Uint32Array(r),n=new Uint16Array(r);a(0);function a(o,s=0){let l=o*2,u=n[l+15]===65535;if(u){let h=i[o+6],c=n[l+14];e(s,u,new Float32Array(r,o*4,6),h,c)}else{let h=o+8,c=i[o+6],d=i[o+7];e(s,u,new Float32Array(r,o*4,6),d)||(a(h,s+1),a(c,s+1))}}}raycast(e,t=Iv){let r=this._roots,i=this.geometry,n=[],a=t.isMaterial,o=Array.isArray(t),s=i.groups,l=a?t.side:t;for(let u=0,h=r.length;u<h;u++){let c=o?t[s[u].materialIndex].side:l,d=n.length;if(Cp(r[u]),wT(0,i,c,e,n),Ym(),o){let f=s[u].materialIndex;for(let p=d,v=n.length;p<v;p++)n[p].face.materialIndex=f}}return n}raycastFirst(e,t=Iv){let r=this._roots,i=this.geometry,n=t.isMaterial,a=Array.isArray(t),o=null,s=i.groups,l=n?t.side:t;for(let u=0,h=r.length;u<h;u++){let c=a?t[s[u].materialIndex].side:l;Cp(r[u]);let d=ST(0,i,c,e);Ym(),d!=null&&(o==null||d.distance<o.distance)&&(o=d,a&&(d.face.materialIndex=s[u].materialIndex))}return o}intersectsGeometry(e,t){let r=this.geometry,i=!1;for(let n of this._roots)if(Cp(n),i=ade(0,r,e,t),Ym(),i)break;return i}shapecast(e,t,r){let i=this.geometry;if(e instanceof Function){if(t){let c=t;t=(d,f,p,v)=>{let g=f*3;return c(d,g,g+1,g+2,p,v)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=za.getPrimitive(),{boundsTraverseOrder:a,intersectsBounds:o,intersectsRange:s,intersectsTriangle:l}=e;if(s&&l){let c=s;s=(d,f,p,v,g)=>c(d,f,p,v,g)?!0:k3(d,f,i,l,p,v,n)}else s||(l?s=(c,d,f,p)=>k3(c,d,i,l,f,p,n):s=(c,d,f)=>f);let u=!1,h=0;for(let c of this._roots){if(Cp(c),u=nde(0,i,o,s,a,h),Ym(),u)break;h+=c.byteLength}return za.releasePrimitive(n),u}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:n}=r,a=this.geometry.index,o=this.geometry.attributes.position,s=e.geometry.index,l=e.geometry.attributes.position;dc.copy(t).invert();let u=za.getPrimitive(),h=za.getPrimitive();if(n){let d=function(f,p,v,g,m,y,_,x){for(let w=v,b=v+g;w<b;w++){Qa(h,w*3,s,l),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let S=f,M=f+p;S<M;S++)if(Qa(u,S*3,a,o),u.needsUpdate=!0,n(u,h,S,w,m,y,_,x))return!0}return!1};if(i){let f=i;i=function(p,v,g,m,y,_,x,w){return f(p,v,g,m,y,_,x,w)?!0:d(p,v,g,m,y,_,x,w)}}else i=d}e.getBoundingBox(yw),yw.applyMatrix4(t);let c=this.shapecast({intersectsBounds:d=>yw.intersectsBox(d),intersectsRange:(d,f,p,v,g,m)=>(mw.copy(m),mw.applyMatrix4(dc),e.shapecast({intersectsBounds:y=>mw.intersectsBox(y),intersectsRange:(y,_,x,w,b)=>i(d,f,y,_,v,g,w,b)}))});return za.releasePrimitive(u),za.releasePrimitive(h),c}intersectsBox(e,t){return iu.set(e.min,e.max,t),iu.needsUpdate=!0,this.shapecast({intersectsBounds:r=>iu.intersectsBox(r),intersectsTriangle:r=>iu.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},n=0,a=1/0){e.boundingBox||e.computeBoundingBox(),iu.set(e.boundingBox.min,e.boundingBox.max,t),iu.needsUpdate=!0;let o=this.geometry,s=o.attributes.position,l=o.index,u=e.attributes.position,h=e.index,c=za.getPrimitive(),d=za.getPrimitive(),f=Zm,p=ode,v=null,g=null;i&&(v=sde,g=lde);let m=1/0,y=null,_=null;return dc.copy(t).invert(),Nf.matrix.copy(dc),this.shapecast({boundsTraverseOrder:x=>iu.distanceToBox(x),intersectsBounds:(x,w,b)=>b<m&&b<a?(w&&(Nf.min.copy(x.min),Nf.max.copy(x.max),Nf.needsUpdate=!0),!0):!1,intersectsRange:(x,w)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:b=>Nf.distanceToBox(b),intersectsBounds:(b,S,M)=>M<m&&M<a,intersectsRange:(b,S)=>{for(let M=b*3,A=(b+S)*3;M<A;M+=3){Qa(d,M,h,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let T=x*3,C=(x+w)*3;T<C;T+=3){Qa(c,T,l,s),c.needsUpdate=!0;let D=c.distanceToTriangle(d,f,v);if(D<m&&(p.copy(f),g&&g.copy(v),m=D,y=T/3,_=M/3),D<n)return!0}}}});{let b=h?h.count:u.count;for(let S=0,M=b;S<M;S+=3){Qa(d,S,h,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let A=x*3,T=(x+w)*3;A<T;A+=3){Qa(c,A,l,s),c.needsUpdate=!0;let C=c.distanceToTriangle(d,f,v);if(C<m&&(p.copy(f),g&&g.copy(v),m=C,y=A/3,_=S/3),C<n)return!0}}}}}),za.releasePrimitive(c),za.releasePrimitive(d),m===1/0?null:(r.point?r.point.copy(p):r.point=p.clone(),r.distance=m,r.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(dc),p.applyMatrix4(dc),i.distance=p.sub(i.point).length(),i.faceIndex=_),r)}closestPointToPoint(e,t={},r=0,i=1/0){let n=r*r,a=i*i,o=1/0,s=null;if(this.shapecast({boundsTraverseOrder:u=>(kf.copy(e).clamp(u.min,u.max),kf.distanceToSquared(e)),intersectsBounds:(u,h,c)=>c<o&&c<a,intersectsTriangle:(u,h)=>{u.closestPointToPoint(e,kf);let c=e.distanceToSquared(kf);return c<o&&(Zm.copy(kf),o=c,s=h),c<n}}),o===1/0)return null;let l=Math.sqrt(o);return t.point?t.point.copy(Zm):t.point=Zm.clone(),t.distance=l,t.faceIndex=s,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{ro(0,new Float32Array(t),B3),e.union(B3)}),e}},F3=_i.prototype.raycast;_i.prototype.raycast=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[t,r,i,n]=e;return F3.call(this,i,t.material).forEach(a=>{a=sH(a,t,r),a&&n.push(a)}),n}else return F3.apply(this,e)};var V3=_i.prototype.raycastFirst;_i.prototype.raycastFirst=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[t,r,i]=e;return sH(V3.call(this,i,t.material),t,r)}else return V3.apply(this,e)};var U3=_i.prototype.closestPointToPoint;_i.prototype.closestPointToPoint=function(...e){if(e[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),e.unshift();let t=e[1],r={};return e[1]=r,U3.apply(this,e),t&&t.copy(r.point),r.distance}else return U3.apply(this,e)};var G3=_i.prototype.closestPointToGeometry;_i.prototype.closestPointToGeometry=function(...e){let t=e[2],r=e[3];if(t&&t.isVector3||r&&r.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let i={},n={},a=e[1];return e[2]=i,e[3]=n,G3.apply(this,e),t&&t.copy(i.point),r&&r.copy(n.point).applyMatrix4(a),i.distance}else return G3.apply(this,e)};var H3=_i.prototype.refit;_i.prototype.refit=function(...e){let t=e[0],r=e[1];if(r&&(r instanceof Set||Array.isArray(r))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let i=new Set;r.forEach(n=>i.add(n)),t&&t.forEach(n=>i.add(n)),H3.call(this,i)}else H3.apply(this,e)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(e=>{let t=_i.prototype[e];_i.prototype[e]=function(...r){return(r[0]===null||r[0].isMesh)&&(r.shift(),console.warn(`MeshBVH: The function signature for "${e}" has changed and no longer takes Mesh. See docs for new signature.`)),t.apply(this,r)}});var Bf=Tg(mJ()),ude=.5*(Math.sqrt(3)-1),Ff=(3-Math.sqrt(3))/6,hde=1/3,Na=1/6,iv=e=>Math.floor(e)|0,j3=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),_w=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function xw(e=Math.random){let t=uH(e),r=new Float64Array(t).map(n=>j3[n%12*2]),i=new Float64Array(t).map(n=>j3[n%12*2+1]);return function(n,a){let o=0,s=0,l=0,u=(n+a)*ude,h=iv(n+u),c=iv(a+u),d=(h+c)*Ff,f=h-d,p=c-d,v=n-f,g=a-p,m,y;v>g?(m=1,y=0):(m=0,y=1);let _=v-m+Ff,x=g-y+Ff,w=v-1+2*Ff,b=g-1+2*Ff,S=h&255,M=c&255,A=.5-v*v-g*g;if(A>=0){let D=S+t[M],P=r[D],E=i[D];A*=A,o=A*A*(P*v+E*g)}let T=.5-_*_-x*x;if(T>=0){let D=S+m+t[M+y],P=r[D],E=i[D];T*=T,s=T*T*(P*_+E*x)}let C=.5-w*w-b*b;if(C>=0){let D=S+1+t[M+1],P=r[D],E=i[D];C*=C,l=C*C*(P*w+E*b)}return 70*(o+s+l)}}function cde(e=Math.random){let t=uH(e),r=new Float64Array(t).map(a=>_w[a%12*3]),i=new Float64Array(t).map(a=>_w[a%12*3+1]),n=new Float64Array(t).map(a=>_w[a%12*3+2]);return function(a,o,s){let l,u,h,c,d=(a+o+s)*hde,f=iv(a+d),p=iv(o+d),v=iv(s+d),g=(f+p+v)*Na,m=f-g,y=p-g,_=v-g,x=a-m,w=o-y,b=s-_,S,M,A,T,C,D;x>=w?w>=b?(S=1,M=0,A=0,T=1,C=1,D=0):x>=b?(S=1,M=0,A=0,T=1,C=0,D=1):(S=0,M=0,A=1,T=1,C=0,D=1):w<b?(S=0,M=0,A=1,T=0,C=1,D=1):x<b?(S=0,M=1,A=0,T=0,C=1,D=1):(S=0,M=1,A=0,T=1,C=1,D=0);let P=x-S+Na,E=w-M+Na,O=b-A+Na,z=x-T+2*Na,B=w-C+2*Na,N=b-D+2*Na,F=x-1+3*Na,G=w-1+3*Na,H=b-1+3*Na,$=f&255,Z=p&255,X=v&255,ne=.6-x*x-w*w-b*b;if(ne<0)l=0;else{let j=$+t[Z+t[X]];ne*=ne,l=ne*ne*(r[j]*x+i[j]*w+n[j]*b)}let te=.6-P*P-E*E-O*O;if(te<0)u=0;else{let j=$+S+t[Z+M+t[X+A]];te*=te,u=te*te*(r[j]*P+i[j]*E+n[j]*O)}let U=.6-z*z-B*B-N*N;if(U<0)h=0;else{let j=$+T+t[Z+C+t[X+D]];U*=U,h=U*U*(r[j]*z+i[j]*B+n[j]*N)}let W=.6-F*F-G*G-H*H;if(W<0)c=0;else{let j=$+1+t[Z+1+t[X+1]];W*=W,c=W*W*(r[j]*F+i[j]*G+n[j]*H)}return 32*(l+u+h+c)}}function uH(e){let t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){let i=r+~~(e()*(256-r)),n=t[r];t[r]=t[i],t[i]=n}for(let r=256;r<512;r++)t[r]=t[r-256];return t}var Kn=new Ni,dde=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let n=1;Kn.a.fromBufferAttribute(e,i),Kn.b.fromBufferAttribute(e,i+1),Kn.c.fromBufferAttribute(e,i+2),n*=Kn.getArea(),t[i/3]=n}this.distribution=new Float32Array(e.count/3);let r=0;for(let i=0;i<t.length;i++)r+=t[i],this.distribution[i]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let r=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*r);return this.sampleFace(i,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,r=0,i=t.length-1,n=-1;for(;r<=i;){let a=Math.ceil((r+i)/2);if(a===0||t[a-1]<=e&&t[a]>e){n=a;break}else e<t[a]?i=a-1:r=a+1}return n}sampleFace(e,t,r){let i=this.randomFunction(),n=this.randomFunction();return i+n>1&&(i=1-i,n=1-n),Kn.a.fromBufferAttribute(this.positionAttribute,e*3),Kn.b.fromBufferAttribute(this.positionAttribute,e*3+1),Kn.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(Kn.a,i).addScaledVector(Kn.b,n).addScaledVector(Kn.c,1-(i+n)),Kn.getNormal(r),this}},fde=Tg(PU()),pde=new ye,vde=new ye,gde=new ye,$1;(e=>{function t(r){return r&&r.__isSPEObject}e.is=t})($1||($1={}));var JD=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new ye,this.copyPreviousMatrix=!0,this.hiddenMatrix=new ye,this.matrixWorldRigid=new ye,this.shearScale=new ye,this.shearScaleInv=new ye}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof Wt&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseObject(t,r=0){if(t(this,r)!==!0)for(let i of this.children)$1.is(i)&&i.traverseObject(t,r+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,r=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:i,v:n,q:a}=(0,fde.SVD)(r),o=pde.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),s=vde.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=gde.copy(s).transpose();this.shearScale.makeScale(a[0],a[1],a[2]).multiply(l).premultiply(s),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),a.every(u=>Math.abs(a[0]-u)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new ye().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof ye?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!1){return super.copy(t,r),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,r,i,n,a,o){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},mde=class extends JD(Wt){},yde=e=>e.type==="Mesh",hl=class extends mde{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let r=this.children[e];(r==null?void 0:r.object)!==t&&(r&&this.remove(r),r=new hl(t),this.add(r),this.children.splice(e,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=t.matrix,r.hiddenMatrix=t.hiddenMatrix),r.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return yde(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Hu=new L,ju=new L,hd=new ye,hH=[new L(-1,1,1),new L(-1,-1,1),new L(1,-1,1),new L(1,1,1),new L(-1,1,-1),new L(-1,-1,-1),new L(1,-1,-1),new L(1,1,-1)],_de=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],xde=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],W3=(e,t,r)=>{e.updateEntityBoxSize(Hu,ju),hd.copy(t).multiply(e.matrixWorld),ju.x===0&&ju.y===0&&ju.z===0?r.push(new L(Hu.x,Hu.y,Hu.z).applyMatrix4(hd)):hH.forEach(i=>{r.push(i.clone().multiply(ju).add(Hu).applyMatrix4(hd))})},$3=class extends wr{constructor(){super(...arguments),this.matrix=new ye,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new ye().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>{if(n.visible||n.cloner&&n.data.visible){if(!("geometry"in n)){i.push(new L);return}W3(n,t,i)}}):W3(e,t,i),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(hd.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(ju).multiplyScalar(.5),this.getCenter(Hu),hd.copy(this.matrix).setPosition(Hu),this.vertices=hH.map(e=>e.clone().multiply(ju).applyMatrix4(hd))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=_de.map(([e,t])=>new Nn(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new L))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=xde.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},cl={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},bde=class extends GU{constructor(){super()}getPoints(e=12){let t=[],r,i=this.getCurveLengths(),n=i[i.length-1]/i.length;for(let a=0,o=this.curves;a<o.length;a++){let s=o[a],l=a===0?i[a]:i[a]-i[a-1],u=Math.ceil(e*l/n),h=s.getPoints(u);for(let c=0;c<h.length;c++){let d=h[c];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},TT=.001;function AT(e,t,r){return t.clone().sub(e).cross(t.clone().sub(r)).length()<=TT}function bw(e,t){let r=new L(...e.position),i=new L(...e.controlNext.position),n=new L(...t.controlPrevious.position),a=new L(...t.position);return AT(r,i,a)&&AT(r,n,a)}function cH(e){let t=e.points.map(h=>new L(...h.data.position)),r=[e.points[0]],i=new L(...r[0].data.position);for(let h=0;h<e.points.length-1;h++)AT(i,t[h],t[h+1])||(r.push(e.points[h]),i=t[h]);r.push(e.points[e.points.length-1]);let n=e.isClosed,a=r.length-(n?0:1),o=r.length,s=[];for(let h=0;h<o;h++){let c=r[h].data,d=new L(...c.position),f=new L(...c.controlPrevious.position),p=new L(...c.controlNext.position),v={position:d,baseRoundness:c.roundness,controlPrevious:f,controlNext:p};if(c.roundness===0||!e.isClosed&&(h===0||h===o-1)){s[h]={...v,removedLength:0};continue}let g=n&&h==0?o-1:h-1,m=n&&h==o-1?0:h+1,y=r[g].data,_=r[m].data,x=new L(...y.position),w=new L(..._.position),b=x.clone().sub(d).normalize(),S=w.clone().sub(d).normalize();Object.assign(v,{prevDir:b,nextDir:S});let M=bw(y,c),A=bw(c,_);if(!M||!A)s[h]={...v,removedLength:0};else{let T=b.clone().add(S).normalize(),C=T.clone().cross(b).length()/b.dot(T);s[h]={...v,tan:C,removedLength:c.roundness/C}}}for(let h=0;h<a;h++){let c=h,d=n&&h===o-1?0:h+1,f=s[c],p=s[d];if(f.removedLength!==0||p.removedLength!==0){let v=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,v/2),p.removedLength=Math.min(p.removedLength,v/2)}}let l=[];for(let h=0;h<a;h++){let c=h,d=n&&h===o-1?0:h+1,f=s[c],p=s[d],v=null;if(!bw(r[c].data,r[d].data))f.position.distanceTo(p.position)>TT&&(v=new S0(f.position,f.controlNext,p.controlPrevious,p.position));else{let g=f.position.clone(),m=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&g.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&m.add(p.prevDir.clone().setLength(p.removedLength))),g.distanceTo(m)>TT&&(v=new S0(g,g.clone().lerp(m,.3),m.clone().lerp(g,.3),m))}l[2*h+1]=v}for(let h=0;h<o;h++){let c=s[h];if(c.removedLength===0){l[2*h]=null;continue}let d=c.position,f=c.prevDir.clone().multiplyScalar(c.removedLength).add(d),p=c.nextDir.clone().multiplyScalar(c.removedLength).add(d),v=c.tan*c.removedLength,g=c.prevDir.clone().add(c.nextDir).normalize(),m=f.clone().lerp(p,.5),y=f.distanceTo(p)/2,_=g.clone().multiplyScalar(Math.sqrt(Math.pow(v,2)-Math.pow(y,2))).add(m),x=g.clone().multiplyScalar(-v).add(_),w=d.distanceTo(x)/d.distanceTo(m),b=c.prevDir.clone().multiplyScalar(w*d.distanceTo(f)).add(d),S=b.clone().lerp(x,2),M=f.clone().lerp(b,4/3),A=p.clone().lerp(S,4/3);l[2*h]=new S0(f,M,A,p)}let u=new bde;return l.forEach(h=>{h&&u.add(h)}),u}var jt;(e=>{function t(r){return r&&r.__isEntity}e.is=t})(jt||(jt={}));var Vf=e=>jt.is(e),wde={type:"completeState",isfromEntity:!0},dH=e=>class extends JD(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new $3,this._recursiveBBox=new $3,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let r=this.children[t];if(jt.is(r))return r}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let r=t.parent;if(jt.is(r))t=r;else return}return t}forInstancesRec(t){this.instances.forEach(r=>{r.disposed||t(r),r.forInstancesRec(t)})}super_Entity(t,r){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,r,i=!1){if(!(this.data.states.length===0&&!i)){for(let n of this.data.states)Jc.toOps(this.data,n.data).forEach(a=>{let o=eT.replaceProps(a,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,r)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=Jc.patch(this.data,n),Jc.toOps(this.data,n).forEach(a=>{this.updateByPatchedOp(a,this.dataPatched,r)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,r){t.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{Vf(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let r;return this.traverseEntity(i=>{i.uuid===t&&(r=i)}),r}traverseSortNextHelper(){let t=this.parent;if(t){let r=t.children,i=r.indexOf(this)+1;if(jt.is(r[i]))return r[i];if(jt.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&jt.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let r=this;for(;t>0&&r!==null;)r=r.parent,t-=1;return r}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let r=this.parent;for(;r;){if(t===r)return!0;r=r.parent}return!1}countToAccestor(t){let r=0,i=this;for(;i!==t;){if(i===null)return-1;i=i.parent,r+=1}return r}forEachEntity(t){for(let r of this.children)Vf(r)&&t(r)}traverseEntityAncestors(t){this.traverseAncestors(r=>{jt.is(r)&&t(r)})}traverseEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)Vf(i)&&i.traverseEntity(t,r+1)}traverseVisibleEntity(t){t(this);for(let r of this.children)Vf(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(t,r=!1){return super.copy(t,r),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>Vf(t))}isAncestorOf(t){if(this.uuid===t)return!1;let r=!1;return this.traverseEntity(i=>{i.uuid===t&&(r=!0)}),r}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return QM(r,t)}updateTransformState(t){let r=!1;return t.position&&(this.position.fromArray(t.position),r=!0),t.rotation&&(this.rotation.fromArray(t.rotation),r=!0),t.scale&&(r=!0,this.scale.fromArray(t.scale)),t.hiddenMatrix!==void 0&&(r=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Ld.identity)),r&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),r}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)jt.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{jt.is(t)&&t.disposeRecursively()})}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return QM(r,t)}updateByOp(t,r,i,n){let a=this.data;this.data=r;let o=t,s=al(t.path,["states","*"]);if(s!==null){if(t.type===0){let[l]=s;if((this==null?void 0:this.stateSelection)===l){let u={...t.props};if(Object.values(t.props).some(h=>h===void 0)){let h=this.data;if(h!==void 0){let c=vo.zoom(h,t.path.slice(2));if(c)for(let d in t.props)t.props[d]===void 0&&d in c&&(u[d]=c[d])}}o={...t,props:u,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:h,...c}=l;l=c}if(t.props.material!==void 0&&"material"in l){let{material:h,...c}=l;l=c}let u=vo.removeOverridden(t.path,t.props,l);o={...t,props:u}}}if(this.updateByPatchedOpBase(o,Jc.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),al(t.path,["overrides"])){let l=[],u=[...t.path];for(l.push(u[1]),u.splice(0,2);u.length>0&&u[0]==="descendants";)l.push(u[1]),u.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let h of Object.keys(t.props)){l[l.length-1]=h;let c=i.scene.findInstance([this.uuid,...l]);c&&(c.overrideData=t.props[h],c.updateState(uh.apply(c.component.data,c.overrideData),i))}}else{let h=i.scene.findInstance([this.uuid,...l]);if(h){let c=vo.zoom(h.component.data,u);if(t={...t,path:u},t.type===0){let d=t.props;if(c)for(let[f,p]of Object.entries(t.props))p===void 0&&(d===t.props&&(d={...t.props}),d[f]=c[f]);t={...t,props:d}}h.overrideData=F1.resolve(r.overrides,l),h.updateByOp(t,nn.applySimple(h.data,t),i,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let u;for(let h of Id.rootOverrideProps)h in t.props&&(u===void 0&&(u={}),u[h]=t.props[h]);u&&(l={...t,props:u})}else for(let u of Id.rootOverrideProps)if(al(t.path,[u])){l=t;break}l!==void 0&&this.instances.forEach(u=>{if(u.isInstanceRoot){let h=uh.filterOp(u.overrideData,l);h&&u.updateByOp(h,nn.applySimple(u.data,h),i,!0)}}),this.instances.forEach(u=>{if(!u.isInstanceRoot){let h=uh.filterOp(u.overrideData,t);if(h){let c;a===u.data&&t===h?c=r:c=nn.applySimple(u.data,h),u.updateByOp(h,c,i,!0)}}})}}updateByPatchedOpBase(t,r,i){if(this.dataPatched=r,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Dh.is(t.props.type)&&cl.changeEntityProptotype(this,r,i);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){cl.changeEntityProptotype(this,r,i);for(let n of this.children)jt.is(n)&&n.updateVisible()}this.updateByPatchedOp(t,r,i)}updateByPatchedOp(t,r,i){if(t.path.length===0&&t.type===0&&this.updateState(t.props,i),al(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),al(t.path,["cloner"])!==null){let n=nn.drop(t,1);n.path.length===0&&n.type===0&&n.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(r.cloner,i.scene):(this.setFromClonerState(r.cloner,i),this.expandCloner(i.scene)),this.updateVisible()}}updatePathSnapping(t){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var p,v,g,m,y;let r=((p=this._updatedPathSnapping)==null?void 0:p.pathId)??this.dataPatched.pathSnapping.pathId,i=((v=this._updatedPathSnapping)==null?void 0:v.slide)??this.dataPatched.pathSnapping.slide??0,n=((g=this._updatedPathSnapping)==null?void 0:g.offset)??this.dataPatched.pathSnapping.offset,a=((m=this._updatedPathSnapping)==null?void 0:m.orientation)??this.dataPatched.pathSnapping.orientation;if(r===null)return;let o=t.find(r);if(!o||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let s=o.data,l=cH(s.geometry.path),u=(i+n)%1;i+n===1&&u===0&&(u=1);let h=l.getPointAt(u),c=this.parent?(y=this.parent)==null?void 0:y.matrixWorld:new ye;o.updateMatrixWorld();let d=new ye().multiplyMatrices(c.clone().invert(),o.matrixWorld);h.applyMatrix4(d);let f={position:h.toArray(),rotation:s.rotation};if(a==="tangential"){let _=new ye().extractRotation(o.matrixWorld),x=l.getTangentAt(u).applyMatrix4(_).add(h),w=new ye().lookAt(h,x,new L(0,1,0)),b=new zi().setFromRotationMatrix(w);f={...f,rotation:[b.x,b.y,b.z]}}this.updateTransformState(f),this.traverseEntity(_=>{_._cameraType&&_.dispatchEvent(wde)})}updateVisible(){var t;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((t=this.dataPatched.cloner)==null?void 0:t.hideBase)!==!0)}updateState_Entity(t,r){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,r),this.updateVisible()),this.updateTransformState(t)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof cl.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,r){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new cl.Cloner(this,t),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,r.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}},fH=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters),i=r.width/2,n=r.radiusTop??i,a=r.radiusBottom??i;return n===a?(n=i,a=i):n>a?(n=i,a=a*i/n):(n=n*i/a,a=i),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),radiusTop:n,radiusBottom:a})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l,radiusTop:u,radiusBottom:h,cornerRadius:c,cornerSegments:d,hollow:f}=e.parameters,p;return c||f?p=new pH(u,h,i,n,a,o,s,l*Math.PI/180,c,c,d,f):p=new bD(u,h,i,n,a,o,s,l*Math.PI/180),p.scale(1,1,r/t),Object.assign(p,{userData:{...e,type:"CylinderGeometry"}})}};function ks(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function q3(e){return new re(e.y,-e.x)}var pH=class extends Ke{constructor(e,t,r,i,n,a,o,s,l,u,h,c,d=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,a=a!==void 0?a:!1,o=o!==void 0?o:0,s=s!==void 0?s:Math.PI*2,a&&(l=0,u=0);let f=[],p=[],v=[],g=[],m=0,y=r/2,_=new L,x=new L;d&&e==0&&(e=l),d&&t==0&&(t=u);let w=new re(e,y),b=new re(t,-y),S=null,M=null,A=null,T=null,C=w.clone().sub(b),D=0,P=0,E=0;c>0&&(D=Math.min(e,t)*(1-c),P=e-D,E=t-D);let O=w.clone();O.x-=D;let z=Math.PI-C.angle(),B=C.angle(),N=Math.tan(B/2),F=Math.tan(z/2),G=N+F,H=c?G:F,$=c?G:N;if(l=Math.min(l,(e-P)/H,C.length()/G),u=Math.min(u,(t-E)/$,C.length()/G),l>0){let W=l/N;S=w.clone().sub(new re(W,l)),c&&(A=S.clone(),A.x-=D-G*l),w.sub(C.clone().setLength(W))}if(u>0){let W=u/F;M=b.clone().sub(new re(W,-u)),b.add(C.clone().setLength(W)),c&&(T=M.clone(),T.x-=D-G*u,O.sub(C.clone().setLength(W)))}C=w.clone().sub(b);let Z=C.length()<.5,X=[];for(let W=0;W<=i;W++){let j=[],K=W/i,ee=K*s+o,R=new re(Math.sin(ee),Math.cos(ee));T&&M?(ne(j,K,R,z,u,T,-1,!0),ne(j,K,R,B,u,M,-1,!1)):M?(te(j,R,M.x,0,-1),ne(j,K,R,B,u,M,-1,!1)):a||te(j,R,t,E,-1);let k=q3(C).normalize();if(ks(k,R,_),!Z)for(let V=0;V<=n;V++){let q=V/n,Q=C.clone().multiplyScalar(q).add(b);ks(Q,R,x),p.push(x.x,x.y,x.z),v.push(_.x,_.y,_.z),g.push(K,.5+x.y/r),j.push(m++)}if(A&&S?(ne(j,K,R,z,l,S,1,!1),ne(j,K,R,B,l,A,1,!0)):S?(ne(j,K,R,z,l,S,1,!1),te(j,R,S.x,0,1)):a||te(j,R,e,P,1),c&&!Z){let V=q3(C).multiplyScalar(-1).normalize();ks(V,R,_);for(let q=0;q<=n;q++){let Q=q/n,J=C.clone().multiplyScalar(-Q).add(O);ks(J,R,x),p.push(x.x,x.y,x.z),v.push(_.x,_.y,_.z),g.push(K,.5+x.y/r),j.push(m++)}}c&&!a&&j.push(j[0]),X.push(j)}for(let W=0;W<X.length-1;W++)for(let j=0;j<X[0].length-1;j++){if(a&&c&&j==n)continue;let K=X[W][j],ee=X[W+1][j],R=X[W+1][j+1],k=X[W][j+1],V=p[R*3+0],q=p[R*3+2];f.push(K,ee,k),(V!=0||q!=0)&&f.push(ee,R,k)}s<Math.PI*2&&(U(-1,X[0],o),U(1,X[X.length-1],o+s)),this.setIndex(f),this.setAttribute("position",new Le(p,3)),this.setAttribute("normal",new Le(v,3)),this.setAttribute("uv",new Le(g,2));function ne(W,j,K,ee,R,k,V,q){for(let Q=0;Q<h+1;Q++){let J=Q/h,oe=V<0?J:1-J;q&&(oe-=1),oe*=ee;let le=new re(Math.sin(oe),Math.cos(oe)*V),pe=le.clone().multiplyScalar(R).add(k);ks(pe,K,x),p.push(x.x,x.y,x.z),ks(le,K,_),v.push(_.x,_.y,_.z),g.push(j,.5+x.y/r),W.push(m++)}}function te(W,j,K,ee,R){let k=new L,V=new re,q=[K,ee];R<0&&q.reverse();for(let Q of q)V.set(Q,y*R),ks(V,j,k),p.push(k.x,k.y,k.z),v.push(0,R,0),g.push(.5,.5),W.push(m++)}function U(W,j,K){let ee=new re(Math.sin(K),Math.cos(K)),R=new re(-Math.cos(K),Math.sin(K)),k=new L,V=W<0?(J,oe,le)=>f.push(J,oe,le):(J,oe,le)=>f.push(J,le,oe),q=new re((e+t+P+E)/4,0);ks(q,ee,k),p.push(k.x,k.y,k.z),v.push(R.x,0,R.y),g.push(.5,.5);let Q=m++;for(let J of j){let oe=p.slice(J*3,J*3+3);p.push(...oe),v.push(R.x,0,R.y);let le=g.slice(J*2,J*2+2);g.push(...le),m++}for(let J=Q+1;J<m-1;J++)V(Q,J,J+1);V(Q,m-1,Q+1)}}},Sde=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l,cornerRadiusTop:u,cornerRadiusBottom:h,cornerSegments:c}=e.parameters,d;return u>0||h>0||l<360?d=new pH(0,t/2,i,n,a,o,s,l*Math.PI/180,u,h,c,0,!0):d=new jU(t/2,i,n,a,o),d.scale(1,1,r/t),Object.assign(d,{userData:{...e,type:"ConeGeometry"}})}},Mde=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:a,depthSegments:o,cornerRadius:s,cornerSegments:l}=e.parameters,u;return s==0?u=new Ah(t,r,i,n,a,o):u=new Tde(t,r,i,n,a,o,s,l),Object.assign(u,{userData:{...e,type:"CubeGeometry"}})}},ww=Math.PI/2,Tde=class extends Ke{constructor(e=1,t=1,r=1,i=1,n=1,a=1,o=0,s=4){super(),this.type="BoxGeometry";let l=this;i=Math.floor(i),n=Math.floor(n),a=Math.floor(a),s=Math.floor(s),o=Math.min(o,e/2,t/2,r/2);let u=[],h=[],c=[],d=[],f=0,p=0;v("z","y","x",-1,-1,r,t,e,a,n,0),v("z","y","x",1,-1,r,t,-e,a,n,1),v("x","z","y",1,1,e,r,t,i,a,2),v("x","z","y",1,-1,e,r,-t,i,a,3),v("x","y","z",1,-1,e,t,r,i,n,4),v("x","y","z",-1,-1,e,t,-r,i,n,5),o>0&&(g("z","y","x",-1,-1,1,r,t,e,a,0),g("z","y","x",1,-1,-1,r,t,e,a,1),g("z","y","x",-1,1,-1,r,t,e,a,1),g("z","y","x",1,1,1,r,t,e,a,0),g("x","y","z",-1,-1,-1,e,t,r,i,0),g("x","y","z",1,-1,1,e,t,r,i,1),g("x","y","z",-1,1,1,e,t,r,i,0),g("x","y","z",1,1,-1,e,t,r,i,1),g("y","x","z",-1,-1,1,t,e,r,n,0),g("y","x","z",1,-1,-1,t,e,r,n,1),g("y","x","z",1,1,1,t,e,r,n,1),g("y","x","z",-1,1,-1,t,e,r,n,0),m(1,1,1),m(-1,1,1),m(1,-1,1),m(-1,-1,1),m(1,1,-1),m(-1,1,-1),m(1,-1,-1),m(-1,-1,-1)),this.setIndex(u),this.setAttribute("position",new Le(h,3)),this.setAttribute("normal",new Le(c,3)),this.setAttribute("uv",new Le(d,2));function v(y,_,x,w,b,S,M,A,T,C,D){let P=(S-2*o)/T,E=(M-2*o)/C,O=S/2-o,z=M/2-o,B=A/2,N=T+1,F=C+1,G=0,H=0,$=new L;for(let Z=0;Z<F;Z++){let X=Z*E-z;for(let ne=0;ne<N;ne++){let te=ne*P-O;$[y]=te*w,$[_]=X*b,$[x]=B,h.push($.x,$.y,$.z),$[y]=0,$[_]=0,$[x]=A>0?1:-1,c.push($.x,$.y,$.z),d.push(ne/T),d.push(1-Z/C),G+=1}}for(let Z=0;Z<C;Z++)for(let X=0;X<T;X++){let ne=f+X+N*Z,te=f+X+N*(Z+1),U=f+(X+1)+N*(Z+1),W=f+(X+1)+N*Z;u.push(ne,te,W),u.push(te,U,W),H+=6}l.addGroup(p,H,D),p+=H,f+=G}function g(y,_,x,w,b,S,M,A,T,C,D){let P=(M-2*o)/C,E=M/2-o,O=A/2-o,z=T/2,B=C+1,N=0,F=0,G=new L,H=new L;for(let $=0;$<s+1;$++){let Z=$/s*ww,X=Math.sin(Z)*o,ne=(1-Math.cos(Z))*o,te=Math.sin(Z),U=Math.cos(Z);G[_]=(O+X)*b,G[x]=(z-ne)*S,H[y]=0,H[_]=te*Math.sign(G[_]),H[x]=U*Math.sign(G[x]);for(let W=0;W<B;W++){let j=W*P-E;G[y]=j*w,h.push(G.x,G.y,G.z),c.push(H.x,H.y,H.z),d.push(W/C),d.push(0),N+=1}}for(let $=0;$<s;$++)for(let Z=0;Z<C;Z++){let X=f+Z+B*$,ne=f+Z+B*($+1),te=f+(Z+1)+B*($+1),U=f+(Z+1)+B*$;u.push(X,ne,U),u.push(ne,te,U),F+=6}l.addGroup(p,F,D),p+=F,f+=N}function m(y,_,x){let w=new L,b=new L(e/2,t/2,r/2);b.subScalar(o);let S=[],M=y*_*x>0?(T,C,D)=>u.push(T,C,D):(T,C,D)=>u.push(T,D,C);for(let T=0;T<=s;T++){let C=[],D=ww*(1-T/s),P=Math.cos(D),E=Math.sin(D),O=0;for(let z=0;z<=T;z++){let B=Math.cos(O),N=Math.sin(O);w.x=P*B,w.y=E,w.z=P*N;let F=b.clone().addScaledVector(w,o);h.push(y*F.x,_*F.y,x*F.z),c.push(y*w.x,_*w.y,x*w.z),d.push(0,0),C.push(f++),O+=ww/T}S.push(C)}let A=S.length-1;for(let T=0;T<A;T++){let C=S[T],D=S[T+1],P=C.length-1;M(C[0],D[1],D[0]);for(let E=1;E<=P;E++)M(C[E-1],C[E],D[E]),M(C[E],D[E+1],D[E])}}}},QD=class extends Ke{constructor(e=[],t=[],r="",i=1,n=.2,a=4){super(),this.type="PolyhedronGeometryRound";let o=[],s=[],l=[];u(),h(),this.setAttribute("position",new Le(o,3)),this.setAttribute("normal",new Le(l,3)),this.setAttribute("uv",new Le(s,2));return;function u(){var B;n=Math.min(1-1e-5,n),n==0&&(a=0);let c={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],d=new L,f=d.clone(),p=new Ni,v=n*i,g=i-v,m=a+1,y=new L,_=(N,F)=>y.subVectors(N,F).normalize(),x=(N,F)=>Array(N).fill(void 0).map(F),w=x(e.length/3,(N,F)=>new L().fromArray(e,F*3).setLength(i)),b=[],S=1e6;for(let N=0;N<w.length;N++){let F=w[N],G=[],H,$,Z,X=1e10,ne=-1;for(;(ne=t.indexOf(N,ne+1))!=-1;){let j=ne-ne%3;H=t[j+(ne+1)%3],$=t[j+(ne+2)%3],Z=F.distanceToSquared(w[H]),X=Math.min(X,Z),G.push([H,$,Z])}X+=1e-6;let te=[],U=0,W=G.length;for(let j=0;j<W;j++){[H,$,Z]=G[U];let K=((B=b[H])==null?void 0:B.includes(N))==!0;Z<=X&&te.push(H+ +K*S),U=G.findIndex(ee=>ee[0]==$)}b.push(te)}let M=[];{let N=0,F=0,G,H,$=c==3;for(let Z=0;Z<=a;Z++){G=Z*(Z+1)/2,H=(Z+1)*(Z+2)/2;for(let X=0;X<a-Z;X++)[N,F]=[G+X+Z+2,H+X+Z+3],M.push(G,H,...$?[F,G]:[N,H],F,N),[G,H]=[N,F];M.push(G,H,G+a+2)}}let A=d.clone(),T=d.clone(),C=d.clone(),D=d.clone(),P=d.clone(),E=[],O=x(w.length,()=>x(c,()=>d.clone()));for(let N=0;N<w.length;N++){d.copy(w[N]).normalize(),A.copy(d).multiplyScalar(g);let F=b[N];for(let te=0;te<F.length;te++){let U=F[te],W=F[(te+1)%c];p.setFromPointsAndIndices(w,N,U%S,W%S),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(A,O[N][te])}let G=[],H=[],$=[],Z=new L;a==0&&[...O[N]].reduce((te,U)=>te.add(U),Z).multiplyScalar(1/c);for(let te=0;te<c;te++){let U=[],W=(te-1+c)%c,j=O[N][W],K=O[N][te];d.copy(j).sub(A),f.copy(K).sub(A);let ee=A.angleTo(d),R=d.angleTo(f),k=Math.cos(ee)*v;a==0?T.copy(Z):T.copy(A).setLength(g+k),H.push(k);let V=[T,j,K];for(let q=0;q<2;q++){let Q=V[q],J=V[q+1];D.subVectors(Q,A),P.subVectors(J,A),C.crossVectors(D,P).normalize();for(let oe=0;oe<m;oe++){let le=[ee,R][q]*oe/m;d.copy(D).applyAxisAngle(C,le).add(A),G.push(d.clone()),q&&(_(d,A),U.push([oe==0?Q:d.clone(),y.clone()]))}q&&(_(J,A),U.push([J,y.clone()]))}$.push(U)}E.push($);let X=2*m,ne=2;for(let te=0;te<c;te++){let U=X*te,W=X*((te+1)%c),j=[G[U]];for(let ee=1;ee<m;ee++){D=G[U+ee],P=G[W+ee],j.push(D);for(let R=1,k=ee-ne+1;R<=k;R++)d.lerpVectors(D,P,R/(k+1)),d.sub(A).setLength(H[te]).add(A),j.push(d.clone());j.push(P)}for(let ee=0;ee<m;ee++)j.push(G[ee+m+U]);j.push(G[W+m]);let K=M.map(ee=>j[ee]);o.push(...K.map(ee=>[ee.x,ee.y,ee.z]).flat()),l.push(...K.map(ee=>(_(ee,A),[y.x,y.y,y.z])).flat())}}let z=[];for(let N=0;N<b.length;N++)for(let F=0;F<c;F++){let G=b[N][F];if(G<S){let H=b[G].findIndex(X=>X%S==N),$=E[N][F],Z=E[G][H];for(let X=0;X<m;X++){let ne=$[X],te=Z[m-X],U=$[X+1],W=Z[m-(X+1)];[ne,te,U,U,te,W].forEach(j=>{o.push(j[0].x,j[0].y,j[0].z),l.push(j[1].x,j[1].y,j[1].z)})}z.push($[0][0],Z[m][0],$[m][0],Z[0][0])}}for(;z.length;){let N,F,G,H;[N,F]=z.splice(0,2);let $=[N];for(;N!=F;)$.push(F),G=z.indexOf(F),H=G%2,F=z.splice(G-H,2)[1-H];y.subVectors($[0],$[1]).cross(d.subVectors($[0],$[2])).normalize();let Z=y.dot($[0])<0;Z&&y.negate();for(let X=1;X<=$.length-2;X++)[$[X+ +Z],$[X+1-+Z],$[0]].forEach(ne=>{o.push(ne.x,ne.y,ne.z),l.push(y.x,y.y,y.z)})}}function h(){let c=new L;for(let b=0;b<o.length;b+=3){c.x=o[b+0],c.y=o[b+1],c.z=o[b+2];let S=x(c)/2/Math.PI+.5,M=w(c)/Math.PI+.5;s.push(S,1-M)}let d=new L,f=new L,p=new L,v=new L,g=new re,m=new re,y=new re,_=(b,S,M,A)=>{A<0&&b.x===1&&(s[S]=b.x-1),M.x===0&&M.z===0&&(s[S]=A/2/Math.PI+.5)};for(let b=0,S=0;b<o.length;b+=9,S+=6){d.set(o[b+0],o[b+1],o[b+2]),f.set(o[b+3],o[b+4],o[b+5]),p.set(o[b+6],o[b+7],o[b+8]),g.set(s[S+0],s[S+1]),m.set(s[S+2],s[S+3]),y.set(s[S+4],s[S+5]),v.copy(d).add(f).add(p).divideScalar(3);let M=x(v);_(g,S+0,d,M),_(m,S+2,f,M),_(y,S+4,p,M)}for(let b=0;b<s.length;b+=6){let S=s[b+0],M=s[b+2],A=s[b+4],T=Math.max(S,M,A),C=Math.min(S,M,A);T>.9&&C<.1&&(S<.2&&(s[b+0]+=1),M<.2&&(s[b+2]+=1),A<.2&&(s[b+4]+=1))}function x(b){return Math.atan2(b.z,-b.x)}function w(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}}static fromJSON(e){return new QD(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},Ade=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:a,cornerSides:o}=e.parameters,s=n===0&&a!==0?new vH(t*.5,a,o):new WU(t*.5,n);return s.scale(1,r/t,i/t),Object.assign(s,{userData:{...e,type:"DodecahedronGeometry"}})}},vH=class extends QD{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],s="DodecahedronGeometry";super(a,o,s,e,t,r),this.type=s}static fromJSON(e){return new vH(e.radius,e.corner,e.cornerSides)}},Uf=1e-12,eP=class{constructor(e){this.position=new re,this.startPosition=new re,this.uuid=pt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new eP(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},CT=class extends eP{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new CT(this.parent).copy(this)}},cd=class extends eP{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new CT(this),new CT(this))}static create(e,t){let r=new cd(e,new re(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new cd(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,i;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[e,t]}computeNormals(e=new re,t=new re){let[r,i]=this.computeTangents();return r&&i&&(X3(r,e),X3(i,t)),[e,t]}computeTangent(e=new re){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new re){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function X3(e,t=new re){let r=e.length();return t.set(-e.y/r,e.x/r)}var tP=e=>e,nf=new re,Tx=new re,Cde=new re,Dde=new re,Pde=new re,Lde=new re,gH=new L,mH=new L;function Ede(e){let t=new re;t.addVectors(e.v0,nf.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new re;return r.addVectors(e.v2,Tx.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new da(e.v0,t,r,e.v2)}function Dp(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function Ide(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function Ode(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function yH(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),a=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-a*a)/(2*n*i))}function Rde(e,t,r){return Z3(e,t)&&Z3(t,r)&&DT(e.position,t.position,r.position)}function DT(e,t,r){return nf.copy(t).sub(e).cross(Tx.copy(r).sub(e))===0}function zde(e,t,r,i,n){let a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(e.y-t.y)/a,u=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return i.set(s+l,o+u),n.set(s-l,o-u),[i,n]}function Nde(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function kde(e,t,r,i,n,a){let o=t.x-e.x,s=t.y-e.y,l=r.x-e.x,u=r.y-e.y,h=Math.sqrt((o+l)*(o+l)+(s+u)*(s+u)),c;return yH(t,e,r)>Math.PI&&(h*=-1),Dp(u,s)?c=(s+u)*(i/h-.5)*8/3/(o-l):c=(o+l)*(i/h-.5)*8/3/(u-s),n.set(t.x-c*s,t.y+c*o),a.set(r.x+c*u,r.y-c*l),[n,a]}function Y3(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function Z3(e,t){return DT(e.position,e.controls[1].position,t.position)&&DT(e.position,t.controls[0].position,t.position)}function Bde(e,t,r,i,n=.5){let a=nf.subVectors(t,e).multiplyScalar(n).add(e),o=Tx.subVectors(r,t).multiplyScalar(n).add(t),s=Cde.subVectors(i,r).multiplyScalar(n).add(r),l=a,u=Dde.subVectors(o,a).multiplyScalar(n).add(a),h=Pde.subVectors(s,o).multiplyScalar(n).add(o),c=s,d=Lde.subVectors(h,u).multiplyScalar(n).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,d.x,d.y,h.x,h.y,c.x,c.y,i.x,i.y]}function Fde(e,t,r=12,i=!0){let n=mH.set(0,0,0),a,o=0;for(let s=0;s<t.length;s++){let l=tP(t[s]),u=nf,h=dh(l,r);for(let c=0;c<=h;c++)if(l instanceof da||l instanceof Ol||l instanceof _a){if(l.getPoint(c/h,u),n.set(u.x,u.y,0),a!==void 0&&Ode(a,n))continue;a===void 0&&(a=gH),a.copy(n),e.setXYZ(o,n.x,n.y,n.z),o++}}return i&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),e}function Vde(e,t,r,i=12,n=!0){let a=mH.set(0,0,0),o=0,s=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let u,h=tP(t[l]),c=nf,d=dh(h,i);s.push(d);for(let f=0;f<=d;f++)if(h instanceof da||h instanceof Ol||h instanceof _a){if(h.getPoint(f/d,c),a.set(c.x,c.y,0),u==null?void 0:u.equals(a))continue;u===void 0?u=gH:(e.setXYZ(o,u.x,u.y,u.z),o++,e.setXYZ(o,a.x,a.y,a.z),o++),u.copy(a)}}return n&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),s}function K3(e,t=12,r=!1){let i=[];for(let n=0,a=e.length;n<a;n++){let o=e[n],s=0;if(r&&o.roundedCurveCorner!==void 0){let l=dh(o.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),s+=l}o.curveAfter!==void 0&&(s+=dh(o.curveAfter,t)),i.push(s)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=dh(e[0].roundedCurveCorner,t)*.5),i}function dh(e,t=12){return e&&e instanceof hx?t*2:e&&(e instanceof _a||e instanceof UU)?1:e&&e instanceof xD?t*e.points.length:t}function Ude(e,t,r=12,i=!0){let n,a=0;for(let o=0;o<t.length;o++){let s=tP(t[o]),l=dh(s,r),u=nf;for(let h=0;h<=l;h++)if(s instanceof da||s instanceof Ol||s instanceof _a){if(s.getPoint(h/l,u),n!==void 0&&Ide(n,u,Uf))continue;n===void 0&&(n=Tx),n.copy(u),e.push(u.x,u.y),a++}}return Dp(e[0],e[e.length-2],Uf)&&Dp(e[1],e[e.length-1],Uf)&&(e.pop(),e.pop()),i&&a>1&&!(Dp(e[a-1],e[1],Uf)&&Dp(e[a-2],e[0],Uf))&&(e.push(e[0],e[1]),a++),e}var Sw=new re,Gde=new re,Hde=new re,jde=new re,Wde=new re,$de=new re,ar=class extends m1{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new Cn(new L(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=pt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new ar;return i.isClosed=e.isClosed,i.points=e.points.map(n=>cd.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>ar.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(i=>i.uuid===e);if(r<0){let i=t;for(let n=0,a=this.shapeHoles.length;n<a;n++){let o=this.shapeHoles[n],s=o.points.length,l=o.getPointIndexById(e);if(l<0)i+=s;else return l+i}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],a=e-t;if(a<=n.points.length-1)return n.points[a];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],a=n.points.indexOf(e);if(a>=0)return t+a;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=Sw.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let a=this.points[i];a.position.multiply(r),a.controls[0].position.multiply(r),a.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update()}createPoint(e,t=0,r=pt.generateUUID()){let i;e instanceof re?i=e:i=new re(e,t);let n=new cd(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return Fde(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,a)=>n+a,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=K3(this.points,e,!1),this.roundedCurveDivisions=K3(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return Vde(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),Ude(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=dh(this.points[0].roundedCurveCorner,this.subdivision)*.5);let a=e-n;a<0&&(a+=i.reduce((o,s)=>o+s,0));for(let o=0,s=i.length;o<s;o++){let l=i[o];if(a<r+l)return[o,(a-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],a=this.curveDivisions,o=a[e];if(Y3(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(Sw.set(r.x,r.y))/l}let s=0;for(let l=0;l<e;l++)s+=a[l];return(t-s)/o}dispose(){}_applyCurveForPoint(e,t){Y3(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(t===0)this.moveTo(i.position.x,i.position.y);else{let n=this.points[t-1];this._applyCurveForPoint(i,n)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],r=this.points[this.points.length-1];this._applyCurveForPoint(t,r)}if(this.points.length>2){let t=0;for(let r=0,i=this.points.length;r<i;r++){let n=this.points[r],a=this.points[r-1]??this.points[this.points.length-1],o=this.points[r+1]??this.points[0],s=n.roundness,l=a&&o&&Rde(a,n,o);if(!n.controlsMoved()&&s>0&&!l){let u=n.curveBefore,h=n.curveAfter;if(u===void 0||h===void 0)continue;let c=n.roundedCurveBefore,d=n.roundedCurveAfter,f=u.getLength(),p=h.getLength(),v=Math.min(s,f*.499),g=Math.min(s,p*.499),m=Math.min(v,g),y=1-m/f,_=m/p,x=u.getPointAt(y,Sw),w=h.getPointAt(_,Gde);this._subSplitCurve(u,c,y,x,void 0),this._subSplitCurve(h,d,_,void 0,w);let b;if(this.useCubicForRoundedCorners){let S=yH(x,n.position,w)/2,M=Math.tan(S)*x.distanceTo(n.position),[A,T]=zde(x,w,M,Hde,jde),C=Nde(A,T,n.position),[D,P]=kde(C,x,w,M,Wde,$de);b=new da(x.clone(),D.clone(),P.clone(),w.clone())}else b=new Ol(x.clone(),n.position.clone(),w.clone());n.roundedCurveCorner=b,this.roundedCurves.splice(r+t,0,b),t++}}}}_subSplitCurve(e,t,r,i,n){if(e instanceof _a)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let a=e,o=t,s=a.getUtoTmapping(r,0),l=Bde(a.v0,a.v1,a.v2,a.v3,s);return i!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),n!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return t}clone(){let e=new ar(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let i=0;i<t;i++){let n=i*7,a=e.points[n+0],o=e.points[n+1],s=e.points[n+2],l=e.points[n+3],u=e.points[n+4],h=e.points[n+5],c=e.points[n+6],d=new cd(pt.generateUUID(),new re(a,o));d.controls[0].position.set(s,l),d.controls[1].position.set(u,h),d.roundness=c,this.points.push(d)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(i=>{let n=new ar;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(i,n)=>{n instanceof da&&n.v3.equals(i.position)&&i.controls[0].position.copy(n.v2)},r=i=>{let n=[],a,o;for(a=0,o=i.length;a<o;a++)i[a]instanceof Ol&&(i[a]=Ede(i[a]));for(a=0,o=i.length;a<o;a++){let u=i[a],h=a>0?i[a-1]:null,c;u instanceof da?(c=this.createPoint(u.v0),c.controls[1].position.copy(u.v1)):u instanceof _a&&(c=this.createPoint(u.v1)),c!==void 0&&(h!==null&&t(c,h),n.push(c))}let s=i[i.length-1],l=!1;return s instanceof da?s.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(s.v2),l=!0):s instanceof _a&&s.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=r(e.curves),e instanceof m1&&(this.shapeHoles=e.holes.map(i=>{let n=new ar;return n.fromShape(i),n})),this.update(),this}updatePoint(e,t){let r=this.getPointByUuid(e);r&&(t.position!==void 0&&r.position.fromArray(t.position),t.roundness!==void 0&&(r.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},PT=Math.PI*2;function Mw({x:e,y:t},r,i,n,a){return{x:e*r+n,y:t*i+a}}function qde(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:a+o*r,y:o-a*r},{x:a,y:o}]}function J3(e,t,r,i){let n=e*i-t*r<0?-1:1,a=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(a)}function Xde(e,t,r,i,n,a,o,s,l,u){let h=Math.pow(n,2),c=Math.pow(a,2),d=Math.pow(o,2),f=Math.pow(s,2),p=h*c-h*f-c*d;p<0&&(p=0),p/=h*f+c*d,p=Math.sqrt(p)*(l===u?-1:1);let v=p*n/a*s,g=p*-a/n*o,m=v+(e+r)/2,y=g+(t+i)/2,_=(o-v)/n,x=(s-g)/a,w=(-o-v)/n,b=(-s-g)/a,S=J3(1,0,_,x),M=J3(_,x,w,b);return!u&&M>0&&(M-=PT),u&&M<0&&(M+=PT),{centerx:m,centery:y,ang1:S,ang2:M}}function Yde({px:e,py:t,cx:r,cy:i,rx:n,ry:a,largeArcFlag:o,sweepFlag:s}){let l=[];if(n===0||a===0)return[];let u=(e-r)/2,h=(t-i)/2;if(u===0&&h===0)return[];n=Math.abs(n),a=Math.abs(a);let c=Math.pow(u,2)/Math.pow(n,2)+Math.pow(h,2)/Math.pow(a,2);c>1&&(n*=Math.sqrt(c),a*=Math.sqrt(c));let d=Xde(e,t,r,i,n,a,u,h,o,s),{ang1:f,ang2:p}=d,{centerx:v,centery:g}=d,m=Math.abs(p)/(PT/4);Math.abs(1-m)<1e-7&&(m=1);let y=Math.max(Math.ceil(m),1);p/=y;for(let _=0;_<y;_++)l.push(qde(f,p)),f+=p;return l.map(_=>{let{x,y:w}=Mw(_[0],n,a,v,g),{x:b,y:S}=Mw(_[1],n,a,v,g),{x:M,y:A}=Mw(_[2],n,a,v,g);return{x1:x,y1:w,x2:b,y2:S,x:M,y:A}})}var Rt;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Rt||(Rt={}));var _r;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(_r||(_r={}));function He(e,t){if(!e)throw t||"Assertion Failed!"}var ke=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){He(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,a=i.s-r.s;return n+a>0?n<a?r.t-t.t+(t.t-i.t)*(n/(n+a)):r.t-i.t+(i.t-t.t)*(a/(n+a)):0},e.edgeSign=function(t,r,i){He(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,a=i.s-r.s;return n+a>0?(r.t-i.t)*n+(r.t-t.t)*a:0},e.transEval=function(t,r,i){He(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,a=i.t-r.t;return n+a>0?n<a?r.s-t.s+(t.s-i.s)*(n/(n+a)):r.s-i.s+(i.s-t.s)*(a/(n+a)):0},e.transSign=function(t,r,i){He(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,a=i.t-r.t;return n+a>0?(r.s-i.s)*n+(r.s-t.s)*a:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,a){var o,s,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(o=e.edgeEval(t,i,r),s=e.edgeEval(i,r,n),o+s<0&&(o=-o,s=-s),a.s=e.interpolate(o,i.s,s,r.s)):(o=e.edgeSign(t,i,r),s=-e.edgeSign(t,n,r),o+s<0&&(o=-o,s=-s),a.s=e.interpolate(o,i.s,s,n.s)):a.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(o=e.transEval(t,i,r),s=e.transEval(i,r,n),o+s<0&&(o=-o,s=-s),a.t=e.interpolate(o,i.t,s,r.t)):(o=e.transSign(t,i,r),s=-e.transSign(t,n,r),o+s<0&&(o=-o,s=-s),a.t=e.interpolate(o,i.t,s,n.t)):a.t=(i.t+r.t)/2},e}(),Gf=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),Km=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),Fc=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),Q3=function(){function e(){var t=new Fc,r=new Gf,i=new Km(0),n=new Km(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new Km(0),i=new Km(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;He(n,"Vertex can't be null!");var a=i.prev;n.prev=a,a.next=n,n.next=i,i.prev=n,n.anEdge=r;var o=r;do o.Org=n,o=o.Onext;while(o!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;He(n,"Face can't be null");var a=i.prev;n.prev=a,a.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var o=r;do o.Lface=n,o=o.Lnext;while(o!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var a=t.prev,o=t.next;o.prev=a,a.next=o},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var a=t.prev,o=t.next;o.prev=a,a.next=o},e.prototype.makeEdge=function(){var t=new Fc,r=new Fc,i=new Gf,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var a=new Fc;this.makeVertex_(a,r,t.Org),t.Org.anEdge=t}if(!i){var o=new Gf;this.makeFace_(o,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new Gf;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new Fc;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),a=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(a,r),n.Org=t.Dst,a.Org=r.Org,n.Lface=a.Lface=t.Lface,t.Lface.anEdge=a,!i){var o=new Gf;this.makeFace_(o,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,a,o,s;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),a=i.Sym,a.Onext===a?this.killVertex_(a.Org,null):(a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),this.killEdge_(i));while(i!=r);o=t.prev,s=t.next,s.prev=o,o.next=s},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,a,o,s,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,o=i.Org;n=i.Lnext,a=i.Sym,a&&a.Lface&&a.Lface.inside&&(s=this.countFaceVerts_(r),l=this.countFaceVerts_(a.Lface),s+l-2<=t&&ke.vertCCW(i.Lprev.Org,i.Org,a.Lnext.Lnext.Org)&&ke.vertCCW(a.Lprev.Org,a.Org,i.Lnext.Lnext.Org)&&(n=a.Lnext,this.delete(a),i=null,a=null)),!(i&&i.Lnext.Org===o);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,a,o,s,l,u;for(a=t,a=t;(n=a.next)!==t;a=n){He(n.prev===a),l=n.anEdge;do He(l.Sym!==l),He(l.Sym.Sym===l),He(l.Lnext.Onext.Sym===l),He(l.Onext.Sym.Lnext===l),He(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(He(n.prev===a&&n.anEdge===null),s=r,s=r;(o=s.next)!==r;s=o){He(o.prev===s),l=o.anEdge;do He(l.Sym!==l),He(l.Sym.Sym===l),He(l.Lnext.Onext.Sym===l),He(l.Onext.Sym.Lnext===l),He(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(He(o.prev===s&&o.anEdge===null),u=i,u=i;(l=u.next)!==i;u=l)He(l.Sym.next===u.Sym),He(l.Sym!==l),He(l.Sym.Sym===l),He(l.Org!==null),He(l.Dst!==null),He(l.Lnext.Onext.Sym===l),He(l.Onext.Sym.Lnext===l);He(l.Sym.next===u.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),eR=function(){function e(){this.handle=null}return e}(),tR=function(){function e(){this.key=null,this.node=0}return e}(),Zde=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new eR,this.handles[i]=new tR;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,a,o;for(n=r[t].handle;;){if(o=t<<1,o<this.size&&this.leq(i[r[o+1].handle].key,i[r[o].handle].key)&&++o,He(o<=this.max),a=r[o].handle,o>this.size||this.leq(i[n].key,i[a].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=a,i[a].node=t,t=o}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,a,o;for(n=r[t].handle;;){if(o=t>>1,a=r[o].handle,o===0||this.leq(i[a].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=a,i[a].node=t,t=o}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,a;for(a=this.nodes.length,this.nodes.length=this.max+1,n=a;n<this.nodes.length;n++)this.nodes[n]=new eR;for(a=this.handles.length,this.handles.length=this.max+1,n=a;n<this.handles.length;n++)this.handles[n]=new tR}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;He(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),Tw=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),rR=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),Kde=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new rR,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new rR;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Jde=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,a=r.eUp,o=i.eUp;if(a.Dst===n)return o.Dst===n?ke.vertLeq(a.Org,o.Org)?ke.edgeSign(o.Dst,a.Org,o.Org)<=0:ke.edgeSign(a.Dst,o.Org,a.Org)>=0:ke.edgeSign(o.Dst,n,o.Org)<=0;if(o.Dst===n)return ke.edgeSign(a.Dst,n,a.Org)>=0;var s=ke.edgeEval(a.Dst,n,a.Org),l=ke.edgeEval(o.Dst,n,o.Org);return s>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&He(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){He(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new Tw;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case Rt.ODD:return(r&1)!==0;case Rt.NONZERO:return r!==0;case Rt.POSITIVE:return r>0;case Rt.NEGATIVE:return r<0;case Rt.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,a=null,o=r,s=r.eUp;o!==i;){if(o.fixUpperEdge=!1,a=e.regionBelow(o),n=a.eUp,n.Org!=s.Org){if(!a.fixUpperEdge){e.finishRegion(t,o);break}n=t.mesh.connect(s.Lprev,n.Sym),e.fixUpperEdge(t,a,n)}s.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(s,n)),e.finishRegion(t,o),s=a.eUp,o=a}return s},e.addRightEdges=function(t,r,i,n,a,o){var s,l,u,h,c=!0;u=i;do He(ke.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,r,u.Sym),u=u.Onext;while(u!==n);for(a===null&&(a=e.regionBelow(r).eUp.Rprev),l=r,h=a;s=e.regionBelow(l),u=s.eUp.Sym,u.Org===h.Org;)u.Onext!==h&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(h.Oprev,u)),s.windingNumber=l.windingNumber-u.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!c&&e.checkForRightSplice(t,l)&&(e.addWinding(u,h),e.deleteRegion(t,l),t.mesh.delete(h)),c=!1,l=s,h=u;l.dirty=!0,He(l.windingNumber-u.winding===s.windingNumber),o&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=ke.vertL1dist(r,t),a=ke.vertL1dist(i,t),o=.5*a/(n+a),s=.5*n/(n+a);t.coords[0]+=o*r.coords[0]+s*i.coords[0],t.coords[1]+=o*r.coords[1]+s*i.coords[1],t.coords[2]+=o*r.coords[2]+s*i.coords[2]},e.getIntersectData=function(t,r,i,n,a,o){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,a,o)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp;if(ke.vertLeq(n.Org,a.Org)){if(ke.edgeSign(a.Dst,n.Org,a.Org)>0)return!1;ke.vertEq(n.Org,a.Org)?n.Org!==a.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,n)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(n,a.Oprev),r.dirty=i.dirty=!0)}else{if(ke.edgeSign(n.Dst,a.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp,o;if(He(!ke.vertEq(n.Dst,a.Dst)),ke.vertLeq(n.Dst,a.Dst)){if(ke.edgeSign(n.Dst,a.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,o=t.mesh.splitEdge(n),t.mesh.splice(a.Sym,o),o.Lface.inside=r.inside}else{if(ke.edgeSign(a.Dst,n.Dst,a.Org)>0)return!1;r.dirty=i.dirty=!0,o=t.mesh.splitEdge(a),t.mesh.splice(n.Lnext,a.Sym),o.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp,o=n.Org,s=a.Org,l=n.Dst,u=a.Dst,h,c,d=new Fc,f,p;if(He(!ke.vertEq(u,l)),He(ke.edgeSign(l,t.event,o)<=0),He(ke.edgeSign(u,t.event,s)>=0),He(o!==t.event&&s!==t.event),He(!r.fixUpperEdge&&!i.fixUpperEdge),o===s||(h=Math.min(o.t,l.t),c=Math.max(s.t,u.t),h>c))return!1;if(ke.vertLeq(o,s)){if(ke.edgeSign(u,o,s)>0)return!1}else if(ke.edgeSign(l,s,o)<0)return!1;return e.debugEvent(t),ke.intersect(l,o,u,s,d),He(Math.min(o.t,l.t)<=d.t),He(d.t<=Math.max(s.t,u.t)),He(Math.min(u.s,l.s)<=d.s),He(d.s<=Math.max(s.s,o.s)),ke.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),f=ke.vertLeq(o,s)?o:s,ke.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),ke.vertEq(d,o)||ke.vertEq(d,s)?(e.checkForRightSplice(t,r),!1):!ke.vertEq(l,t.event)&&ke.edgeSign(l,t.event,d)>=0||!ke.vertEq(u,t.event)&&ke.edgeSign(u,t.event,d)<=0?u===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(n.Lnext,a.Oprev),i=r,r=e.topRightRegion(r),p=e.regionBelow(r).eUp.Rprev,i.eUp=a.Oprev,a=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,a.Onext,n.Rprev,p,!0),!0):(ke.edgeSign(l,t.event,d)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),ke.edgeSign(u,t.event,d)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(a.Sym),t.mesh.splice(a.Oprev,n),n.Org.s=d.s,n.Org.t=d.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,o,l,s,u),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,a;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,a=i.eUp,n.Dst!==a.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(a),i=e.regionBelow(r),a=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==a.Org)if(n.Dst!==a.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||a.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===a.Org&&n.Dst===a.Dst&&(e.addWinding(a,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,a=i.Onext,o=e.regionBelow(r),s=r.eUp,l=o.eUp,u=!1;if(s.Dst!==l.Dst&&e.checkForIntersect(t,r),ke.vertEq(s.Org,t.event)&&(t.mesh.splice(a.Oprev,s),r=e.topLeftRegion(t,r),a=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),o),u=!0),ke.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,o,null),u=!0),u){e.addRightEdges(t,r,i.Onext,a,a,!0);return}ke.vertLeq(l.Org,s.Org)?n=l.Oprev:n=s,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,a,o,s,l;if(n=r.eUp,ke.vertEq(n.Org,i)){He(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!ke.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}He(!1),r=e.topRightRegion(r),l=e.regionBelow(r),o=l.eUp.Sym,a=s=o.Onext,l.fixUpperEdge&&(He(a!==o),e.deleteRegion(t,l),t.mesh.delete(o),o=a.Oprev),t.mesh.splice(i.anEdge,o),ke.edgeGoesLeft(a)||(a=null),e.addRightEdges(t,r,o.Onext,s,a,!0)},e.connectLeftVertex=function(t,r){var i,n,a,o,s,l,u=new Tw;if(u.eUp=r.anEdge.Sym,i=t.dict.search(u).key,n=e.regionBelow(i),!!n){if(o=i.eUp,s=n.eUp,ke.edgeSign(o.Dst,r,o.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(a=ke.vertLeq(s.Dst,o.Dst)?i:n,i.inside||a.fixUpperEdge){if(a===i)l=t.mesh.connect(r.anEdge.Sym,o.Lnext);else{var h=t.mesh.connect(s.Dnext,r.anEdge);l=h.Sym}a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);He(n!==null);var a=e.regionBelow(n),o=a.eUp,s=e.finishLeftRegions(t,a,null);s.Onext===o?e.connectRightVertex(t,n,s):e.addRightEdges(t,n,s.Onext,o,o,!0)},e.addSentinel=function(t,r,i,n){var a=new Tw,o=t.mesh.makeEdge();o.Org.s=i,o.Org.t=n,o.Dst.s=r,o.Dst.t=n,t.event=o.Dst,a.eUp=o,a.windingNumber=0,a.inside=!1,a.fixUpperEdge=!1,a.sentinel=!0,a.dirty=!1,a.nodeUp=t.dict.insert(a)},e.initEdgeDict=function(t){t.dict=new Kde(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,a=t.bmax[0]+r,o=t.bmin[1]-i,s=t.bmax[1]+i;e.addSentinel(t,n,a,o),e.addSentinel(t,n,a,s)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(He(r.fixUpperEdge),He(++i===1)),He(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,a=t.mesh.eHead;for(r=a.next;r!==a;r=i)i=r.next,n=r.Lnext,ke.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,a=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)a++;for(a+=8,r=t.pq=new Zde(a,ke.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,a;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,a=i.anEdge,He(a.Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!ke.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),Qde=function(){function e(){this.mesh=new Q3,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Rt.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,a,o,s,l=[0,0,0],u=[0,0,0],h=[0,0,0],c=[0,0,0],d=[0,0,0],f=[null,null,null],p=[null,null,null],v=this.mesh.vHead;r=v.next;for(var g=0;g<3;++g)a=r.coords[g],u[g]=a,p[g]=r,l[g]=a,f[g]=r;for(r=v.next;r!==v;r=r.next)for(var m=0;m<3;++m)a=r.coords[m],a<u[m]&&(u[m]=a,p[m]=r),a>l[m]&&(l[m]=a,f[m]=r);var y=0;if(l[1]-u[1]>l[0]-u[0]&&(y=1),l[2]-u[2]>l[y]-u[y]&&(y=2),u[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(s=0,i=p[y],n=f[y],h[0]=i.coords[0]-n.coords[0],h[1]=i.coords[1]-n.coords[1],h[2]=i.coords[2]-n.coords[2],r=v.next;r!==v;r=r.next)c[0]=r.coords[0]-n.coords[0],c[1]=r.coords[1]-n.coords[1],c[2]=r.coords[2]-n.coords[2],d[0]=h[1]*c[2]-h[2]*c[1],d[1]=h[2]*c[0]-h[0]*c[2],d[2]=h[0]*c[1]-h[1]*c[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>s&&(s=o,t[0]=d[0],t[1]=d[1],t[2]=d[2]);s<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(h)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,a=0,o=t.next;o!==t;o=o.next)if(n=o.anEdge,!(n.winding<=0))do a+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==o.anEdge);if(a<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,a=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),a=!0),i=this.sUnit,n=this.tUnit;var o=this.longAxis_(r);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,n[o]=0,n[(o+1)%3]=0,n[(o+2)%3]=r[o]>0?1:-1;for(var s=t.next;s!==t;s=s.next)s.s=this.dot_(s.coords,i),s.t=this.dot_(s.coords,n);a&&this.checkOrientation_();for(var l=!0,u=t.next;u!==t;u=u.next)l?(this.bmin[0]=this.bmax[0]=u.s,this.bmin[1]=this.bmax[1]=u.t,l=!1):(u.s<this.bmin[0]&&(this.bmin[0]=u.s),u.s>this.bmax[0]&&(this.bmax[0]=u.s),u.t<this.bmin[1]&&(this.bmin[1]=u.t),u.t>this.bmax[1]&&(this.bmax[1]=u.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;ke.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;ke.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var a=void 0;i.Lnext!==n;)if(ke.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(ke.edgeGoesLeft(n.Lnext)||ke.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)a=t.connect(n.Lnext,n),n=a.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(ke.edgeGoesRight(i.Lprev)||ke.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)a=t.connect(i,i.Lprev),i=a.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)a=t.connect(n.Lnext,n),n=a.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,a=t.eHead.next;a!==t.eHead;a=n)n=a.next,a.Rface.inside!==a.Lface.inside?a.winding=a.Lface.inside?r:-r:i?t.delete(a):a.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var a,o=0,s=0,l;i>3&&t.mergeConvexFaces(i);for(var u=t.vHead.next;u!==t.vHead;u=u.next)u.n=-1;for(var h=t.fHead.next;h!==t.fHead;h=h.next)if(h.n=-1,!!h.inside){a=h.anEdge,l=0;do{var u=a.Org;u.n===-1&&(u.n=s,s++),l++,a=a.Lnext}while(a!==h.anEdge);if(l>i)throw"Face vertex greater that support polygon";h.n=o,++o}this.elementCount=o,r===_r.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=s,this.vertices=[],this.vertices.length=s*n,this.vertexIndices=[],this.vertexIndices.length=s;for(var u=t.vHead.next;u!==t.vHead;u=u.next)if(u.n!==-1){var c=u.n*n;this.vertices[c+0]=u.coords[0],this.vertices[c+1]=u.coords[1],n>2&&(this.vertices[c+2]=u.coords[2]),this.vertexIndices[u.n]=u.idx}for(var d=0,h=t.fHead.next;h!==t.fHead;h=h.next)if(h.inside){a=h.anEdge,l=0;do{var u=a.Org;this.elements[d++]=u.n,l++,a=a.Lnext}while(a!==h.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1;if(r===_r.CONNECTED_POLYGONS){a=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(a),a=a.Lnext;while(a!==h.anEdge);for(var p=l;p<i;++p)this.elements[d++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,a=0,o=0;this.vertexCount=0,this.elementCount=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){n=i=s.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,u=0,h=0;a=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){o=0,n=i=s.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[u++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext;while(i!==n);this.elements[h++]=a,this.elements[h++]=o,a+=o}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new Q3),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,a,o){if(t===void 0&&(t=Rt.ODD),r===void 0&&(r=_r.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,a&&(this.normal[0]=a[0],this.normal[1]=a[1],this.normal[2]=a[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),Jde.computeInterior(this,o);var s=this.mesh;return r===_r.BOUNDARY_CONTOURS?this.setWindingNumber_(s,1,!0):this.tessellateInterior_(s),o&&s.check(),r===_r.BOUNDARY_CONTOURS?this.outputContours_(s,n):this.outputPolymesh_(s,r,i,n),!0},e}();function dl(e){var t=e.windingRule,r=t===void 0?Rt.ODD:t,i=e.elementType,n=i===void 0?_r.POLYGONS:i,a=e.polySize,o=a===void 0?3:a,s=e.vertexSize,l=s===void 0?2:s,u=e.normal,h=u===void 0?[0,0,1]:u,c=e.contours,d=c===void 0?[]:c,f=e.strict,p=f===void 0?!0:f,v=e.debug,g=v===void 0?!1:v;if(!d&&p)throw new Error("Contours can't be empty");if(d){var m=new Qde;e.edgeCreateCallback&&(m.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(m.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)m.addContour(l||2,d[y]);return m.tesselate(r,n,o,l,h,p),{vertices:m.vertices,vertexIndices:m.vertexIndices,vertexCount:m.vertexCount,elements:m.elements,elementCount:m.elementCount,mesh:g?m.mesh:void 0}}}Rt.ODD;Rt.NONZERO;Rt.POSITIVE;Rt.NEGATIVE;Rt.ABS_GEQ_TWO;_r.POLYGONS;_r.CONNECTED_POLYGONS;_r.BOUNDARY_CONTOURS;var LT=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*LT.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let r=e*LT.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,a=0,o=new Float32Array(i,a*n,3*e);a+=3*e;let s=new Float32Array(i,a*n,3*e);a+=3*e;let l=new Float32Array(i,a*n,2*e);o.set(this.positions.slice(0,this.size*3)),s.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=i,this.positions=o,this.normals=s,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},_H=LT;_H.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var rP={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},xH={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},bH={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},Aw=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),wH=class extends Ke{constructor(e,t,r=0,i=12,n=3,a=Rt.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._bevel=r,this._curveSegments=i,this._bevelSegmentsInput=n,r<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(r,t/2-1e-12),this._bevelSegments=Math.floor(n));let o=this._shape.extractShapePointsToFlatArray([],i),s=this._shape.shapeHoles.map(w=>{let b=w.extractShapePointsToFlatArray([],i),S=[];for(let M=b.length-1;M>=1;M-=2){let A=b[M-1],T=b[M-0];S.push(A,T)}return S}),l;try{l=dl({windingRule:a,elementType:_r.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{l=rP}let u;try{u=dl({windingRule:Rt.ODD,elementType:_r.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...s]})}catch{u=xH}if(!l)throw new Error("error generating geometry");let h=l.elementCount;if(u){l.elementCount+=u.elementCount;for(let w=0;w<u.elements.length;w++){let b=u.elements[w],S=w%2===0?l.vertexCount:0;l.elements.push(b+S)}for(let w=0;w<u.vertexIndices.length;w++){let b=u.vertexIndices[w],S=l.vertexCount;l.vertexIndices.push(b+S)}for(let w=0;w<u.vertices.length;w++){let b=u.vertices[w];l.vertices.push(b)}}let c=1/0,d=-1/0,f=1/0,p=-1/0;for(let w=0,b=l.vertexCount;w<b;w++){let S=w*2,M=l.vertices[S+0],A=l.vertices[S+1];M<c&&(c=M),M>d&&(d=M),A<f&&(f=A),A>p&&(p=A)}this._minX=c,this._minY=f,this._width=d-c,this._height=p-f,this._buffer=new _H(this._computeBufferEstimatedSize(l));let v=[],g=[];for(let w=l.elementCount-1;w>=0;w--){let b=w>=h,S=w*2,M=l.elements[S+0],A=l.elements[S+1],T=M+A,C={start:M,count:A,normals:[],continuous:[],concave:[]},D=M,P=T-1,E=M+1,O=this._shape.roundedCurves.length;do{let F=D-M,G=l.vertices[P*2+0],H=l.vertices[P*2+1],$=l.vertices[D*2+0],Z=l.vertices[D*2+1],X=l.vertices[E*2+0],ne=l.vertices[E*2+1],te=$-G,U=Z-H,W=Math.sqrt(te*te+U*U);te/=W,U/=W;let j=$-X,K=Z-ne,ee=Math.sqrt(j*j+K*K);j/=ee,K/=ee,C.normals[F*2+0]=-K,C.normals[F*2+1]=j,C.concave[F]=te*K-U*j>0;let R=l.vertexIndices[D];if(Array.isArray(R))C.continuous[F]=!1;else{let[k,V]=this._shape.getCurveIndexFromVertexId(R-1,!0);if(V>0&&V<1)C.continuous[F]=!0;else{let q=V===1?k+1:k-1;q=(q+O)%O;let Q=V===1?0:1,J=this._shape.roundedCurves[k].getTangent(V),oe=this._shape.roundedCurves[q].getTangent(Q);C.continuous[F]=J.dot(oe)>.95}}b&&(C.normals[F*2+0]*=-1,C.normals[F*2+1]*=-1),[P,D,E]=[D,E,E+1],E>=T&&(E-=A)}while(E!==M+1);let z=[];z.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(M*2,T*2),vertexCount:A,vertexIndices:new Array(A).fill(!0).map((F,G)=>[G,G]),elements:[0,A],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(M*2,T*2)});for(let F=1;F<=this._bevelSegments;F++){let G=F/this._bevelSegments*Math.PI/2,H=(1-Math.cos(G))*this._bevelSize,$=[],Z=[],X=0;for(let te=0;te<A;te++){let U=te*2,W=(te-1+A)%A*2,j=l.vertices[C.start*2+U+0],K=l.vertices[C.start*2+U+1],ee=-C.normals[W+0]*H,R=-C.normals[W+1]*H,k=-C.normals[U+0]*H,V=-C.normals[U+1]*H;if(C.concave[te]||!C.concave[te]&&b){let q=Math.atan2(R,ee),Q=Math.atan2(V,k);Q>q&&(Q-=Math.PI*2);let J=Q-q;if(C.continuous[te]||b){let oe=q+J/2,le=Math.cos(oe)*H,pe=Math.sin(oe)*H;$[2*X+0]=j+le*(b?-1:1),$[2*X+1]=K+pe*(b?-1:1),Z[X]=te,X++}else{let oe=Math.max(1,Math.floor(i/4*Math.abs(J)/Math.PI));for(let le=0;le<=oe;le++){let pe=q+J*(le/oe),he=Math.cos(pe)*H,xe=Math.sin(pe)*H;$[2*X+0]=j+he,$[2*X+1]=K+xe,Z[X]=te,X++}}}else $[2*X+0]=j+ee,$[2*X+1]=K+R,Z[X]=te,X++,$[2*X+0]=j,$[2*X+1]=K,Z[X]=te,X++,$[2*X+0]=j+k,$[2*X+1]=K+V,Z[X]=te,X++}let ne=dl({windingRule:Rt.POSITIVE,elementType:_r.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[$],edgeCreateCallback:te=>{let U=te.Org.idx,W=Z[U],j=Z[(U+1)%Z.length];te.idx=[W,j],te.Sym.idx=[j,W]},vertexIdCallback:te=>{let U=te.Lprev.idx;return[U?U[1]:0,te.idx?te.idx[0]:0]}});if(!ne)throw console.log("Error"),new Error(`error generating bevel geometry for ${F}'th loop`);if(!ne.vertexCount)break;for(let te=0;te<ne.vertexIndices.length;te++){let[U,W]=ne.vertexIndices[te];if(U===W)continue;let j=W;W<U&&(j+=A);for(let K=U;K<j;K++){let ee=K%A,R=(K+1)%A;if(!C.continuous[ee]||!C.continuous[R]){ne.vertexIndices[te]=[U,ee],ne.vertexIndices.splice(te+1,0,[R,W]),ne.vertices.splice((te+1)*2,0,ne.vertices[te*2],ne.vertices[te*2+1]);break}}}z.push({bevelI:F,angle:G,size:H,boundary:ne,reverseMap:Z,insetPoints:$})}let B=(F,G,H)=>{let $=0,Z=F.boundary.vertexIndices.length;for(;$<Z&&H(F.boundary.vertexIndices[G]);)G=(G+1)%Z,$++;return $},N=v.length;for(let F=1;F<z.length;F++){let G=z[F-1],H=z[F],$=G.boundary.vertexIndices.length,Z=H.boundary.vertexIndices.length;if(!$||!Z)break;let X=C.concave.length,ne=0,te=Aw(ne,A);for(;!G.boundary.vertexIndices.filter(te).length||!H.boundary.vertexIndices.filter(te).length;)ne++,te=Aw(ne,A);let U=G.boundary.vertexIndices.findIndex(te),W=H.boundary.vertexIndices.findIndex(te);do U=(U+1)%$;while(te(G.boundary.vertexIndices[U]));do W=(W+1)%Z;while(te(H.boundary.vertexIndices[W]));ne=(ne+1)%A;let j=ne,K=this._buildBevelVert(C,G,(U-1+$)%$),ee=this._buildBevelVert(C,H,(W-1+Z)%Z),R=K,k=ee,V,q,Q=!1;do{te=Aw(ne,A);let J=B(G,U,te),oe=B(H,W,te),le=Q;if(Q=!1,J&&!oe){for(let pe=0;pe<J;pe++)V=this._buildBevelVert(C,G,(U+pe)%$,pe/(J-1)),v.push(R.topN,V.topP,k.topN),v.push(V.bottomP,R.bottomN,k.bottomN),R=V;Q=!0}else if(!J&&oe)for(let pe=0;pe<oe;pe++)q=this._buildBevelVert(C,H,(W+pe)%Z,pe/(oe-1)),v.push(k.topN,R.topP,q.topP),v.push(R.bottomP,k.bottomN,q.bottomP),k=q;else if(J&&oe)if(V=this._buildBevelVert(C,G,U,0),q=this._buildBevelVert(C,H,W,0),le?(v.push(R.topN,q.topP,k.topN),v.push(R.topN,V.topP,q.topP),v.push(q.bottomP,R.bottomN,k.bottomN),v.push(q.bottomP,V.bottomP,R.bottomN)):(v.push(k.topN,R.topN,V.topP),v.push(k.topN,V.topP,q.topP),v.push(V.bottomP,R.bottomN,k.bottomN),v.push(V.bottomP,k.bottomN,q.bottomP)),R=V,k=q,J===oe)for(let pe=1;pe<J;pe++)V=this._buildBevelVert(C,G,(U+pe)%$,pe/(J-1)),q=this._buildBevelVert(C,H,(W+pe)%Z,pe/(oe-1)),v.push(R.topN,V.topP,k.topN),v.push(k.topN,V.topP,q.topP),v.push(V.bottomP,R.bottomN,k.bottomN),v.push(V.bottomP,k.bottomN,q.bottomP),R=V,k=q;else if(J>oe){let pe=J/oe,he=0;for(let xe=1;xe<J;xe++)V=this._buildBevelVert(C,G,(U+xe)%$,xe/(J-1)),v.push(R.topN,V.topP,k.topN),v.push(V.bottomP,R.bottomN,k.bottomN),R=V,xe>(he+1)*pe&&(he++,q=this._buildBevelVert(C,H,(W+he)%Z,he/(oe-1)),v.push(k.topN,V.topP,q.topP),v.push(V.bottomP,k.bottomN,q.bottomP),k=q)}else{let pe=oe/J,he=0;for(let xe=1;xe<oe;xe++)q=this._buildBevelVert(C,H,(W+xe)%Z,xe/(oe-1)),v.push(k.topN,V.topP,q.topP),v.push(V.bottomP,k.bottomN,q.bottomP),k=q,xe>(he+1)*pe&&(he++,V=this._buildBevelVert(C,G,(U+he)%$,he/(J-1)),v.push(R.topN,V.topP,k.topN),v.push(V.bottomP,R.bottomN,k.bottomN),R=V)}U=(U+J)%$,W=(W+oe)%Z,ne=(ne+1)%X}while(ne!==j)}if(this._depth>this._bevel*2&&this._buildWall(z,C,v),b){let F=[];for(let G=v.length-1;G>=N+2;G-=3){let H=v[G-2],$=v[G-1],Z=v[G-0];F.push(Z,$,H)}v.splice(N,v.length-N,...F)}if(b){let F=[];for(let G=z[z.length-1].boundary.vertices.length-1;G>=1;G-=2){let H=z[z.length-1].boundary.vertices[G-1],$=z[z.length-1].boundary.vertices[G-0];F.push(H,$)}g.push(F)}if(!b){let F=z[z.length-1],G;try{G=dl({windingRule:z.length>1?Rt.POSITIVE:Rt.ODD,elementType:_r.POLYGONS,vertexSize:2,strict:!0,contours:[F.insetPoints,...g]})}catch{G=bH}if(!G)throw new Error("Error generating geometry for surface");s.length===0&&Object.assign(this,{capStartIndex:v.length});for(let H=0;H<G.elementCount*3;H+=3){let $=this._buildSurfaceVert(G,G.elements[H+0]),Z=this._buildSurfaceVert(G,G.elements[H+1]),X=this._buildSurfaceVert(G,G.elements[H+2]);v.push($.top,Z.top,X.top),v.push(X.bottom,Z.bottom,$.bottom)}}this.vertexCache={}}this._buffer.shrink();let m=new ft(Uint32Array.from(v),1),y=new ft(this._buffer.positions,3),_=new ft(this._buffer.normals,3),x=new ft(this._buffer.uvs,2);y.needsUpdate=!0,_.needsUpdate=!0,x.needsUpdate=!0,m.needsUpdate=!0,this.setAttribute("position",y),this.setAttribute("normal",_),this.setAttribute("uv",x),this.setIndex(m)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,a=i.boundary.vertexCount;n<a;n++){let o=this._buildBevelVert(t,i,n),s=this._buildBevelVert(t,i,(n+1)%a);r.push(s.topP,o.topN,o.bottomN),r.push(s.topP,o.bottomN,s.bottomP)}}_buildSurfaceVert(e,t){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let i=e.vertices[t*2+0],n=e.vertices[t*2+1],a=(i-this._minX)/this._width,o=(n-this._minY)/this._height,s=this._buffer.get(2),l=s*3,u=s*2,h={top:s+0,bottom:s+1};return this._buffer.positions[l+0]=i,this._buffer.positions[l+1]=n,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[u+0]=a,this._buffer.uvs[u+1]=o,this._buffer.positions[l+3]=i,this._buffer.positions[l+4]=n,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[u+2]=a,this._buffer.uvs[u+3]=o,this.vertexCache[r]=h,h}_buildBevelVert(e,t,r,i=1){let n=`${t.bevelI}:${r}`;if(n in this.vertexCache)return this.vertexCache[n];let[a,o]=t.boundary.vertexIndices[r],s,l,u,h;a!==o?(l=a,s=o,h=!1,u=e.continuous[l]&&e.continuous[s]):(s=a,l=(s-1+e.count)%e.count,h=e.concave[s]&&t.bevelI>0,u=e.continuous[s]||h);let c=Math.cos(t.angle),d=Math.sin(t.angle),f=r*2,p=s*2,v=l*2,g=t.boundary.vertices[f+0],m=t.boundary.vertices[f+1],y=(1-d)*this._bevelSize,_=(g-this._minX)/this._width,x=(m-this._minY)/this._height,w=e.normals[p+0],b=e.normals[p+1],S=e.normals[v+0],M=e.normals[v+1];if(h){let P=S-w,E=M-b;w=w+P*(1-i),b=b+E*(1-i);let O=Math.sqrt(w*w+b*b);w/=O,b/=O}let A=this._buffer.get(u?2:4),T=A*3,C=A*2,D={i:r,fi:s,topP:A+0,topN:A+0,bottomP:A+1,bottomN:A+1};return this._buffer.positions[T+0]=g,this._buffer.positions[T+1]=m,this._buffer.positions[T+2]=this._depth-y,this._buffer.normals[T+0]=w*c,this._buffer.normals[T+1]=b*c,this._buffer.normals[T+2]=d,this._buffer.uvs[C+0]=_,this._buffer.uvs[C+1]=x,this._buffer.positions[T+3]=g,this._buffer.positions[T+4]=m,this._buffer.positions[T+5]=y,this._buffer.normals[T+3]=w*c,this._buffer.normals[T+4]=b*c,this._buffer.normals[T+5]=-d,this._buffer.uvs[C+2]=x,this._buffer.uvs[C+3]=_,u||(A+=2,T+=6,C+=4,D.topP=A+0,D.bottomP=A+1,this._buffer.positions[T+0]=g,this._buffer.positions[T+1]=m,this._buffer.positions[T+2]=this._depth-y,this._buffer.normals[T+0]=S*c,this._buffer.normals[T+1]=M*c,this._buffer.normals[T+2]=d,this._buffer.uvs[C+0]=_,this._buffer.uvs[C+1]=x,this._buffer.positions[T+3]=g,this._buffer.positions[T+4]=m,this._buffer.positions[T+5]=y,this._buffer.normals[T+3]=S*c,this._buffer.normals[T+4]=M*c,this._buffer.normals[T+5]=-d,this._buffer.uvs[C+2]=x,this._buffer.uvs[C+3]=_),this.vertexCache[n]=D,D}clone(){let e=new wH(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=yx(this.userData),e}},SH=class extends Ke{constructor(e,t=12,r={}){super(),this.type="ShapeGeometry",this.windingRule=Rt.ODD,this.elementType=_r.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:Rt.ODD,elementType:_r.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(d=>d.extractShapePointsToFlatArray([],this._curveSegments)),a,o=!0,s=!0,l,u;for(let d=0,f=i.length/2;d<f;d++){let p=d*2,v=i[p+0],g=i[p+1];if(l!==void 0&&v!==l&&(o=!1),u!==void 0&&g!==u&&(s=!1),l=v,u=g,!o&&!s)break}if(!o&&!s)try{a=dl({contours:[i,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{a=rP}let h=(a==null?void 0:a.vertexCount)??1,c=(a==null?void 0:a.elementCount)??1;if(this._positionAttribute=new ft(new Float32Array(h*3),3),this._normalAttribute=new ft(new Float32Array(h*3),3),this._uvAttribute=new ft(new Float32Array(h*2),2),this._indexAttribute=new ft(new Uint32Array(c*3),1),a){let d=1/0,f=-1/0,p=1/0,v=-1/0;for(let y=0,_=h;y<_;y++){let x=y*2,w=a.vertices[x+0],b=a.vertices[x+1];w<d&&(d=w),w>f&&(f=w),b<p&&(p=b),b>v&&(v=b)}let g=f-d,m=v-p;for(let y=0,_=h;y<_;y++){let x=y*2,w=a.vertices[x+0],b=a.vertices[x+1],S=(w-d)/g,M=(b-p)/m;this._positionAttribute.setXYZ(y,w,b,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,S,M)}for(let y=0,_=c;y<_;y++){let x=y*3,w=a.elements[x+0],b=a.elements[x+1],S=a.elements[x+2];this._indexAttribute.setX(x+0,w),this._indexAttribute.setX(x+1,b),this._indexAttribute.setX(x+2,S)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((a==null?void 0:a.elementCount)??1)*3)}clone(){let e=new SH(this._shape,this._curveSegments);return e.userData=yx(this.userData),e}},MH=class extends wH{constructor(e,t,r=0,i=12,n=3,a=Rt.ODD){super(e,t,r,i,n,a),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,a=i.boundary.vertexCount;n<a;n++){let o=this._buildBevelVert(t,i,n),s=this._buildBevelVert(t,i,(n+1)%a);r.push(s.topP,o.topN,o.bottomN),r.push(s.topP,o.bottomN,s.bottomP)}}clone(){let e=new MH(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=yx(this.userData),e}},Gh=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var u,h;let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Rt.ODD},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.abs(r.depth??0),o=e.shape??(t==null?void 0:t.shape),s=(o==null?void 0:o.roundness)??r.roundness;o!==void 0&&(o instanceof ar?(o.width!==i||o.height!==n)&&o.applySize(i,n):o=new ar(i,n).fromJSON(o),((u=e.parameters)==null?void 0:u.roundness)!==void 0&&((h=e.parameters)==null?void 0:h.roundness)>0&&o.update());let l=o??new ar(i,n);return{parameters:Object.assign(r,{width:i,height:n,depth:a,roundness:s}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:a,windingRule:o}=e.parameters;e.shape.roundness=a;let s;return t<=0?s=new SH(e.shape,n,{windingRule:o}):s=new MH(e.shape,t,r,n,i,o),Object.assign(s,{userData:{...e,type:"VectorGeometry"}})}},TH=Math.PI*2,iP=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof ar?e.shape:new ar,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u=e.shape,h=t*.5,c=r*.5,d=efe(u,h,c,n*Math.PI/180,i,a);u.isClosed=!0,u.update();let f=Gh.create({shape:u,parameters:{subdivisions:d,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function efe(e,t,r,i,n,a){if(i>=TH)return n>30||n%4===0?(rfe(e,t,r,a),Math.round(n/4)):iR(e,i,n,t,r,a);i=Math.max(i,.001);let o={x:0,y:r},s=i+Math.PI*.5,l={x:Math.cos(s)*t,y:Math.sin(s)*r},u=Yde({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%u.length===0?tfe(e,o.x,o.y,u,n,t,r,a):iR(e,i,n,t,r,a)}function tfe(e,t,r,i,n,a,o,s){let l=Math.round(n/i.length);e.addPoint(dd(t,r));for(let u=0,h=i.length;u<h;u++){let c=i[u],d=e.points[u],f=dd(c.x,c.y);d.controls[1].position.set(c.x1,c.y1),f.controls[0].position.set(c.x2,c.y2),e.addPoint(f)}return s>0?AH(e,a,o,s):e.addPoint(dd(0,0)),l}function iR(e,t,r,i,n,a){let o=-t/r;for(let s=0;s<=r;s++){let l=o*s,u=Math.sin(l)*i,h=Math.cos(l)*n;e.addPoint(dd(u,h))}return t<TH?a>0?AH(e,i,n,a):e.addPoint(dd(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&CH(e,i,n,a)),1}function rfe(e,t,r,i=0,n=0,a=0){let o=.5522847498,s=t*o,l=r*o;e.addPoint(Jm(n-t,a,n-t,a-l,n-t,a+l)),e.addPoint(Jm(n,a+r,n-s,a+r,n+s,a+r)),e.addPoint(Jm(n+t,a,n+t,a+l,n+t,a-l)),e.addPoint(Jm(n,a-r,n+s,a-r,n-s,a-r)),i>0&&CH(e,t,r,i)}function dd(e,t){return new cd(pt.generateUUID(),new re(e,t))}function Jm(e,t,r,i,n,a){let o=dd(e,t);return o.controls[0].position.set(r,i),o.controls[1].position.set(n,a),o}function AH(e,t,r,i){DH(e,t,r,i).forEach(n=>e.addPoint(n))}function CH(e,t,r,i){let n=DH(e,t,r,i),a=new ar;n.forEach(o=>a.addPoint(o)),a.isClosed=!0,e.shapeHoles.push(a)}function DH(e,t,r,i){let n=i*t/100,a=n*(Math.abs(r)/Math.abs(t)),o=new re(n/t,a/r),s=e.points.map(l=>{let u=l.clone();return u.uuid=pt.generateUUID(),u}).reverse();return s.forEach(l=>{l.position.multiply(o);let u=l.controls[0].position.clone().multiply(o),h=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(h),l.controls[1].position.copy(u)}),s}var ife=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??i),a=Math.abs(r.depth??i),o=Math.abs(Math.min(i,a))/2;return{parameters:Object.assign(r,{width:i,height:n,depth:a,radius:o,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:a,segments:o,pathRadius:s,pathType:l,pathSegments:u,cornerRadius:h,cornerSegments:c}=e.parameters,d=new PH(!1,t,r,i,n,a,o,s,l,u,h,c);return Object.assign(d,{userData:{...e,type:"HelixGeometry"}})}},Cw=new Kp([0,0,0],1),PH=class extends Ke{constructor(e=!0,t=1,r=1,i=1,n=1,a=1,o=1,s=1,l=1,u=1,h=1,c=1){if(super(),a===0)return;let d=e&&a===1;d&&(c=0),h>100&&(h=100),h===0&&(c=0);let f=()=>new L,p=new L,v=f(),g=f(),m=f(),y,_,x,w,b,S,M,A,T=f(),C=f(),D=f(),P=f(),E=f(),O=f(),z=f(),B=f(),N=r-2*s+.001,F=N/a,G=Math.ceil(o*a),H=G+1,$=N/G,Z=-N/2,X=u+1,ne=2*Math.PI/u,te=Math.PI/2/c,U=.01,W=Math.min((1-h/100)*s,s-U),j=s-W,K=0,ee=2,R=c*ee+ee,k=X*R/ee,V=k+X*H,q=X*(H+R),[Q,J,oe]=[3,3,2].map(Tt=>Array(q*Tt).fill(0)),le=[],pe=n-s;function he(Tt,mr){let Zi=Math.PI/2;S=mr*$,A=2*Math.PI*(S%F)/F+Zi,S+=Z,M=Math.sin(A)*pe,b=Math.cos(A)*pe,e?Tt.set(b,M,S):Tt.set(b,S,M)}he(p,-1e-10),he(v,0),T.copy(p),he(p,1);let xe=p.distanceTo(v),Se=d?0:j+W,Oe=xe*G+2*Se,ze=W,et=Oe-Se;for(let Tt=0;Tt<=G;Tt++){he(g,Tt),B.subVectors(g,T).normalize(),T.copy(g),O.copy(g).setComponent(+e+1,0).normalize(),z.crossVectors(B,O).normalize();let mr=Tt===0,Zi=Tt===G,Zl=mr?3*Math.PI/2:te,nm=mr?ze:et,si=mr?X:V,cn=mr?0:q-X,am=B.clone().multiplyScalar(mr?-j:j).add(g),zX=B.clone().multiplyScalar(mr?-1:1).normalize();for(let Lo=0;Lo<X;Lo++){let GE=Lo*ne;if(C.addVectors(p.copy(O).multiplyScalar(s*Math.cos(GE)),v.copy(z).multiplyScalar(s*Math.sin(GE))),D.copy(C).normalize(),mr||Zi){d||(K=cn+Lo,[0,1,2].forEach(Mi=>{Q[K*3+Mi]=am.getComponent(Mi),J[K*3+Mi]=zX.getComponent(Mi)}),oe[K*2]=+Zi,oe[K*2+1]=Lo/u),v.copy(D).multiplyScalar(W),m.addVectors(g,v);for(let Mi=0;Mi<c;Mi++){let Sb=Mi*te+Zl;P.addVectors(p.copy(B).multiplyScalar(j*Math.sin(Sb)),v.copy(D).multiplyScalar(j*Math.cos(Sb))),E.copy(P).normalize(),v.addVectors(m,P),P.normalize(),K=si+Mi*X+Lo,[0,1,2].forEach(om=>{Q[K*3+om]=v.getComponent(om),J[K*3+om]=E.getComponent(om)});let NX=+mr+Math.sin(Sb);oe[K*2]=(nm+j*NX)/Oe,oe[K*2+1]=Lo/u}}v.addVectors(g,C),K=k+Tt*X+Lo,[0,1,2].forEach(Mi=>{Q[K*3+Mi]=v.getComponent(Mi),J[K*3+Mi]=D.getComponent(Mi)}),oe[K*2]=(Se+Tt*xe)/Oe,oe[K*2+1]=Lo/u}}let bt=H+2*c+ee,[wt,qt]=[+d,bt-1];for(let Tt=wt;Tt<=qt-1;Tt++){let mr=d&&Tt===qt-1;for(let Zi=0;Zi<X-1;Zi++)y=Tt*X+Zi,_=y+1,x=(mr?Zi:y)+X,w=(mr?Zi+1:_)+X,Tt===0?le.push(_,w,x):Tt===bt-2?le.push(y,_,x):le.push(y,_,x,_,w,x)}this.setIndex(le),this.setAttribute("position",new Le(Q,3)),this.setAttribute("normal",new Le(J,3)),this.setAttribute("uv",new Le(oe,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),r=e.radialSegments+1,i=Array.from(this.getIndex().array),n,a,o,s,l=6*(t-1)*e.radialSegments,u=t,h=u===t;for(let c=0;c<e.radialSegments;c++)n=u*r+c,a=n+1,o=(h?c:n)+r,s=(h?c+1:a)+r,i[l++]=n,i[l++]=a,i[l++]=o,i[l++]=a,i[l++]=s,i[l++]=o;return i.length=l,Cw.array=i,Cw.count=i.length,Cw}},nfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:a,cornerSides:o}=e.parameters,s=n===0&&a!==0?new LH(t*.5,a,o):new ZU(t*.5,n);return s.scale(1,r/t,i/t),Object.assign(s,{userData:{...e,type:"IcosahedronGeometry"}})}},LH=class extends QD{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(n,a,o,e,t,r),this.type=o}static fromJSON(e){return new LH(e.radius,e.corner,e.cornerSides)}},afe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i;(((i=e.parameters)==null?void 0:i.points)??[]).forEach(n=>{Array.isArray(n)&&(n.x=n[0],n.y=n[1])});let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new m1;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let a=new HU(n.extractPoints(i).shape,r);return a.rotateZ(Math.PI),Object.assign(a,{userData:{...e,type:"LatheGeometry"}})}},ka=new ye,Dw=new Wt,Qm=new L,q1=class extends Wl{constructor(){super(),this.uuid=pt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new ni().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let a=0,o=n.vertexNormals.length;a<o;a++)n.vertexNormals[a].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return ka.makeRotationX(e),this.applyMatrix4(ka),this}rotateY(e){return ka.makeRotationY(e),this.applyMatrix4(ka),this}rotateZ(e){return ka.makeRotationZ(e),this.applyMatrix4(ka),this}translate(e,t,r){return ka.makeTranslation(e,t,r),this.applyMatrix4(ka),this}scale(e,t,r){return ka.makeScale(e,t,r),this.applyMatrix4(ka),this}lookAt(e){return Dw.lookAt(e),Dw.updateMatrix(),this.applyMatrix4(Dw.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,a=i.normal,o=i.color,s=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let c=0;c<n.count;c++)t.vertices.push(new L().fromBufferAttribute(n,c)),o!==void 0&&t.colors.push(new Qe().fromBufferAttribute(o,c));function u(c,d,f,p){let v=o===void 0?[]:[t.colors[c].clone(),t.colors[d].clone(),t.colors[f].clone()],g=a===void 0?[]:[new L().fromBufferAttribute(a,c),new L().fromBufferAttribute(a,d),new L().fromBufferAttribute(a,f)],m=new ET(c,d,f,g,v,p);t.faces.push(m),s!==void 0&&t.faceVertexUvs[0].push([new re().fromBufferAttribute(s,c),new re().fromBufferAttribute(s,d),new re().fromBufferAttribute(s,f)]),l!==void 0&&t.faceVertexUvs[1].push([new re().fromBufferAttribute(l,c),new re().fromBufferAttribute(l,d),new re().fromBufferAttribute(l,f)])}let h=e.groups;if(h.length>0)for(let c=0;c<h.length;c++){let d=h[c],f=d.start,p=d.count;for(let v=f,g=f+p;v<g;v+=3)r!==void 0?u(r.getX(v),r.getX(v+1),r.getX(v+2),d.materialIndex):u(v,v+1,v+2,d.materialIndex)}else if(r!==void 0)for(let c=0;c<r.count;c+=3)u(r.getX(c),r.getX(c+1),r.getX(c+2));else for(let c=0;c<n.count;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qm).negate(),this.translate(Qm.x,Qm.y,Qm.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new ye;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new L,t=new L;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new L;if(e){let r=new L,i=new L;for(let n=0,a=this.faces.length;n<a;n++){let o=this.faces[n],s=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c];r.subVectors(u,l),i.subVectors(s,l),r.cross(i),t[o.a].add(r),t[o.b].add(r),t[o.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],a=n.vertexNormals;a.length===3?(a[0].copy(t[n.a]),a[1].copy(t[n.b]),a[2].copy(t[n.c])):(a[0]=t[n.a].clone(),a[1]=t[n.b].clone(),a[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,a=i.vertexNormals.length;n<a;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new q1;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,a=this.morphNormals[t].vertexNormals;for(let o=0,s=this.faces.length;o<s;o++){let l=new L,u={a:new L,b:new L,c:new L};n.push(l),a.push(u)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,a=this.faces.length;n<a;n++){let o=this.faces[n],s=i.faceNormals[n],l=i.vertexNormals[n];s.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new wr),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vn),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,h=e.colors;t!==void 0&&(i=new ni().getNormalMatrix(t));for(let c=0,d=o.length;c<d;c++){let f=o[c].clone();t!==void 0&&f.applyMatrix4(t),a.push(f)}for(let c=0,d=h.length;c<d;c++)u.push(h[c].clone());for(let c=0,d=l.length;c<d;c++){let f=l[c],p,v,g=f.vertexNormals,m=f.vertexColors,y=new ET(f.a+n,f.b+n,f.c+n);y.normal.copy(f.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let _=0,x=g.length;_<x;_++)p=g[_].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),y.vertexNormals.push(p);y.color.copy(f.color);for(let _=0,x=m.length;_<x;_++)v=m[_],y.vertexColors.push(v.clone());y.materialIndex=f.materialIndex+r,s.push(y)}for(let c=0,d=e.faceVertexUvs.length;c<d;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let p=0,v=f.length;p<v;p++){let g=f[p],m=[];for(let y=0,_=g.length;y<_;y++)m.push(g[y].clone());this.faceVertexUvs[c].push(m)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let s=0,l=this.vertices.length;s<l;s++){let u=this.vertices[s],h=Math.round(u.x*n)+"_"+Math.round(u.y*n)+"_"+Math.round(u.z*n);t[h]===void 0?(t[h]=s,r.push(this.vertices[s]),i[s]=r.length-1):i[s]=i[t[h]]}let a=[];for(let s=0,l=this.faces.length;s<l;s++){let u=this.faces[s];u.a=i[u.a],u.b=i[u.b],u.c=i[u.c];let h=[u.a,u.b,u.c];for(let c=0;c<3;c++)if(h[c]===h[(c+1)%3]){a.push(s);break}}for(let s=a.length-1;s>=0;s--){let l=a[s];this.faces.splice(l,1);for(let u=0,h=this.faceVertexUvs.length;u<h;u++)this.faceVertexUvs[u].splice(l,1)}let o=this.vertices.length-r.length;return this.vertices=r,o}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new L(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;function r(s,l){return s.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],a,o;i&&i.length===t&&(a=[]),n&&n.length===t&&(o=[]);for(let s=0;s<t;s++){let l=e[s]._id;a&&a.push(i[l]),o&&o.push(n[l])}a&&(this.faceVertexUvs[0]=a),o&&(this.faceVertexUvs[1]=o)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(e[p]=f[p]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];t.push(p.x,p.y,p.z)}let r=[],i=[],n={},a=[],o={},s=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],v=!0,g=!1,m=this.faceVertexUvs[0][f]!==void 0,y=p.normal.length()>0,_=p.vertexNormals.length>0,x=p.color.r!==1||p.color.g!==1||p.color.b!==1,w=p.vertexColors.length>0,b=0;if(b=u(b,0,0),b=u(b,1,v),b=u(b,2,g),b=u(b,3,m),b=u(b,4,y),b=u(b,5,_),b=u(b,6,x),b=u(b,7,w),r.push(b),r.push(p.a,p.b,p.c),r.push(p.materialIndex),m){let S=this.faceVertexUvs[0][f];r.push(d(S[0]),d(S[1]),d(S[2]))}if(y&&r.push(h(p.normal)),_){let S=p.vertexNormals;r.push(h(S[0]),h(S[1]),h(S[2]))}if(x&&r.push(c(p.color)),w){let S=p.vertexColors;r.push(c(S[0]),c(S[1]),c(S[2]))}}function u(f,p,v){return v?f|1<<p:f&~(1<<p)}function h(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return n[p]!==void 0||(n[p]=i.length/3,i.push(f.x,f.y,f.z)),n[p]}function c(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return o[p]!==void 0||(o[p]=a.length,a.push(f.getHex())),o[p]}function d(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=s.length/2,s.push(f.x,f.y)),l[p]}return e.data={},e.data.vertices=t,e.data.normals=i,a.length>0&&(e.data.colors=a),s.length>0&&(e.data.uvs=[s]),e.data.faces=r,e}clone(){return new q1().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let c=0,d=t.length;c<d;c++)this.vertices.push(t[c].clone());let r=e.colors;for(let c=0,d=r.length;c<d;c++)this.colors.push(r[c].clone());let i=e.faces;for(let c=0,d=i.length;c<d;c++)this.faces.push(i[c].clone());for(let c=0,d=e.faceVertexUvs.length;c<d;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let p=0,v=f.length;p<v;p++){let g=f[p],m=[];for(let y=0,_=g.length;y<_;y++){let x=g[y];m.push(x.clone())}this.faceVertexUvs[c].push(m)}}let n=e.morphTargets;for(let c=0,d=n.length;c<d;c++){let f={};if(f.name=n[c].name,n[c].vertices!==void 0){f.vertices=[];for(let p=0,v=n[c].vertices.length;p<v;p++)f.vertices.push(n[c].vertices[p].clone())}if(n[c].normals!==void 0){f.normals=[];for(let p=0,v=n[c].normals.length;p<v;p++)f.normals.push(n[c].normals[p].clone())}this.morphTargets.push(f)}let a=e.morphNormals;for(let c=0,d=a.length;c<d;c++){let f={};if(a[c].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,v=a[c].vertexNormals.length;p<v;p++){let g=a[c].vertexNormals[p],m={};m.a=g.a.clone(),m.b=g.b.clone(),m.c=g.c.clone(),f.vertexNormals.push(m)}}if(a[c].faceNormals!==void 0){f.faceNormals=[];for(let p=0,v=a[c].faceNormals.length;p<v;p++)f.faceNormals.push(a[c].faceNormals[p].clone())}this.morphNormals.push(f)}let o=e.skinWeights;for(let c=0,d=o.length;c<d;c++)this.skinWeights.push(o[c].clone());let s=e.skinIndices;for(let c=0,d=s.length;c<d;c++)this.skinIndices.push(s[c].clone());let l=e.lineDistances;for(let c=0,d=l.length;c<d;c++)this.lineDistances.push(l[c]);let u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());let h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new ofe().fromGeometry(this),t=new Ke,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",ey.call(new ft(r,3),e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",ey.call(new ft(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",nR.call(new ft(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",aR.call(new ft(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",aR.call(new ft(i,2),e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],a=e.morphTargets[i];for(let o=0,s=a.length;o<s;o++){let l=a[o],u=new Le(l.data.length*3,3);u.name=l.name,n.push(ey.call(u,l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new Le(e.skinIndices.length*4,4);t.setAttribute("skinIndex",oR.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new Le(e.skinWeights.length*4,4);t.setAttribute("skinWeight",oR.call(i,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Ke,r=e.geometry;if(e.isPoints||e.isLine){let i=new Le(r.vertices.length*3,3),n=new Le(r.colors.length*3,3);if(t.setAttribute("position",ey.call(i,r.vertices)),t.setAttribute("color",nR.call(n,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let a=new Le(r.lineDistances.length,1);t.setAttribute("lineDistance",sfe.call(a,r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};q1.prototype.isGeometry=!0;var ofe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,a=e.faces;for(i=0;i<a.length;i++){let o=a[i];o.materialIndex!==n&&(n=o.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,o=e.morphTargets,s=o.length,l;if(s>0){l=[];for(let g=0;g<s;g++)l[g]={name:o[g].name,data:[]};this.morphTargets.position=l}let u=e.morphNormals,h=u.length,c;if(h>0){c=[];for(let g=0;g<h;g++)c[g]={name:u[g].name,data:[]};this.morphTargets.normal=c}let d=e.skinIndices,f=e.skinWeights,p=d.length===r.length,v=f.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let m=t[g];this.vertices.push(r[m.a],r[m.b],r[m.c]);let y=m.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let x=m.normal;this.normals.push(x,x,x)}let _=m.vertexColors;if(_.length===3)this.colors.push(_[0],_[1],_[2]);else{let x=m.color;this.colors.push(x,x,x)}if(n===!0){let x=i[0][g];x!==void 0?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new re,new re,new re))}if(a===!0){let x=i[1][g];x!==void 0?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new re,new re,new re))}for(let x=0;x<s;x++){let w=o[x].vertices;l[x].data.push(w[m.a],w[m.b],w[m.c])}for(let x=0;x<h;x++){let w=u[x].vertexNormals[g];c[x].data.push(w.a,w.b,w.c)}p&&this.skinIndices.push(d[m.a],d[m.b],d[m.c]),v&&this.skinWeights.push(f[m.a],f[m.b],f[m.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},ET=class{constructor(e,t,r,i,n,a=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new L,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new Qe,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=a}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function sfe(e){return this.array.set(e),this}function nR(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Qe),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this}function aR(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new re),t[r++]=a.x,t[r++]=a.y}return this}function ey(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new L),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this}function oR(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new ir),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this}var lfe=["a","b","c"];function ufe(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function Pw(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),a=i+"_"+n;return r.get(a)}function Lw(e,t,r,i,n,a){let o=Math.min(e,t),s=Math.max(e,t),l=o+"_"+s,u;if(i.has(l))u=i.get(l);else{let h=r[o],c=r[s];u={a:h,b:c,newEdge:null,faces:[]},i.set(l,u)}u.faces.push(n),a[e].edges.push(u),a[t].edges.push(u)}function hfe(e,t,r,i){let n,a,o;for(n=0,a=e.length;n<a;n++)r[n]={edges:[]};for(n=0,a=t.length;n<a;n++)o=t[n],Lw(o.a,o.b,e,i,o,r),Lw(o.b,o.c,e,i,o,r),Lw(o.c,o.a,e,i,o,r)}function ty(e,t,r,i,n){e.push(new ET(t,r,i,void 0,void 0,n))}function fc(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function ry(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var cfe=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Ke?e=new q1().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new L,r,i,n,a,o,s=e.vertices,l=e.faces,u=e.faceVertexUvs[0],h=u!==void 0&&u.length>0,c=[],d=new Map;hfe(s,l,c,d);let f=[],p,v,g,m,y,_,x;for(let U of Array.from(d.keys())){for(v=d.get(U),g=new L,y=3/8,_=1/8,x=v.faces.length,x!=2&&(y=.5,_=0,x!=1),g.addVectors(v.a,v.b).multiplyScalar(y),t.set(0,0,0),a=0;a<x;a++){for(m=v.faces[a],o=0;o<3&&(p=s[ufe(m,lfe[o])],!(p!==v.a&&p!==v.b));o++);p&&t.add(p)}t.multiplyScalar(_),g.add(t),v.newEdge=f.length,f.push(g)}let w,b,S,M,A,T,C,D=[];for(i=0,n=s.length;i<n;i++){for(T=s[i],A=c[i].edges,r=A.length,r==3?w=3/16:r>3&&(w=3/(8*r)),b=1-r*Number(w),S=w,r<=2&&(r==2?(b=3/4,S=1/8):r==1||r==0),C=T.clone().multiplyScalar(b),t.set(0,0,0),a=0;a<r;a++)M=A[a],p=M.a!==T?M.a:M.b,t.add(p);t.multiplyScalar(Number(S)),C.add(t),D.push(C)}let P=D.concat(f),E=D.length,O,z,B,N=[],F=[],G,H,$,Z,X=new re,ne=new re,te=new re;for(i=0,n=l.length;i<n;i++)m=l[i],O=Number(Pw(m.a,m.b,d).newEdge)+E,z=Number(Pw(m.b,m.c,d).newEdge)+E,B=Number(Pw(m.c,m.a,d).newEdge)+E,ty(N,O,z,B,m.materialIndex),ty(N,m.a,O,B,m.materialIndex),ty(N,m.b,z,O,m.materialIndex),ty(N,m.c,B,z,m.materialIndex),h&&(G=u[i],H=G[0],$=G[1],Z=G[2],X.set(fc(H.x,$.x),fc(H.y,$.y)),ne.set(fc($.x,Z.x),fc($.y,Z.y)),te.set(fc(H.x,Z.x),fc(H.y,Z.y)),ry(F,X,ne,te),ry(F,H,X,te),ry(F,$,ne,X),ry(F,Z,te,ne));e.vertices=P,e.faces=N,h&&(e.faceVertexUvs[0]=F)}},Mr=new L,dfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=e.geometry??(t==null?void 0:t.geometry)??new Ke().copy(new Ah(100,100,100)),i;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(Mr),i={width:Mr.x,height:Mr.y,depth:Mr.z,subdivisions:0}):i=t.parameters;let n={...i,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:r}}static build(e){let{width:t,height:r,depth:i,subdivisions:n}=e.parameters,a=e.geometry??new Ke().copy(new Ah(100,100,100)),o=a.userData.parameters;o===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(Mr)):Mr.set(o.width,o.height,o.depth),(t!==Mr.x||r!==Mr.y||i!==Mr.z)&&a.scale(Mr.x===0?1:t/Mr.x,Mr.y===0?1:r/Mr.y,Mr.z===0?1:i/Mr.z);let s=a.originalGeometry;try{n>0?(s===void 0||(o==null?void 0:o.subdivisions)!==n)&&(s===void 0&&(s=a),a=new cfe(n).modify(s).toBufferGeometry()):(s!==void 0&&(a=s),s=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals())}catch{s!==void 0&&(a=s),s=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals()}return s!==void 0&&Object.assign(a,{originalGeometry:s}),delete e.geometry,Object.assign(a,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new QU(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(Mr);let a=100/Mr.x;Object.assign(n.parameters,{width:100,height:Mr.y*a,depth:Mr.z*a}),t(this.build(n))})}},EH=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof ar?e.shape:new ar,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:a,extrudeBevelSize:o,extrudeBevelSegments:s}=e.parameters,l=e.shape,u=t*.5,h=r*.5,c=0,d=0,f=2*Math.PI/i;for(let v=0;v<i;v++){let g=f*v,m=c+Math.sin(g)*u,y=d+Math.cos(g)*h;l.addPoint(l.createPoint(m,y))}l.isClosed=!0;for(let v=0,g=l.points.length;v<g;v++)l.points[v].roundness=n;l.roundness=n,l.update();let p=Gh.create({shape:l,parameters:{roundness:n,depth:a,extrudeBevelSize:o,extrudeBevelSegments:s}});return Object.assign(p,{userData:{...e,type:"PolygonGeometry"}})}},ffe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:a,openEnded:o,cornerRadius:s,cornerSegments:l}=e.parameters,u=new vfe(t*.5,r,n,a,o,s,l);return u.scale(1,1,i/t),Object.assign(u,{userData:{...e,type:"PyramidGeometry"}})}};function Hf(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function Ew(e,t,r,i,n,a){let o=t.clone().sub(e),s=r.clone().sub(e),l=o.angleTo(s);if(o.normalize(),s.normalize(),i===n){let u=o.add(s).normalize();a.copy(e).addScaledVector(u,i/Math.sin(l/2))}else{let u=o.angleTo(s);a.copy(e),a.addScaledVector(o,n/Math.sin(u)),a.addScaledVector(s,i/Math.sin(u))}}function pfe(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var vfe=class extends Ke{constructor(e=.5,t=1,r=4,i=1,n=!1,a=0,o=4){super(),r=Math.floor(Math.max(3,r)),i=Math.floor(i),o=Math.floor(o);let s=[],l=[],u=[],h=[],c=0,d=t/2,f=Math.PI/r,p=e*Math.cos(Math.PI/r),v=2*Math.PI/r,g=(r-2)*Math.PI/r,m=Math.PI-g,y=new L(0,-d,0),_=new L(0,d,0),x=new re(e,-d),w=new re(p,-d),b=new re(0,_.y).sub(w),S=new re(0,_.y).sub(x),M=new re(b.y,-b.x).normalize(),A=new re(S.y,-S.x).normalize(),T=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-b.angle())/2)-1e-8;a=Math.min(a,T);let C;{let B=new L(M.x,M.y,0),N=new L(Math.cos(v)*B.x,B.y,Math.sin(v)*B.x);C=B.angleTo(N)}let D=a/Math.tan((Math.PI-b.angle())/2),P=a/Math.tan((Math.PI-C)/2),E=new L;if(!n){l.push(y.x,y.y,y.z),u.push(0,-1,0),h.push(0,0);let B=c++,N=[],F=x.clone(),G=D/Math.cos(Math.PI/r);F.x-=G;for(let H=0;H<r;H++){let $=H/r*Math.PI*2+f,Z=new re(Math.sin($),Math.cos($));Hf(F,Z,E),l.push(E.x,E.y,E.z),u.push(0,-1,0),h.push(0,0),N.push(c++)}for(let H=0;H<N.length;H++)s.push(N[H],B,N[(H+1)%N.length])}{let B=new L,N=new L,F=new L,G=new L,H=new L,$=new L;for(let Z=0;Z<r;Z++){let X=Z/r*Math.PI*2+f,ne=(Z+.5)/r*Math.PI*2+f,te=(Z+1)/r*Math.PI*2+f,U=new re(Math.sin(X),Math.cos(X)),W=new re(Math.sin(ne),Math.cos(ne)),j=new re(Math.sin(te),Math.cos(te));Hf(x,U,N),Hf(x,j,F),Hf(M,W,B),Ew(_,N,F,P,P,G),l.push(G.x,G.y,G.z),Ew(N,_,F,P,D,H),l.push(H.x,H.y,H.z),Ew(F,N,_,D,P,$),l.push($.x,$.y,$.z),u.push(B.x,B.y,B.z),u.push(B.x,B.y,B.z),u.push(B.x,B.y,B.z),h.push(0,0),h.push(0,0),h.push(0,0);let K=c++,ee=c++,R=c++;if(s.push(K,ee,R),a>0){{let q=N.clone().add(F).multiplyScalar(.5),Q=_.clone().sub(q).normalize(),J=y.clone().sub(q).normalize().add(Q).normalize().multiplyScalar(-1),oe=$.clone().sub(H);O(q,oe,J,b.angle())}let k,V;{let q=new L;Hf(A,j,q);let Q=$.clone().add(G).multiplyScalar(.5);Q=pfe(Q,F,_);let J=$.clone().sub(G);[k,V]=O(Q,J,q,C,G.y)}{let q=k,Q=q.clone().setY(0).normalize(),J=new L(0,-1,0),oe=Q.clone().cross(J);z(q,Q,J,oe)}{let q=b.angle(),Q=Math.PI-q,J=_.clone();J.y-=a/Math.sin(q-Math.PI/2);let oe=new L,le=[];for(let he=0;he<o;he++){let xe=[],Se=Math.PI/2-Q*he/o,Oe=Math.cos(Se),ze=Math.sin(Se),et=ne;for(let bt=0;bt<=he;bt++){let wt=Math.cos(et),qt=Math.sin(et);B.x=Oe*qt,B.y=ze,B.z=Oe*wt,oe.copy(J).addScaledVector(B,a),l.push(oe.x,oe.y,oe.z),u.push(B.x,B.y,B.z),h.push(0,0),xe.push(c++),et+=Math.PI*2/he/r}le.push(xe)}V.reverse(),le.push(V);let pe=le.length-1;for(let he=0;he<pe;he++){let xe=le[he],Se=le[he+1],Oe=xe.length-1;s.push(Se[1],xe[0],Se[0]);for(let ze=1;ze<=Oe;ze++)s.push(xe[ze],xe[ze-1],Se[ze]),s.push(Se[ze+1],xe[ze],Se[ze])}}}}}this.setIndex(s),this.setAttribute("position",new Le(l,3)),this.setAttribute("normal",new Le(u,3)),this.setAttribute("uv",new Le(h,2));function O(B,N,F,G,H){let $=-G/2,Z=(Math.PI-G)/2,X=N.clone().normalize().cross(F);B.addScaledVector(F,-a/Math.sin(Z));let ne=new L,te=new L,U=1,W=c,j=[];for(let K=0;K<=o;K++){let ee=$+K/o*G;te.set(0,0,0),te.addScaledVector(X,Math.sin(ee)),te.addScaledVector(F,Math.cos(ee));for(let R=0;R<=U;R++){let k=R/U-.5;if(ne.copy(B),ne.addScaledVector(N,k),ne.addScaledVector(te,a),H!=null){let V=Math.max(0,ne.y-H);ne.addScaledVector(N,-V/N.y)}l.push(ne.x,ne.y,ne.z),u.push(te.x,te.y,te.z),h.push(0,0),R===0&&j.push(c),c++}}for(let K=0;K<o;K++)for(let ee=0;ee<U;ee++){let R=W+ee+(U+1)*K,k=R+(U+1),V=k+1,q=R+1;s.push(R,k,q),s.push(k,V,q)}return[B.clone().addScaledVector(N,.5),j]}function z(B,N,F,G){let H=Math.PI/2,$=S.angle()-H,Z=[],X=new L,ne=new L;for(let U=0;U<=o;U++){let W=[],j=U/o;for(let K=0;K<=U;K++){let ee=((U?K/U:0)-.5)*m,R=Math.cos(ee),k=Math.sin(ee),V=Math.atan(Math.tan($)*R),q=(H+V)*j,Q=Math.cos(q),J=Math.sin(q);X.set(0,0,0),X.addScaledVector(N,J*R),X.addScaledVector(F,Q),X.addScaledVector(G,J*k),ne.copy(B).addScaledVector(X,a),l.push(ne.x,ne.y,ne.z),u.push(X.x,X.y,X.z),h.push(0,0),W.push(c++)}Z.push(W)}let te=Z.length-1;for(let U=0;U<te;U++){let W=Z[U],j=Z[U+1],K=W.length-1;s.push(W[0],j[1],j[0]);for(let ee=1;ee<=K;ee++)s.push(W[ee-1],W[ee],j[ee]),s.push(W[ee],j[ee+1],j[ee])}}}},IH=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof ar?e.shape:new ar,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)}),ui:i}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u={x:r*.5,y:i*.5},h={x:-u.x,y:-u.y},c={x:u.x,y:u.y};function d(x,w,b){return w>r&&b>i?Math.min(x*r/w,x*i/b):w>r?x*r/w:b>i?x*i/b:x}let f=[];f[0]=n[0]===0?0:d(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:d(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:d(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:d(n[3],n[3]+n[0],n[3]+n[2]);let p=h.x,v=c.x,g=c.y,m=h.y;t.addPoint(t.createPoint(p,g)),t.addPoint(t.createPoint(v,g)),t.addPoint(t.createPoint(v,m)),t.addPoint(t.createPoint(p,m)),t.isClosed=!0;let y=!0;for(let x=0,w=t.points.length;x<w;x++)t.points[x].roundness=f[x],x>0&&f[x]!==f[x-1]&&(y=!1);y&&(t.roundness=f[0]),t.useCubicForRoundedCorners=a!==1,t.update();let _=Gh.create({shape:t,parameters:{depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(_,{userData:{...e,type:"RectangleGeometry"}})}},gfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:a=64,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u}=e.parameters,h=new SD(.5*t,n,a,o,s,l,u);return h.scale(1,r/t,i/t),Object.assign(h,{userData:{...e,type:"SphereGeometry"}})}},mfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,a=new yD(t,r,i,n);return a.scale(1,1,1),Object.assign(a,{userData:{...e,type:"PlaneGeometry"}})}},yfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,angle:n,cornerRadius:a,cornerSegments:o}=e.parameters,s=new _fe(t,r,i,n,a,o);return Object.assign(s,{userData:{...e,type:"BackdropGeometry"}})}},_fe=class extends Ke{constructor(e=1,t=1,r=1,i=90,n=10,a=24){super(),this.type="BackdropGeometry";let o=[],s=[],l=[],u=.001;n==0&&(a=1),a=Math.max(1,Math.floor(a)),n=Math.min(n,100),i=Math.min(180-u,i),i*=Math.PI/180;let h=[],c=Math.PI/2,d=(U=0,W=0,j=0)=>new L(U,W,j),f=d(),p=d(),[v,g,m]=[t/2,e/2,r/2],y=-g,_=+g,[x,w,b]=[d(y,-v,+m),d(y,-v,-m),d(y,+v,-m)],S=(U,W=!1)=>Math.sin(U-Math.PI/(1+ +W)),M=(U,W=!1)=>Math.cos(U-Math.PI/(1+ +W));b.y=Math.sin(i)*t-v;let A=Math.cos(i)*t-m,T=x.z-u;i<=c?(b.z=Math.min(A,T),b.z==T&&(b.y-=(A-T)/Math.tan(c-i))):w.z=Math.min(w.z-A-m,x.z-u),f.subVectors(x,w),p.subVectors(b,w);let C=Math.min(f.length(),p.length())*n/100,D=C*Math.tan(i/2),P=C/Math.cos(i/2),E=f.clone().normalize().add(p.normalize()).setLength(P).add(w);f.set(0,S(i,!0),M(i,!0)),h.push([b,f.clone()]);let O=(Math.PI-i)/a;for(let U=0;U<=a;U++){let W=c+i+U*O;f.set(0,Math.sin(W)*D,Math.cos(W)*D),f.add(E),p.set(0,S(W),M(W)),h.push([f.clone(),p.clone()])}h.push([x,d(0,1,0)]);let z=Math.sin(O/2)*D*2,B=h.length-1,N=h[0][0].distanceTo(h[1][0]),F=h[B-1][0].distanceTo(h[B][0]),G=N+z*a+F;h[0].push(1);for(let U=0;U<=a;U++)h[U+1].push(1-(N+U*z)/G);h[B].push(0);let[H,$,Z]=h[0],X,ne,te;for(let U=1;U<h.length;U++)[X,ne,te]=h[U],o.push(y,H.y,H.z,y,X.y,X.z,_,H.y,H.z,_,H.y,H.z,y,X.y,X.z,_,X.y,X.z),s.push(0,$.y,$.z,0,ne.y,ne.z,0,$.y,$.z,0,$.y,$.z,0,ne.y,ne.z,0,ne.y,ne.z),l.push(0,Z,0,te,1,Z,1,Z,0,te,1,te),[H,$,Z]=[X,ne,te];this.setAttribute("position",new Le(o,3)),this.setAttribute("normal",new Le(s,3)),this.setAttribute("uv",new Le(l,2))}},OH=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof ar?e.shape:new ar,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:a,angle:o,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}=e.parameters,h=e.shape,c=t*.5,d=r*.5,f=0,p=0,v=o*Math.PI/360/n,g=Math.PI/2*3*-1,m=c*i/100,y=d*i/100;if(n===3&&i===50){v=2*Math.PI/n;for(let x=0;x<n;x++){let w=v*x,b=f+Math.sin(w)*c,S=p+Math.cos(w)*d;h.addPoint(h.createPoint(b,S))}}else for(let x=0;x<n;x++){let w=f+Math.cos(g)*c,b=p+Math.sin(g)*d;h.addPoint(h.createPoint(w,b)),g+=v,w=f+Math.cos(g)*m,b=p+Math.sin(g)*y,h.addPoint(h.createPoint(w,b)),g+=v}h.isClosed=!0;for(let x=0,w=h.points.length;x<w;x++)h.points[x].roundness=a;h.roundness=a,h.update();let _=Gh.create({shape:h,parameters:{roundness:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(_,{userData:{...e,type:"StarGeometry"}})}},xfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new yD(t,r);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},bfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.round(Math.abs(r.depth??r.width*.25));return{parameters:Object.assign(r,{width:i,height:n,depth:a})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:a,arc:o,cornerRadius:s,cornerSegments:l}=e.parameters,u=wfe(t,r,i,t*.5,o,a,0,0,n,s,l);return u.scale(1,r/t,1),Object.assign(u,{userData:{...e,type:"TorusGeometry"}})}};function wfe(e,t,r,i,n,a,o,s,l,u,h){return[t,r]=[r,t],o=t/2,n/=2*Math.PI,n==1&&(u=0),new PH(!0,e,t,r,i,n,a,o,s,l,u,h)}var Sfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),tube:r.tube??r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:a,q:o}=e.parameters,s=t*.5;s!==r&&(s-=r);let l=new KU(s,r,i,n,a,o);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},Mfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof ar?e.shape:new ar,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o,isRect:s}=e.parameters,l=e.shape,u=t*.5,h=r*.5;s?(l.addPoint(l.createPoint(-u,h)),l.addPoint(l.createPoint(u,-h)),l.addPoint(l.createPoint(-u,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(u,-h)),l.addPoint(l.createPoint(-u,-h))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=i;l.roundness=i,l.update();let c=Gh.create({shape:l,parameters:{roundness:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(c,{userData:{...e,type:"TriangleGeometry"}})}};function Tfe(e,t){let r=2*Math.PI;return(e%r+r)%r===(t%r+r)%r}function Afe(e,t,r){let i=[new L,new L,new L],n=[new L,new L,new L];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(n[0],n[1],n[2]),i.forEach((a,o)=>{let s=n[o],l=pt.lerp(a.length(),s.length(),r);a.lerp(s,r).setLength(l)}),new ye().makeBasis(i[0],i[1],i[2])}var Cfe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.abs(r.depth??0),o=(t==null?void 0:t.shapeData)??iP.create({parameters:iH}).userData.shape;return{path:e.path??N1.defaultData(),parameters:Object.assign(r,{width:i,height:n,depth:a,extrusion:{...nH,...r.extrusion}}),shapeData:o}}static build(e){if(e.path.points.length>=2){let t=new Dfe(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Ke,{userData:{...e,type:"PathGeometry"}})}},Dfe=class extends Ke{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!Tfe(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:r,offset:i}=this.inputs.parameters.extrusion,n=this.inputs.path.isClosed?e.length:e.length-1,a=Math.floor(i*n),o=this.inputs.path.isClosed?Math.ceil((r+i)*n):Math.ceil(Math.min(1,r+i)*n),s=Math.min(Math.max(2,o-a+1),n+2),l=[],u=[];for(let T=0;T<s;T++){let C=this.inputs.path.isClosed?(T+a)%e.length:Math.min(T+a,e.length-1);l.push(e[C].clone()),u.push(t[C].clone())}let h=(T,C,D)=>{l[T]=l[T].clone().lerp(l[C],D),u[T]=Afe(u[T],u[C],D)},c=0,d=i*n%1;(!this.inputs.path.isClosed||r<=1)&&(d||i===0)&&(c=d,h(0,1,c));let f=0,p=(i+r)*n%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&i+r<1)&&p&&(f=p,h(l.length-1,l.length-2,1-f)),r===0){let T=l.length-1;l[T].copy(l[0]),u[T].copy(u[0])}this._applyPathModifiers(u,c,f);let{regions:v,infos:g,vertices:m}=this._computeShapePoints(5),y=0,_=0;g.sort((T,C)=>T.start-C.start),g.forEach(T=>{T.verticesStart=y,T.verticesCount=T.continuous.reduce((C,D,P)=>C+(P===0||!D?2:1),0),_+=T.verticesCount,y=_});let x=_*s,w,b=0;if(this._isOpenEnded()){try{w=dl({windingRule:Rt.ODD,elementType:_r.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:v})}catch{w=bH}b=w.vertexCount}let S=x+2*b,M={positions:new Float32Array(S*3),normals:new Float32Array(S*3),uvs:new Float32Array(S*2)},A=[];g.forEach(T=>{this._extrudeRegion(T,m,u,l,M,A,this._isGeometryClosed()&&!this._isOpenEnded())}),w&&(this._closeEnd(w,x,A,M,u[0],l[0],!1),this._closeEnd(w,x+b,A,M,u[u.length-1],l[l.length-1],!0)),this.setAttribute("position",new ft(M.positions,3)),this.setAttribute("normal",new ft(M.normals,3)),this.setAttribute("uv",new ft(M.uvs,2)),this.setIndex(A)}_extractPathPoints(){let e=cH(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(r=>{t[t.length-1].distanceToSquared(r)>.001&&t.push(r)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],r=e.length,i=this.inputs.path.isClosed,n=new L,a=new L,o=new L,s=new L,l=new L(0,1,0);for(let p=0;p<r;p++){let v=e[p],g;p===0?g=i?e[e.length-2]:v.clone().multiplyScalar(2).sub(e[1]):g=e[p-1];let m;p===r-1?m=i?e[1]:v.clone().multiplyScalar(2).sub(e[p-1]):m=e[p+1];let y=v.clone().sub(g).normalize(),_=m.clone().sub(v).normalize(),x=y.clone().add(_).normalize();o.copy(x),p===0&&(x.equals(l)||x.clone().negate().equals(l))&&l.set(0,0,1);let w=l.clone().cross(x).normalize(),b=x.clone().cross(w).normalize();l.copy(b),s.copy(w),p===0&&(n.copy(b),a.copy(x));let S=new ye().makeBasis(w,b,x);t.push(S)}let u=i?a:o,h=i?n:new L(0,1,0),c=u.clone().cross(s).normalize(),d=Math.acos(h.dot(c));if(isNaN(d))return t;let f=h.clone().cross(c);u.dot(f)>0&&(d*=-1);for(let p=1;p<t.length;p++){let v=new ye().makeRotationZ(d*p/t.length);t[p].multiply(v)}return t}_applyPathModifiers(e,t,r){let i=e.length,{angle:n,twist:a,startScale:o,endScale:s}=this.inputs.parameters.extrusion,l=new ye,u=new ye;return e.forEach((h,c)=>{let d=c===0?0:c===i-1?1:(c-t)/(i-(r===0?0:1)-(t+(1-r)));l.makeRotationZ(pt.lerp(n,n+a,d));let f=pt.lerp(o,s,d);u.makeScale(f,f,f),h.multiply(l).multiply(u)}),e}_computeShapePoints(e=12,t=Rt.ODD){let r=this.inputs.shapeData,i=r.extractShapePointsToFlatArray([],e),n=r.shapeHoles.map(u=>{let h=u.extractShapePointsToFlatArray([],e),c=[];for(let d=h.length-1;d>=1;d-=2){let f=h[d-1],p=h[d-0];c.push(f,p)}return c}),a;try{a=dl({windingRule:t,elementType:_r.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{a=rP}let o;try{o=dl({windingRule:Rt.ODD,elementType:_r.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...n]})}catch{o=xH}if(!a)throw new Error("error generating geometry");let s=a.elementCount;if(o){a.elementCount+=o.elementCount;for(let u=0;u<o.elements.length;u++){let h=o.elements[u],c=u%2===0?a.vertexCount:0;a.elements.push(h+c)}for(let u=0;u<o.vertexIndices.length;u++){let h=o.vertexIndices[u],c=a.vertexCount;a.vertexIndices.push(h+c)}for(let u=0;u<o.vertices.length;u++){let h=o.vertices[u];a.vertices.push(h)}}for(let u=0,h=a.vertexCount;u<h;u++){let c=u*2;a.vertices[c+0],a.vertices[c+1]}let l=[];for(let u=a.elementCount-1;u>=0;u--){let h=u>=s,c=u*2,d=a.elements[c+0],f=a.elements[c+1],p=d+f,v={start:d,count:f,normals:[],isHole:h,continuous:[],verticesStart:0,verticesCount:0};l.push(v);let g=d,m=p-1,y=d+1,_=r.roundedCurves.length;do{let x=g-d;a.vertices[m*2+0],a.vertices[m*2+1];let w=a.vertices[g*2+0],b=a.vertices[g*2+1],S=a.vertices[y*2+0],M=a.vertices[y*2+1],A=w-S,T=b-M,C=Math.sqrt(A*A+T*T);A/=C,T/=C,v.normals[x*2+0]=-T,v.normals[x*2+1]=A;let D=a.vertexIndices[g];if(Array.isArray(D))v.continuous[x]=!1;else{let[P,E]=r.getCurveIndexFromVertexId(D-1,!0);if(E>0&&E<1)v.continuous[x]=!0;else{let O=E===1?P+1:P-1;O=(O+_)%_;let z=E===1?0:1,B=r.roundedCurves[P].getTangent(E),N=r.roundedCurves[O].getTangent(z);v.continuous[x]=B.dot(N)>.95}}h&&(v.normals[x*2+0]*=-1,v.normals[x*2+1]*=-1),[m,g,y]=[g,y,y+1],y>=p&&(y-=f)}while(y!==d+1)}return{regions:[i,...n],infos:l,vertices:a.vertices}}_insertVertex(e,t,r,i,n){let a=t*2,o=t*3;e.positions[o+0]=r.x,e.positions[o+1]=r.y,e.positions[o+2]=r.z,e.normals[o+0]=i.x,e.normals[o+1]=i.y,e.normals[o+2]=i.z,e.uvs[a+0]=n.x,e.uvs[a+1]=n.y}_extrudeRegion(e,t,r,i,n,a,o){let s=new L,l=new L,u=new L,h=new L,c=new re;r.forEach((f,p)=>{let v=i[p],g=e.verticesStart*r.length+e.verticesCount*p;for(let m=0;m<e.count;m++){let y=(e.start+m)*2;if(s.set(t[y+0],t[y+1],0),u.copy(s).applyMatrix4(f).add(v),e.continuous[m])h.set(e.normals[m*2+0],e.normals[m*2+1],0);else{let _=m==0?(e.start+e.count-1)*2:y-2;l.set(t[_+0],t[_+1],0),h.copy(s).sub(l),h.set(-h.y,h.x,0),e.isHole||h.negate()}if(h.applyMatrix4(f).normalize(),c.set(m===0?1:m/e.count,p/(r.length-1)),this._insertVertex(n,g,u,h,c),g++,!e.continuous[m]||m===0){if(m===0)h.set(e.normals[m*2+0],e.normals[m*2+1],0),c.set(0,p/(r.length-1));else{let _=m===e.count-1?e.start*2:y+2;l.set(t[_+0],t[_+1],0),h.copy(l).sub(s),h.set(-h.y,h.x,0),e.isHole||h.negate()}h.applyMatrix4(f).normalize(),this._insertVertex(n,g,u,h,c),g++}}});let d=r.length-1;for(let f=0;f<d;f++){let p=e.verticesStart*r.length+e.verticesCount*f,v=e.verticesStart*r.length+e.verticesCount*(f+1),g=0;for(let m=0;m<e.count;m++){(!e.continuous[m]||m===0)&&g++;let y=m===e.count-1?0:g+1,_=p+g,x=p+y,w=v+y,b=v+g;e.isHole?a.push(_,w,x,_,b,w):a.push(_,x,w,_,w,b),g++}}}_closeEnd(e,t,r,i,n,a,o){let s=e.vertexCount,l=new L(0,0,o?-1:1).applyMatrix4(n),u=new L,h=new re;for(let d=0;d<s;d++){let f=2*d;u.set(e.vertices[f+0],e.vertices[f+1],0).applyMatrix4(n).add(a),this._insertVertex(i,t+d,u,l,h)}let c=e.elements;for(let d=0;d<e.elementCount;d++){let f=3*d,p=c[f+0]+t,v=c[f+(o?1:2)]+t,g=c[f+(o?2:1)]+t;r.push(p,v,g)}}};function RH(){let e=new Ke;return e.setAttribute("position",new ft(new Float32Array([]),3)),e.setIndex(new ft(new Uint16Array([]),1)),e}var Pfe=RH().attributes,Lfe=12,Efe=1,zH=class extends Ke{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,Pfe),this.userData={parameters:e,type:"TextGeometry"};let r=t.getFont(e.font);r!=null&&r.isLoaded?(this.font=r,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let r=t.getFont(e);r&&(this.font=r,await r.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o,text:s,textTransform:l}=e,u=l===2?s.toUpperCase():l===3?s.toLowerCase():s,h=Ife(e,t,u),{shapes:c,charWidths:d,charCoords:f}=t.generateShapes(h,e),p=r*.5,v=i*.5,g=c.map(_=>new ar().fromShape(_));this.vectorShapes=g;let m=g.map(_=>Gh.create({shape:_,parameters:{depth:n,extrudeBevelSegments:o,extrudeBevelSize:a,windingRule:n<=0?Rt.NONZERO:Rt.ODD,subdivisions:this.isLowResolution&&n>0?Efe:Lfe}})),y=m.length?kce(m):RH();y.translate(-p,v,0),this.dispose(),this.wrappedText=h,this.charCoords=f,this.charWidths=d,this.deleteAttribute("extrudeNormal"),Object.entries(y.attributes).forEach(([_,x])=>{this.setAttribute(_,x)}),this.setIndex(y.index),this.computeBoundingSphere()}clone(){let e=M1(new Ke,zH.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,r])=>{this.setAttribute(t,r)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function Ife(e,t,r){r=r??e.text;let i=[""],n="";for(let a of r)n+=a,a===" "||a===`
`?(i[i.length-1]+=n,n="",a===`
`&&i.push("")):t.getTextWidth(i[i.length-1]+n,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+n,e)>e.width&&(n.length===1?(i[i.length-1]+=n,n=""):(i[i.length-1]+=n.slice(0,-1),n=n[n.length-1],i.push(""))));return i[i.length-1]+=n,i}var nP=new Promise(e=>{});function X1(e,t,r){let i={parameters:e,type:e.type};if(e.type==="PathGeometry")i.path=e.path;else if(e.type==="VectorGeometry"){let a=ar.createFromState(e.shape,e.width,e.height);i.shape=a}else if(e.type==="NonParametricGeometry")e.data.groups&&e.data.groups.forEach(a=>a.materialIndex=Math.max(a.materialIndex??0,0)),i.geometry=new QU().parse(e);else{if(e.type==="SubdivGeometry")return new mi(e,r);if(e.type==="TextGeometry")return new zH(e,t)}let n;try{n=cR(i)}catch(a){console.error(a)}if(!n){let a=ar.createFromState(z1.defaultData(),100,100);i.shape=a,n=cR(i)}return n}var Ofe=new ye;function IT(e,t,r,i){let n=e.position.array,a=e.normal.array,o=Ofe.makeScale(t,r,i).invert().elements,s,l,u;for(var h=0,c=n.length;h<c;h+=3)n[h]*=t,n[h+1]*=r,n[h+2]*=i,s=a[h],l=a[h+1],u=a[h+2],a[h]=o[0]*s+o[4]*l+o[8]*u,a[h+1]=o[1]*s+o[5]*l+o[9]*u,a[h+2]=o[2]*s+o[6]*l+o[10]*u;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var iy=new wr,pc=new L,Be;nP.then(e=>{Be=e});var sR=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),lR=new Uint32Array([0,1,2,3]),uR=new Uint8Array([4]),mi=class extends Ke{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let r=this.data.scaleBaked,i=hh.div(t,r);this.subdividedGeometry&&IT(this.subdividedGeometry.attributes,...i),this.originalGeometry&&IT(this.originalGeometry.attributes,...i),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*i[0],height:n.height*i[1],depth:n.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(pc.fromArray(i));let a=pc.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=a/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,r;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:r}=mi.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Ah(100,100,100),r=0}this.subdivPointer=r,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(mi.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Vn,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;iy.setFromBufferAttribute(t),iy.getCenter(r),e.boundingSphere.radius=r.distanceTo(iy.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),iy.getSize(pc);let i={width:pc.x,height:pc.y,depth:pc.z};return this.userData.parameters=i,i}static build(e,t,r,i){let n,a,o,s=(e==null?void 0:e.phongAngle)??35;r===!1&&(s=-1),t&&(Be.free_bvh(t),Be.free_subdivision_surface(t));try{n=mi.allocate(e,i)}catch(l){console.error(l,e),n=mi.allocate({positionWASM:sR,indexWASM:lR,verticesPerFaceWASM:uR},i)}if(Be.set_destination_refinement_level(n,0),a=mi.buildLevel(n,!0,s),e.subdivisions>0)try{Be.set_destination_refinement_level(n,e.subdivisions),o=mi.buildLevel(n,!1,s)}catch{try{Be.set_destination_refinement_level(n,e.subdivisions-1),o=mi.buildLevel(n,!1,s)}catch{o=null}}else o=null;return{subdivPointer:n,originalGeometry:a,subdividedGeometry:o}}static primitiveToQuads(e,t,r){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let i=e.shape!==void 0?t.geometry:X1(e,r,!1),n;e.type==="TorusGeometry"&&e.arc===Math.PI*2?n=i.getClosedTorusIndicesForBooleanOrSubdiv():n=i.getIndex();let a,o,s,l;({positions:a,triIndices:l}=NH(i.getAttribute("position"),n));let u;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let h=e.radialSegments*e.heightSegments*3*2,c=h+e.radialSegments*3;u=[h,c]}return{indices:o,verticesPerFace:s}=kH(a,l,i,u),{positions:a,indices:o,verticesPerFace:s}}static allocate(e,t){var _;let r,i,n,a=[],o=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,n=e.verticesPerFaceWASM):(r=sR,i=lR,n=uR);let s=r.length,l=i.length,u=n.length,h=r.length+a.length+o.length,c=i.length+n.length,d=h*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,f=h*Float32Array.BYTES_PER_ELEMENT,p=Be._malloc(d),v=new Float32Array(Be.HEAPF32.buffer,p,h),g=new Uint32Array(Be.HEAPU32.buffer,p+f,c);v.set(r,0),v.set(a,r.length),v.set(o,r.length+a.length),g.set(i,0),g.set(n,i.length);let m;(_=e==null?void 0:e.scaleBaked)!=null&&_.some(x=>x!==1)&&(m=new ye().makeScale(...e.scaleBaked)),t&&(m?m.premultiply(t):m=t);let y=m?Be.alloc_subdivision_surface2(p,s,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,u,m.elements):Be.alloc_subdivision_surface(p,s,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,u);return Be._free(p),y}static buildLevel(e,t,r,i,n){let a=n?Be.get_mesh_data2(e,t?Be.Level.CONTROL:Be.Level.REFINED,r,n.elements):Be.get_mesh_data(e,t?Be.Level.CONTROL:Be.Level.REFINED,r),o=8,s=Be.HEAPU32.subarray(a>>2,(a>>2)+o),l=s.subarray(4,4+4),u=0,h=Be.HEAPU32[s[u]>>2],c=Be.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let d=Be.HEAPU32[s[u]>>2],f=Be.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let p=Be.HEAPU32[s[u]>>2],v=Be.HEAPU32.subarray(p>>2,(p>>2)+l[u]);u++;let g=Be.HEAPU32[s[u]>>2],m=Be.HEAPU32.subarray(g>>2,(g>>2)+l[u]);if(u++,i===void 0){let y=new Ke;if(y.setIndex(new Kp(m,1)),y.setAttribute("position",new Le(c,3)),y.setAttribute("normal",new Le(f,3)),t){y.setAttribute("faceMap",new Kp(v,1));let _=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new ft(_,4))}return Be.free_mesh_data(a),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(c),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,Be.free_mesh_data(a)}static freeSubdivPointer(e){Be.free_bvh(e),Be.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,r){let i=Be.get_wireframe_data_for_base_level(e),n=4,a=Be.HEAPU32.subarray(i>>2,(i>>2)+n),o=a.subarray(2,2+2),s=0,l=Be.HEAPU32[a[s]>>2],u=Be.HEAPF32.subarray(l>>2,(l>>2)+o[s]);s++;let h=Be.HEAPU32[a[s]>>2],c=Be.HEAPU32.subarray(h>>2,(h>>2)+o[s]);if(t===void 0){let d=new Ke;d.setAttribute("position",new Le(u,3));let f=new Float32Array(u.length);for(let p=0,v=u.length;p<v;)f[p++]=r.r,f[p++]=r.g,f[p++]=r.b;return d.setAttribute("color",new ft(f,3)),d.setIndex(new Kp(c,1)),Be.free_wireframe_data_for_base_level(i),d}t.getAttribute("position").copyArray(u),t.attributes.position.needsUpdate=!0,Be.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){let i=t===0;i||Be.set_destination_refinement_level(e,t);let n=r?Be.get_topological_data2(e,i?Be.Level.CONTROL:Be.Level.REFINED,r.elements):Be.get_topological_data(e,i?Be.Level.CONTROL:Be.Level.REFINED),a=6,o=Be.HEAPU32.subarray(n>>2,(n>>2)+a),s=o.subarray(3,3+3),l=0,u=Be.HEAPU32[o[l]>>2],h=new Float32Array(Be.HEAPF32.subarray(u>>2,(u>>2)+s[l]));l++;let c=Be.HEAPU32[o[l]>>2],d=new Uint32Array(Be.HEAPU32.subarray(c>>2,(c>>2)+s[l]));l++;let f=Be.HEAPU32[o[l]>>2],p=new Uint8Array(Be.HEAPU32.subarray(f>>2,(f>>2)+s[l]));return Be.free_topological_data(n),{positions:h,indices:d,verticesPerFace:p}}},hR=["getX","getY","getZ"];function NH(e,t){let r={},i=t?t.count:e.count,n=0,a=[],o=[],s=1e4;for(let u=0;u<i;u++){let h=t?t.getX(u):u,c="";for(let d=0;d<3;d++)c+=`${~~(e[hR[d]](h)*s)},`;if(c in r)a.push(r[c]);else{for(let d=0;d<3;d++)o.push(e[hR[d]](h));r[c]=n,a.push(n),n++}}let l=[];for(let u=0;u<a.length;u+=3)a[u]===a[u+1]||a[u]===a[u+2]||a[u+1]===a[u+2]||l.push(a[u],a[u+1],a[u+2]);return{positions:o,triIndices:l}}var ny=new L,Iw=new L,Ow=new L,Rw=new L;function kH(e,t,r,i){let n=[],a=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let o=r.userData.shape.extractShapePointsToFlatArray([]),s=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&s<=24&&s%4===0&&r.userData.parameters.angle>=360){let h=o.length/2/s;o=o.filter((c,d)=>Math.floor(d/2)%h===0)}let l=0;for(let h=0;h<o.length;h+=2)l+=(o[h]-o[(h===0?o.length:h)-2])*(o[h+1]+o[(h===0?o.length:h)-1]);e.length=0;let u=0;if(l<0)for(let h=0;h<o.length;h+=2)e.push(o[h],o[h+1],0),n.push(u++);else for(let h=o.length-2;h>=0;h-=2)e.push(o[h],o[h+1],0),n.push(u++);return a.push(u),{indices:n,verticesPerFace:a}}for(let o=0,s=r.capStartIndex??t.length;o<s;)if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){ny.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),Iw.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),Ow.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),Rw.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),Iw.sub(ny).normalize(),Ow.sub(ny).normalize(),Rw.sub(ny).normalize();let l=Iw.cross(Ow).dot(Rw);Math.abs(l)>.005||i&&i.some((u,h)=>h%2===1?!1:o>=i[h]&&o<i[h+1])?(n.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3):(n.push(t[o],t[o+1],t[o+4],t[o+5]),a.push(4),o+=6)}else n.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3;if(r.capStartIndex!==void 0){let o=[],s=[],l=0,u=new Float32Array([r.userData.parameters.depth])[0];for(let h=0,c=0;h<e.length;h+=3,c++)e[h+2]===0&&(o.push(c),l++),e[h+2]===u&&s.push(c);if(r.userData.parameters.extrudeBevelSize===0){let h=s[0];s[0]=s[1],s[1]=h}o.reverse(),n.push(...o,...s),a.push(l,l)}return{indices:n,verticesPerFace:a}}var el={};vJ(el,{calcBoolean:()=>kfe,calcBooleanTopological:()=>Nfe,freeMeshSet:()=>Vfe,getMeshSet:()=>Bfe,transformMeshSet:()=>Ffe});var Rfe=new Promise(e=>{}),ht,fd;Rfe.then(e=>ht=e);function zfe(e,t,r){let i,n;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?n=e.getClosedTorusIndicesForBooleanOrSubdiv():n=e.getIndex();let{positions:a,triIndices:o}=NH(e.getAttribute("position"),n),s;if(t&&r){let{indices:l,verticesPerFace:u}=kH(a,o,e);s=u.length,i=[];for(let h=0,c=0;h<s;h++){i.push(u[h]);for(let d=0;d<u[h];d++)i.push(l[c++])}}else{let l=o.length;i=Array(l+l/3),s=0;for(let u=0,h=0;h<i.length;)i[h++]=3,s++,i[h++]=o[u++],i[h++]=o[u++],i[h++]=o[u++]}return{positions:a,faceIndices:i,nFaces:s}}function BH(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?r:i,a=ht._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(ht.HEAPU32.buffer,a,t):new Float32Array(ht.HEAPF32.buffer,a,t)).set(e,0),a}function FH(e){switch(e){case 0:return ht.OP.UNION;case 1:return ht.OP.INTERSECTION;case 2:return ht.OP.A_MINUS_B;case 3:return ht.OP.B_MINUS_A;case 4:return ht.OP.SYMMETRIC_DIFFERENCE;case 5:return ht.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function Nfe(e,t){fd===void 0&&(fd=ht.init_csg());let r=BH(e),i=ht.csg_calc_topological(fd,r,e.length,FH(t));ht._free(r);let n=6,a=ht.HEAPU32.subarray(i>>2,(i>>2)+n),o=a.subarray(3,3+3),s=0,l=ht.HEAPU32[a[s]>>2],u=new Float32Array(ht.HEAPF32.subarray(l>>2,(l>>2)+o[s]));s++;let h=ht.HEAPU32[a[s]>>2],c=new Uint32Array(ht.HEAPU32.subarray(h>>2,(h>>2)+o[s]));s++;let d=ht.HEAPU32[a[s]>>2],f=new Uint8Array(ht.HEAPU32.subarray(d>>2,(d>>2)+o[s]));return ht.free_mesh_data(i),{positions:u,indices:c,verticesPerFace:f}}function kfe(e,t,r,i){fd===void 0&&(fd=ht.init_csg());let n=BH(e),a=ht.csg_calc(fd,n,e.length,i,FH(t));ht._free(n);let o=5,s=ht.HEAPU32.subarray(a>>2,(a>>2)+o),l=s.subarray(2,2+3),u=0,h=ht.HEAPU32[s[u]>>2],c=ht.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let d=ht.HEAPU32[s[u]>>2],f=ht.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let p=l[u];r.setAttribute("position",new Le(c,3)),r.setAttribute("normal",new Le(f,3));let v=ht.HEAPF32.subarray((a>>2)+5,(a>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new Vn),r.boundingSphere.center.set(v[0],v[1],v[2]),r.boundingSphere.radius=(v[3]**2+v[4]**2+v[5]**2)**.5,r.userData.parameters={width:v[3]*2,height:v[4]*2,depth:v[5]*2},ht.free_mesh_data(a),p}function Bfe(e,t,r){if(ht===void 0)return-1;let i,n,a;if(t&&e.userData.positions!==void 0){let v=e.userData;a=v.verticesPerFace.length,i=v.positions,n=Array(v.verticesPerFace.reduce((g,m)=>g+m,0)+a);for(let g=0,m=0,y=0;g<v.verticesPerFace.length;g++){n[y++]=v.verticesPerFace[g];for(let _=0;_<v.verticesPerFace[g];_++)n[y++]=v.indices[m++]}}else({positions:i,faceIndices:n,nFaces:a}=zfe(e,t,r));let o=i.length,s=n.length,l=i.length,u=n.length,h=l*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,c=l*Float32Array.BYTES_PER_ELEMENT,d=ht._malloc(h),f=new Float32Array(ht.HEAPF32.buffer,d,l),p=new Uint32Array(ht.HEAPU32.buffer,d+c,u);return f.set(i,0),p.set(n,0),ht.get_csg_mesh(d,o,d+c,s,a)}function Ffe(e,t){ht.transform_csg_mesh(e,t.elements)}function Vfe(e){ht.free_csg_mesh(e)}var Ufe={ConeGeometry:Sde,CubeGeometry:Mde,CylinderGeometry:fH,DodecahedronGeometry:Ade,EllipseGeometry:iP,HelixGeometry:ife,IcosahedronGeometry:nfe,LatheGeometry:afe,NonParametricGeometry:dfe,PolygonGeometry:EH,PyramidGeometry:ffe,RectangleGeometry:IH,SphereGeometry:gfe,PlaneGeometry:mfe,BackdropGeometry:yfe,StarGeometry:OH,TextFrameGeometry:xfe,TorusGeometry:bfe,TorusKnotGeometry:Sfe,TriangleGeometry:Mfe,PathGeometry:Cfe,VectorGeometry:Gh},cR=e=>Ufe[e.type].create(e);function jf(e){return e!==null&&"booleanOp"in e}var VH=class extends dH(vD){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new ye}updateVisible(){super.updateVisible(),this.visible=!jf(this.parent)&&this.visible,jf(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(el.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),jf(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof VH&&(e.freeBooleanPointer(),jf(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e){let t=super.updateTransformState(e);return t&&jf(this.parent)&&this.invalidateDownstreamBooleanData(!0),t}},ay=new wr;function aP(e,t=0,r=e.count,i,n){let a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,h=-1/0;for(let c=t;c<r;c++){let d=e.getX(c),f=e.getY(c),p=e.getZ(c);d<a&&(a=d),f<o&&(o=f),p<s&&(s=p),d>l&&(l=d),f>u&&(u=f),p>h&&(h=p)}ay.min.set(a,o,s),ay.max.set(l,u,h),ay.getCenter(i),ay.getSize(n).multiplyScalar(.5)}var Gfe=new Ke,Hfe=new Ag,As=class extends VH{constructor(e,t){super(Gfe,Hfe),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?aP(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},dR=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},$l=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=pt.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r??{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r??{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t??this.getType(e,t);let i=e.getNodeData(r??this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,a){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof $l&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)t=this.hashProperties[i],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}},jfe=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},Bi=new jfe,Bt=class extends $l{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t??this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=pt.generateUUID()),r=e.getUUID(r??this.getUUID(),!n);let a=e.getNodeData(r),o=a.output||this.getType(e);if(e.analyzing)return(a.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,a,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return a.name=a.name||super.build(e,t,r),a.name;if(!this.getLabel()&&(!this.getShared(e,o)||e.context.ignoreCache||a.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let s=this.getTemp(e,r);if(s)return e.format(s,o,t);{s=super.generate(e,t,r,a.output,i);let l=this.generate(e,o,r);return e.addNodeCode(s+" = "+l+";"),e.format(s,o,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r??this.uuid,e.getTempVar(r,i??this.getType(e),n,this.getLabel()).name}},Xi=class extends Bt{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,i,n,a){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let o=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,a):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,n,a,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,n,a,this.getLabel())),e.format(o.fragment.name,i,t))}},Kr=class extends Xi{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof re?e:new re(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,i,n,a){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}},bn=class extends Xi{constructor(e=0,t,r){super("v3"),this.nodeType="Vector3",this.value=e instanceof L?e:new L(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,i,n,a){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}},sn=class extends Qe{constructor(e,t,r,i){super(e,t,r),this.isColorA=!0,this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(e,t="srgb"){let r;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let i,n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="rgba"?parseFloat(i[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="hsla"?parseFloat(i[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Xo=class extends Xi{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof sn?e:new sn(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},Wfe=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,fR=/[a-z_0-9]+/gi,we=class extends Bt{constructor(e,t,r,i,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let a,o=0,s=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)e.include(this.includes[u],this);for(let u in this.extensions)e.extensions[u]=!0;let l=[];for(;a=fR.exec(this.src);)l.push(a);for(let u=0;u<l.length;u++){let h=l[u],c=h[0],d=this.isMethod?!this.getInputByName(c):!0,f=c;if(this.keywords[c]||this.useKeywords&&d&&Bi.containsKeyword(c)){let p=this.keywords[c];if(!p){let v=Bi.getKeywordData(c);v.cache&&(p=e.keywords[c]),p=p||Bi.getKeyword(c,e),v.cache&&(e.keywords[c]=p)}f=p.build(e)}c!==f&&s[h.index+o-1]!=="."&&(s=s.substring(0,h.index+o)+f+s.substring(h.index+c.length+o),o+=f.length-c.length),this.getIncludeByName(f)===void 0&&Bi.contains(f)&&e.include(Bi.get(f))}return t==="source"?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t??[],this.extensions=r??{},this.keywords=i??{},this.isMethod){let n=Wfe.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let a=n[3].match(fR);if(a){let o=0;for(;o<a.length;){let s=a[o++],l;s==="in"||s==="out"||s==="inout"?l=a[o++]:(l=s,s="");let u=a[o++];this.inputs.push({name:u,type:l,qualifier:s})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},$fe=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,UH=class extends Bt{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||UH.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let a,o,s="",l=$fe.exec(e);this.useDefine=n??this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],a=l[2],s=l[3]):(a=this.src,o="f"),this.name=a,this.type=o,this.value=s}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}},Lt=UH;Lt.PI="PI",Lt.PI2="PI2",Lt.RECIPROCAL_PI="RECIPROCAL_PI",Lt.RECIPROCAL_PI2="RECIPROCAL_PI2",Lt.LOG2="LOG2",Lt.EPSILON="EPSILON";var qfe=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Xfe=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),GH=class extends Bt{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=qfe.exec(e);if(t){let r=t[2],i;for(;i=Xfe.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},oP=class extends Bt{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}};Bi.addKeyword("uv",function(){return new oP});Bi.addKeyword("uv2",function(){return new oP(1)});var Vc=class extends Bt{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??Vc.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case p1:return["Linear"];case RU:return["sRGB"];default:return[]}}generate(e,t){var o;let r=this.input.build(e,"v4"),i=this.getType(e),n=Vc.Nodes[this.method],a=e.include(n);if(a===Vc.LINEAR_TO_LINEAR)return e.format(r,i,t);if(((o=n.inputs)==null?void 0:o.length)===2){let s=this.factor.build(e,"f");return e.format(a+"( "+r+", "+s+" )",i,t)}else return e.format(a+"( "+r+" )",i,t)}fromEncoding(e){let t=Vc.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=Vc.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},oo=Vc;oo.Nodes={LinearToLinear:new we(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new we(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new we(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},oo.LINEAR_TO_LINEAR="LinearToLinear",oo.SRGB_TO_LINEAR="sRGBToLinear",oo.LINEAR_TO_SRGB="LinearTosRGB";var Ht=class extends we{constructor(e="",t,r,i,n){super(e,n,i,r,t),this.nodeType="Expression"}},Jo=class extends Xi{constructor(e=new Gi,t,r,i){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new oP,this.bias=r,this.project=i!==void 0?i:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let r=this.getTexture(e,t),i=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a,o;this.project?a="texture2DProj":a=n?"tex2DBias":"tex2D",n?o=a+"( "+r+", "+i+", "+n+" )":o=a+"( "+r+", "+i+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new oo(new Ht("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,l),e.removeContext(),e.format(o,l,t)}},Ce=class extends Xi{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,r,i,n,a){return e.format(this.value+(this.value%1?"":".0"),i,t)}},pR=class extends Bt{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let a=this.value,o=a.build(e,t)+"( ",s=[];if(a.inputs){for(let l=0;l<a.inputs.length;l++){let u=a.inputs[l],h=this.inputs[l]||this.inputs[u.name];s.push(h.build(e,e.getTypeByFormat(u.type)))}o+=s.join(", ")+" )"}return e.format(o,i,t)}},HH=class extends Bt{constructor(e,t,r=HH.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}},Li=HH;Li.ADD="+",Li.SUB="-",Li.MUL="*",Li.DIV="/";var Pt=class extends Bt{constructor(e,t=Pt.ABS,r,i){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case Pt.MIX:case Pt.CLAMP:case Pt.REFRACT:case Pt.SMOOTHSTEP:case Pt.FACEFORWARD:return 3;case Pt.MIN:case Pt.MAX:case Pt.MOD:case Pt.STEP:case Pt.REFLECT:case Pt.DISTANCE:case Pt.DOT:case Pt.CROSS:case Pt.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case Pt.LENGTH:case Pt.DISTANCE:case Pt.DOT:return"f";case Pt.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,a=this.a?e.getTypeLength(this.a.getType(e)):0,o=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case Pt.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case Pt.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case Pt.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case Pt.STEP:r=this.a.build(e,a===1?"f":l),i=this.b.build(e,l);break;case Pt.MIN:case Pt.MAX:case Pt.MOD:r=this.a.build(e,l),i=this.b.build(e,o===1?"f":l);break;case Pt.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case Pt.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,s===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let h=[];h.push(r),i&&h.push(i),n&&h.push(n);let c=this.getNumInputs(e);if(h.length!==c)throw Error(`Arguments not match used in "${this.method}". Require ${c}, currently ${h.length}.`);return e.format(this.method+"( "+h.join(", ")+" )",u,t)}},Xe=Pt;Xe.RAD="radians",Xe.DEG="degrees",Xe.EXP="exp",Xe.EXP2="exp2",Xe.LOG="log",Xe.LOG2="log2",Xe.SQRT="sqrt",Xe.INV_SQRT="inversesqrt",Xe.FLOOR="floor",Xe.CEIL="ceil",Xe.NORMALIZE="normalize",Xe.FRACT="fract",Xe.SATURATE="saturate",Xe.SIN="sin",Xe.COS="cos",Xe.TAN="tan",Xe.ASIN="asin",Xe.ACOS="acos",Xe.ARCTAN="atan",Xe.ABS="abs",Xe.SIGN="sign",Xe.LENGTH="length",Xe.NEGATE="negate",Xe.INVERT="invert",Xe.MIN="min",Xe.MAX="max",Xe.MOD="mod",Xe.STEP="step",Xe.REFLECT="reflect",Xe.DISTANCE="distance",Xe.DOT="dot",Xe.CROSS="cross",Xe.POW="pow",Xe.MIX="mix",Xe.CLAMP="clamp",Xe.REFRACT="refract",Xe.SMOOTHSTEP="smoothstep",Xe.FACEFORWARD="faceforward";var Pp=class extends Bt{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){let n=new pR(Pp.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=this.colorSpaceTL??new oo(new Ht("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new oo(new Ht("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new oo(new Ht("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new oo(new Ht("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let a={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(a),this.colorSpaceTLExp=new Ht(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Ht(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Ht(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Ht(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let o=new Ht("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=n,o}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new pR(Pp.Nodes.roughnessToMip,[i]),a=new Xe(n,Pp.Nodes.m0,Pp.Nodes.cubeUV_maxMipLevel,Xe.CLAMP),o=new Xe(a,Xe.FLOOR),s=new Xe(a,Xe.FRACT),l=this.bilinearCubeUV(e,this.value,r,o),u=this.bilinearCubeUV(e,this.value,r,new Li(o,new Ce(1).setReadonly(!0),Li.ADD)),h=new Xe(l,u,s,Xe.MIX);return e.format(h.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},OT=Pp;OT.Nodes=function(){let e=new GH(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new Lt("float cubeUV_maxMipLevel 8.0",!0),r=new Lt("float cubeUV_minMipLevel 4.0",!0),i=new Lt("float cubeUV_maxTileSize 256.0",!0),n=new Lt("float cubeUV_minTileSize 16.0",!0),a=new we(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);a.useKeywords=!1;let o=new we(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let s=new we(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,a,o,t,r,i,n]);s.useKeywords=!1;let l=new Lt("float r0 1.0",!0),u=new Lt("float v0 0.339",!0),h=new Lt("float m0 -2.0",!0),c=new Lt("float r1 0.8",!0),d=new Lt("float v1 0.276",!0),f=new Lt("float m1 -1.0",!0),p=new Lt("float r4 0.4",!0),v=new Lt("float v4 0.046",!0),g=new Lt("float m4 2.0",!0),m=new Lt("float r5 0.305",!0),y=new Lt("float v5 0.016",!0),_=new Lt("float m5 3.0",!0),x=new Lt("float r6 0.21",!0),w=new Lt("float v6 0.0038",!0),b=new Lt("float m6 4.0",!0),S=[l,u,h,c,d,f,p,v,g,m,y,_,x,w,b],M=new we(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,S);return{bilinearCubeUV:s,roughnessToMip:M,m0:h,cubeUV_maxMipLevel:t}}();var Uc=class extends Bt{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??Uc.VIEW}getShared(){return this.scope===Uc.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let a;switch(this.scope){case Uc.VIEW:e.isShader("vertex")?a="transformedNormal":a="geometryNormal";break;case Uc.LOCAL:e.isShader("vertex")?a="objectNormal":(e.requires.normal=!0,a="vObjectNormal");break;case Uc.WORLD:e.isShader("vertex")?a="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,a="vWNormal");break}return e.format(a,this.getType(e),t)}},Ui=Uc;Ui.LOCAL="local",Ui.WORLD="world",Ui.VIEW="view",Ui.NORMAL="normal";Bi.addKeyword("viewNormal",function(){return new Ui(Ui.VIEW)});Bi.addKeyword("localNormal",function(){return new Ui(Ui.NORMAL)});Bi.addKeyword("worldNormal",function(){return new Ui(Ui.WORLD)});var jo=class extends Bt{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??jo.LOCAL}getType(){switch(this.scope){case jo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case jo.LOCAL:case jo.WORLD:return!1}return!0}generate(e,t,r,i,n){let a;switch(this.scope){case jo.LOCAL:e.isShader("vertex")?a="transformed":(e.requires.position=!0,a="vPosition");break;case jo.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,a="vWPosition";break;case jo.VIEW:a=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case jo.PROJECTION:a=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(a,this.getType(),t)}},fa=jo;fa.LOCAL="local",fa.WORLD="world",fa.VIEW="view",fa.PROJECTION="projection";Bi.addKeyword("position",function(){return new fa});Bi.addKeyword("worldPosition",function(){return new fa(fa.WORLD)});Bi.addKeyword("viewPosition",function(){return new fa(fa.VIEW)});var qa=class extends Bt{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??qa.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case qa.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case qa.VECTOR:{let n=new Ui(Ui.VIEW),a=e.context.roughness,o=n.build(e,"v3"),s=new fa(fa.VIEW).build(e,"v3"),l=a?a.build(e,"f"):void 0,u=`reflect( -normalize( ${s} ), ${o} )`;l&&(u=`normalize( mix( ${u}, ${o}, ${l} * ${l} ) )`);let h=`inverseTransformDirection( ${u}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${h};`),i="reflectVec"):i=h;break}case qa.CUBE:{let n=new qa(qa.VECTOR).build(e,"v3"),a="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${a};`),i="reflectCubeVec"):i=a;break}case qa.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new qa(qa.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),i="reflectSphereVec"):i=n;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},pd=qa;pd.CUBE="cube",pd.SPHERE="sphere",pd.VECTOR="vector";var Yfe=class extends Bt{constructor(e=new Jo,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new OT(this.value,t??new pd(pd.VECTOR),r),this.irradianceNode=new OT(this.value,new Ui(Ui.WORLD),new Ce(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},Zfe=class extends Xi{constructor(e=new kU,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new pd,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),i=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a;n?a="texCubeBias( "+r+", "+i+", "+n+" )":a="texCube( "+r+", "+i+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},s=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new oo(new Ht("",s)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,s),e.removeContext(),e.format(a,s,t)}},Kfe=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,Jfe=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,Qfe=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,epe=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// NOTE: We use the blue channel to avoid temporal reprojection
// with incorrect velocity if the fragment is transparent.
gVelocity = vec4(velocity, gl_FragColor.a < 1.0 ? 0.0 : 1.0, 1.);
`,vR=["x","y","z","w"],tpe=["float","vec2","vec3","vec4"],rpe={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},ipe={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},npe=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let a=0;a<i.length;a++)i[a].src&&(n+=i[a].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(Kfe),this.addFragmentParsCode(Jfe),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(Qfe),this.addFragmentFinalCode(epe)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",a=""){let o=this.getVars(i),s=o[e];if(!s){let l=o.length;s={name:r||"node"+n+l+(a?"_"+a:""),type:t},o.push(s),o[e]=s}return s}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let r="";for(let i=0,n=e.length;i<n;++i){let a=e[i],o=a.type,s=a.name,l=a.size,u=this.getFormatByType(o);if(u===void 0)throw new Error("Node pars "+u+" not found.");u.includes("[]")?r+=t+" "+u.substring(0,u.length-2)+" "+s+`[${l}];
`:r+=t+" "+u+" "+s+`;
`}return r}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof $l?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,a){if(t.includes("[]")){let o=this.inputs.arrayUniforms,s=o.list.length,l=new dR({type:t,size:r.size,name:i||"nodeUA"+s+(a?"_"+a:""),node:r,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,s=o.list.length,l=new dR({type:t,name:i||"nodeU"+s+(a?"_"+a:""),node:r,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var a;let i;if(e=typeof e=="string"?Bi.get(e):e,this.context.include===!1)return e.name;e instanceof we?i=this.includes.functions:e instanceof Lt?i=this.includes.consts:e instanceof GH&&(i=this.includes.structs);let n=i[this.shader]=i[this.shader]||[];if(e){let o=n[e.name];if(o||(o=n[e.name]={node:e,deps:[]},n.push(o),o.src=e.build(this,"source")),e instanceof we&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(a=e.includes)==null?void 0:a.length)){let s=0;do this.include(e.includes[s++],t);while(s<e.includes.length)}return r&&(o.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return tpe[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case OU:case CJ:return new Zfe(r);case DJ:return new Yfe(new Jo(r));default:return new Jo(r)}else{if(r.isVector2)return new Kr(r);if(r.isVector3)return new bn(r);if(r.isVector4)return new Xo(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return rpe[e]||e}getFormatByType(e){return ipe[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return vR[e]}getIndexByElement(e){return vR.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=p1,t===p1&&this.context.gamma&&(t=RU),t}},or=class extends Xi{constructor(e=0,t,r,i){super("c"),this.nodeType="Color",this.value=e instanceof sn?e:new sn(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,a){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let o=e.getNodeData(r),s=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return s?this.generateReadonly(e,t,r,i,n,a):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,n,a,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,n,a,this.getLabel())),e.format(o.fragment.name,i,t))}generateReadonly(e,t,r,i,n,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},Ft=class extends Xi{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,r,i,n,a){return e.format(this.value.toString(),i,t)}},yi=class extends Xi{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}},Iu=class extends Xi{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},sP=class extends Xi{},ape=class extends sP{constructor(e){super("v3"),this.image=e,this._value=new L}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},RT=class extends sP{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},jH=class extends Xi{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new ni}generateReadonly(e,t,r,i,n,a){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},_o=class extends Xi{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new ye}generateReadonly(e,t,r,i,n,a){return e.format("mat4("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function gR(e,t,r){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0)}var ope=class extends jH{constructor(e,t){super(new ni),this.repeat=e,this.offset=t,gR(this.value,e,t)}updateMatrix(){gR(this.value,this.repeat,this.offset)}},Ou=class extends Xi{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof ir?new Array(e).fill(t):new Array(e).fill(new ir(0))}},mR=class extends Bt{constructor(e,t,r,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},WH=class extends Bt{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(WH.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},zT=WH;zT.Nodes=function(){return{customColor:new we(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var $H=class extends Bt{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include($H.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},qH=$H;qH.Nodes=function(){return{customNormal:new we(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var Lp=class extends Bt{constructor(e,t,r,i,n,a,o,s,l,u,h,c){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.side=a,this.size=o,this.blending=s,this.mat=l,this.alpha=u,this.mode=h,this.isMask=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=e.include(Lp.Nodes.cylindrical);break;case 2:i=e.include(Lp.Nodes.spherical);break;case 1:let a=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=new we(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${r}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${a}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);i=e.include(o);break;case 4:i=e.include(Lp.Nodes.triplanar);break;default:i=e.include(Lp.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){e.addVertexParsCode(`varying vec2 ${r}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${r}_vCustomUv;`);let a=["zy","xz","xy"][this.axis.value];e.addVertexFinalCode(`${r}_vCustomUv = (1. + (transformed.${a})) / 2.;`)}e.addFragmentVariable(this.calpha,"float");let n=[];return n.push("normal"),n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.blending.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}},XH=Lp;XH.Nodes=function(){let e=new we(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new we(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new we(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),i=new we(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:r,triplanar:i}}();var Ep=class extends Bt{constructor(e,t,r,i,n,a,o,s,l,u,h,c){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=a,this.origin=o,this.direction=s,this.colors=l,this.steps=u,this.isMask=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,i=new we(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[Ep.Nodes.vectorLinearWorldSpaceDepth,Ep.Nodes.vectorLinearObjectSpaceDepth,Ep.Nodes.vectorSphericalObjectSpaceDepth,Ep.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(i),a=[];return a.push(this.near.build(e,"f")),a.push(this.far.build(e,"f")),a.push(this.origin.build(e,"v3")),a.push(this.direction.build(e,"v3")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(n+"("+a.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},YH=Ep;YH.Nodes=function(){let e=new we(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new we(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new we(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new we(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:i}}();var spe=class extends Bt{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.isMask=s,this.alpha=a,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=new we(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),i=e.include(r),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},ZH=class extends Bt{constructor(e,t,r,i,n,a,o,s,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=a,this.angle=o,this.isMask=l,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(ZH.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},KH=ZH;KH.Nodes=function(){return{gradient:new we(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var JH=class extends Bt{constructor(e,t,r,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=i,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(JH.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},QH=JH;QH.Nodes=function(){return{matcap:new we(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var lP=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(lP||{}),Ei=function(){let e=new we(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new we(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new Lt("float F3 0.3333333"),t.keywords.G3=new Lt("float G3 0.1666667");let r=new we(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),i=new we("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),n=new we("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),a=new we(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,n]),o=new we("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),s=new we("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new we(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[s]),u=new we(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);u.keywords.NUM_OCTAVES=new Lt("int NUM_OCTAVES 5");let h=new we("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),c=new we(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,n,h]),d=new we(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),f=new we(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),p=new we(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),v=new we(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),g=new we(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),m=new we(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),y=new we(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[d,f,p,v,g,m]);return{simplex:t,simplexFractal:r,simplexAshima:a,fbm:u,perlin:c,voronoi:y}}(),e6=class extends Bt{constructor(e,t,r,i,n,a,o,s,l,u,h,c,d,f,p,v,g,m,y){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=a,this.colorA=o,this.colorB=s,this.colorC=l,this.colorD=u,this.noiseType=c,this.voronoiStyle=f,this.highCut=p,this.lowCut=v,this.smoothness=g,this.seed=m,this.quality=y,this.isMask=d,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=Object.values(lP)[this.noiseType.value],o=a=="voronoi"?`
		float v = ${a}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${a}(st),
					   ${a}(st + vec3(1.0)),
					   ${a}(st + vec3(1.0)));
		vec3 r = vec3(${a}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${a}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${a}(st * q));
		float f = ${a}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,s=new we(`vec3 ${a}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${o}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[Ei.simplex,Ei.simplexFractal,Ei.simplexAshima,Ei.fbm,Ei.perlin,Ei.voronoi]),l=e.include(s),u=[];return u.push(this.scale.build(e,"f")),u.push(this.size.build(e,"v3")),u.push(this.move.build(e,"f")),u.push(this.fA.build(e,"v2")),u.push(this.fB.build(e,"v2")),u.push(this.distortion.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.colorC.build(e,"v4")),u.push(this.colorD.build(e,"v4")),u.push(this.voronoiStyle.build(e,"i")),u.push(this.highCut.build(e,"f")),u.push(this.lowCut.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.seed.build(e,"f")),u.push(this.quality.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}};e6.numOctaves=5;var t6=class extends Bt{constructor(e,t,r,i,n,a,o,s,l,u,h,c,d,f,p,v){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=i,this.contourThreshold=n,this.outlineThreshold=a,this.contourFrequency=o,this.outlineSmoothing=s,this.contourDirection=l,this.positionalLines=u,this.compensation=h,this.resolution=c,this.normalMap=d,this.depthMap=f,this.pixelRatio=p,this.alpha=v,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let i=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),a=this.compensation.build(e,"b"),o=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(a,"uniform bool"),e.addVertexParsVariable(o,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${a}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${n} * (${i} / 2.0) * ${r}_clipPosition.w * 2.0 * ${o};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(t6.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},r6=t6;r6.Nodes=function(){let e=new we(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new we(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Wo=class extends Bt{constructor(e,t,r,i,n,a,o,s,l,u,h,c,d,f,p,v,g,m){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=r,this.blending=i,this.offset=n,this.colorA=a,this.colorB=o,this.frequency=s,this.size=l,this.variation=u,this.smoothness=h,this.zigzag=c,this.rotation=d,this.vertical=f,this.horizontal=p,this.sides=v,this.isMask=m,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let i=`g${this.uuid.toString().replace(/-/g,"")}`,n=new we(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),a=new we(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),o="";if(this.projection.value===4){let h=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,c=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;o=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${h};
				float d1 = ${c};
				float d2 = ${d};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let h=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,c="";this.axis.value===0?c=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?c=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,c=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let d="";switch(this.projection.value){case 0:d="custom_uv = vUv.st;";break;case 1:break;case 2:d=`
							vec3 p = position;
							${c}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}o=`
				vec2 custom_uv;
				${d}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${h};
				`}let s=new we(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${o}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[a,n,Wo.DrawFunctions.circle,Wo.DrawFunctions.ring,Wo.DrawFunctions.polygon,Wo.DrawFunctions.cross,Wo.DrawFunctions.diamond,Wo.DrawFunctions.checkerboard,Wo.DrawFunctions.line,Wo.DrawFunctions.wave]),l=e.include(s),u=[];return u.push("normal"),u.push(this.blending.build(e,"f")),u.push(this.style.build(e,"i")),u.push(this.offset.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.frequency.build(e,"v2")),u.push(this.size.build(e,"f")),u.push(this.variation.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.zigzag.build(e,"f")),u.push(this.rotation.build(e,"f")),u.push(this.vertical.build(e,"v2")),u.push(this.horizontal.build(e,"v2")),u.push(this.sides.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},i6=Wo;i6.DrawFunctions=function(){let e=new we(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new we(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),r=new we(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),i=new we(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),n=new we(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),a=new we(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),o=new we(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),s=new we(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new we(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),u=new we(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:r,ring:i,polygon:n,cross:a,diamond:o,checkerboard:s,line:l,wave:u}}();var n6=class extends Bt{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=a,this.isMask=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(n6.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},a6=n6;a6.Nodes=function(){let e=new we(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Ei.simplex]);return{rainbow:new we(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var o6=class extends Bt{constructor(e,t,r,i,n,a,o,s,l,u){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=i,this.isWorldSpace=n,this.noiseStrength=a,this.noiseScale=o,this.shadowColor=s,this.offset=l,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(o6.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},s6=o6;s6.Nodes=function(){let e=new we(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new we(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new we(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),i=new we(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new we(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new we(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Ei.simplex,e,r,n])}}();var lpe=function(){return{textureBicubic:new we(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}(),l6=class extends Bt{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=a,this.aspectRatio=o,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,vt.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(l6.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},u6=l6;u6.Nodes=function(){let e=new we(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new we(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new we(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),i=new we(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[lpe.textureBicubic,r,e]),n=new we(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[i,t]);return{transmission:new we(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[n])}}();var NT=(e=>(e.NOISE="noise",e.MAP="map",e))(NT||{}),h6=class extends Bt{constructor(e,t,r,i,n,a,o,s,l,u,h){super("v3"),this.displacementTypeIndex=new Ft(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(NT)[this.displacementTypeIndex.value]==="map"&&(this.mat=new jH(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=u,this.noiseFunctionIndex=h,this.voronoiStyle=i,this.smoothness=n,this.seed=a,this.highCut=o,this.lowCut=s,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(NT)[this.displacementTypeIndex.value]){case"map":{r=e.include(h6.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case"noise":{let n=Object.values(lP)[this.noiseFunctionIndex.value],a=new we(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=n=="voronoi"?`
					float v = ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,s=new we(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${o}
						}`,[Ei.simplex,Ei.simplexFractal,Ei.simplexAshima,Ei.fbm,Ei.perlin,Ei.voronoi]),l=new we(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[s,a]);r=e.include(l),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f")),i.push(this.voronoiStyle.build(e,"i")),i.push(this.smoothness.build(e,"f")),i.push(this.seed.build(e,"f")),i.push(this.highCut.build(e,"f")),i.push(this.lowCut.build(e,"f")),i.push(this.quality.build(e,"i"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},c6=h6;c6.Nodes=function(){let e=new we(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new we(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new we(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var vt={normalRenderTarget:new Jo,normalRenderTargetDepth:new Jo,transmissionRenderTarget:new Jo,transmissionSize:new Kr(2048,2048),transmissionRenderTargetDepth:new Jo,aoRenderTarget:new Jo,aoEnabled:new yi,pixelRatioNode:new Ce(1),resolution:new Kr,penumbraSize:new Iu(5,.5),frameIndex:new Ft(0),transmissionLod:new Ft(2)};for(let e of Object.values(vt))e.isRenderGlobal=!0;var d6=class extends $l{constructor(){super("basic"),this.nodeType="Basic",this.color=new or(5526619),this.shadingAlpha=new Ce(1),this.shadingBlend=new Ft(0),this.previousModelViewMatrix=new _o,this.previouseProjectionMatrix=new _o}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({resolution:vt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Cg.merge([be.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new or(5526619)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let a=["#include <normal_fragment_begin>",r.code];i&&a.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),n?a.push(n.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${n.result}, 1.0, SPE_BLENDING_NORMAL);`):a.push(`vec3 finalColor = ${r.result};`);let o="1.0";this.mask&&(this.mask.analyze(e),o=`luminance(${this.mask.flow(e,"v3").result})`),i?a.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${o} );`):a.push("gl_FragColor = vec4("+r.result+", 1.0 );"),a.push("#include <fog_fragment>","#include <dithering_fragment>"),t=a.join(`
`)}return t}},upe=class extends $l{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new or(5526619),this.emissive=new or(0),this.emissiveIntensity=new Ce(1),this.previousModelViewMatrix=new _o,this.previouseProjectionMatrix=new _o,this.shadingAlpha=new Ce(1),this.shadingBlend=new Ft(0),this.occlusion=new yi(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({resolution:vt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Cg.merge([be.fog,be.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:vt.penumbraSize}),e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({aoMap:vt.aoRenderTarget}),e.mergeUniform({aoEnabled:vt.aoEnabled}),this.color===void 0&&(this.color=new or(5526619)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),a=this.occlusion.flow(e,"b",{slot:"occlusion"}),o=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];h.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),u&&h.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&h.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),h.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let c="1.0";this.mask&&(this.mask.analyze(e),c=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${c} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${c}, ${s.result} );

					outgoingLight *= ao;
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},hpe=class extends $l{constructor(){super("phong"),this.nodeType="Phong",this.color=new or(5526619),this.specular=new or(1118481),this.shininess=new Ce(30),this.previousModelViewMatrix=new _o,this.previouseProjectionMatrix=new _o,this.shadingAlpha=new Ce(1),this.shadingBlend=new Ft(0),this.occlusion=new yi(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({resolution:vt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Cg.merge([be.fog,be.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:vt.penumbraSize}),e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({aoMap:vt.aoRenderTarget}),e.mergeUniform({aoEnabled:vt.aoEnabled}),this.color===void 0&&(this.color=new or(5526619)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),a=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];h.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",a.code,"	float shininess = max( 0.0001, "+a.result+" );","	float specularStrength = 1.0;"),u&&h.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let c="1.0";this.mask&&(this.mask.analyze(e),c=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${c} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${c}, ${s.result} );
					
					outgoingLight *= ao;
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},cpe=class extends $l{constructor(){super("standard"),this.nodeType="Standard",this.color=new or(5526619),this.roughness=new Ce(.3),this.metalness=new Ce(0),this.reflectivity=new Ce(.5),this.previousModelViewMatrix=new _o,this.previouseProjectionMatrix=new _o,this.shadingAlpha=new Ce(1),this.shadingBlend=new Ft(0),this.occlusion=new yi(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({resolution:vt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Cg.merge([be.fog,be.lights])),be.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:vt.penumbraSize}),e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({aoMap:vt.aoRenderTarget}),e.mergeUniform({aoEnabled:vt.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new or(5526619)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:r}),a=this.roughness.flow(e,"f"),o=this.metalness.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),u=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let d=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];d.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"	float roughnessFactor = "+a.result+";",o.code,"	float metalnessFactor = "+o.result+";"),h&&d.push(h.code,"#ifdef ALPHATEST","	if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),d.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),d.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),c?d.push(c.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+c.result+" ) ), diffuseColor, metalnessFactor );"):d.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),d.push("#include <lights_fragment_begin>"),d.push("#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let f="1.0";this.mask&&(this.mask.analyze(e),f=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${f} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${f}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),u&&d.push(u.code,`outgoingLight = spe_blend(outgoingLight, ${u.result}, 1.0, SPE_BLENDING_NORMAL);`),h?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},dpe=class extends $l{constructor(){super("toon"),this.nodeType="Toon",this.color=new or(5526619),this.specular=new or(1118481),this.shininess=new Ce(30),this.previousModelViewMatrix=new _o,this.previouseProjectionMatrix=new _o,this.shadingAlpha=new Ce(1),this.shadingBlend=new Ft(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({resolution:vt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Cg.merge([be.fog,be.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:vt.penumbraSize}),e.mergeUniform({frameIndex:vt.frameIndex}),e.mergeUniform({aoMap:vt.aoRenderTarget}),e.mergeUniform({aoEnabled:vt.aoEnabled}),this.color===void 0&&(this.color=new or(5526619)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];u.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${h}, ${o.result} );
				}
				`),s&&u.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},fpe=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),r=this.cache.get(e);return r===void 0?(r={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},ppe=class extends fpe{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},zw;function vpe(e){return typeof e=="string"?e:(zw||(zw=new ppe),zw.load(e))}var gpe=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},mpe=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},f6=class extends gpe{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type==="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;let i=[1e3,1001,1002];for(let n of i){let a=this[n];a&&(a.image=this.img,a.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var r=new FileReader;r.readAsDataURL(new Blob([e],{type:"video/mp4"}));let i;await new Promise(n=>{r.onloadend=a=>{var o;i=(o=a.target)==null?void 0:o.result,n(null)}}),this.img.src=i}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=vpe(e),this.img.onload=t}getTexture(e){let t=this[e];if(t)return t;{let r;return this.isVideo?r=new Qte(this.img,void 0,e,e):r=new Gi(this.img,void 0,e,e),this.loaded&&(r.needsUpdate=!0),this[e]=r,r}}disposeTextures(){var e,t,r;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(r=this[1002])==null||r.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},Ku=class extends f6{};function ri(e,t){return t.color(e)}function ype(e,t){switch(e.type){case"fresnel":return bpe(e,t);case"gradient":return wpe(e);case"depth":return Spe(e);case"normal":return Mpe(e);case"noise":return Tpe(e,t);case"rainbow":return Ape(e);case"toon":return Cpe(e,t);case"outline":return Dpe(e,t);case"transmission":return Ppe(e);case"color":return xpe(e,t);case"pattern":return Lpe(e,t)}}function _pe(e){return{type:e.type}}function Pa(e){let{alpha:t,mode:r,isMask:i}=e;return{..._pe(e),alpha:t,mode:r,isMask:i}}function xpe(e,t){return{...Pa(e),color:ri(e.color,t)}}function bpe(e,t){let{bias:r,scale:i,intensity:n,factor:a,color:o,isMask:s}=e;return{...Pa(e),color:ri(o,t),bias:r,scale:i,intensity:n,factor:a}}function wpe(e){let{gradientType:t,smooth:r,colors:i,steps:n,angle:a,offset:o,morph:s}=e;return{...Pa(e),gradientType:t,smooth:r,colors:i.map(l=>new ir(l[0],l[1],l[2],l[3])),num:i.length,steps:n,offset:new re(...o),morph:new re(...s),angle:a}}function Spe(e){let{gradientType:t,near:r,far:i,isVector:n,isWorldSpace:a,origin:o,direction:s,colors:l,steps:u,smooth:h}=e;return{...Pa(e),gradientType:t,near:r,far:i,isVector:n,isWorldSpace:a,origin:new L(...o),direction:s?new L(...s):new L(1,0,0),colors:l.map(c=>c!==void 0?new ir(c[0],c[1],c[2],c[3]):new ir(0,0,0,0)),steps:u.slice(0,l.length),smooth:h}}function Mpe(e){let{cnormal:t}=e;return{...Pa(e),cnormal:new L(t[0],t[1],t[2])}}function Tpe(e,t){return{...Pa(e),scale:e.scale,move:e.move,fA:new re(...e.fA),fB:new re(...e.fB),size:new L(...e.size),distortion:new re(...e.distortion),colorA:ri(e.colorA,t),colorB:ri(e.colorB,t),colorC:ri(e.colorC,t),colorD:ri(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function Ape(e){return{...Pa(e),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new L(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new L(...e.offset)}}function Cpe(e,t){return{...Pa(e),positioning:e.positioning,colors:e.colors.map(r=>new ir(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new L(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:ri(e.shadowColor,t),offset:new L(...e.offset)}}function Dpe(e,t){return{...Pa(e),outlineColor:ri(e.outlineColor,t),contourColor:ri(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new L(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function Ppe(e,t){return{...Pa(e),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function Lpe(e,t){return{...Pa(e),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new re(...e.offset),colorA:ri(e.colorA,t),colorB:ri(e.colorB,t),frequency:new re(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new re(...e.vertical),horizontal:new re(...e.horizontal),sides:e.sides}}var Y1=class extends sn{},p6={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},v6={depth:["colors"]};function Epe(e,t,r){var a,o;if(t==="isMask")return!0;let i=p6[e.type],n=v6[e.type];if(n!==void 0){let s=e.color;if(n.includes(t)){let l=(o=(a=s[t])==null?void 0:a.value)==null?void 0:o.length;if(l!==void 0&&l!==r.length)return!0}}return i!==void 0?i.includes(t):!1}function g6(e,t,r){let i=r.uniforms[`f${r.id}_texture`];if(!i)return!1;let n=!1,a=e;if("image"in a){let o=a.image,s=t.image(o),l=i;l.image instanceof Ku||l.image.deref(),l.image=s}if("video"in a){let o=a.video,s=t.video(o),l=i;l.image instanceof Ku||l.image.deref(),l.image=s}if("wrapping"in a){let o=i;o.wrap=a.wrapping}if("repeat"in a||"offset"in a){let o="mat",s=r.uniforms[`f${r.id}_${o}`];"repeat"in a&&(s.repeat=a.repeat),"offset"in a&&(s.offset=a.offset),s.updateMatrix()}return n}function Ipe(e,t,r,i){let n=!1;for(let[a,o]of Object.entries(e)){if(!a||o===void 0)continue;if(y6(a,r,i)){a==="visible"&&r.type==="light"&&(n=!0);continue}r.visible=i.visible;let s=r.uniforms[`f${r.id}_${a}`];if(s&&!(s instanceof sP))switch(n=n||Epe(r,a,o),s.constructor){case or:if(typeof o=="string"){let l=t.getColor(o);l&&(s.value=l);break}else{let l=o;s.value instanceof Y1?s.value=new sn(l.r,l.g,l.b,l.a):s.setRGBA(l);break}case Xo:if(typeof o=="string"){let l=t.getColor(o);l&&(s.value=l);break}else{let l=o;s.value instanceof Y1?s.value=new sn(l.r,l.g,l.b,l.a):s.value.setRGBA(l.r,l.g,l.b,l.a);break}case Kr:{let l=o;s.value.setX(l[0]),s.value.setY(l[1]);break}case bn:{let l=o;s.value.setX(l[0]),s.value.setY(l[1]),s.value.setZ(l[2]);break}case Jo:{g6(o,t,r);break}case Ou:{s.value=o.map(l=>new ir(...l));break}default:{s.value=o;break}}}return n}var fh=class{constructor(e,t,r,i){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let n in i)this.uniforms[`f${this.id}_${n}`]=i[n];for(let n in r)y6(n,this,r)}get type(){return this.data.type}static create(e,t,r,i){if(r.type==="light")return tl.createLigherLayer(e,t,r,i);if(r.type==="texture"||r.type==="video"){let n=r.type==="texture"?i.image(r.texture.image):i.video(r.texture.video),a=new RT(n,r.texture.wrapping),o=new ape(n),s=new ope(r.texture.repeat,r.texture.offset),l=new Ce(r.crop?1:0),u=new Ft(r.projection??0),h=new Ft(["x","y","z"].indexOf(r.axis)??0),c=new Ft(r.side??0),d=new Kr(r.size?new re(r.size[0],r.size[1]):new re(100,100)),f=new Ce(r.blending??0),p=new Ce(r.alpha??1),v=new Ft(r.mode??0),g=new yi(r.isMask??!1),m=new XH(a,o,l,u,h,c,d,f,s,p,v,g),y=new Ht(m.calpha,"f");return new hr(e,t,r,{texture:a,textureSize:o,crop:l,projection:u,axis:h,side:c,size:d,blending:f,mat:s,alpha:p,mode:v,isMask:g},m,v,y,g)}else if(r.type==="matcap"){let n=i.image(r.texture.image),a=new RT(n,r.texture.wrapping),o=new Ce(r.alpha??1),s=new Ft(r.mode??0),l=new yi(r.isMask??!1),u=new QH(a,o,s,l),h=new Ht(u.calpha,"f");return new hr(e,t,r,{texture:a,alpha:o,mode:s,isMask:l},u,s,h,l)}else if(r.type==="displace")if(r.displacementType==="noise"){let n=new bn(new L(...r.offset)),a=new Ce(r.scale??10),o=new Ce(r.intensity??8),s=new Ce(r.movement??1),l=new Ft(r.noiseType??0),u=new Ft(r.voronoiStyle??0),h=new Ce(r.smoothness??.5),c=new Ce(r.seed??0),d=new Ce(r.highCut??1),f=new Ce(r.lowCut??0),p=new Ft(r.quality??1),v=new c6(o,s,n,u,h,c,d,f,p,a,l);return new m6(e,t,r,{offset:n,scale:a,intensity:o,movement:s,noiseType:l,voronoiStyle:u,smoothness:h,seed:c,highCut:d,lowCut:f,quality:p},v)}else throw new Error;else return zpe(e,t,r,i)}updateByOp(e,t,r){var n;let i=e;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props?((n=r.scene)==null||n.markNeedsUpdateRendererDirty(),!0):Ipe(i.props,r.shared,this,t)}else if(i.path[0]==="texture")return"texture"in t||"video"in t?g6(i.props,r.shared,this):!0;return!1}dispose(){if(Ope(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Ku||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},hr=class extends fh{constructor(e,t,r,i,n,a,o,s){super(e,t,r,i),this.params=i,this.color=n,this.mode=a,this.alpha=o,this.isMask=s}},m6=class extends fh{constructor(e,t,r,i,n){super(e,t,r,i),this.position=n}},tl=class extends fh{constructor(e,t,r,i,n){super(e,t,r,n),this.node=i}static createLigherLayer(e,t,r,i){let n,a=new Ce(r.alpha),o=new Ft(r.mode),s;if(!r.visible)n=new d6,s={};else if(r.category==="lambert"){n=new upe;let l=new or(i.color(r.emissive)??0),u=new yi(r.occlusion??!0);s={emissive:l,occlusion:u},n.emissive=l,n.occlusion=u}else if(r.category==="toon"){n=new dpe;let l=new Ce(r.shininess??30),u=new or(i.color(r.specular)??1118481);s={shininess:l,specular:u},n.shininess=l,n.specular=u}else if(r.category==="physical"){n=new cpe;let l=new Ce(r.roughness??.3),u=new Ce(r.metalness??0),h=new Ce(r.reflectivity??.5),c=new yi(r.occlusion??!0);s={roughness:l,metalness:u,reflectivity:h,occlusion:c},n.roughness=l,n.metalness=u,n.reflectivity=h,n.occlusion=c}else{n=new hpe;let l=new Ce(r.shininess??30),u=new or(r.specular!==void 0?i.color(r.specular)??1118481:1118481),h=new yi(r.occlusion??!0);s={shininess:l,specular:u,occlusion:h},n.shininess=l,n.specular=u,n.occlusion=h}return n.alpha=new Ce(1),n.shadingAlpha=a,n.shadingBlend=o,s.alpha=n.shadingAlpha,s.mode=n.shadingBlend,new tl(e,t,r,n,s)}get category(){return this.node.category}};function Ope(e){let t=e instanceof fh?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function fn(e){return{alpha:new Ce(e.alpha??1),mode:new Ft(e.mode??0),isMask:new yi(e.isMask??!1)}}function Rpe(e,t,r,i){switch(e.type){case"color":{let n=new or(i.color??5526619),a=fn(i),o=new zT(n,a.alpha),s=new Ht(o.calpha,"f");return new hr(t,r,e,{color:n,...a},o,a.mode,s,a.isMask)}case"fresnel":{let n=new or(i.color??16777215),a=new Ce(i.bias??.1),o=new Ce(i.scale??1),s=new Ce(i.intensity??2),l=new Ce(i.factor??1),u=fn(i),h=new spe(n,a,o,s,l,u.alpha,u.mode,u.isMask),c=new Ht(h.calpha,"f");return new hr(t,r,e,{color:n,bias:a,scale:o,intensity:s,factor:l,...u},h,u.mode,c,u.isMask)}case"rainbow":{let n=new Ce(i.filmThickness??30),a=new Ce(i.movement??0),o=new bn(i.wavelengths??new L(0,0,0)),s=new Ce(i.noiseStrength??0),l=new Ce(i.noiseScale??1),u=new bn(i.offset??new L(0,0,0)),h=fn(i),c=new a6(n,a,o,s,l,u,h.alpha,h.isMask),d=new Ht(c.calpha,"f");return new hr(t,r,e,{filmThickness:n,movement:a,wavelengths:o,noiseStrength:s,noiseScale:l,offset:u,...h},c,h.mode,d,h.isMask)}case"transmission":{let n=new Ce(i.thickness??10),a=new Ce(i.ior??1.5),o=new Ce(i.roughness??.5),s=vt.transmissionSize,l=vt.transmissionRenderTarget,u=vt.transmissionRenderTargetDepth,h=window.innerWidth,c=window.innerHeight,d=h>=c?new Kr(c/h,1):new Kr(1,h/c),f=fn(i),p=new u6(n,a,o,s,l,u,d,f.alpha),v=new Ht(p.calpha,"f");return new hr(t,r,e,{thickness:n,ior:a,roughness:o,aspectRatio:d,...f},p,f.mode,v,f.isMask)}case"toon":{let n=new Ft(i.positioning??0),a;i.colors?a=new Ou(i.colors.length,i.colors):(a=new Ou(10,new ir(0,0,0,1)),a.value[1]=new ir(1,1,1,1));let o;i.steps?o=new Iu(i.steps.length,i.steps):(o=new Iu(10,1),o.value[0]=0);let s=new bn(i.source??new L(0,0,0)),l=new yi(i.isWorldSpace??!0),u=new Ce(i.noiseStrength??0),h=new Ce(i.noiseScale??1),c=new Xo(i.shadowColor),d=new bn(i.offset??new L(0,0,0)),f=fn(i),p=new s6(n,a,o,s,l,u,h,c,d,f.alpha),v=new Ht(p.calpha,"f");return new hr(t,r,e,{positioning:n,colors:a,steps:o,source:s,isWorldSpace:l,noiseStrength:u,noiseScale:h,shadowColor:c,offset:d,...f},p,f.mode,v,f.isMask)}case"outline":{let n=new or(i.outlineColor??16777215),a=new or(i.contourColor??16777215),o=new Ce(i.outlineWidth??.1),s=new Ce(i.contourWidth??.1),l=new Ce(i.outlineThreshold??.1),u=new Ce(i.contourThreshold??.1),h=new Ce(i.outlineSmoothing??.1),c=new Ce(i.contourFrequency??.1),d=new bn(i.contourDirection??new L(0,1,0)),f=new yi(i.positionalLines??!1),p=new yi(i.compensation??!0),v=vt.normalRenderTarget,g=vt.normalRenderTargetDepth,m=vt.pixelRatioNode,y=vt.resolution,_=fn(i),x=new r6(n,a,o,s,l,u,h,c,d,f,p,y,v,g,m,_.alpha),w=new Ht(x.calpha,"f");return new hr(t,r,e,{outlineColor:n,contourColor:a,outlineWidth:o,contourWidth:s,outlineThreshold:l,contourThreshold:u,outlineSmoothing:h,contourFrequency:c,contourDirection:d,positionalLines:f,compensation:p,..._},x,_.mode,w,_.isMask)}case"depth":{let n=new Ft(i.gradientType??0),a=new yi(i.smooth??!1),o=new Ce(i.near??50),s=new Ce(i.far??200),l=new Ce(i.isVector??1),u=new Ce(i.isWorldSpace??0),h=new bn(i.origin??new L),c=new bn(i.direction??new L),d;i.colors?d=new Ou(i.colors.length,i.colors):(d=new Ou(2,new ir(0,0,0,1)),d.value[1]=new ir(1,1,1,1));let f;i.steps?f=new Iu(i.steps.length,i.steps):(f=new Iu(2,1),f.value[0]=0);let p=fn(i),v=new YH(n,a,o,s,l,u,h,c,d,f,p.alpha,p.isMask),g=new Ht(v.calpha,"f");return new hr(t,r,e,{gradientType:n,smooth:a,near:o,far:s,isVector:l,isWorldSpace:u,origin:h,direction:c,colors:d,steps:f,...p},v,p.mode,g,p.isMask)}case"noise":{let n=new Ce(i.scale??1),a=new bn(i.size??new L(100,100,100)),o=new Ce(i.move??1),s=new Kr(i.fA??new re(1.7,9.2)),l=new Kr(i.fB??new re(8.3,2.8)),u=new Kr(i.distortion??new re(1,1)),h=new Xo(i.colorA),c=new Xo(i.colorB),d=new Xo(i.colorC),f=new Xo(i.colorD),p=new Ft(i.noiseType??0),v=new Ft(i.voronoiStyle??0),g=new Ce(i.highCut??1),m=new Ce(i.lowCut??0),y=new Ce(i.smoothness??.5),_=new Ce(i.seed??.5),x=new Ft(i.quality??1),w=fn(i),b=new e6(n,a,o,s,l,u,h,c,d,f,w.alpha,p,w.isMask,v,g,m,y,_,x),S=new Ht(b.calpha,"f");return new hr(t,r,e,{scale:n,size:a,move:o,fA:s,fB:l,distortion:u,colorA:h,colorB:c,colorC:d,colorD:f,noiseType:p,...w,voronoiStyle:v,highCut:g,lowCut:m,smoothness:y,seed:_,quality:x},b,w.mode,S,w.isMask)}case"normal":{let n=new bn(i.cnormal??new L(1,1,1)),a=fn(i),o=new qH(n,a.alpha),s=new Ht(o.calpha,"f");return new hr(t,r,e,{cnormal:n,...a},o,a.mode,s,a.isMask)}case"gradient":{let n=new Ft(i.gradientType??0),a=new yi(i.smooth??!1),o;i.colors?o=new Ou(i.colors.length,i.colors):(o=new Ou(10,new ir(0,0,0,1)),o.value[1]=new ir(1,1,1,1));let s;i.steps?s=new Iu(i.steps.length,i.steps):(s=new Iu(10,1),s.value[0]=0);let l=new Kr(i.offset??new re(0,0)),u=new Kr(i.morph??new re(0,0)),h=new Ce(i.angle??0),c=fn(i),d=new KH(n,a,o,s,l,u,h,c.alpha,c.isMask),f=new Ht(d.calpha,"f");return new hr(t,r,e,{gradientType:n,smooth:a,colors:o,steps:s,offset:l,morph:u,angle:h,...c},d,c.mode,f,c.isMask)}case"pattern":{let n=new Ft(i.style??0),a=new Ft(i.projection??0),o=new Ft(["x","y","z"].indexOf(i.axis)??0),s=new Ce(i.blending??0),l=new Kr(i.offset??new re(0,0)),u=new Xo(i.colorA),h=new Xo(i.colorB),c=new Kr(i.frequency??new re(10,10)),d=new Ce(i.size??.5),f=new Ce(i.variation??0),p=new Ce(i.smoothness??.5),v=new Ce(i.zigzag??0),g=new Ce(i.rotation??0),m=new Kr(i.vertical??new re(0,1)),y=new Kr(i.horizontal??new re(0,1)),_=new Ft(i.sides??6),x=fn(i),w=new i6(n,a,o,s,l,u,h,c,d,f,p,v,g,m,y,_,x.alpha,x.isMask),b=new Ht(w.calpha,"f");return new hr(t,r,e,{style:n,projection:a,axis:o,blending:s,offset:l,colorA:u,colorB:h,frequency:c,size:d,variation:f,smoothness:p,zigzag:v,rotation:g,vertical:m,horizontal:y,sides:_,...x},w,x.mode,b,x.isMask)}default:{let n=new or(1,0,0,1),a=fn(i),o=new zT(n,a.alpha),s=new Ht(o.calpha,"f");return new hr(t,r,e,{color:n,...a},o,a.mode,s,a.isMask)}}}function zpe(e,t,r,i){let n=ype(r,i);return Rpe(r,e,t,n)}function y6(e,t,r){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let i=t.uniforms[`f${t.id}_intensity`];return i?(i.value=r.intensity*(r.visible?1:0),i):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let i=t.uniforms[`f${t.id}_alpha`];if(!i)return;if(i.value=r.alpha*(r.visible?1:0),r.type==="outline"&&e==="visible"){let n=t.uniforms[`f${t.id}_compensation`];n&&(n.value=r.compensation&&r.visible)}return i}}function Z1(e,t){let r=0;for(let i of e.layers){if(i.data.type!=="displace"&&i.data.isMask)return!0;if(i.data.type!=="displace"&&"alpha"in i.data&&i.data.type!=="light"&&i.data.type!=="fresnel"&&i.data.type!=="texture"&&i.data.type!=="matcap"&&i.data.type!=="rainbow"&&i.data.type!=="outline"&&i.data.type!=="pattern"){let n=i.data.visible?i.data.alpha:0;if(n===1&&i.data.type==="depth"||i.data.type==="gradient"){for(let a of i.data.colors)if(a[3]<1){n=a[3];break}}else if(n===1&&i.data.type==="noise"){let a=t.color(i.data.colorA).a,o=t.color(i.data.colorB).a,s=t.color(i.data.colorC).a,l=t.color(i.data.colorD).a,u=Math.min(a,Math.min(o,Math.min(s,l)));u<1&&(n=u)}r+=(1-r)*n}}return r<1}var Rl=class extends Xd{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},Npe=class extends Rl{constructor(e,t,r,i){super(),this.flatShading=e,this.side=t,this.wireframe=r,this.root=i}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,r){return this.root.getFlavor(e,t,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,r){this.root.updateByOp(e,t,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},_6=class extends Rl{constructor(e,t){super(),this.data=e,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,r){let i=r?6:(e?3:0)+t;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let n=this.flavors[i];return n===void 0&&(n=new Npe(e,t,r,this),this.flavors[i]=n,n.flatShading=e,n.side=t,n.updateAfterBuild()),n}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){this.data=e;let r=e.layers??ch.defaultTwoLayerData("phong").layers;this.layers=r.map(i=>fh.create(this.layerIdGen++,i.id,i.data,t.shared)),this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(),this.transparent=Z1(e,t.shared)}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(e=>e instanceof tl),this.lightLayer===void 0&&(this.lightLayer=new tl(0,"",{...la.defaultData("light","phong"),visible:!1},new d6,{})),this.dispose();for(let e of this.flavors)e&&e.dispose();this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(e,t,r){var i,n,a,o;if(t!==void 0?this.data=t:t=this.data,this.transparent=Z1(t,r.shared),e.path[0]==="layers"){this.data=t;let s=r.shared,l=e.path[1];if(l===void 0){if(this.layers.reverse(),e.type===4){let u=fh.create(this.layerIdGen++,e.id,e.data,r.shared);this.layers.splice(e.localIndex,0,u),(i=r.scene)==null||i.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),(n=r.scene)==null||n.markNeedsUpdateRendererDirty();else if(e.type===6){let u=this.layers.findIndex(c=>c.uuid===e.id),h=this.layers[u];this.layers.splice(u,1),this.layers.splice(e.localIndex,0,h),(a=r.scene)==null||a.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{e.type===0&&e.props.occlusion!==void 0&&((o=r.scene)==null||o.markNeedsUpdateRendererDirty());let u=this.layers.find(h=>h.uuid===l);if(u){let h=t.layers.data(l);if(u.updateByOp({...e,path:e.path.slice(2)},h,r)){let c=fh.create(this.layerIdGen++,l,h,s);this.layers.splice(this.layers.findIndex(d=>d.uuid===l),1,c),this.onUpdate()}}}}else this.reset(t,r)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof hr?t.color.mask=void 0:t instanceof tl&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof hr&&t.isMask.value&&t.data.visible&&e>0){let r=e-1,i=this.layers[r];i instanceof tl?i.node.mask=new Li(t.color,t.alpha,Li.MUL):i instanceof hr&&(i.isMask.value||(i.color.mask=new Li(t.color,t.alpha,Li.MUL)))}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof hr),t=this.layers.findIndex(r=>r instanceof tl);if(e!==-1&&e<t){let r=this.layers[e].color;for(let i=e+1;i<t;++i){let n=this.layers[i];if(n instanceof hr){if(n.isMask.value)continue;r=new mR(r,n.color,n.alpha,n.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new Ht("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof tl);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let i=this.layers[r];if(i instanceof hr){if(i.isMask.value)continue;e=new mR(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof m6);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new Li(t,e[r].position,Li.ADD),t=new Li(t,new Ce(.5).setReadonly(!0),Li.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(i,n,a)=>Math.min(Math.max(i,n),a);for(let i of this.layers)if(i.type==="displace"){let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}computeCacheKey(){let e="[";for(let{data:t}of this.data.layers)if(t.type==="light")e+=`"${t.visible?t.category.toUpperCase():"Basic"}"`;else{let r=(p6[t.type]??[]).map(s=>t[s]),i=(v6[t.type]??[]).map(s=>{var l;return((l=t[s])==null?void 0:l.length)??0}),n=[...r,...i],a="isMask"in t&&t.isMask,o=`"${t.type}-${t.visible}-${a}"`;n.length?e+=`[${o}, "${n.join('","')}"],`:e+=o}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new npe;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof hr){let t=e.params.texture;if(t instanceof RT&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Rl.prototype,{properties:{get:function(){return this.fragment.properties}}});var kT=class extends _6{},kpe=Tg(yJ()),yR=new Map;function Bpe(e){if(typeof e=="string")return e;let t=yR.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},yR.set(e,t)),t.url}var Ip=class{constructor({src:e,volume:t,delay:r,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:Bpe(e),format:"wav"},this.sound=new kpe.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),r!==void 0&&(this.delay=r),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,r){this.sound.on(e,t,r)}off(e,t,r){this.sound.off(e,t,r)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},Fpe=class{constructor(){this.type="ShapePath",this.color=new Qe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new g1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var r;return(r=this.currentPath)==null||r.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,a){var o;return(o=this.currentPath)==null||o.bezierCurveTo(e,t,r,i,n,a),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function r(f,p,v,g){let m=f.x,y=p.x,_=v.x,x=g.x,w=f.y,b=p.y,S=v.y,M=g.y,A=(x-_)*(w-S)-(M-S)*(m-_),T=(y-m)*(w-S)-(b-w)*(m-_),C=(M-S)*(y-m)-(x-_)*(b-w),D=A/C,P=T/C;if(C===0&&A!==0||D<=0||D>=1||P<0||P>1)return null;if(A===0&&C===0){for(let E=0;E<2;E++)if(i(E===0?v:g,f,p),t.loc===e.ORIGIN){let O=E===0?v:g;return{x:O.x,y:O.y,t:t.t}}else if(t.loc===e.BETWEEN){let O=+(m+t.t*(y-m)).toPrecision(10),z=+(w+t.t*(b-w)).toPrecision(10);return{x:O,y:z,t:t.t}}return null}else{for(let z=0;z<2;z++)if(i(z===0?v:g,f,p),t.loc===e.ORIGIN){let B=z===0?v:g;return{x:B.x,y:B.y,t:t.t}}let E=+(m+D*(y-m)).toPrecision(10),O=+(w+D*(b-w)).toPrecision(10);return{x:E,y:O,t:D}}}function i(f,p,v){let g=v.x-p.x,m=v.y-p.y,y=f.x-p.x,_=f.y-p.y,x=g*_-y*m;if(f.x===p.x&&f.y===p.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===v.x&&f.y===v.y){t.loc=e.DESTINATION,t.t=1;return}if(x<-Number.EPSILON){t.loc=e.LEFT;return}if(x>Number.EPSILON){t.loc=e.RIGHT;return}if(g*y<0||m*_<0){t.loc=e.BEHIND;return}if(Math.sqrt(g*g+m*m)<Math.sqrt(y*y+_*_)){t.loc=e.BEYOND;return}let w;g!==0?w=y/g:w=_/m,t.loc=e.BETWEEN,t.t=w}function n(f,p){let v=[],g=[];for(let m=1;m<f.length;m++){let y=f[m-1],_=f[m];for(let x=1;x<p.length;x++){let w=p[x-1],b=p[x],S=r(y,_,w,b);S!==null&&v.find(M=>M.t<=S.t+Number.EPSILON&&M.t>=S.t-Number.EPSILON)===void 0&&(v.push(S),g.push(new re(S.x,S.y)))}}return g}function a(f,p,v){let g=new re;p.getCenter(g);let m=[];return v.forEach(y=>{y.boundingBox.containsPoint(g)&&n(f,y.points).forEach(_=>{m.push({identifier:y.identifier,isCW:y.isCW,point:_})})}),m.sort((y,_)=>y.point.x-_.point.x),m}function o(f,p,v,g,m){(m==null||m==="")&&(m="nonzero");let y=new re;f.boundingBox.getCenter(y);let _=[new re(v,y.y),new re(g,y.y)],x=a(_,f.boundingBox,p);x.sort((T,C)=>T.point.x-C.point.x);let w=[],b=[];x.forEach(T=>{T.identifier===f.identifier?w.push(T):b.push(T)});let S=w[0].point.x,M=[],A=0;for(;A<b.length&&b[A].point.x<S;)M.length>0&&M[M.length-1]===b[A].identifier?M.pop():M.push(b[A].identifier),A++;if(M.push(f.identifier),m==="evenodd"){let T=M.length%2===0,C=M[M.length-2];return{identifier:f.identifier,isHole:T,for:C}}else if(m==="nonzero"){let T=!0,C=null,D=null;for(let P=0;P<M.length;P++){let E=M[P];p[E]&&(T?(D=p[E].isCW,T=!1,C=E):D!==p[E].isCW&&(D=p[E].isCW,T=!0))}return{identifier:f.identifier,isHole:T,for:C}}else console.warn('fill-rule: "'+m+'" is currently not implemented.')}let s=0,l=999999999,u=-999999999,h=[];this.subPaths.forEach(f=>{let p=f.getPoints(),v=-999999999,g=999999999,m=-999999999,y=999999999;for(let _=0;_<p.length;_++){let x=p[_];x.y>v&&(v=x.y),x.y<g&&(g=x.y),x.x>m&&(m=x.x),x.x<y&&(y=x.x)}u<=m&&(u=m+1),l>=y&&(l=y-1),p.length&&h.push({curves:f.curves,points:p,isCW:YU.isClockWise(p),identifier:s++,boundingBox:new Gre(new re(y,g),new re(m,v))})});let c=h.map(f=>{var p;return o(f,h,l,u,(p=this.userData)==null?void 0:p.style.fillRule)}),d=[];return h.forEach(f=>{let p=c[f.identifier];if(p&&!p.isHole){let v=new m1;v.curves=f.curves,c.filter(g=>(g==null?void 0:g.isHole)&&g.for===f.identifier).forEach(g=>{if(g){let m=h[g.identifier],y=new g1;y.curves=m.curves,v.holes.push(y)}}),d.push(v)}}),d}},_R=new Promise(e=>{}),Vpe=class{async load(e,t,r=()=>{}){let{load:i}=await _R;i(e,(n,a)=>{n||!a?r(n??"Something went wrong"):t(a)})}async parse(e){let{parse:t,Bidi:r}=await _R;try{let i=t(e),n=new r,a=o=>i.charToGlyphIndex(o.char);return n.registerModifier("glyphIndex",null,a),n.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:n}}catch(i){console.error(i)}}};async function Upe(e){return await(await fetch(e)).arrayBuffer()}var Gpe=new Vpe;async function xR(e){let t,r,i=!1;if(e.url?(t=await Upe(e.url),r=e.url,i=e.url.startsWith("/")):e.data&&(t=e.data.buffer),t){let n=await Gpe.parse(t);if(n)return{font:n.font,url:r,intercepted:i,arr:t,bidi:n.bidi}}}function Hpe(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var jpe=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=xR(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=xR(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,r){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(t);let n=i.tokenizer.tokens,a=[],o=0,s=r.length===n.length;for(let l=0;l<r.length;l++){let u=r[l].index,h=String.fromCharCode(r[l].unicode),c=n[o];if(Hpe(u,c)||s)a.push({char:h,index:u,replacements:[c.state.glyphIndex],replacementChars:[c.char]}),o++;else{let d=c.char,f="",p=[c.state.glyphIndex],v=[],g=!1;for(;!g;)o++,f=t.charAt(o),d+=f,p.push(e.charToGlyphIndex(f)),v=e.stringToGlyphs(d),v.length===1&&v[0].index===u&&(g=!0),o>t.length&&(g=!0);a.push({char:h,index:u,replacements:p,replacementChars:Array.from(d)}),o++}}return a}generateShapes(e,t){if(!this._isLoaded)return;let r=this.font,i=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,a=e.map(m=>this.getTextWidth(m,t)),o=t.width,s=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?s:0,u=this.computeSpaceWidthForLine(e,0,t),h=this.getLineInitialOffsetX(a[0],o,t.horizontalAlign,e[0],s),c=this.getLineInitialOffsetY(n,e.length,t.height,i,t.verticalAlign),d=[],f=e.map(m=>[]),p=e.map(m=>[]),v;for(let m=0;m<e.length;m++){let y=e[m],_={features:{liga:!0}},x=[];try{x=r.stringToGlyphs(y,_)}catch(b){console.warn(b)}h=this.getLineInitialOffsetX(a[m],o,t.horizontalAlign,y,s);let w=[];try{w=this.reverseLigaturesTable(r,y,x)}catch(b){console.warn(b)}u=this.computeSpaceWidthForLine(e,m,t);for(let b=0;b<x.length;b++){let S=x[b],M=S.index===0?`
`:S.unicode?String.fromCharCode(S.unicode):void 0,A=w[b],T=0,C=0;b===0&&t.horizontalAlign===2&&S.leftSideBearing!==void 0&&(C=-S.leftSideBearing*i),v&&(T=r.getKerningValue(S,v)*i),h+=C+T;let D=0;if(M===`
`)D=l;else if(M===" ")D=u;else{let P=this.createPath(S,i,h,c,t);P&&(D=P.offsetX-(T+C),d.push(P.path))}if(A.replacements.length===1)p[m].push([h,c]),f[m].push(D);else{let P=A.replacements.map(B=>(r.glyphs.get(B).advanceWidth??0)*i),E=P.reduce((B,N)=>B+=N,0),O=P.map(B=>B/E),z=h;for(let B=0;B<O.length;B++){let N=D*O[B];p[m].push([z,c]),f[m].push(N),z+=N}}h+=D,v=S}c-=n}let g=[];for(let m=0,y=d.length;m<y;m++)g.push(...d[m].toShapes());return{shapes:g,charWidths:f,lineWidths:a,charCoords:p}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,r,i,n){return(r===3||r===2)&&i.indexOf(`
`)>=0&&(e-=n),r===3?t*.5-e*.5:r===2?t-e:0}getLineInitialOffsetY(e,t,r,i,n){let a=t*e,o=Math.abs(this.ascender-this.descender)*i,s=e-o,l=-this.ascender*i-s/2;return n===3?-(r-a-l):n===2?-(r*.5-a*.5-l):l}createPath(e,t,r,i,n){var l;let a=e.getPath(r,-i,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!a){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let o=new Fpe,s=(e.advanceWidth??1)*t;if(e)for(let u of a.commands){let h=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(h&&u.type!=="Z"&&h.x===u.x&&-h.y===u.y))switch(u.type){case"M":o.moveTo(u.x,-u.y);break;case"L":o.lineTo(u.x,-u.y);break;case"Q":o.quadraticCurveTo(u.x1,-u.y1,u.x,-u.y);break;case"C":o.bezierCurveTo(u.x1,-u.y1,u.x2,-u.y2,u.x,-u.y);break}}return o.subPaths.forEach(u=>{let h=Wpe(u.curves);h!==void 0&&u.currentPoint.distanceTo(h)>0&&u.lineTo(h.x,h.y)}),{offsetX:s+n.fontSize*n.letterSpacing,path:o}}getCharWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,r){let i=this.getCharWidth(" ",r),n=e[t];if(n){let a=this.countSpaces(n.trimEnd());if(r.horizontalAlign===4&&t<e.length-1&&a){let o=r.width,s=this.getTextWidth(n,r);return(o-(s-a*i))/a}}return i}countSpaces(e){return(e.match(/ /g)||[]).length}};function Wpe(e){if(e.length){let t=e[0];if(t instanceof _a)return t.v1;if(t instanceof da||t instanceof Ol)return t.v0}}var $pe=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t){let r=this.objects.get(e);return r===void 0?(r=this.createObject(e,t),this.objects.set(e,r)):r.isShared=!0,r}mutateIfUnique(e,t){let r=this.objects.get(e);if(r&&r.isShared!==!0)return this.objects.delete(e),this.objects.set(t,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let r=this.objects.get(e);t===r&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},bR=class extends $pe{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t){let r=X1(e,t,this.flatShading);return r.computeBoundingSphere(),r}},qpe={find(e){},markNeedsUpdateRendererDirty:function(){},markGeometryCacheDirty:function(){},addPendingExpandCloner:function(e){},addPendingUpdateCloner(e){},addPendingCommand(e){}},Xpe=class extends mpe{constructor(e){super(),this.shared=e}create(e){return new f6(e,this.shared)}},x6=class{constructor(e,t={}){if(this.geometryCache=new bR(!0),this.geometryCache2=new bR(!1),this.imageHolderCache=new Xpe(this),this.thisContext={scene:qpe,shared:this},this.deletedMaterial=new kT(ch.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new Ku(H1.emptyImage,this),this.deletedVideo=new Ku(R1.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[r,i]of Object.entries(t.images))this.addImage(r,i);if(t.videos)for(let[r,i]of Object.entries(t.videos))this.addVideo(r,i);if(t.audios)for(let[r,i]of Object.entries(t.audios))this.addAudio(r,i.data);this.reset(e)}setRequestRender(e){this._requestRender=e}reset(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,new kT(r,this.thisContext));for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.data);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r);this.penumbraSize=e.penumbraSize}addMaterial(e,t){t.uuid=e,this.materials[e]?(this.materials[e].reset(t.data,this.thisContext),t.dispose()):this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):new _6(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Ku(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Ku(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new Y1(t.r,t.g,t.b,t.a):this.colors[e]=new Y1(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let r=this.colors[e];return this.colors[e].r=t.r??r.r,this.colors[e].g=t.g??r.g,this.colors[e].b=t.b??r.b,this.colors[e].a=t.a??r.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new sn(0,0,0,0))}else return"a"in e?new sn(e.r,e.g,e.b,e.a):new sn(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof Ip)return t;{let r=new Ip({src:t});return this.audios[e]=r,r}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof Ip&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new jpe(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof Ip&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}};new x6(xT.emptyData());var Ig=class extends As{updateByPatchedOp(e,t,r){if(super.updateByPatchedOp(e,t,r),Sce(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[i,n]of Object.entries(e.props)){let a=r.shared.material(n);this.material[Number(i)]=a}else if(al(e.path,["material"])&&this.material instanceof Rl)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(nn.drop(e,1),t.material,r);else if(al(e.path,["materials","*"])&&Array.isArray(this.material)){let i=e.path[1];if("materials"in t&&i<this.material.length){let n=t.materials[i];typeof n!="string"&&this.material[i].updateByOp(nn.drop(e,2),n,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var i,n,a,o,s;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let r=this.dataPatched;if(((i=e.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe),(n=t.scene)==null||n.markNeedsUpdateRendererDirty()),((a=e.geometry)==null?void 0:a.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(l=>t.shared.material(l).getFlavor(r.flatShading,r.side,r.wireframe)),(o=t.scene)==null||o.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe)],(s=t.scene)==null||s.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let l=0;l<this.material.length;l++)this.material[l]=this.material[l].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe)}disposeMaterial(){this.material&&EG(this.material).forEach(e=>{e instanceof Rl&&(e instanceof kT||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},ms=class extends Ig{constructor(e,t,r){super(e,t),this.data=t,this.localGeometry=void 0}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Ke&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof x6){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return k1.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return k1.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),al(e.path,["geometry"])&&this.updateByPatchedOpGeometry(nn.drop(e,1),t.geometry,r)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var i;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let u={...this.data.geometry,...n};this.localGeometry=X1(u,t,this.data.flatShading)}let a,o,s;n.scaleBaked?[a,o,s]=n.scaleBaked:{width:a,height:o,depth:s}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&IT(this.localGeometry.attributes,a/l.sxPrev,o/l.syPrev,s/l.szPrev),l.sxPrev=a,l.syPrev=o,l.szPrev=s}else{let n={...this.data.geometry,...e};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=X1(n,t,this.data.flatShading)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,r){var n;let i=!1;e.type===0&&e.path.length===0&&VD(["scaleBaked"],Object.keys(e.props))&&this.geometryCreateDeleyed instanceof mi&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),i||((n=r.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,r.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}};function Ype(e){var o,s;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,r=e.geometry.attributes,i=r.position.array,n=r.normal.array,a=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let u=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=new L(n[l],n[l+1],n[l+2]);t.has(u)?(o=t.get(u))==null||o.normals.push(h):t.set(u,{normals:[h],result:new L})}t.forEach((l,u)=>{for(let h of l.normals)l.result.add(h);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let u=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=(s=t.get(u))==null?void 0:s.result;h&&(a[l]=h.x,a[l+1]=h.y,a[l+2]=h.z)}e.geometry.setAttribute("extrudeNormal",new Le(a,3))}function Zpe(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=new L;for(let n=0;n<t.length;n+=3)i.set(t[n],t[n+1],t[n+2]).normalize(),r[n]=i.x,r[n+1]=i.y,r[n+2]=i.z;e.geometry.setAttribute("extrudeNormal",new Le(r,3))}function uP(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof Rl)||e.material.getLayersOfType("outline").length===0)return;e instanceof ms&&e.is2DAndNoDepth?Zpe(e):Ype(e)}function hP(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),n=[pt.seededRandom(i),pt.seededRandom(i+1e4),pt.seededRandom(i+2e4)];for(let a=0;a<t.length;a++)r[a]=n[a%3];e.geometry.setAttribute("randomColor",new ft(r,3))}nP.then(e=>{});var Ba=new wr,Wf=new L,K1=class extends ms{constructor(e,t,r){super(e,t,r),this.data=t,this.hiddenMatrixOld=new ye,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var a,o,s;if(this.skipReactionUpdate===!0)return;let t=(a=this.localGeometry)==null?void 0:a.uuid,{originalGeometry:r,subdividedGeometry:i,subdivPointer:n}=mi.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,r!==void 0&&((o=this.originalGeometry)==null||o.dispose(),this.originalGeometry=r),i!==void 0&&((s=this.subdividedGeometry)==null||s.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,uP(this),hP(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let r=this.material;this.material=r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){mi.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&mi.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=mi.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=mi.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,As.prototype.raycast.call(this,e,t),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Vn,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;Ba.setFromBufferAttribute(t),Ba.getCenter(r),e.boundingSphere.radius=r.distanceTo(Ba.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Ba.getSize(Wf),this.hasNonUniformScale&&Wf.divide(this.scale);let i={width:Wf.x,height:Wf.y,depth:Wf.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(e){let t=this.originalGeometry;Ba.min.set(e[0],e[2],e[4]),Ba.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Ba.min.applyMatrix4(this.shearScaleInv),Ba.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Vn);let r=t.boundingSphere.center;Ba.getCenter(r),t.boundingSphere.radius=r.distanceTo(Ba.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(mi.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),this.localGeometry&&this.createGeometryByControls(t)}},wR=-1,Kpe=1,Jpe={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},Qpe={polygon_center:0,edge:1,vertex:2},oy=(e,t)=>(r,i)=>!t||r===0||e===0?0:e*i/100,Ye=(e,t)=>{let r=Math.abs(t),i=r*-1;return(e-wR)*(r-i)/(Kpe-wR)+i};function eve(e){let t=[],r={};for(var i=0,n=e.length;i<n;i++){var a=JSON.stringify(e[i].pos.map(o=>Math.round(o*1e4)/1e4));r[a]||(t.push(e[i]),r[a]=!0)}return t}var tve=new L,sy=new L,rve=new L,ive=new L;function vd(e,t){let r=rve.fromArray(e),i=ive.fromArray(t);sy.copy(i).sub(r);let n=sy.length();return sy.normalize().multiplyScalar(n*.5),tve.copy(r).add(sy).toArray()}var Dn=new Ni,ly=new L,J1=new L,Wu=new L;function nve(e){let t=[];for(let r=0;r<=e.index.count;r++)if(ly.fromArray(e.index.array,r*3),Dn.setFromAttributeAndIndices(e.attributes.position,ly.x,ly.y,ly.z),Dn.getNormal(J1),Dn.getMidpoint(Wu),!(isNaN(Wu.x)||isNaN(Wu.y)||isNaN(Wu.z))){let{a:i,b:n,c:a}=Dn,o=i.toArray(),s=n.toArray(),l=a.toArray(),u=i.distanceTo(n),h=n.distanceTo(a),c=a.distanceTo(i),d=vd(o,s),f=vd(s,l),p=vd(l,o),v=[u,h,c],g=Math.max(...v),m=v.filter(x=>Math.round(x)===Math.round(g)).length>1,y=[],_=Dn.getMidpoint(Wu).toArray();g===u&&!m&&(y=[f,p,p],_=d),g===h&&!m&&(y=[d,p,p],_=f),g===c&&!m&&(y=[d,f,f],_=p),m&&(y=[d,f,p]),t.push({vertices:[o,s,l],faceCenters:y,midpoint:_,norm:Dn.getNormal(J1).toArray()})}return t}function ave(e){let t=[],{position:r}=e.attributes;for(let i=0;i<r.count;i++){Dn.setFromAttributeAndIndices(r,i*3,i*3+1,i*3+2),Dn.getNormal(J1),Dn.getMidpoint(Wu);let n=Dn.a.toArray(),a=Dn.b.toArray(),o=Dn.c.toArray();t.push({vertices:[n,a,o],faceCenters:[vd(n,a),vd(a,o),vd(o,n)],midpoint:Wu.toArray(),norm:J1.toArray()})}return t}var ove=4,sve=.5,Nw=e=>.5*(1-Math.cos(e*Math.PI)),lve=class{constructor(){this.perlin=new Array(4095+1)}noise(e,t=0,r=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);let i=Math.floor(e),n=Math.floor(t),a=Math.floor(r),o=e-i,s=t-n,l=r-a,u,h,c=0,d=.5,f,p,v;for(let g=0;g<ove;g++){let m=i+(n<<4)+(a<<8);u=Nw(o),h=Nw(s),f=this.perlin[m&4095],f+=u*(this.perlin[m+1&4095]-f),p=this.perlin[m+16&4095],p+=u*(this.perlin[m+16+1&4095]-p),f+=h*(p-f),m+=256,p=this.perlin[m&4095],p+=u*(this.perlin[m+1&4095]-p),v=this.perlin[m+16&4095],v+=u*(this.perlin[m+16+1&4095]-v),p+=h*(v-p),f+=Nw(l)*(p-f),c+=f*d,d*=sve,i<<=1,o*=2,n<<=1,s*=2,a<<=1,l*=2,o>=1&&(i++,o--),s>=1&&(n++,s--),l>=1&&(a++,l--)}return c}noiseSeed(e){let t=(()=>{let r,i;return{setSeed(n){i=r=(n??Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();t.setSeed(e),this.perlin=new Array(4095+1);for(let r=0;r<4095+1;r++)this.perlin[r]=t.rand()}},uve=lve,SR=new L,MR=new ye,TR=new qd,b6=class extends ms{constructor(e,t,r){super(e,t,r),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:r}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(MR.copy(r).invert(),TR.copy(e.ray).applyMatrix4(MR),TR.intersectBox(this.singleBBox,SR))){let i=SR.applyMatrix4(r),n=e.ray.origin.distanceTo(i);t.push({distance:n,point:i.clone(),object:this})}}},hi=1e-4,Fa,w6,S6,M6,AR=new L,CR=new L;nP.then(e=>{Fa=e,w6=[Fa.get_face_center,Fa.get_edge_midpoint,Fa.get_vertex_position],S6=[Fa.get_face_normal,Fa.get_edge_normal,Fa.get_vertex_normal],M6=[Fa.face_count,Fa.edge_count,Fa.vertex_count]});var hve=new ye,cve=new ye,Bs=new L,nu=new L,$f=new L,kw=new L,dve=new L,fve=new L,Bo=new uve,BT=class extends JD(Wt){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof hl&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof hl&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){for(let i=0,n=this.children.length;i<n;++i)this.remove(this.children[0]);let r=this.children;if(r.length===t)return;if(r.length<t)for(let i=0,n=t-r.length;i<n;++i){let a=new hl(this.object);a.expand(),this.add(a)}else for(let i=0,n=r.length-t;i<n;++i)this.remove(r[i])}else{if(this.children.length===t)return;if(this.children.length<t)for(let r=0,i=t-this.children.length;r<i;++r){let n=new hl(this.object);n.expand(),this.add(n)}else for(let r=0,i=this.children.length-t;r<i;++r)this.remove(this.children[0])}}_updateRadial(e){let t=e.radial,r=t.start*pt.DEG2RAD,i=t.end*pt.DEG2RAD,n=r-i,a=new zi(t.rotation[0],t.rotation[1],t.rotation[2]),o;switch(t.axis){case"z":o=new L(0,0,1);break;case"y":o=new L(0,1,0);break;default:case"x":o=new L(1,0,0);break}let s=e.randomnessObject??ul.defaultData([1,1,1]).randomnessObject,l=s.noiseType==="perlin";Bo.noiseSeed(s.seed);let u=xw((0,Bf.default)(s.seed)),h=oy(s.strength,this.parameters.randomness);for(let[c,d]of this.children.entries()){let f=c*(s.freqScale/10)+s.movement,p=l?Bo.noise(f):u(f,f);d.scale.x=t.scale[0]+h(c,Ye(p,s.scale[0]))||hi,d.scale.y=t.scale[1]+h(c,Ye(p,s.scale[1]))||hi,d.scale.z=t.scale[2]+h(c,Ye(p,s.scale[2]))||hi,d.position.setScalar(0);let v=n/e.count*c-r;switch(t.axis){case"x":d.rotation.set(0,v,0);break;case"y":d.rotation.set(0,0,v);break;case"z":d.rotation.set(v,0,0);break}d.translateOnAxis(o,t.radius),d.position.x+=t.position[0]+h(c,Ye(p,s.position[0])),d.position.y+=t.position[1]+h(c,Ye(p,s.position[1])),d.position.z+=t.position[2]+h(c,Ye(p,s.position[2]));let g=h(c,Ye(p,s.rotation[0])),m=h(c,Ye(p,s.rotation[1])),y=h(c,Ye(p,s.rotation[2]));t.alignment===!0?(d.rotation.x+=a.x+g,d.rotation.y+=a.y+m,d.rotation.z+=a.z+y):d.rotation.set(a.x+g,a.y+m,a.z+y)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new zi(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??ul.defaultData([1,1,1]).randomnessObject,n=i.noiseType==="perlin";Bo.noiseSeed(i.seed);let a=xw((0,Bf.default)(i.seed)),o=oy(i.strength,this.parameters.randomness);for(let[s,l]of this.children.entries()){let u=s*(i.freqScale/10)+i.movement,h=n?Bo.noise(u):a(u,u),c=o(s,Ye(h,i.rotation[0])),d=o(s,Ye(h,i.rotation[1])),f=o(s,Ye(h,i.rotation[2]));l.scale.x=1+(t.scale[0]-1)*s+o(s,Ye(h,i.scale[0]))||hi,l.scale.y=1+(t.scale[1]-1)*s+o(s,Ye(h,i.scale[1]))||hi,l.scale.z=1+(t.scale[2]-1)*s+o(s,Ye(h,i.scale[2]))||hi,l.rotation.x=r.x*s+c,l.rotation.y=r.y*s+d,l.rotation.z=r.z*s+f,l.position.x=t.position[0]*s+o(s,Ye(h,i.position[0])),l.position.y=t.position[1]*s+o(s,Ye(h,i.position[1])),l.position.z=t.position[2]*s+o(s,Ye(h,i.position[2]))}}_updateGrid(e){let t=0,r=e.grid,i=e.randomnessObject??ul.defaultData([1,1,1]).randomnessObject,n=oy(i.strength,this.parameters.randomness),a=i.noiseType==="perlin";Bo.noiseSeed(i.seed);let o=cde((0,Bf.default)(i.seed));if(r.useCenter===!0){let s={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},l=new L(r.size[0]*(r.count[0]-s.x)*.5,r.size[1]*(r.count[1]-s.y)*.5,r.size[2]*(r.count[2]-s.z)*.5);for(let u=0;u<r.count[0];u++)for(let h=0;h<r.count[1];h++)for(let c=0;c<r.count[2];c++){let d=[(u+1)*(i.freqScale/10)+i.movement,(h+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement],f=a?Bo.noise(...d):o(...d),p=this.children[t++];p.scale.x=1+n(t,Ye(f,i.scale[0]))||hi,p.scale.y=1+n(t,Ye(f,i.scale[1]))||hi,p.scale.z=1+n(t,Ye(f,i.scale[2]))||hi;let v=n(t,Ye(f,i.rotation[0])),g=n(t,Ye(f,i.rotation[1])),m=n(t,Ye(f,i.rotation[2]));p.rotation.set(v,g,m),p.position.x=r.size[0]*u-l.x+n(t,Ye(f,i.position[0])),p.position.y=r.size[1]*h-l.y+n(t,Ye(f,i.position[1])),p.position.z=r.size[2]*c-l.z+n(t,Ye(f,i.position[2]))}}else for(let s=0;s<r.count[0];s++)for(let l=0;l<r.count[1];l++)for(let u=0;u<r.count[2];u++){let h=[(s+1)*(i.freqScale/10)+i.movement,(l+1)*(i.freqScale/10)+i.movement,(u+1)*(i.freqScale/10)+i.movement],c=a?Bo.noise(...h):o(...h),d=this.children[t++];d.scale.x=1+n(t,Ye(c,i.scale[0]))||hi,d.scale.y=1+n(t,Ye(c,i.scale[1]))||hi,d.scale.z=1+n(t,Ye(c,i.scale[2]))||hi;let f=n(t,Ye(c,i.rotation[0])),p=n(t,Ye(c,i.rotation[1])),v=n(t,Ye(c,i.rotation[2]));d.rotation.set(f,p,v),d.position.x=r.size[0]*s+n(t,Ye(c,i.position[0])),d.position.y=-r.size[1]*l+n(t,Ye(c,i.position[1])),d.position.z=-r.size[2]*u+n(t,Ye(c,i.position[2]))}}_updateToObject(e){var v;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,r=new zi(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??ul.defaultData([1,1,1]).randomnessObject,n=i.noiseType==="perlin";Bo.noiseSeed(i.seed);let a=xw((0,Bf.default)(i.seed)),o=oy(i.strength,this.parameters.randomness);if(!t.object){for(let[,g]of this.children.entries())g.position.set(0,0,0),g.scale.setScalar(1),g.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof b6)if(!((v=this.objectForSample.font)!=null&&v.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let s=this.getSubdivData(),l=[],u=g=>{let m=g.length,y=g.map(w=>w[0]).reduce((w,b)=>w+b,0),_=g.map(w=>w[1]).reduce((w,b)=>w+b,0),x=g.map(w=>w[2]).reduce((w,b)=>w+b,0);return[y/m,_/m,x/m]},h=g=>Math.round(g*1e6)/1e6;s.forEach(g=>{let m=s.filter(y=>h(g.pos[0])===h(y.pos[0])&&h(g.pos[1])===h(y.pos[1])&&h(g.pos[2])===h(y.pos[2]));m.length>1?l.push({pos:g.pos,norm:u(m.map(y=>y.norm))}):l.push(g)});let c=eve(l);if(s.length>0){let g=Math.round(c.length*t.count/100);this._updateCount(g)}this.objectForSample.updateMatrixWorld();let d=new dde(this.objectForSample).build(),f=Jpe[t.axis],p=this.children;d.setRandomGenerator((0,Bf.default)(this.object.uuid+t.seed));for(let[g,m]of p.entries()){let y=g*(i.freqScale/10)+i.movement,_=n?Bo.noise(y):a(y,y),x=o(g,Ye(_,i.rotation[0])),w=o(g,Ye(_,i.rotation[1])),b=o(g,Ye(_,i.rotation[2]));t.spreadType==="random"?d.sample($f,kw):(c.length&&($f.fromArray(c[g].pos),kw.fromArray(c[g].norm)),this.objectForSample instanceof K1&&$f.applyMatrix4(hve.copy(this.objectForSample.matrixWorld).invert())),$f.applyMatrix4(this.object.hiddenMatrix.clone().invert()),m.position.copy($f),Bs.fromArray(f);let S=t.align==="normal"?kw:this.object.getWorldDirection(fve),M=nu.fromArray(t.position);nu.x+=nu.x+o(g,Ye(_,i.position[0])),nu.y+=nu.y+o(g,Ye(_,i.position[1])),nu.z+=nu.z+o(g,Ye(_,i.position[2]));let A=Math.acos(S.dot(Bs)),T=dve.crossVectors(Bs,S).normalize(),C=cve.makeRotationAxis(T,A),D=S.clone().cross(this.object.up).normalize(),P=D.clone().cross(S).normalize(),E=new ye().makeBasis(D,S,P),O=new L(Bs.y,Bs.z,Bs.x).normalize(),z=O.clone().cross(Bs).normalize(),B=new ye().makeBasis(O,Bs,z).invert(),N=new ye().multiplyMatrices(E,B);m.rotation.setFromRotationMatrix(N),M.applyMatrix4(C),m.position.add(M),m.rotation.x=m.rotation.x+r.x+x,m.rotation.y=m.rotation.y+r.y+w,m.rotation.z=m.rotation.z+r.z+b,m.scale.setScalar(1),m.scale.x=m.scale.x+t.scale[0]+o(g,Ye(_,i.scale[0]))||hi,m.scale.y=m.scale.y+t.scale[1]+o(g,Ye(_,i.scale[1]))||hi,m.scale.z=m.scale.z+t.scale[2]+o(g,Ye(_,i.scale[2]))||hi,m.scale.multiply(this.object.scale),m.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof K1){let t=this.objectForSample,r=Qpe[e],i=M6[r],n=w6[r],a=S6[r],o=[],s=i(t.subdivPointerNew);for(let l=0;l<=s-1;l++){let u=n(t.subdivPointerNew,l),h=a(t.subdivPointerNew,l);AR.fromArray(u).applyMatrix4(t.matrixWorld),CR.fromArray(h),o.push({pos:AR.toArray(),norm:CR.toArray()})}return o}else return(this.objectForSample.geometry.index?nve(this.objectForSample.geometry):ave(this.objectForSample.geometry)).map((t,r)=>e==="polygon_center"?{pos:t.midpoint,norm:t.norm}:e==="vertex"?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:e==="edge"?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){var r;if(this.parameters=yx(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(r=this.object.parent)==null||r.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let i=t.find(this.parameters.toObject.object);i instanceof As?this.objectForSample=i:this.objectForSample=void 0,this.matrix=new ye,this.hiddenMatrix=new ye,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Og=e=>{var t;return t=class extends e{},t.geometryHelper=new Ah(30,30,30),t},uy=new qd,Bw=new Vn,DR=new ye,Rg=(e,t,r,i,n=!1)=>{let a=t,o=e.matrixWorld;if(a.boundingSphere===null&&a.computeBoundingSphere(),Bw.copy(a.boundingSphere),Bw.applyMatrix4(o),r.ray.intersectsSphere(Bw)===!1||(DR.copy(o).invert(),uy.copy(r.ray).applyMatrix4(DR),a.boundingBox!==null&&uy.intersectsBox(a.boundingBox)===!1))return;let s,l,u,h,c=a.index,d=a.attributes.position,f=a.drawRange,p,v;if(n===!1){let m=Math.max(0,f.start),y=Math.min(c.count,f.start+f.count);for(p=m,v=y;p<v;p+=3)if(l=c.getX(p),u=c.getX(p+1),h=c.getX(p+2),s=g(e,r,uy,d,l,u,h),s){s.faceIndex=Math.floor(p/3),i.push(s);return}}else{let m=a.attributes.position,y=new L,_=new L,x=new L,w=new L,b=2,S=1/((e.scale.x+e.scale.y+e.scale.z)/3),M=S*S,A=Math.max(0,f.start),T=Math.min(m.count,f.start+f.count);for(let C=A,D=T-1;C<D;C+=b){if(y.fromBufferAttribute(m,C),_.fromBufferAttribute(m,C+1),uy.distanceSqToSegment(y,_,w,x)>M)continue;w.applyMatrix4(e.matrixWorld);let P=r.ray.origin.distanceTo(w);P<r.near||P>r.far||i.push({distance:P,point:x.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(m,y,_,x,w,b,S){let M=new L,A=new L,T=new L,C=new L,D=new L;if(M.fromBufferAttribute(x,w),A.fromBufferAttribute(x,b),T.fromBufferAttribute(x,S),_.intersectTriangle(M,A,T,!1,C)===null)return null;D.copy(C),D.applyMatrix4(m.matrixWorld);let P=y.ray.origin.distanceTo(D);return P<y.near||P>y.far?null:{faceIndex:1,distance:P,point:D.clone(),object:m}}},hy=new L,pn=new Yd,pve=class extends Dg{constructor(e){let t=new Ke,r=new Bh({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={},o=new Qe(15711266),s=new Qe(15711266),l=new Qe(2857471);u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l);function u(c,d,f){h(c,f),h(d,f)}function h(c,d){i.push(0,0,0),n.push(d.r,d.g,d.b),a[c]===void 0&&(a[c]=[]),a[c].push(i.length/3-1)}t.setAttribute("position",new Le(i,3)),t.setAttribute("color",new Le(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;pn.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;Jn("n1",t,e,pn,-r,-i,n),Jn("n2",t,e,pn,r,-i,n),Jn("n3",t,e,pn,-r,i,n),Jn("n4",t,e,pn,r,i,n);let a=n;Jn("f1",t,e,pn,-r,-i,a),Jn("f2",t,e,pn,r,-i,a),Jn("f3",t,e,pn,-r,i,a),Jn("f4",t,e,pn,r,i,a);let o=a,s=.5;Jn("u1",t,e,pn,r*.7*s,i*1.1,o),Jn("u2",t,e,pn,-r*.7*s,i*1.1,o),Jn("u3",t,e,pn,0,i*(1.1+.9*s),o),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Jn(e,t,r,i,n,a,o){hy.set(n,a,o).unproject(i);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,h=s.length;u<h;u++)l.setXYZ(s[u],hy.x,hy.y,hy.z)}}var vve=class extends Og(pve){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Rg(this.object,this.geometry,e,t,!0)}},FT;(e=>e.is=t=>"objectHelper"in t)(FT||(FT={}));var Ax=(e,t)=>class extends dH(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(r,i){this.objectHelper.raycast(r,i)}showGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof _1&&(i.visible=!0)}}updateEntityBoxSize(r,i){this.objectHelper.visible&&this.geometryHelper instanceof Ah?(r.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,i)}hideGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof _1&&(i.visible=!1)}}},Fw=790,vc=new L,Vw=new L,Uw=new It,Gw=new L,qf=new L,Hw=new L,ba=class extends Ax(Yd,vve){constructor(e="",t={...B1.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Gv.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new ye,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,i=this.height;if(t.orthographic.autoZoom){let n=t.orthographic.autoZoomFrustumSize??Fw,a=r/i,o=r>i?a:1,s=r>i?1:a;this.orthoCamera=new v1(-n*.5*o,n*.5*o,n*.5*(1/s),-n*.5*(1/s),-5e4,1e4)}else this.orthoCamera=new v1(r*-.5,r*.5,i*.5,i*-.5,-5e4,1e4);this.perspCamera=new mD(45,r/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,r){typeof e=="number"&&(e=new L(e,t,r)),super.lookAt(e),this.getWorldPosition(vc),this.targetOffset=vc.distanceTo(e)}getTarget(e=new L){return this.getWorldDirection(Vw),this.getWorldPosition(vc),Vw.multiplyScalar(this.targetOffset),e.copy(vc).add(Vw),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(vc),vc.distanceTo(e)}updateUp(){this.getWorldQuaternion(Uw),Gw.set(0,0,1).applyQuaternion(Uw),qf.copy(Wt.DEFAULT_UP),this.isUpVectorFlipped&&qf.negate(),qf.applyQuaternion(Uw),Hw.copy(Wt.DEFAULT_UP).projectOnPlane(Gw),this.angleOffsetFromUp=Hw.angleTo(qf),this.angleOffsetFromUp*=Hw.cross(qf).dot(Gw)>=0?1:-1}updateTransformState(e){let t=super.updateTransformState(e);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),t}getViewFrontToObject(e){let t=e.getWorldPosition(new L),r=e.getWorldDirection(new L).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToObject(e){let t=e.getWorldPosition(new L),r=this.getWorldDirection(new L).multiplyScalar(this.targetOffset);return{position:t.clone().sub(r),target:t}}setViewplaneSize(e,t){if(this.aspect=e/t,this.data.type==="OrthographicCamera"&&this.data.orthographic.autoZoom){let r=this.data.orthographic.autoZoomFrustumSize??Fw,i=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-r*.5*i,this.right=r*.5*i,this.top=r*.5*(1/n),this.bottom=-r*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,a){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,a):this.orthoCamera.setViewOffset(e,t,r,i,n,a)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom,autoZoom:!0,autoZoomFrustumSize:Fw},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return QM(t,e)}updateCameraSubtype(e,t){let r=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(r,t.zoom),t.near!==void 0&&this.setNear(r,t.near),t.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},gc=new ye,gve=new ye,Od=class extends Ig{constructor(e,t,r){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Ke,this.onAfterRender=(i,n,a,o,s,l)=>{super.onAfterRender(i,n,a,o,s,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var i;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let n=0;n<this.children.length;n++){let a=this.children[n];a instanceof Od&&a.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let a=this.children[n];if(a instanceof As&&a.dataPatched.visible===!0&&((i=a.geometry.attributes.position)==null?void 0:i.count)>0&&a.geometry.drawRange.count>0){if(gc.multiplyMatrices(a.hiddenMatrix,a.matrix),a.booleanMeshSetAddress===-1){if((a.geometry.index??a.geometry.getAttribute("position")).count/3<15e5&&(a.booleanMeshSetAddress=el.getMeshSet(a.geometry,e===!0,t)),a.booleanMeshSetAddress===-1)return;el.transformMeshSet(a.booleanMeshSetAddress,gc),a.booleanMatrixInvOld.copy(gc).invert(),a.booleanWasTransformed=!1}else a instanceof Od&&a.needsTransformForDownstream===!0?(el.transformMeshSet(a.booleanMeshSetAddress,gc),a.needsTransformForDownstream=!1):a.booleanWasTransformed===!0&&(el.transformMeshSet(a.booleanMeshSetAddress,gve.multiplyMatrices(gc,a.booleanMatrixInvOld)),a.booleanMatrixInvOld.copy(gc).invert(),a.booleanWasTransformed=!1);this.meshSetAddresses.push(a.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Le([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return el.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new Ke,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=el.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,uP(this),hP(this)}dispose(){super.dispose(),this.geometry.dispose()}},VT;(e=>{function t(r){return jt.is(r)&&r instanceof Pg}e.is=t})(VT||(VT={}));var cP=(e,t)=>class extends Ax(e,t){updateState_Light(r,i){this.updateState_Entity(r,i),r.color!==void 0&&(this.color=i.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},$u=e=>e instanceof As,fl=e=>e!==null&&e instanceof Od,mve=e=>e instanceof ba,yve=e=>VT.is(e),PR=e=>FT.is(e),dP=class extends Og($re){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){Rg(this.object,dP.geometryHelper,e,t)}update(){}},LR=class extends Ax(BU,dP){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},T6=class extends Og(Wre){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Rg(this.object,T6.geometryHelper,e,t)}},A6=class extends Og(jre){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Rg(this.object,A6.geometryHelper,e,t)}},UT=class extends Og(Hre){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Rg(this.object,UT.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=UT._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,a=this.cone.material.length;n<a;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},C6=UT;C6._vector=new L;function _ve(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var xve=class extends cP(Bre,T6){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let n=new y1(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof y1&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&_ve(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),r&&this.update()}},bve=class extends cP(Nre,A6){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let n=new L(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),a=new L(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),o=new wr(n,a),s=new _1(o,new Qe(16755200));s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof _1){let r=this.shadow.camera,i=new L(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new L(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},ER=new L,IR=new L,OR=new It,wve=class extends cP(Rre,C6){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=pt.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let n=new y1(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof y1&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),IR.setFromMatrixPosition(this.matrixWorld),OR.setFromRotationMatrix(this.matrixWorld),ER.copy(this.up).applyQuaternion(OR).negate().multiplyScalar(this.distance),this.target.position.copy(IR).add(ER),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Sve=class extends ms{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?aP(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},fP=class extends ms{constructor(e,t,r){super(e,t,r),this._shapeId=null,this._context=r}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){var i;let e=this.data.geometry.extrusion.shape,t;if(e.type==="Custom"){let n=e.shapeId;if(n!==this._shapeId&&this.detachShape(),n){this._shapeId=n;let a=this._context.scene.find(n);a!=null&&a.data&&(a.attachedPaths.add(this),t=(i=a.geometry.userData)==null?void 0:i.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let n;switch(e.type){case"Rectangle":n=IH;break;case"Ellipse":n=iP;break;case"Polygon":n=EH;break;case"Star":n=OH;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=n.create({parameters:e}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build(),this.attachedSurfaceCloners.forEach(n=>n.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e){return super.updateTransformState(e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?aP(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},nv=class extends Ax(BU,dP){constructor(e,t,r){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,r)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let r=t.scene.data.objects.get(e.component);if(r){let i,n;for(let a of Id.rootOverrideProps)e[a]===void 0?(i===void 0&&(i={...e}),i[a]=r.data[a]):(n===void 0&&(n={}),n[a]=e[a]);return this.overrideData=n,i??e}return e}updateByOp(e,t,r,i){let n;if(this.isInstanceRoot&&!i&&(t=this.transformAssignData(t,r),e.type===0&&e.path.length===0&&this.component))for(let a of Id.rootOverrideProps)a in e.props&&e.props[a]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[a]=this.component.data[a]);super.updateByOp(n??e,t,r,i)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){this.component=e.scene.find(t.component)??null;let r=!1;if(this.component!==this.oldComponent){if(this.oldComponent){let i=0;for(let n of this.children)if(jt.is(n))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),pP(n),i+=1;else break;this.children.splice(0,i)}r=!0}this.component&&D6(e,[this.uuid],t.overrides,this,this.component,this.component,0,r),this.oldComponent=this.component}}};function pP(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let r of e.children)jt.is(r)&&pP(r)}}function RR(e,t,r,i){return e.component===t&&VD(e.identity,i)?e.overrideData===r?2:1:0}function D6(e,t,r,i,n,a,o,s){if(o>50)return!1;if(i.component!==n){if(i.component){let u=i.component.instances.indexOf(i);u>=0&&i.component.instances.splice(u,1)}n.instances.push(i),i.component=n}n instanceof nv&&n.isInstanceRoot&&n.expandInstanceChildren(e);let l=0;for(let u of n.children)if(jt.is(u)){let h=[...t,...typeof u.identity=="string"?[u.identity]:u.identity],c=F1.resolve(r,h,1),d=null,f;if(!s){let p=i.children[l];if(d=jt.is(p)?p:null,d!==null){let v=RR(d,u,c,h);f=v>=1?d.stateSelection:void 0,v!==2&&(d=null)}if(d===null&&(d=e.scene.findInstance(h)??null,d!==null)){let v=RR(d,u,c,h);if(f=v>=1?d.stateSelection:void 0,v!==2)d=null;else{let g=d.parent.children.indexOf(d);d.parent.children.splice(g,1),i.children.splice(l,0,d),d.parent===i?g<=l&&console.error("not possible"):(d.parent=i,d.matrixWorldNeedsUpdate=!0,d.resetBBoxNeedsUpdate(),d.updateVisible(),e.pendingDeletes.delete(d))}}}if(d===null){let p=c?uh.apply(u.data,c):u.data;Dh.is(p.type)&&(p={...p,type:"Empty"}),d=cl.createEntity(h,p,e),d.overrideData=c,i.add(d),i.children.splice(i.children.length-1,1),i.children.splice(l,0,d),d.updateState(d.data,e),f&&d.changeSelectedState(f,e),e.scene.registerInstanceAndSetUuid(d)}l+=1,D6(e,t,r,d,u,a,o+1,s)}if(!s){let u=l;for(;;){let h=i.children[l];if(jt.is(h))e.pendingDeletes.add(h);else break;l+=1}i.children.splice(u,l-u)}return!0}function Mve(e,t,r){let i;return t.geometry.type==="TextGeometry"?new b6(e,t,r):(t.geometry.type==="SubdivGeometry"?i=new K1(e,t,r):t.geometry.type==="PathGeometry"?i=new fP(e,t,r):t.geometry.type==="VectorGeometry"?i=new Sve(e,t,r):t.geometry.type==="BooleanGeometry"?i=new Od(e,t,r):i=new ms(e,t,r),i)}function vP(e,t,r){return t.type==="Mesh"?Mve(e,t,r):t.type==="Empty"?new LR(e,t):t.type==="PointLight"?new bve(e,t,r):t.type==="SpotLight"?new wve(e,t,r):t.type==="DirectionalLight"?new xve(e,t,r):t.type==="Component"||t.type==="Instance"?new nv(e,t,r):Dh.is(t.type)?new ba(e,t):(console.error(t),new LR(e,t))}cl.createEntity=vP;function Tve(e,t,r){let i=vP(e.identity,t,r),n=e.children,a=e.attachedPaths,o=e.parent,s=e.component,l=e.instances,u=e.overrideData,h=e.uuid,c=e.stateSelection;e.dispose();for(let d of Object.keys(e))delete e[d];Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(let d of Object.keys(i))e[d]=i[d];e.children=[...e.children,...n],e.attachedPaths=a,e.parent=o,e.component=s,e.instances=l,e.uuid=h,e.overrideData=u,e.updateState(e.data,r),c&&e.changeSelectedState(c,r),e.resetBBoxNeedsUpdate()}cl.changeEntityProptotype=Tve;cl.Cloner=BT;function Ave(e,t,r,i){e.updateByOp(t,r,i,!1)}function zR(e,t){let r=!1,i=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),r=!0,hP(e),uP(e)),i.length===0&&n.length===0&&e.layers.set(0),e instanceof Ig&&e.needsAO&&e.layers.enable(5),r}function NR(e,t){if(!t.layers)return!1;let r=!1,i=t.getLayersOfType("transmission").filter(a=>a.data.visible),n=t.getLayersOfType("outline").filter(a=>a.data.visible);return i.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),r=!0),i.length===0&&n.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),r}function Cve(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof Ig)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)zR(r,r.material[i])&&(t=!0);else zR(r,r.material)&&(t=!0)}),t}function Dve(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof Ig)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)NR(r,r.material[i])&&(t=!0);else NR(r,r.material)&&(t=!0)}),t}var Pve=new Ure,Lve=new ye,Eve=new qd;function kR(e,t,r,i=!1){let n=e.cloner;if(n)for(let a of n.children){let o=Lve.copy(a.matrixWorld).invert(),s=Eve.copy(t.ray).applyMatrix4(o),l=e.matrixWorld;s.applyMatrix4(l);let u=Pve;u.set(s.origin,s.direction),u.near=t.near,u.far=t.far;let h=u.intersectObject(e,!1);h.length>0&&r.push({...h[0],object:i?a:e})}}var Ive=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,Ove=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`;new Xd({vertexShader:Ive,fragmentShader:Ove,uniforms:{depthContrast:{value:1}}});var Rve=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((r,i)=>{let n=[i,r],a=r;for(;this._constraints.has(a);)a=this._constraints.get(a),t.has(a)||n.push(a);for(let o=n.length-2;o>=0;o--)if(!t.has(n[o])){let s=e.find(n[o]);s?s.applyPathSnapping(e):console.warn(`missing entity ${n[o]}`),t.add(n[o])}})}findDependency(e,t){let r=e;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===t)return!0;return!1}},zve=new Ag;zve.wireframe=!0;var BR=new L,P6=class extends VU{constructor(e,t){super(),this.data=e,this.backupFog=new FU(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.occlusion=!1,this.aoFullRes=!1,this.radius=128,this.bias=.5,this.aoColor={r:0,g:0,b:0},this.geometryCacheChanged=!1,this.bgColor=new sn(1,1,1,1),this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new Rve,this.needsRecomputeInstances=!1,this.ambientLight=new Ire(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=e.postprocessing,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=Dve(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=Cve(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),r=this.entityIdentityToEntity[t];r&&(e.uuid=r.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],i=t;for(;i!==this;){let n=i;i=i.parent;let a=i.children.indexOf(n);r.splice(0,0,a)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(i)}return t.sort((r,i)=>sce(r.sortKey,i.sortKey)),t.map(r=>r.entity)}nonExistOrDescendantOf(e,t){let r=this.find(e);if(r===void 0)return!0;for(;r;){if(r.uuid===t)return!0;r=r.parent}return!1}find(e){if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateTreeByOp(e,t){var r;if(e.path.length===0&&e.type===7){let i=e.parent===null?this:this.find(e.parent);if(i===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,i,e.localIndex,t);n.updateVisible(),n.resetBBoxNeedsUpdate(),$u(n)&&fl(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n)}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),i.parent.remove(i),fl(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),$u(i)&&(i.freeBooleanPointer(),n instanceof Od&&n.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof fP&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid)}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),(r=i.cloner)==null||r.resetOnMove(),this.markToExpandCloner(i);let a=e.parent===null?this:this.find(e.parent);if(a===void 0)throw new Error("unexpected");a.add(i),this.markNeedsRecomputeInstancesForAncessors(a),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(),i.resetBBoxNeedsUpdate();let o=e.localIndex;a.children.splice(o,0,a.children.pop()),$u(i)&&(i.invalidateUpstreamBooleanData(),fl(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof Od&&n.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}updateEntityByOp(e,t,r,i){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),t.path.includes("overrides")&&"states"in t.props){let{rest:a}=t.props;t={...t,props:a},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let n=this.find(e);if(n)try{Ave(n,t,r,{scene:this,shared:i}),n instanceof ms&&n.updateGeometryGroupsIfNeeded()}catch(a){console.error(a)}}get enableFog(){return this.fog!==null}set enableFog(e){this.fog=e===!0?this.backupFog:null}init(e,t){if(this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(ri(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,e.publish.playCamera!==null){let r=this.find(e.publish.playCamera);r instanceof ba&&this.switchActiveCamera(r)}this.expandInstances(t,!0),this.traverseEntity(r=>{fl(r)&&r.recomputeBoolean(),r instanceof ba&&r.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){jt.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{jt.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,r,i,n,a,o){e&&e!==i.uuid&&i.find(e)&&n.forInstancesRec(s=>{s.isInstanceRoot||(s.data=D1(s.data,l=>{let u=l.events.data(o.id),h=s.goUp(a);if(h){let c=[...EG(h.identity),e].join("-"),d=this.entityIdentityToEntity[c];if(d){let f=d.uuid;vo.zoom(u,t)[r]=f}else console.warn("cannot find instance")}}).data)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof nv&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,r)=>{t.data.events.forEach(i=>{i.data.type==="GameControl"?t.forInstancesRec(n=>{n.isInstanceRoot||(n.data=D1(n.data,a=>{a.events.delete(i.id)}).data)}):i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",e,t,r,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",e,t,r,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",e,t,r,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,r,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,r,i)),i.data.inActions.forEach(n=>{n.data.type==="Transition"&&this.relativeizeInner(n.data.object,["inActions",n.id],"object",e,t,r,i)}),i.data.outActions.forEach(n=>{n.data.type==="Transition"&&this.relativeizeInner(n.data.object,["outActions",n.id],"object",e,t,r,i)})):"actions"in i.data&&i.data.actions.forEach(n=>{n.data.type==="Transition"&&this.relativeizeInner(n.data.object,["actions",n.id],"object",e,t,r,i)})})}),!0})}expandInstances(e,t){let r=new Set;this.traverseEntity(i=>{if(i instanceof nv&&i.isInstanceRoot)return i.expandInstanceChildren({scene:this,shared:e,pendingDeletes:r}),t||i.resetBBoxNeedsUpdate(),!0});for(let i of r)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),pP(i)}recomputeInstances(e){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(t=>{t instanceof nv&&t.isInstanceRoot&&(t.component=void 0)}),this.expandInstances(e,!1))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let r=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[r]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[r]),t.dispose()})}clearScene(){for(let e of this.children)jt.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=new ba(P6.PERSONAL_CAMERA_ID,{...B1.defaultData,name:"Personal Camera"});return e.objectHelper.visible=!1,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],r=i=>{for(let n of i.children){let a=n.cloner;jt.is(n)&&!n.raycastLock&&(n.visible||a!=null&&a.object.data.visible)&&(($u(n)||PR(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),kR(n,e,t)),r(n))}};return r(this),t}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let a=n.cloner;jt.is(n)&&(n.visible||a!=null&&a.object.data.visible)&&(($u(n)||PR(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),kR(n,e,t,!0)),r(n))}};return r(this),t}forEachEntity(e){for(let t of this.children)jt.is(t)&&e(t)}traverseEntity(e){for(let t of this.children)jt.is(t)&&t.traverseEntity(e)}traverseObject(e){for(let t of this.children)$1.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)jt.is(t)&&t.visible&&t.traverseVisibleEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=ri(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}dispose(){this.clearScene()}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=ri(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.groundColor!==void 0&&(this.ambientLight.groundColor=ri(e.groundColor,t)),e.enabled!==void 0&&(this.ambientLight.visible=e.enabled),e.occlusion!==void 0&&(this.occlusion=e.occlusion),e.aoFullRes!==void 0&&(this.aoFullRes=e.aoFullRes),e.radius!==void 0&&(this.radius=e.radius),e.bias!==void 0&&(this.bias=e.bias),e.aoColor!==void 0&&(this.aoColor=ri(e.aoColor,t))}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}createChildrenObjects(e,t,r){let i=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,i,r),i+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,r,i,n,a){var l;let o={scene:this,shared:a},s=vP(e,t,o);return s&&(this.entityByUuid[e]=s,i.add(s),i.children.splice(n,0,i.children.pop()),r.length>0&&(s.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,s,a)),s.updateState(t,o),s instanceof ms&&s.updateGeometryGroupsIfNeeded(),s.updateVisible(),s.cloner&&this.toExpandCloner.add(s),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),s}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:a,recursive:o}=e[i],s=this.find(a),l=o?s.recursiveBBox:s.singleBBox;t.push(...l.vertices)}let r=new wr;return r.setFromPoints(t),r.getCenter(BR),BR}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(e===null){t.identity();return}let r=(i=this.find(e))==null?void 0:i.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof As)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof Rl&&e(t.material[r]);else t.material instanceof Rl&&e(t.material)})}updateCanvasSize(e,t){this.activeCamera.setViewplaneSize(e,t);let r,i;e>=t?(r=t/e,i=1):(r=1,i=e/t),this.traverseMaterial(n=>{n.getLayersOfType("transmission").forEach(a=>{a.uniforms[`f${a.id}_aspectRatio`].value.x=r,a.uniforms[`f${a.id}_aspectRatio`].value.y=i})})}},av=P6;av.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera",av.PERSONAL_CAMERA_EXPORT_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCameraExport";var D0=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},Nve=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Bve(Math.atan2(i,r))},kve=(e,t,r)=>{let i={x:0,y:0};return r=GT(r),i.x=e.x-t*Math.cos(r),i.y=e.y-t*Math.sin(r),i},GT=e=>e*(Math.PI/180),Bve=e=>e*(180/Math.PI),Fve=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,jw=new Map,FR=e=>{jw.has(e)&&clearTimeout(jw.get(e)),jw.set(e,setTimeout(e,100))},Q1=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let a=0;a<i.length;a+=1)n=i[a],e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent(n,r)},VR=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let a=0;a<i.length;a+=1)n=i[a],e.removeEventListener?e.removeEventListener(n,r):e.detachEvent&&e.detachEvent(n,r)},L6=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),UR=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},HT=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},gP=(e,t,r)=>{let i=E6(e);for(let n in i)if(i.hasOwnProperty(n))if(typeof t=="string")i[n]=t+" "+r;else{let a="";for(let o=0,s=t.length;o<s;o+=1)a+=t[o]+" "+r+", ";i[n]=a.slice(0,-2)}return i},Vve=(e,t)=>{let r=E6(e);for(let i in r)r.hasOwnProperty(i)&&(r[i]=t);return r},E6=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},Ww=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},Uve=(e,t)=>{let r={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?r[i]=t[i]:e.hasOwnProperty(i)&&(r[i]=e[i]);return r},jT=(e,t)=>{if(e.length)for(let r=0,i=e.length;r<i;r+=1)t(e[r]);else t(e)},Gve=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&(I6="ontouchstart"in window,O6=!!window.PointerEvent,R6=!!window.MSPointerEvent);var I6,O6,R6,Xf={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},ed,$v={};O6?ed=Xf.pointer:R6?ed=Xf.MSPointer:I6?(ed=Xf.touch,$v=Xf.mouse):ed=Xf.mouse;function Hh(){}Hh.prototype.on=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var a=0;a<i.length;a+=1)n=i[a],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r};Hh.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};Hh.prototype.trigger=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var a=0;a<i.length;a+=1)n=i[a],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach(function(o){o.call(r,{type:n,target:r},t)})};Hh.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=Uve(t.options,e))};Hh.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},Q1(e,ed[t],r._domHandlers_[t]),$v[t]&&Q1(e,$v[t],r._domHandlers_[t]),r};Hh.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},VR(e,ed[t],r._domHandlers_[t]),$v[t]&&VR(e,$v[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var mP=Hh;function Cr(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Cr.id,Cr.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Cr.prototype=new mP;Cr.constructor=Cr;Cr.id=0;Cr.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Cr.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=Vve("borderRadius","50%"),r=gP("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},Ww(i.el,r),this.options.shape==="circle"&&Ww(i.back,t),Ww(i.front,t),this.applyStyles(i),this};Cr.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};Cr.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Cr.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Cr.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Cr.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};Cr.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,i={};i.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,i.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t};Cr.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var i=r.options.fadeTime+"ms",n={};n.front=gP("transition",["top","left"],i);var a={front:{}};a.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(n),r.applyStyles(a),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};Cr.prototype.restCallback=function(){var e=this,t={};t.front=gP("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};Cr.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Cr.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,i=Math.PI/2,n,a,o;if(t>r&&t<r*3&&!e.lockX?n="up":t>-r&&t<=r&&!e.lockY?n="left":t>-r*3&&t<=-r&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-i&&t<i?a="left":a="right"),e.lockX||(t>0?o="up":o="down"),e.force>this.options.threshold){var s={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(s[l]=this.direction[l]);var u={};this.direction={x:a,y:o,angle:n},e.direction=this.direction;for(l in s)s[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+a,e),u.y||this.trigger("plain:"+o,e),u.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var Hve=Cr;function pr(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=pr.id,pr.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let i=getComputedStyle(r.options.zone.parentElement);return i&&i.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}pr.prototype=new mP;pr.constructor=pr;pr.id=0;pr.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===r)return t[i];return!1}};pr.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};pr.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};pr.prototype.createNipple=function(e,t){var r=this,i=r.manager.scroll,n={},a=r.options,o={x:r.parentIsFlex?i.x:i.x+r.box.left,y:r.parentIsFlex?i.y:i.y+r.box.top};if(e.x&&e.y)n={x:e.x-o.x,y:e.y-o.y};else if(e.top||e.right||e.bottom||e.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=e.top,s.style.right=e.right,s.style.bottom=e.bottom,s.style.left=e.left,s.style.position="absolute",a.zone.appendChild(s);var l=s.getBoundingClientRect();a.zone.removeChild(s),n=e,e={x:l.left+i.x,y:l.top+i.y}}var u=new Hve(r,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:t,position:e,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(HT(u.ui.el,n),HT(u.ui.front,u.frontPosition)),r.nipples.push(u),r.trigger("added "+u.identifier+":added",u),r.manager.trigger("added "+u.identifier+":added",u),r.bindNipple(u),u};pr.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};pr.prototype.bindNipple=function(e){var t=this,r,i=function(n,a){r=n.type+" "+a.id+":"+n.type,t.trigger(r,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};pr.prototype.pressureFn=function(e,t,r){var i=this,n=0;clearInterval(i.pressureIntervals[r]),i.pressureIntervals[r]=setInterval((function(){var a=e.force||e.pressure||e.webkitForce||0;a!==n&&(t.trigger("pressure",a),i.trigger("pressure "+t.identifier+":pressure",a),n=a)}).bind(i),100)};pr.prototype.onstart=function(e){var t=this,r=t.options,i=e;e=L6(e),t.updateBox();var n=function(a){t.actives.length<r.maxNumberOfNipples?t.processOnStart(a):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(l){return l.identifier===o})<0){var s=[e[0]];s.identifier=o,t.processOnEnd(s)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(a))};return jT(e,n),t.manager.bindDocument(),!1};pr.prototype.processOnStart=function(e){var t=this,r=t.options,i,n=t.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,o={x:e.pageX,y:e.pageY},s=t.getOrCreate(n,o);s.identifier!==n&&t.manager.removeIdentifier(s.identifier),s.identifier=n;var l=function(h){h.trigger("start",h),t.trigger("start "+h.id+":start",h),h.show(),a>0&&t.pressureFn(e,h,h.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(s))>=0&&t.idles.splice(i,1),t.actives.push(s),t.ids.push(s.identifier),r.mode!=="semi")l(s);else{var u=D0(o,s.position);if(u<=r.catchDistance)l(s);else{s.destroy(),t.processOnStart(e);return}}return s};pr.prototype.getOrCreate=function(e,t){var r=this,i=r.options,n;return/(semi|static)/.test(i.mode)?(n=r.idles[0],n?(r.idles.splice(0,1),n):i.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=r.createNipple(t,e),n)};pr.prototype.processOnMove=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),a=t.manager.scroll;if(!Fve(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+i),t.manager.removeIdentifier(i);return}if(r.dynamicPage){var o=n.el.getBoundingClientRect();n.position={x:a.x+o.left,y:a.y+o.top}}n.identifier=i;var s=n.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=n.position.y),r.lockY&&(l.x=n.position.x);var u=D0(l,n.position),h=Nve(l,n.position),c=GT(h),d=u/s,f={distance:u,position:l},p,v;if(n.options.shape==="circle"?(p=Math.min(u,s),v=kve(n.position,p,h)):(v=Gve(l,n.position,s),p=D0(v,n.position)),r.follow){if(u>s){let _=l.x-v.x,x=l.y-v.y;n.position.x+=_,n.position.y+=x,n.el.style.top=n.position.y-(t.box.top+a.y)+"px",n.el.style.left=n.position.x-(t.box.left+a.x)+"px",u=D0(l,n.position)}}else l=v,u=p;var g=l.x-n.position.x,m=l.y-n.position.y;n.frontPosition={x:g,y:m},r.dataOnly||HT(n.ui.front,n.frontPosition);var y={identifier:n.identifier,position:l,force:d,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:c,degree:h},vector:{x:g/s,y:-m/s},raw:f,instance:n,lockX:r.lockX,lockY:r.lockY};y=n.computeDirection(y),y.angle={radian:GT(180-h),degree:180-h},n.trigger("move",y),t.trigger("move "+n.id+":move",y)};pr.prototype.processOnEnd=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),a=t.manager.removeIdentifier(n.identifier);!n||(r.dataOnly||n.hide(function(){r.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(r.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[a.id]=a.identifier))};pr.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};pr.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var jve=pr;function Fr(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=UR(),t.config(e),t.prepareCollections();var r=function(){var n;t.collections.forEach(function(a){a.forEach(function(o){n=o.el.getBoundingClientRect(),o.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;Q1(window,"resize",function(){FR(r)});var i=function(){t.scroll=UR()};return Q1(window,"scroll",function(){FR(i)}),t.collections}Fr.prototype=new mP;Fr.constructor=Fr;Fr.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(i){return r=i.get(t),!r}),r}};Fr.prototype.create=function(e){return this.createCollection(e)};Fr.prototype.createCollection=function(e){var t=this,r=new jve(t,e);return t.bindCollection(r),t.collections.push(r),r};Fr.prototype.bindCollection=function(e){var t=this,r,i=function(n,a){r=n.type+" "+a.id+":"+n.type,t.trigger(r,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};Fr.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};Fr.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Fr.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Fr.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};Fr.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};Fr.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};Fr.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};Fr.prototype.onAny=function(e,t){var r=this,i,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=L6(t);var a=function(s,l,u){u.ids.indexOf(l)>=0&&(u[n](s),s._found_=!0)},o=function(s){i=r.getIdentifier(s),jT(r.collections,a.bind(null,s,i)),s._found_||r.removeIdentifier(i)};return jT(t,o),!1};Fr.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};Fr.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var Wve=Fr;new Wve;var $ve=Tg(PU()),qve=new ye,Xve=new ye,Va=[[0,0,0],[0,0,0],[0,0,0]];function Yve(e){let t=e.elements;Va[0][0]=t[0],Va[0][1]=t[4],Va[0][2]=t[8],Va[1][0]=t[1],Va[1][1]=t[5],Va[1][2]=t[9],Va[2][0]=t[2],Va[2][1]=t[6],Va[2][2]=t[10];let{u:r,v:i}=(0,$ve.SVD)(Va),n=qve.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),a=Xve.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return n.multiply(a.transpose())}var z6=(e=>(e[e.keydown=0]="keydown",e[e.keyup=1]="keyup",e[e.pointerdown=2]="pointerdown",e[e.pointerup=3]="pointerup",e[e.pointermove=4]="pointermove",e[e.wheel=5]="wheel",e[e.scroll=6]="scroll",e))(z6||{}),N6=new Map,ov=new Map,cy=class{constructor(e,t,r,i){this.data=t;let{audio:n,volume:a,delay:o,loop:s}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?i.getAudio(n).src:n.data;this.audioPlayer=new Ip({src:l,volume:a,delay:o,loop:s}),ov.has(r.uuid)?ov.get(r.uuid).push(this):ov.set(r.uuid,[this]),N6.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},Zve=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=N6.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=ov.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...ov.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},P0=class{constructor(e,t,r,i){if(this.data=t,t.interaction==="play")this.interaction=new cy(e,t,r,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new Zve(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof cy?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof cy?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){this.interaction instanceof cy&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}};function Kve(e,t){let r;if("material"in e){let i=e.material;Array.isArray(i)?r=e.material[0].layers.find(n=>n.uuid===t):r=e.material.layers.find(n=>n.uuid===t)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var k6=new Map,sv=new Map,$w=class{constructor(e,t,r){this.data=t,this.delay=0,this.status="stopped";let{layerId:i,loop:n,volume:a,delay:o}=t;if(this.object=r,i===void 0)throw new Error("Missing property");let s=Kve(r,i);s&&(this.videoElement=s,this.videoElement.loop=n===1/0,this.videoElement.autoplay=!0,a!==void 0&&(this.videoElement.volume=a)),o!==void 0&&(this.delay=o),sv.has(r.uuid)?sv.get(r.uuid).push(this):sv.set(r.uuid,[this]),k6.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},Jve=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=k6.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=sv.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let e=[...sv.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},B6=class{constructor(e,t,r){if(this.data=t,t.interaction==="play")this.interaction=new $w(e,t,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new Jve(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof $w?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof $w?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},Qve=class{constructor(e,t,r){this.data=e,this.managers=r,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=i=>{var s,l;this.timeoutIdQueue.shift();let n=this.scene.find(i);if(n===void 0)return;let a=this.controlsManager.sharedGameControlGlobals.rapierWorld,o=a?(s=n.dataPatched.physics)==null?void 0:s.fusedBody:!0;if(n.cloner){for(let u of n.cloner.children)o?(u.playModeVisible=!1,u.rigidBody&&((l=n.dataPatched.physics)==null?void 0:l.rigidBody)==="positioned"&&(a.removeRigidBody(u.rigidBody),u.rigidBody=void 0),u.boundsTree&&(u.boundsTree=void 0)):this.clone===void 0||this.clone===u?(u.playModeVisible=!1,u.rigidBody&&(a.removeRigidBody(u.rigidBody),u.rigidBody=void 0)):u.playModeVisible===void 0&&(u.playModeVisible=!0);(o||this.clone===void 0||this.clone===!1)&&(n.visible=!1,n.rigidBody&&(a.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.boundsTree&&(n.boundsTree=void 0))}else n.rigidBody&&(a.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.boundsTree&&(n.boundsTree=void 0),n.visible=!1;a===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(u=>u.boundsTree!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(u=>u.rigidBody!==void 0),this.managers.eventManager.requestRender()},this.objects=[...e.objects],this.scene=t,this.controlsManager=r.controlsManager}dispatch(e){this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},GR=(()=>{let e,t,r,i;function n(s){!e&&!HR()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(a)),s&&(t=s,i=s.requestRender)}function a(s){let l=r?s-r:0,u=t.sharedGameControlGlobals.createdObjects,h=t.sharedGameControlGlobals.nCreatedPerAction,c=u.length,d=0;for(;d<c;){let f=u[d];f.userData.createdTime===void 0&&(f.userData.createdTime=s),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&s-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&h[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),i()),d++):(h[f.userData.actionId]>f.userData.quantity&&h[f.userData.actionId]--,u.splice(d,1),f.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&f.rigidBody?t.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody):(f.boundsTree=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(p=>p.boundsTree!==void 0)),c--,i())}e=d>0?requestAnimationFrame(a):void 0,r=d>0?s:void 0}function o(){HR()?e&&(cancelAnimationFrame(e),r=void 0):n()}return typeof document<"u"&&document.addEventListener("visibilitychange",o),n})();function HR(){return!!document&&document.hidden}var jR=new It,ege=new L,tge=new L,L0=class{constructor(e,t,r){this.data=e,this.scene=t,this.controlsManager=r,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=pt.generateUUID(),this.dispatch=()=>{this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=Qhe(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{if(this.timeoutIdQueue.shift(),this.object===void 0)return;let i=new hl(this.object);if(i.playModeVisible=!0,i.expand(),this.data.coordinateSystem!=="world"){let a=this.data.coordinateSystem;a===av.PERSONAL_CAMERA_ID&&this.scene.find(av.PERSONAL_CAMERA_EXPORT_ID)&&(a=av.PERSONAL_CAMERA_EXPORT_ID);let o=this.scene.find(a);o&&(o.updateMatrixWorldSVD(),i.hiddenMatrix.setPosition(0,0,0),i.hiddenMatrix.premultiply(o.matrixWorldRigid),i.updateMatrixWorld())}i.position.fromArray(this.data.position),i.rotation.fromArray(this.data.rotation),i.updateMatrix(),this.scene.add(i);let n=this.controlsManager.sharedGameControlGlobals;n.createdObjects.push(i),n.nCreatedPerAction[this.uniqueId]===void 0?n.nCreatedPerAction[this.uniqueId]=1:n.nCreatedPerAction[this.uniqueId]++,i.updateWorldMatrix(!0,!0),i.traverseObject(this.traverseObjectCB),GR(),this.controlsManager.requestRender()},this.traverseObjectCB=i=>{var s,l,u,h;i.hasNonUniformScale&&i.updateMatrixWorldSVD();let n;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(i instanceof BT)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;n=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof hl)n=i.object;else if(n=i,(s=n.dataPatched.cloner)==null?void 0:s.hideBase)return!0}else{if(i instanceof BT)return;i instanceof hl?n=i.object:n=i}this.data.destroy==="Time"?i.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(i.userData.quantity=this.data.destroyAfterQuantity,i.userData.actionId=this.uniqueId),i.matrixWorld.decompose(ege,jR,tge);let a=new L().fromArray(this.data.velocity).applyQuaternion(jR),o=n.dataPatched;if(!(o.collision==="visibility"?!o.visible:!o.collision)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(i,n,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((l=i.rigidBody)==null||l.collider(0).setActiveEvents(1),i.userData.hasCollisionDestroy=!0),this.data.velocity.some(c=>c!==0)&&this.data.dynamic&&((u=i.rigidBody)==null||u.setLinvel(a.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in i.object&&this.controlsManager.addBoundsTree(i),this.data.velocity.some(c=>c!==0)&&this.data.dynamic&&(i.userData.velocity=a)),((h=n.dataPatched.physics)==null?void 0:h.fusedBody)===!0))return!0},this.scene=t,this.object=this.scene.find(this.data.object),GR(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.scene.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},F6={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},yP={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},rge=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],e_={CSS:{},springs:{}};function pa(e,t,r){return Math.min(Math.max(e,t),r)}function lv(e,t){return e.indexOf(t)>-1}function qw(e,t){return e.apply(null,t)}var je={arr:function(e){return Array.isArray(e)},obj:function(e){return lv(Object.prototype.toString.call(e),"Object")},pth:function(e){return je.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||je.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return je.hex(e)||je.rgb(e)||je.hsl(e)},key:function(e){return!F6.hasOwnProperty(e)&&!yP.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function V6(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function U6(e,t){var r=V6(e),i=pa(je.und(r[0])?1:r[0],.1,100),n=pa(je.und(r[1])?100:r[1],.1,100),a=pa(je.und(r[2])?10:r[2],.1,100),o=pa(je.und(r[3])?0:r[3],.1,100),s=Math.sqrt(n/i),l=a/(2*Math.sqrt(n*i)),u=l<1?s*Math.sqrt(1-l*l):0,h=1,c=l<1?(l*s+-o)/u:-o+s;function d(p){var v=t?t*p/1e3:p;return l<1?v=Math.exp(-v*l*s)*(h*Math.cos(u*v)+c*Math.sin(u*v)):v=(h+c*v)*Math.exp(-v*s),p===0||p===1?p:1-v}function f(){var p=e_.springs[e];if(p)return p;for(var v=1/6,g=0,m=0;;)if(g+=v,d(g)===1){if(m++,m>=16)break}else m=0;var y=g*v*1e3;return e_.springs[e]=y,y}return t?d:f}function ige(e){return e===void 0&&(e=10),function(t){return Math.ceil(pa(t,1e-6,1)*e)*(1/e)}}var nge=function(){var e=11,t=1/(e-1);function r(h,c){return 1-3*c+3*h}function i(h,c){return 3*c-6*h}function n(h){return 3*h}function a(h,c,d){return((r(c,d)*h+i(c,d))*h+n(c))*h}function o(h,c,d){return 3*r(c,d)*h*h+2*i(c,d)*h+n(c)}function s(h,c,d,f,p){var v,g,m=0;do g=c+(d-c)/2,v=a(g,f,p)-h,v>0?d=g:c=g;while(Math.abs(v)>1e-7&&++m<10);return g}function l(h,c,d,f){for(var p=0;p<4;++p){var v=o(c,d,f);if(v===0)return c;var g=a(c,d,f)-h;c-=g/v}return c}function u(h,c,d,f){if(!(0<=h&&h<=1&&0<=d&&d<=1))return;var p=new Float32Array(e);if(h!==c||d!==f)for(var v=0;v<e;++v)p[v]=a(v*t,h,d);function g(m){for(var y=0,_=1,x=e-1;_!==x&&p[_]<=m;++_)y+=t;--_;var w=(m-p[_])/(p[_+1]-p[_]),b=y+w*t,S=o(b,h,d);return S>=.001?l(m,b,h,d):S===0?b:s(m,y,y+t,h,d)}return function(m){return h===c&&d===f||m===0||m===1?m:a(g(m),c,f)}}return u}(),G6=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,a=4;i<((n=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var a=pa(i,1,10),o=pa(n,.1,2);return function(s){return s===0||s===1?s:-a*Math.pow(2,10*(s-1))*Math.sin((s-1-o/(Math.PI*2)*Math.asin(1/a))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(a){return Math.pow(a,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(a,o){return function(s){return 1-n(a,o)(1-s)}},e["easeInOut"+i]=function(a,o){return function(s){return s<.5?n(a,o)(s*2)/2:1-n(a,o)(s*-2+2)/2}}}),e}();function _P(e,t){if(je.fnc(e))return e;var r=e.split("(")[0],i=G6[r],n=V6(e);switch(r){case"spring":return U6(e,t);case"cubicBezier":return qw(nge,n);case"steps":return qw(ige,n);default:return qw(i,n)}}function H6(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function Cx(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],a=0;a<r;a++)if(a in e){var o=e[a];t.call(i,o,a,e)&&n.push(o)}return n}function Dx(e){return e.reduce(function(t,r){return t.concat(je.arr(r)?Dx(r):r)},[])}function WR(e){return je.arr(e)?e:(je.str(e)&&(e=H6(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function xP(e,t){return e.some(function(r){return r===t})}function bP(e){var t={};for(var r in e)t[r]=e[r];return t}function WT(e,t){var r=bP(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function Px(e,t){var r=bP(e);for(var i in t)r[i]=je.und(e[i])?t[i]:e[i];return r}function age(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function oge(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(s,l,u,h){return l+l+u+u+h+h}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),a=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+n+","+a+","+o+",1)"}function sge(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,a=t[4]||1;function o(d,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(f-d)*6*p:p<1/2?f:p<2/3?d+(f-d)*(2/3-p)*6:d}var s,l,u;if(i==0)s=l=u=n;else{var h=n<.5?n*(1+i):n+i-n*i,c=2*n-h;s=o(c,h,r+1/3),l=o(c,h,r),u=o(c,h,r-1/3)}return"rgba("+s*255+","+l*255+","+u*255+","+a+")"}function lge(e){if(je.rgb(e))return age(e);if(je.hex(e))return oge(e);if(je.hsl(e))return sge(e)}function as(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function uge(e){if(lv(e,"translate")||e==="perspective")return"px";if(lv(e,"rotate")||lv(e,"skew"))return"deg"}function $T(e,t){return je.fnc(e)?e(t.target,t.id,t.total):e}function so(e,t){return e.getAttribute(t)}function wP(e,t,r){var i=as(t);if(xP([r,"deg","rad","turn"],i))return t;var n=e_.CSS[t+r];if(!je.und(n))return n;var a=100,o=document.createElement(e.tagName),s=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;s.appendChild(o),o.style.position="absolute",o.style.width=a+r;var l=a/o.offsetWidth;s.removeChild(o);var u=l*parseFloat(t);return e_.CSS[t+r]=u,u}function j6(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?wP(e,n,r):n}}function SP(e,t){if(je.dom(e)&&!je.inp(e)&&(so(e,t)||je.svg(e)&&e[t]))return"attribute";if(je.dom(e)&&xP(rge,t))return"transform";if(je.dom(e)&&t!=="transform"&&j6(e,t))return"css";if(e[t]!=null)return"object"}function W6(e){if(je.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function hge(e,t,r,i){var n=lv(t,"scale")?1:0+uge(t),a=W6(e).get(t)||n;return r&&(r.transforms.list.set(t,a),r.transforms.last=t),i?wP(e,a,i):a}function MP(e,t,r,i){switch(SP(e,t)){case"transform":return hge(e,t,i,r);case"css":return j6(e,t,r);case"attribute":return so(e,t);default:return e[t]||0}}function TP(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=as(e)||0,n=parseFloat(t),a=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+a+i;case"-":return n-a+i;case"*":return n*a+i}}function $6(e,t){if(je.col(e))return lge(e);if(/\s/g.test(e))return e;var r=as(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function AP(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function cge(e){return Math.PI*2*so(e,"r")}function dge(e){return so(e,"width")*2+so(e,"height")*2}function fge(e){return AP({x:so(e,"x1"),y:so(e,"y1")},{x:so(e,"x2"),y:so(e,"y2")})}function q6(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var a=t.getItem(n);n>0&&(r+=AP(i,a)),i=a}return r}function pge(e){var t=e.points;return q6(e)+AP(t.getItem(t.numberOfItems-1),t.getItem(0))}function X6(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return cge(e);case"rect":return dge(e);case"line":return fge(e);case"polyline":return q6(e);case"polygon":return pge(e)}}function vge(e){var t=X6(e);return e.setAttribute("stroke-dasharray",t),t}function gge(e){for(var t=e.parentNode;je.svg(t)&&je.svg(t.parentNode);)t=t.parentNode;return t}function Y6(e,t){var r=t||{},i=r.el||gge(e),n=i.getBoundingClientRect(),a=so(i,"viewBox"),o=n.width,s=n.height,l=r.viewBox||(a?a.split(" "):[0,0,o,s]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:s/l[3]}}function mge(e,t){var r=je.str(e)?H6(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:Y6(r),totalLength:X6(r)*(i/100)}}}function yge(e,t){function r(s){s===void 0&&(s=0);var l=t+s>=1?t+s:0;return e.el.getPointAtLength(l)}var i=Y6(e.el,e.svg),n=r(),a=r(-1),o=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(o.y-a.y,o.x-a.x)*180/Math.PI}}function $R(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=$6(je.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:je.str(e)||t?i.split(r):[]}}function Z6(e){var t=e?Dx(je.arr(e)?e.map(WR):WR(e)):[];return Cx(t,function(r,i,n){return n.indexOf(r)===i})}function K6(e){var t=Z6(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:W6(r)}}})}function _ge(e,t){var r=bP(t);if(/^spring/.test(r.easing)&&(r.duration=U6(r.easing)),je.arr(e)){var i=e.length,n=i===2&&!je.obj(e[0]);n?e={value:e}:je.fnc(t.duration)||(r.duration=t.duration/i)}var a=je.arr(e)?e:[e];return a.map(function(o,s){var l=je.obj(o)&&!je.pth(o)?o:{value:o};return je.und(l.delay)&&(l.delay=s?0:t.delay),je.und(l.endDelay)&&(l.endDelay=s===a.length-1?t.endDelay:0),l}).map(function(o){return Px(o,r)})}function xge(e){for(var t=Cx(Dx(e.map(function(a){return Object.keys(a)})),function(a){return je.key(a)}).reduce(function(a,o){return a.indexOf(o)<0&&a.push(o),a},[]),r={},i=function(a){var o=t[a];r[o]=e.map(function(s){var l={};for(var u in s)je.key(u)?u==o&&(l.value=s[u]):l[u]=s[u];return l})},n=0;n<t.length;n++)i(n);return r}function bge(e,t){var r=[],i=t.keyframes;i&&(t=Px(xge(i),t));for(var n in t)je.key(n)&&r.push({name:n,tweens:_ge(t[n],e)});return r}function wge(e,t){var r={};for(var i in e){var n=$T(e[i],t);je.arr(n)&&(n=n.map(function(a){return $T(a,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function Sge(e,t){var r;return e.tweens.map(function(i){var n=wge(i,t),a=n.value,o=je.arr(a)?a[1]:a,s=as(o),l=MP(t.target,e.name,s,t),u=r?r.to.original:l,h=je.arr(a)?a[0]:u,c=as(h)||as(l),d=s||c;return je.und(o)&&(o=u),n.from=$R(h,d),n.to=$R(TP(o,h),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=_P(n.easing,n.duration),n.isPath=je.pth(a),n.isColor=je.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var J6={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var a="";i.list.forEach(function(o,s){a+=s+"("+o+") "}),e.style.transform=a}}};function Q6(e,t){var r=K6(e);r.forEach(function(i){for(var n in t){var a=$T(t[n],i),o=i.target,s=as(a),l=MP(o,n,s,i),u=s||as(l),h=TP($6(a,u),l),c=SP(o,n);J6[c](o,n,h,i.transforms,!0)}})}function Mge(e,t){var r=SP(e.target,t.name);if(r){var i=Sge(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function Tge(e,t){return Cx(Dx(e.map(function(r){return t.map(function(i){return Mge(r,i)})})),function(r){return!je.und(r)})}function ej(e,t){var r=e.length,i=function(a){return a.timelineOffset?a.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return i(a)+o+s+l+a.duration*(a.loop??1)})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0;return i(a)+o+s+a.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return i(a)+o+s+a.duration*(a.loop??1)-a.endDelay-l})):t.endDelay,n}var qR=0;function Age(e){var t=WT(F6,e),r=WT(yP,e),i=bge(r,e),n=K6(e.targets),a=Tge(n,i),o=ej(a,r),s=qR;return qR++,Px(t,{id:s,children:[],animatables:n,animations:a,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var kn=[],XR=[],E0,Cge=function(){function e(){E0=requestAnimationFrame(t)}function t(r){var i=kn.length;if(i){for(var n=0;n<i;){var a=kn[n];a.paused?(kn.splice(n,1),i-=1):(a.tick(r),n++)}e()}else E0=cancelAnimationFrame(E0)}return e}();function Dge(e){document.hidden?(kn.forEach(function(t){return t.pause(e.timeStamp)}),XR=kn.slice(0),fr.running=kn=[]):XR.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",Dge);function fr(e){e===void 0&&(e={});var t=0,r=0,i=0,n,a,o=0,s=null;function l(b){var S=window.Promise&&new Promise(function(M){return s=M});return b.finished=S,S}var u=Age(e);l(u);function h(){var b=u.direction;b!=="alternate"&&(u.direction=b!=="normal"?"normal":"reverse"),u.reversed=!u.reversed,a.forEach(function(S){(S.loop===1||S.loop%2===0)&&(S.reversed=u.reversed)})}function c(){u.direction="normal",u.reversed=!1,a.forEach(function(b){return b.reversed=!1})}function d(b){return u.reversed?u.duration-b:b}function f(){t=0,r=d(u.currentTime)*(1/fr.speed)}function p(b,S){S&&(u.reversed?S.seek(S.duration*S.loop-(b-S.timelineOffset-S.pingPongDelayCorrection)):S.seek(b-S.timelineOffset-S.startOnceDelay-S.pingPongDelayCorrection))}function v(b){if(u.reversed)for(var S=o;S--;)p(b,a[S]);else for(var M=0;M<o;M++)p(b,a[M])}function g(b){var U,W,j,K,ee,R,k,V,q,Q;var S=0,M=u.animations,A=M.length;for(u.direction!=="alternate"&&((U=u.parent)==null?void 0:U.direction)==="alternate"?((W=u.parent)==null?void 0:W.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1&&((j=u.parent)!=null&&j.reversed&&u.direction==="alternate"?b=u.duration-u.delay+u.endDelay-b:b=u.duration+u.delay-u.endDelay-b):x(!1,(K=u.parent)==null?void 0:K.rewind,u.rewind,(ee=u.parent)==null?void 0:ee.reversePlayback,u.reversePlayback)&&((R=u.parent)!=null&&R.reversed&&u.direction==="alternate"?b=u.duration-u.delay+u.endDelay-b:b=u.duration+u.delay-u.endDelay-b);S<A;){var T=M[S],C=T.animatable,D=T.tweens,P=D.length-1,E=D[P];P&&(E=Cx(D,function(oe){return b<oe.end})[0]||E);let J;(k=u.parent)!=null&&k.reversed&&u.direction==="alternate"?J=pa(b-E.start-E.endDelay,0,E.duration)/E.duration:J=pa(b-E.start-E.delay,0,E.duration)/E.duration;for(var O=isNaN(J)?1:E.easing(J),z=E.to.strings,B=E.round,N=[],F=E.to.numbers.length,G=void 0,H=0;H<F;H++){var $=void 0;let oe,le;u.direction!=="alternate"?((V=u.parent)==null?void 0:V.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1?(oe=E.to.numbers[H],le=E.from.numbers[H]||0):(le=E.to.numbers[H],oe=E.from.numbers[H]||0):x(!0,(q=u.parent)==null?void 0:q.rewind,u.rewind,(Q=u.parent)==null?void 0:Q.reversePlayback,u.reversePlayback)?(oe=E.to.numbers[H],le=E.from.numbers[H]||0):(le=E.to.numbers[H],oe=E.from.numbers[H]||0),E.isPath?$=yge(E.value,O*le):$=oe+O*(le-oe),B&&(E.isColor&&H>2||($=Math.round($*B)/B)),N.push($)}var Z=z.length;if(!Z)G=N[0];else{G=z[0];for(var X=0;X<Z;X++){z[X];var ne=z[X+1],te=N[X];isNaN(te)||(ne?G+=te+ne:G+=te+" ")}}J6[T.type](C.target,T.property,G,C.transforms),T.currentValue=G,S++}}function m(b){u[b]&&!u.passThrough&&u[b](u)}function y(){u.remaining&&u.remaining!==!0&&u.remaining--}let _={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function x(b,S,M,A,T){return _[b<<4|S<<3|M<<2|A<<1|T]}function w(b){var C;var S=u.duration;let M=u.delay,A=S-u.endDelay;(C=u.parent)!=null&&C.reversed&&u.direction==="alternate"&&(M=u.endDelay,A=S-u.delay);var T=d(b);if(u.progress=pa(T/S*100,0,100),u.reversePlayback=T<u.currentTime,o&&v(T),!u.began&&u.currentTime>=0&&(u.began=!0,m("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,m("loopBegin")),(u.reversed||T>=0)&&T<=M&&u.currentTime!==0&&(g(0),m("change")),(T>=A&&u.currentTime!==S+u.pingPongDelayCorrection||!S)&&(g(S),m("change")),T>M&&T<A?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,m("changeBegin")),g(T),m("change")):u.changeBegan?(u.changeCompleted=!0,u.changeBegan=!1,m("change"),o&&m("timelineChangeComplete")):u.began&&T>A&&m("changeComplete"),u.currentTime=pa(T,0,S+u.pingPongDelayCorrection),u.began&&m("update"),b>=S)if(y(),!u.remaining)u.paused=!0,u.completed||(u.completed=!0,m("loopComplete"),m("complete"),!u.passThrough&&"Promise"in window&&(s(),l(u)));else{o?t+=u.duration/fr.speed:t+=u.duration;for(let D of a)D.setStartTime(0),D.remaining=D.loop;m("loopComplete"),u.loopBegan=!1,u.direction==="alternate"?h():o&&c()}}return u.reset=function(){var b=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed=b==="reverse",u.remaining=u.loop,a=u.children,o=a.length;for(var S=o;S--;)u.children[S].reset();(u.reversed&&u.loop!==!0||b==="alternate"&&u.loop===1)&&u.remaining++,g(u.reversed?u.duration:0)},u.setStartTime=function(b){t=b},u.set=function(b,S){return Q6(b,S),u},u.tick=function(b){i=b,t||(t=i),w((i+(r-t))*fr.speed)},u.seek=function(b){w(b-t)},u.pause=function(b){u.paused=!0,o&&(n=b??performance.now())},u.play=function(b){!u.paused||(u.completed&&u.reset(),u.paused=!1,kn.push(u),o&&n!==void 0&&(t+=(b??performance.now())-n),E0||Cge())},u.reverse=function(){h(),u.completed=!u.reversed,f()},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function YR(e,t){for(var r=t.length;r--;)xP(e,t[r].animatable.target)&&t.splice(r,1)}function Pge(e){for(var t=Z6(e),r=kn.length;r--;){var i=kn[r],n=i.animations,a=i.children;YR(t,n);for(var o=a.length;o--;){var s=a[o],l=s.animations;YR(t,l),!l.length&&!s.children.length&&a.splice(o,1)}!n.length&&!a.length&&i.pause()}}function Lge(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?_P(t.easing):null,n=t.grid,a=t.axis,o=t.from||0,s=o==="first",l=o==="center",u=o==="last",h=je.arr(e),c=parseFloat(h?e[0]:e),d=h?parseFloat(e[1]):0,f=as(h?e[1]:e)||0,p=t.start||0+(h?c:0),v=[],g=0;return function(m,y,_){if(s&&(o=0),l&&(o=(_-1)/2),u&&(o=_-1),!v.length){for(var x=0;x<_;x++){if(!n)v.push(Math.abs(o-x));else{var w=l?(n[0]-1)/2:o%n[0],b=l?(n[1]-1)/2:Math.floor(o/n[0]),S=x%n[0],M=Math.floor(x/n[0]),A=w-S,T=b-M,C=Math.sqrt(A*A+T*T);a==="x"&&(C=-A),a==="y"&&(C=-T),v.push(C)}g=Math.max.apply(Math,v)}i&&(v=v.map(function(P){return i(P/g)*g})),r==="reverse"&&(v=v.map(function(P){return a?P<0?P*-1:-P:Math.abs(g-P)}))}var D=h?(d-c)/g:c;return p+D*(Math.round(v[y]*100)/100)+f}}function Ege(e){e===void 0&&(e={});var t=fr(e);return t.duration=0,t.add=function(r,i){var n=kn.indexOf(t),a=t.children;n>-1&&kn.splice(n,1);function o(d){d.passThrough=!0}for(var s=0;s<a.length;s++)o(a[s]);var l=Px(r,WT(yP,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.timelineOffset=je.und(i)?u:TP(i,u),o(t);var h=fr(l);o(h),a.push(h),h.parent=t;var c=ej(a,e);return t.delay=c.delay,t.endDelay=c.endDelay,t.duration=c.duration,h.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}fr.version="3.2.0";fr.speed=1;fr.running=kn;fr.remove=Pge;fr.get=MP;fr.set=Q6;fr.convertPx=wP;fr.path=mge;fr.setDashoffset=vge;fr.stagger=Lge;fr.timeline=Ege;fr.easing=_P;fr.penner=G6;fr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var tj=fr,ZR=new L,KR=new L,JR=new It;function Ige(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let a=1-n*n;if(a<=Number.EPSILON){let h=1-i;return r.w=h*e.w+i*t.w,r.x=h*e.x+i*t.x,r.y=h*e.y+i*t.y,r.z=h*e.z+i*t.z,r.normalize(),r}let o=Math.sqrt(a),s=Math.atan2(o,n),l=Math.sin((1-i)*s)/o,u=Math.sin(i*s)/o;return r.w=e.w*l+t.w*u,r.x=e.x*l+t.x*u,r.y=e.y*l+t.y*u,r.z=e.z*l+t.z*u,r}function Ph(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(o==null)return;let s=a??t[e],l=o;if(s!==l)return{update:u=>{let h=pt.lerp(s,l,u);n?t[e]=Math.trunc(h):t[e]=h},start:()=>{t[e]=s},end:()=>{t[e]=l}}}function rj(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=[...a??s],u=[...o];if(!(l.length!==u.length||VD(l,u)))return{update:h=>{l.forEach((c,d)=>{let f=pt.lerp(c,u[d],h);t[e][d]=n?Math.trunc(f):f})},start:()=>{Object.assign(t[e],l)},end:()=>{Object.assign(t[e],u)}}}function QR(e,t,r,i){let n=r[e]?r[e]:void 0,a=i[e];if(!a)return;let o=t[e],s=n?new L().fromArray(n):o.clone(),l=new L().fromArray(a);if(!s.equals(l))return{update:u=>{o.lerpVectors(s,l,u)},start:()=>{o.copy(s)},end:()=>{o.copy(l)}}}function Oge(e,t,r,i){let n=r[e]?r[e]:void 0,a=i[e];if(!a)return;let o=t[e],s=n?new ye().fromArray(n):o.clone(),l=new L,u=new It,h=new L;s.decompose(l,u,h);let c=new ye().fromArray(a),d=new L,f=new It,p=new L;if(c.decompose(d,f,p),!s.equals(c))return{update:v=>{JR.slerpQuaternions(u,f,v),ZR.lerpVectors(l,d,v),KR.lerpVectors(h,p,v),o.compose(ZR,JR,KR)},start:()=>{o.compose(l,u,h)},end:()=>{o.compose(d,f,p)}}}function Rge(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=a?typeof a=="string"?n.getColor(a).clone():new Qe().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new Qe().setRGB(o.r,o.g,o.b);if(l.equals(u))return;let h=s.clone();return t[e]=h,{update:c=>{h.lerpColors(l,u,c)},start:()=>{h.copy(l)},end:()=>{h.copy(u)}}}function ql(e,t,r,i){if(typeof t[e]=="number")return Ph(e,t,r??{},i);if(Array.isArray(t[e]))return rj(e,t,r??{},i)}function zge(e,t,r){var o,s,l,u;let i=[],n=e.cameraType==="OrthographicCamera"?(o=t.orthographic)==null?void 0:o.zoom:(s=t.perspective)==null?void 0:s.zoom,a=e.cameraType==="OrthographicCamera"?(l=r.orthographic)==null?void 0:l.zoom:(u=r.perspective)==null?void 0:u.zoom;if(a!==void 0){let h=n??e.zoom,c=a;h!==c&&i.push({update:d=>{e.zoom=pt.lerp(h,c,d),e.updateProjectionMatrix()},start:()=>{e.zoom=h,e.updateProjectionMatrix()},end:()=>{e.zoom=c,e.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let h=Ph("targetOffset",e,t,r);h&&i.push(h)}return i}function Nge(e,t,r,i){if(r.scaleBaked===void 0)return;let n=t.scaleBaked??e.data.geometry.scaleBaked,a=r.scaleBaked;if(hh.isEqual(n,a))return;let o=[];return o.push({update:s=>{e.updateGeometryInteractions({scaleBaked:[pt.lerp(n[0],a[0],s),pt.lerp(n[1],a[1],s),pt.lerp(n[2],a[2],s)]},i),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:n},i),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:a},i),e.invalidateDownstreamBooleanData()}}),o}function kge(e,t,r){if(!r.extrusion)return;let i=e.extrusion,n=t.extrusion??{},a=r.extrusion,o=[];return aH.forEach(s=>{let l=ql(s,i,n,a);l&&o.push(l)}),o}function Bge(e,t,r,i){let n=[];if(!("geometry"in r))return n;let a=e.geometry.userData.parameters,o="geometry"in t?t.geometry:{},s=r.geometry;if(e instanceof K1){let l=Nge(e,o,s,i);l&&n.push(...l)}else{let l={};if(Object.assign(l,Zhe(a,S3)),S3.forEach(u=>{let h=ql(u,l,o,s);h&&n.push(h)}),e instanceof fP){Object.assign(l,{extrusion:{...a.extrusion}});let u=kge(l,o,s);u&&n.push(...u)}n.length&&n.push({update:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},start:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},end:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()}})}return n}function Fge(e,t,r,i){let n=[];if(r.intensity!==void 0){let a=Ph("intensity",e,t,r);a&&n.push(a)}if(r.color!==void 0){let a=Rge("color",e,t,r,i);a&&n.push(a)}return n}function Vge(e,t,r,i){let n=[];if(Array.isArray(e.material)){if(!("materials"in r&&r.materials))return n;let a="materials"in t&&t.materials?t.materials:[],o=r.materials;e.material.forEach((s,l)=>{if(!o[l])return;let u=a[l]??{},h=o[l];typeof u=="string"||typeof h=="string"||n.push(...ez(s,u,h,i))})}else{if(!("material"in r&&r.material))return n;let a="material"in t&&t.material?t.material:{},o=r.material;if(typeof a=="string"||typeof o=="string")return n;n.push(...ez(e.material,a,o,i))}return n}function ez(e,t,r,i){var o;let n=[],a=Z1(r,i)||!!t.layers&&Z1(t,i);n.push(Yge(e,a));for(let s of e.layers){let l=(o=t.layers)==null?void 0:o.data(s.uuid),u=r.layers.data(s.uuid);if(!u||!(s.visible??!0)||!(u.visible??!0))continue;let h=s.getNames().filter(c=>!Nce.some(d=>c.includes(d)));for(let c of h)try{let d=s.getValue(c),f;if(c==="colors")f=qge(s,l,u,c);else if(Array.isArray(d))c==="steps"&&(f=$ge(s,l,u,c));else if(typeof d=="number")f=Uge(s,l,u,c);else{if(typeof d=="boolean")continue;d instanceof re?f=Gge(s,l,u,c):d instanceof L?f=Hge(s,l,u,c):d instanceof sn?f=Wge(s,l,u,c,i):d instanceof Qe?f=jge(s,l,u,c,i):"isTexture"in d&&(f=Xge(s,l,u,c))}f&&(Array.isArray(f)?n.push(...f):n.push(f))}catch(d){console.error(`lerpMaterial: unexpected material layer for ${c}`,d)}}return n}function Uge(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=t?t[i]:e.getValue(i),a=r[i];if(n!==a)return{update:o=>{e.setValue(i,pt.lerp(n,a,o))},start:()=>{e.setValue(i,n)},end:()=>{e.setValue(i,a)}}}function Gge(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),a=t?new re().fromArray(t[i]):n.clone(),o=new re().fromArray(r[i]);if(!a.equals(o))return{update:s=>{n.lerpVectors(a,o,s)},start:()=>{n.copy(a)},end:()=>{n.copy(o)}}}function Hge(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),a=t?new L().fromArray(t[i]):n.clone(),o=new L().fromArray(r[i]);if(!a.equals(o))return{update:s=>{n.lerpVectors(a,o,s)},start:()=>{n.copy(a)},end:()=>{n.copy(o)}}}function jge(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:void 0,o=r[i],s=e.getValue(i),l=a?typeof a=="string"?n.getColor(a).clone():new Qe().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new Qe().setRGB(o.r,o.g,o.b);if(l.equals(u))return;let h=s.clone();return{update:c=>{e.getValue(i)!==h&&e.setValue(i,h),h.lerpColors(l,u,c)},start:()=>{h.copy(l)},end:()=>{h.copy(u)}}}function Wge(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:void 0,o=r[i],s=e.getValue(i),l=a?typeof a=="string"?n.getColor(a).clone():new Qe().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new sn(o.r,o.g,o.b,o.a);if(l.equals(u))return;let h=s.clone();return{update:c=>{e.getValue(i)!==h&&e.setValue(i,h),h.lerpColors(l,u,c)},start:()=>{h.copy(l)},end:()=>{h.copy(u)}}}function $ge(e,t,r,i="steps"){if(!e.hasValue(i)||!(i in r))return;let n=[],a=e.getValue(i),o=t?t[i]:a,s=r[i];for(let l=0;l<a.length;++l){let u=o[l],h=s[l];u!==h&&n.push({update:c=>{a[l]=pt.lerp(u,h,c)},start:()=>{a[l]=u},end:()=>{a[l]=h}})}return n.length?n:void 0}function qge(e,t,r,i="colors"){if(!e.hasValue(i)||!(i in r))return;let n=[],a=e.getValue(i),o=t?t[i]:a.map(l=>l.toArray()),s=r[i];for(let l=0;l<a.length;++l){let u=[...o[l]],h=[...s[l]];I1.isEqual(u,h)||n.push({update:c=>{a[l].fromArray(I1.lerp(u,h,c))},start:()=>{a[l].fromArray(u)},end:()=>{a[l].fromArray(h)}})}return n.length?n:void 0}function Xge(e,t,r,i="texture"){if(!e.hasValue(i)||!(i in r))return;let n=e.getNode("mat");if(!n)return;let a=t?t[i]:n,o=r[i],s=[...a.repeat],l=[...a.offset],u=[...o.repeat],h=[...o.offset];if(!Kc.isEqual(s,u)||!Kc.isEqual(l,h))return{update:c=>{n.repeat=Kc.lerp(s,u,c),n.offset=Kc.lerp(l,h,c),n.updateMatrix()},start:()=>{n.repeat=[...s],n.offset=[...l],n.updateMatrix()},end:()=>{n.repeat=[...u],n.offset=[...h],n.updateMatrix()}}}function Yge(e,t){return{update:()=>{e.transparent=t}}}var Xw=new L,tz=new zi;function Zge(e,t,r,i){let n=[],a,o,s,l,u,h,c={slide:(t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping).slide,offset:(t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping).offset};if(u=Ph("slide",c,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping),u&&n.push(u),h=Ph("offset",c,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping),h&&n.push(h),!u&&!h&&(a=QR("position",e,t,r),a&&n.push(a),o=QR("scale",e,t,r),o&&n.push(o),s=Kge(e,t,r,i),s&&n.push(s),l=Oge("hiddenMatrix",e,t,r),l&&n.push(l)),a||o||s||l||u||h){let d=()=>{var f;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(f=e.parent)!=null&&f.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),$u(e)&&fl(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,c))};n.push({update:d,start:d,end:d})}return n}function Kge(e,t,r,i){let n=t!=null&&t.rotation?t.rotation:void 0,a=r.rotation;if(!a)return;let o=n?new L().fromArray(n):new L().setFromEuler(e.rotation),s=new L().fromArray(a);if(o.equals(s))return;let l=Xw.subVectors(s,o);if(i&&l.toArray().every(u=>Math.abs(u)<2*Math.PI)){let u=new It().setFromEuler(tz.setFromVector3(o)),h=new It().setFromEuler(tz.setFromVector3(s));return{update:c=>{Ige(u,h,e.quaternion,c)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(s)}}}else return{update:u=>{Xw.lerpVectors(o,s,u),e.rotation.setFromVector3(Xw)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(s)}}}function Jge(e,t,r){let i=[];if(!("cloner"in r)||!e.cloner)return i;let n=e.cloner,a="cloner"in t?t.cloner:{},o=r.cloner;KG.forEach(d=>{let f;d==="count"?f=Ph("count",n.parameters,a,o,!0):f=ql(d,n.parameters,a??{},o),f&&i.push(f)});let s=Qge(n,a,o);s!=null&&s.length&&i.push(...s);let l=eme(n,a,o);l!=null&&l.length&&i.push(...l);let u=tme(n,a,o);u!=null&&u.length&&i.push(...u);let h=rme(n,a,o);h!=null&&h.length&&i.push(...h);let c=ime(n,a,o);return c!=null&&c.length&&i.push(...c),i.length&&i.push({update:()=>{n.update()}}),i}function Qge(e,t,r){if(e.parameters.type!=="radial")return;let i=t.radial,n=r.radial;if(!n)return;let a=e.parameters.radial,o=[];return JG.forEach(s=>{let l=ql(s,a,i??{},n);l&&o.push(l)}),o}function eme(e,t,r){if(e.parameters.type!=="linear")return;let i=t.linear,n=r.linear;if(!n)return;let a=[],o=e.parameters.linear;return QG.forEach(s=>{let l=ql(s,o,i??{},n);l&&a.push(l)}),a}function tme(e,t,r){if(e.parameters.type!=="grid")return;let i=t.grid,n=r.grid;if(!n)return;let a=[],o=e.parameters.grid;return eH.forEach(s=>{let l;s==="count"?l=rj(s,o,i??{},n,!0):l=ql(s,o,i??{},n),l&&a.push(l)}),a}function rme(e,t,r){if(e.parameters.type!=="toObject")return;let i=t.toObject,n=r.toObject;if(!n)return;let a=[],o=e.parameters.toObject;return tH.forEach(s=>{let l;s==="count"?l=Ph(s,o,i??{},n,!0):l=ql(s,o,i??{},n),l&&a.push(l)}),a}function ime(e,t,r){if(!e.parameters.randomness)return;let i=t.randomnessObject,n=r.randomnessObject;if(!n)return;let a=[],o=e.parameters.randomnessObject;return rH.forEach(s=>{let l=ql(s,o,i??{},n);l&&a.push(l)}),a}function rz(e,t,r,i,n){let a=[];return e.data.visible&&a.push(...Zge(e,t,r,n)),e.data.visible&&a.push(...Jge(e,t,r)),$u(e)?(e instanceof ms&&e.data.visible&&a.push(...Bge(e,t,r,i)),e.data.visible&&a.push(...Vge(e,t,r,i))):yve(e)?e.data.visible&&a.push(...Fge(e,t,r,i)):mve(e)&&a.push(...zge(e,t,r)),a.length?{update:o=>{a.forEach(s=>s.update(o))},start:o=>{a.forEach(s=>{var l;return(l=s.start)==null?void 0:l.call(s,o)})},end:o=>{a.forEach(s=>{var l;return(l=s.end)==null?void 0:l.call(s,o)})}}:void 0}new L;function ij(e){let t;if(e.easing===5){let{control1:r,control2:i}=e;t=`cubicBezier(
			${r[0]}, ${r[1]}, ${i[0]}, ${i[1]}
		)`}else if(e.easing===6){let{mass:r,stiffness:i,damping:n,velocity:a}=e;t=`spring( ${r}, ${i}, ${n}, ${a} )`}else{let r;switch(e.easing){case 0:r=Qs.linear;break;case 1:r=Qs.ease;break;case 2:r=Qs.easeIn;break;case 3:r=Qs.easeOut;break;case 4:r=Qs.easeInOut;break;default:r=Qs.linear}let[i,n,a,o]=r;t=`cubicBezier( ${i}, ${n}, ${a}, ${o} )`}return{duration:e.duration,easing:t}}function nj(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var nme={type:"beginState"},ame={type:"completeState",isfromEntity:!1},iz=class{constructor(e,t,r,i,n,a){if(this.object=e,this.data=i,this.sharedAssets=n,this.allowSlerp=a,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o}),this.object.traverseEntity(s=>{s!==this.object&&s instanceof ba&&s.dispatchEvent(nme)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o}),this.object.traverseEntity(s=>{s!==this.object&&s instanceof ba&&s.dispatchEvent(ame)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=rz(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let o=O0(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=O0(this.object,t);if(!o)throw new Error("Missing property");this.from=o}if(r===void 0)throw new Error("Missing property");{let o=O0(this.object,r);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=t===void 0||r===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...nj(i),...ij(i),change:this.onChange},this.callback=rz(this.object,t===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},I0=class extends Wl{constructor(e,t,r){if(super(),this.data=e,this.scene=t,this.sharedAssets=r,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var n;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((n=this.timeline)==null||n.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let i=t.find(e.object);if(!i)throw new Error("Missing property");if(!i.states)throw new Error("Missing property");if(this.object=i,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=O0(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,isRebuild:t=!1}={}){var r,i,n,a;try{let o=nj(this.data.tweens[0].data),s=o.loop;t&&typeof o.loop=="number"&&o.loop--,(r=this.timeline)==null||r.pause(),this.timeline=tj.timeline({autoplay:!1,...o,...s===!0||s>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(u=>u==null?void 0:u.changeBegan);if(this.timelineNeedsRebuild=l!==-1&&(s===!0||s>1),o.pingPongDelayCorrection&&t===!1&&(this.timelineNeedsRebuild=!0),e){let u=l===-1?0:l;for(let h=u;h<this.data.tweens.length-1;h++){let c=this.data.tweens[h],d=this.data.tweens[h+1],f;h===u&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(f=void 0,this.object instanceof ba&&(this.object.wasMovedByUser=!1)):f=c.data.state===void 0?this.currentState:c.data.state;let p=new iz(this.object,f,d.data.state===void 0?this.currentState:d.data.state,d.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&h===u&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[h]=p,this.timeline.add(p.params,this.timeline.duration+(h===u?o.delay:0)+(h===u&&!t?o.pingPongDelayCorrection:0))}this.timeline.duration+=o.endDelay}else{let u=l===-1?this.data.tweens.length-1:l+1;for(let h=u;h>0;h--){let c=this.data.tweens[h],d=this.data.tweens[h-1],f;h===u&&(this.object.wasMovedByUser===!0||((n=this.object.previousAction)==null?void 0:n.playing)===!0)?(f=void 0,this.object instanceof ba&&(this.object.wasMovedByUser=!1)):f=c.data.state===void 0?this.currentState:c.data.state;let p=new iz(this.object,f,d.data.state===void 0?this.currentState:d.data.state,c.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&h===u&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[h-1]=p,this.timeline.add(p.params,this.timeline.duration+(h===u?o.endDelay:0))}this.timeline.duration+=o.delay+(t?0:o.pingPongDelayCorrection)}}catch(o){o instanceof Error&&console.error(o.message)}((a=this.object.previousAction)==null?void 0:a.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(e){e instanceof Error&&console.error(e.message)}},this.startOnceDelay)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,{scene:this.scene,shared:this.sharedAssets}),this.object.currentState=e}seek(e){var t;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration)}toggle(e){var t;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function O0(e,t){var n;let r,i;if(typeof t=="string"?(r=t,i=(n=e.states)==null?void 0:n[r]):t===null&&(r=null,i=e.data),!(r===void 0||i===void 0))return{id:r,data:i}}var ome={type:"beginState"},nz={type:"completeState",isfromEntity:!1},az={type:"requestRender"},sme=class extends Wl{constructor(e,t){super(),this.data=e,this.scene=t,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new L,this.posEnd=new L,this.qStart=new It,this.qEnd=new It,this.zoomStart=1,this.zoomEnd=1,this.toCamera=t.find(e.targetCamera)}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t={t:0};this.posStart.copy(this.scene.activeCamera.position),this.qStart.copy(this.scene.activeCamera.quaternion),this.zoomStart=this.scene.activeCamera.zoom,this.animation=tj({targets:t,t:1,...ij(this.data),update:()=>{t.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera)):(this.posEnd.copy(this.toCamera.position),this.qEnd.copy(this.toCamera.quaternion),this.zoomEnd=this.toCamera.zoom,this.fromCamera=this.scene.activeCamera,this.switchCamera(this.toCamera)),this.scene.activeCamera.dispatchEvent(ome));let r=this.scene.activeCamera;r.position.lerpVectors(this.posStart,this.posEnd,t.t),r.quaternion.slerpQuaternions(this.qStart,this.qEnd,t.t),r.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*t.t,r.wasMovedBySwitchCameraAction=!0,r.updateMatrix(),r.updateMatrixWorld(),r.updateProjectionMatrix(),r.dispatchEvent(az),t.t===1&&r.dispatchEvent(nz)}})}switchCamera(e){this.scene.switchActiveCamera(e),this.scene.activeCamera.dispatchEvent({type:"cameraChange",camera:e})}play(){this.playing||this.scene.activeCamera!==this.toCamera&&(clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId;try{this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.toCamera)}catch(t){t instanceof Error&&console.error(t.message)}},this.data.delay*1e3))}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,r;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.animation)==null||t.pause(),this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var i,n;delete this.timeoutId,this.data.animate?((i=this.animation)==null||i.pause(),this.buildAnimation(),(n=this.animation)==null||n.play()):(this.toggleIsForward?(this.fromCamera=this.scene.activeCamera,this.switchCamera(this.toCamera)):this.switchCamera(this.fromCamera),this.scene.activeCamera.dispatchEvent(nz),this.scene.activeCamera.dispatchEvent(az))},this.data.delay*1e3)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function lme(e){Object.values(e).forEach(t=>{t.forEach(r=>{(r instanceof P0||r instanceof B6||r instanceof I0||r instanceof L0||r instanceof Qve||r instanceof sme)&&r.dispose()})})}new L;new L;new L;new L;new L;new Cn;var ume=new L,hme=new L;new L;var dy=new It;new ye;new ni;new L;new L;function Yw(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}(function(){let e=new ye;return(t,r,i)=>{let n=t.obj;e.copy(n.hiddenMatrix),n.parent!==null&&e.premultiply(n.parent.matrixWorld),e.invert(),n.position.copy(r),t.reference==="global"&&Yw(n.position,t.limits),n.position.applyMatrix4(e),t.reference==="parent"?Yw(n.position,t.limits):t.reference==="local"&&(dy.copy(t.quat0).invert(),n.position.sub(t.position0),n.position.applyQuaternion(dy),Yw(n.position,t.limits),dy.invert(),n.position.applyQuaternion(dy),n.position.add(t.position0)),e.multiply(i??n.matrixWorld).decompose(ume,n.quaternion,hme),n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD()),n instanceof As&&fl(n.parent)&&n.invalidateDownstreamBooleanData(!0)}})();new L;new L;new L;new L;new Cn;(function(){let e=new L,t=new L;return(r,i,n)=>n>0?(e.subVectors(r,i),e.length()<=n?r:t.copy(i).add(e.normalize().multiplyScalar(n))):i})();(function(){let e=new ye;return(t,r)=>{t.position.copy(r),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof As&&fl(t.parent)&&t.invalidateDownstreamBooleanData(!0)}})();new L;new L;new ye;new L;new L;new L;new L;new Cn;(function(){let e=new ye;return function(t,r){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),r.premultiply(Yve(e).invert()),t.rotation.setFromRotationMatrix(r),t.updateMatrix(),t instanceof As&&fl(t.parent)&&t.invalidateDownstreamBooleanData(!0)}})();new L;new L;new L;lce.then(e=>{new e.Vec3,new e.Vec3});new L;uce.then(e=>e);new L;new L;var cme={type:"beginEvent",eventName:"Collision"};new L;var oz=new L,sz=new L,dme=new L,Ti=new L,Ai=new L,Fs=new L,Zw=new ye,lz=new ye,fme=new ye;new ye;var Qn=new It,Fo=new It,Ua=new zi(0,0,0,"YXZ"),pme=new L(1,0,0),ea=new L(0,1,0),vme=new L(0,0,1),uz=new L(1,1,1),gme=1,mme=.025,yme=16e-6,hz=12,_me=20,Xr=new Nn,vn=new wr,xme={type:"requestRender"},cz=Math.PI/6,qT=class extends Wl{constructor(e,t,r,i,n,a,o,s,l){var v;super(),this.object=e,this.domElement=t,this.controlsManager=n,this.cameraFollow=a,this.camera=o,this.scene=s,this.sharedAssets=l,this.enableDamping=!0,this.position0=new L,this.rotation0=new zi(0,0,0,"XYZ"),this.scale0=new L,this.hiddenMatrix0=new ye,this.target0=new L,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new zi(0,0,0,"YXZ"),this.position0Cam=new L,this.quat0Cam=new It,this.scale0Cam=new L,this.hiddenMatrix0Cam=new ye,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Nn(new L(0,-40,0),new L(0,40,0)),matrix:new ye,position:new L,rotation:new It},this.euler=new zi(0,0,0,"YXZ"),this.eulerDelta=new L,this.lastPosition=new L,this.lastCameraQuaternion=new It,this.lastCameraPosition=new L,this.PI_2=Math.PI/2,this.prevMouse=new re,this.velocityTarget=new L,this.velocity=new L,this.directionXZ=new L,this.rotVelocityStick=new L,this.rotVelocityTarget=new L,this.rotVelocity=new L,this.rotDirection=new L,this.nonColliderRotOffset=new ye,this.nonColliderPosOffset=new ye,this.firstPointerId=-1,this.rot=new L,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new ye,this.objectToTarget=new L,this.objectToTarget0=new L,this.objectToCamXZ=new L,this.objectToCamXZ0=new L,this.targetToCamera=new L,this.targetToCamera0=new L,this.cameraPolarAxis0=new L,this.targetPos=new L,this.targetQuat=new It,this.lerpFactorPos=new L().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new It,this.objXZQuatInv=new It,this.objXZRotMat=new ye,this.isFirstPerson=!1,this.actions={},this.didHit=!1,this.groundVelocity=new L,this.pushedVelocity=new L,this.groundYRotation=0,this.objectRealQuat=new It,this.colliderWorldQuat=new It,this.groundNormal=new L,this.groundTilt=new It,this.groundTiltInv=new It,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.onPointerDown=g=>{g.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=g.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!$O&&(!qO||XO>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(g.clientX,g.clientY))},this.onPointerUp=g=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),g.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=g=>{if(g.pointerId!==this.firstPointerId)return;let m=g.clientX-this.prevMouse.x,y=g.clientY-this.prevMouse.y;this.prevMouse.set(g.clientX,g.clientY),g.pointerType==="mouse"&&this.rotBy!=="keys"&&(qO&&XO<15.5&&!$O?(this.eulerDelta.y=-m*this.mouseOrbitSensitivity,this.eulerDelta.x=-y*this.mouseOrbitSensitivity):(this.eulerDelta.y=-g.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-g.movementY*this.mouseOrbitSensitivity)),g.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-m*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-y*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=g=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?qT.isLocked=!0:qT.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=g=>{!(g.target instanceof HTMLInputElement)&&(g.code==="ArrowLeft"||g.code==="ArrowUp"||g.code==="ArrowRight"||g.code==="ArrowDown"||g.code==="Space")&&g.preventDefault();for(let m of this.keyAssignments)if(g.key.toUpperCase()===m[1]||g.key===m[1]){this.movementState[m[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=g=>{for(let m of this.keyAssignments)if(g.key.toUpperCase()===m[1]||g.key===m[1]||g.code.slice(3,g.code.length).toUpperCase()===m[1]){this.movementState[m[0]]=0;break}},this.copyVRGamePadValues=(g,m)=>{for(let y=2;y<4;y++){let _=g.axes[y];m===0?y===2?this.movementState.movePosX=_:this.movementState.movePosZ=_:(g.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,y===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(_)>=.3&&(this.vrEulerYOffset+=_<0?1:-1),this.movementState.rotPosY=_):this.moveMode==="fly"&&(this.movementState.moveNegY=_))}},this.sharedGameControlGlobals=n.sharedGameControlGlobals,e===o&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation);let u=this.object.rotation.y;if(this.objectRealQuat.copy(this.object.quaternion),this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,u,0),this.rot.setFromEuler(this.object.rotation),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((v=this.camera)==null?void 0:v.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let g=new L(0,0,-1).applyQuaternion(this.camera.quaternion),m=new L().subVectors(this.object.position,this.camera.position);this.objectToCamXZ.copy(m),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let y,_;Math.abs(g.y)<1e-6?(m.y=0,g.y=0,_=m.projectOnVector(g)):m.y/g.y>0?_=g.multiplyScalar(m.y/g.y):_=g.multiplyScalar(m.length()),this.targetToCamera0.copy(_).negate(),y=this.camera.position.clone().add(_),this.objectToTarget0.subVectors(y,this.object.position);let x=new zi().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-x.x,x.x=0,x.z=0,x.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(x)}if(this.object instanceof ba&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=r.rotByTouch??"joystick",this.rotBy=r.rotBy??"keys",this.rotationMode=r.rotationMode??"normal",this.moveMode=r.moveMode??"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=(r.speedTranslate??250)*gme,this.speedOrbit=(r.speedRotate??100)*mme,this.mouseOrbitSensitivity=(r.speedRotate??100)*yme,this.keyAssignments=r.keyAssignments.map(g=>{let m=[g[0],g[1]];return m[1]==="▲"?m[1]="ArrowUp":m[1]==="◀"?m[1]="ArrowLeft":m[1]==="▼"?m[1]="ArrowDown":m[1]==="▶"?m[1]="ArrowRight":m[1]==="⇧"?m[1]="Shift":m[1]==="↵"?m[1]="Enter":m[1]==="Space"?m[1]=" ":m[1]==="⌘"?m[1]="Meta":m[1]==="Ctrl"?m[1]="Control":m[1]==="Esc"&&(m[1]="Escape"),m}),r.rotBy==="mouse"){let g;g=this.keyAssignments.findIndex(m=>m[0]==="rotNegX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(m=>m[0]==="rotPosX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(m=>m[0]==="rotPosY"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(m=>m[0]==="rotNegY"),g!==-1&&(this.keyAssignments[g][1]="")}this.lerpFactorPosStart=1-.02**(1/((r.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((r.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((r.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((r.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((r.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((r.delayRotCamera??.3)*60)),this.gravity=(i.gravity??Ja.defaultData.gravity)*hz,this.pixelsPerMeter=i.pixelsPerMeter??Ja.defaultData.pixelsPerMeter,this.usePhysics=i.usePhysics??Ja.defaultData.usePhysics,this.jumpPower=r.jumpPower*_me,this.resetYPosition=this.object.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=r.alignToGround??!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=r.orientWith??bT.defaultDataThirdPerson.orientWith;let h=i.skinWidthRelative??Ja.defaultData.skinWidthRelative,c=i.stepThreshRelative??Ja.defaultData.stepThreshRelative;this.slopeThresh=(i.slopeThresh??Ja.defaultData.slopeThresh)*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*h/this.pixelsPerMeter,this.stepThresh=r.collider.height*c/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*h/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*c/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*h/this.pixelsPerMeter,this.stepThresh=r.collider.height*c/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let d=new L().fromArray(r.collider.position),f=new It().setFromEuler(new zi().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(d).multiply(this.object.scale),this.collider.rotation.copy(f),this.collider.matrix.compose(d,f,uz),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),r.gameActions!==void 0&&Object.entries(r.gameActions).forEach(([g,m],y)=>{m.forEach(({id:_,data:x})=>{try{this.actions[g]===void 0&&(this.actions[g]=[]),x.type==="Transition"?this.actions[g].push(new I0(x,s,l)):x.type==="Audio"?this.actions[g].push(new P0(_,x,e,l)):x.type==="Video"?this.actions[g].push(new B6(_,x,e)):x.type==="Create"&&this.actions[g].push(new L0(x,s,this.controlsManager))}catch{}})}),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle");let p=r.navmesh.destinationHelperRadius*2;p>0&&(this.navMeshPathDest=new vD(fH.create({parameters:{width:p,height:p/10,hollow:.7}}),new Ag({color:Qr.toHex(r.navmesh.destinationHelperColor),transparent:!0,opacity:r.navmesh.destinationHelperColor.a})),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a)}reset(e=!1){if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),e===!0){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.rotation.reorder("YXZ");let t=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,t,0),this.rot.setFromEuler(this.object.rotation),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}e===!1&&(this.object instanceof ba?this.object.matrixAutoUpdate=!0:this.object.updateMatrix()),this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){var e;this.disconnect(),this.disposeActions(),(e=this.navMeshPathDest)!=null&&e.parent&&this.scene.remove(this.navMeshPathDest)}disposeActions(){this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),lme(this.actions)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].forEach(t=>{t instanceof I0?t.play():t instanceof L0?t.dispatchStart():t instanceof P0&&t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].forEach(t=>{t instanceof I0?(t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.scene,shared:this.sharedAssets})):t instanceof L0?t.dispatchStop():t instanceof P0&&t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Ti.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position)}update(e,t,r){var s,l,u,h,c,d,f,p,v,g,m;if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=i*60,a=!1;if(this.usePhysics&&this.collisionEnabled){let y=Ai.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*hz),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),_=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,y,(s=this.object.rigidBody)==null?void 0:s.collider(0).shape,1,!1,void 0,void 0,void 0,this.object.rigidBody);if(_){this.onObject=!0,this.groundNormal.set(_.normal2.x,_.normal2.y,_.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(a=!0),((l=_.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let x=_.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let w of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(w.rigidBody===x&&w.userData.isFollowingObj!==this.object.uuid){(w.hasNonUniformScale?w.matrixWorldRigid:w.matrixWorld).decompose(Ti,Fo,Ai),this.groundVelocity.subVectors(Ti,w.prevT),this.object.getWorldPosition(Ai).add(this.collider.position).sub(w.position),this.groundYRotation=Ua.setFromQuaternion(Fo).y-w.prevR.y,Fs.copy(Ai).applyAxisAngle(ea,this.groundYRotation),this.groundVelocity.add(Fs.sub(Ai)).divideScalar(i);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let y=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.scene.add(this.navMeshPathDest);let _=Ti.subVectors(this.path[1],this.object.position),x=Ai.subVectors(this.path[1],this.path[0]);_.dot(x)<0?this.path.shift():(this.directionXZ.x=x.x,this.directionXZ.z=x.z),y.opacity=y.userData.opacity0}else y.opacity-=.05*y.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.scene.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("move")));let o=dme.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let y=Ai.copy(o);y.y=0,o.set(0,o.y,y.length()*-1)}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let y=Ti;this.camera.getWorldDirection(y);let _=Fs.copy(ea).multiplyScalar(y.dot(ea));y.sub(_);let x=Ai.copy(this.directionXZ);x.x*=-1,this.rot.y=y.angleTo(x)*(y.cross(x).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)-Math.PI/2;if(Ua.setFromVector3(this.rot),this.moveMode==="walk"&&(Ua.x=0),o.applyEuler(Ua),a&&(Fo.setFromUnitVectors(ea,this.groundNormal),o.applyQuaternion(Fo)),r){let y=Ua.set(0,this.vrEulerYOffset*cz,0);r.applyEuler(y),o.x+=r.x,o.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*i}if(this.usePhysics===!0){let y=Ai;this.pushedVelocity.set(0,0,0);for(let _ of this.sharedGameControlGlobals.entitiesWithTransformAnim){let x=Fs.setFromMatrixPosition(_.matrixWorld).sub(_.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),w=_.rigidBody.collider(0).castCollider(x,this.object.rigidBody.collider(0),Ti.copy(o).divideScalar(this.pixelsPerMeter),i,!1);if(x.multiplyScalar(this.pixelsPerMeter),w!==null){this.pushedVelocity.copy(x),y.copy(w.normal1).applyQuaternion(_.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let _=y.dot(o);_<0&&o.addScaledVector(y,-_),o.add(this.pushedVelocity)}else o.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(ea,this.euler.y-this.euler0.y);let y=Ai.copy(this.objectToCamXZ).normalize(),_=Fs.copy(o).multiplyScalar(i);_.y=0;let x=_.sub(Ti.copy(y).multiplyScalar(_.dot(y))).cross(y).y;this.euler.y-=Math.atan2(x,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=pt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=pt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=pt.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Ua.copy(t),Ua.y=0):(Ua.copy(this.euler),Ua.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Ua)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*cz),Qn.setFromAxisAngle(pme,this.rot.x),Fo.setFromAxisAngle(ea,this.rot.y),Fo.multiply(Qn),Qn.setFromAxisAngle(vme,this.rot.z),Fo.multiply(Qn),this.object.quaternion.copy(Fo),this.objectRealQuat.multiplyQuaternions(this.object.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let y=Ai.copy(o).multiplyScalar(i/this.pixelsPerMeter),_=null;this.didHit=!1;let x=new L;for(let w=0;w<5;w++){let b=y.length(),S=Fs.copy(y).normalize();if(_=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(x),this.colliderWorldQuat,S,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,b,!1,8,void 0,void 0,this.object.rigidBody),_!==null){this.didHit=!0;let M=this.sharedGameControlGlobals.colliderToEntity[_.collider.handle];if(M!==this.lastHitObj&&w===0){this.lastHitObj=M;let D=this.sharedGameControlGlobals.eventsPerObjects[M==null?void 0:M.uuid];if(D){for(let P of D)if(P.data.target==="character"){let E=((h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.getCollider(_.collider.handle))._parent,O;if(M.cloner){for(let z of M.cloner.children)if(z.rigidBody===E){O=z;break}}P.dispatch(O),M.dispatchEvent(cme)}}}let A=oz.set(_.normal2.x,_.normal2.y,_.normal2.z).applyQuaternion(this.colliderWorldQuat),T=sz.copy(S).multiplyScalar(_.toi).dot(A),C=_.toi;if(C===0&&(this.object.position.y+=this.offset*this.pixelsPerMeter),T>this.offset&&(C=_.toi*(T-this.offset)/T,x.addScaledVector(S,C)),y.copy(S).multiplyScalar(b-C),Math.acos(-A.y)>this.slopeThresh){let D=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(x),P=Fs.copy(_.witness2).applyQuaternion(this.colliderWorldQuat);P.y=0;let E=D.add(P);E.y+=this.stepThresh;let O=this.sharedGameControlGlobals.rapierWorld.castShape(E,this.colliderWorldQuat,y,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,1,!1,8,void 0,void 0,this.object.rigidBody);O!==null&&O.toi===0&&(A.y=0,A.normalize())}y.addScaledVector(A,-y.dot(A))}else{w===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),x.add(y);break}}this.object.position.addScaledVector(x,this.pixelsPerMeter),(d=this.object.rigidBody)==null||d.setTranslation(Ti.copy(this.object.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(Qn.copy(this.object.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let y=this.onObject?1:5,_=o.multiplyScalar(i/y);for(let x=0;x<y;x++)this.object.position.add(_),this.collisionAdjustment(i/y)}else this.object.position.addScaledVector(o,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.object.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.updateMatrix(),this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.object.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let y=this.objectToTarget.add(this.object.position),_=this.targetToCamera.add(y);Zw.lookAt(_,y,ea).setPosition(_),Zw.decompose(this.targetPos,this.targetQuat,Ti),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=pt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=pt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.path.length<2&&this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&((v=(p=this.navMeshPathDest)==null?void 0:p.material)==null?void 0:v.opacity)<-.04*((m=(g=this.navMeshPathDest)==null?void 0:g.material)==null?void 0:m.userData.opacity0)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.object.dispatchEvent(xme),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=Qn.setFromAxisAngle(ea,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?pt.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=pt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=pt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Ti.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let i=Fo.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(e){ea.angleTo(e)*180/Math.PI<15||ea.angleTo(e)*180/Math.PI>85?Qn.identity():Qn.setFromUnitVectors(ea,e),this.groundTilt.slerp(Qn,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var n;let t=sz.set(0,0,0);this.object.updateMatrix();let r=Zw.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Ti,Qn,Ai).compose(Ti,Qn,uz);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(a=>{if(a===this.object||a.isDescendantOf(this.object))return;vn.makeEmpty(),a.updateMatrixWorldSVD();let o=a.matrixWorldRigid,s=lz.copy(o).invert(),l=fme.copy(lz).multiply(r);Xr.copy(this.collider.segment),Xr.start.applyMatrix4(l),Xr.end.applyMatrix4(l);let u=oz.copy(this.object.position).applyMatrix4(s);vn.expandByPoint(Xr.start),vn.expandByPoint(Xr.end),vn.min.addScalar(-this.collider.radius),vn.max.addScalar(this.collider.radius),a.boundsTree.shapecast({intersectsBounds:h=>h.intersectsBox(vn),intersectsTriangle:h=>{let c=Ti,d=Ai,f=h.closestPointToSegment(Xr,c,d);if(f<this.collider.radius){let p=this.collider.radius-f,v=d.sub(c).normalize(),g=Fs.copy(u);g.addScaledVector(v,p);let m=g.applyMatrix4(o).sub(this.object.position);t.add(m),Xr.start.addScaledVector(v,p),Xr.end.addScaledVector(v,p)}}})}),vn.makeEmpty(),Xr.copy(this.collider.segment),Xr.start.applyMatrix4(r),Xr.end.applyMatrix4(r),vn.expandByPoint(Xr.start),vn.expandByPoint(Xr.end),vn.min.addScalar(-this.collider.radius),vn.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({intersectsBounds:a=>a.intersectsBox(vn),intersectsTriangle:a=>{let o=Ti,s=Ai,l=a.closestPointToSegment(Xr,o,s);if(l<this.collider.radius){let u=this.collider.radius-l,h=s.sub(o).normalize();this.alignToGround&&this.groundTiltAdjustment(h),t.addScaledVector(h,u),Xr.start.addScaledVector(h,u),Xr.end.addScaledVector(h,u)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.object.position.add(t)}},bme=qT;bme.isLocked=!1;new re;new L;new re;new L;new ye;Object.keys(z6).filter(e=>isNaN(Number(e)));new Yd;new Qe;new L;new ye;new Qe;new L;new L;new VU;new Xd({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `});new Xd({name:"CombineMaterial",uniforms:{inputBufferA:new nl(null),inputBufferB:new nl(null)},blending:bJ,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`});var wme=`#define GLSLIFY 1
out vec3 n;void main(){vec4 view_space=viewMatrix*modelMatrix*vec4(position,1.0);gl_Position=projectionMatrix*view_space;n=mat3(viewMatrix*modelMatrix)*normal;n=normalize(n);}`,Sme=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,Mme=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,Tme=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`;new Xd({vertexShader:wme,fragmentShader:Sme});new Xd({vertexShader:Mme,fragmentShader:Tme,uniforms:{texture_ao_lrez:new nl(null),texture_depth_lrez:new nl(null),texture_depth_hrez:new nl(null),near:new nl(null),far:new nl(null)}});new Gi;Tg(_J(),1);new re;function aj(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ame}=Object.prototype,{getPrototypeOf:CP}=Object,Lx=(e=>t=>{const r=Ame.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Co=e=>(e=e.toLowerCase(),t=>Lx(t)===e),Ex=e=>t=>typeof t===e,{isArray:af}=Array,qv=Ex("undefined");function Cme(e){return e!==null&&!qv(e)&&e.constructor!==null&&!qv(e.constructor)&&Bn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const oj=Co("ArrayBuffer");function Dme(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&oj(e.buffer),t}const Pme=Ex("string"),Bn=Ex("function"),sj=Ex("number"),Ix=e=>e!==null&&typeof e=="object",Lme=e=>e===!0||e===!1,R0=e=>{if(Lx(e)!=="object")return!1;const t=CP(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Eme=Co("Date"),Ime=Co("File"),Ome=Co("Blob"),Rme=Co("FileList"),zme=e=>Ix(e)&&Bn(e.pipe),Nme=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Bn(e.append)&&((t=Lx(e))==="formdata"||t==="object"&&Bn(e.toString)&&e.toString()==="[object FormData]"))},kme=Co("URLSearchParams"),Bme=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zg(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,n;if(typeof e!="object"&&(e=[e]),af(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(i=0;i<o;i++)s=a[i],t.call(null,e[s],s,e)}}function lj(e,t){t=t.toLowerCase();const r=Object.keys(e);let i=r.length,n;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const uj=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),hj=e=>!qv(e)&&e!==uj;function XT(){const{caseless:e}=hj(this)&&this||{},t={},r=(i,n)=>{const a=e&&lj(t,n)||n;R0(t[a])&&R0(i)?t[a]=XT(t[a],i):R0(i)?t[a]=XT({},i):af(i)?t[a]=i.slice():t[a]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&zg(arguments[i],r);return t}const Fme=(e,t,r,{allOwnKeys:i}={})=>(zg(t,(n,a)=>{r&&Bn(n)?e[a]=aj(n,r):e[a]=n},{allOwnKeys:i}),e),Vme=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ume=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Gme=(e,t,r,i)=>{let n,a,o;const s={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)o=n[a],(!i||i(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=r!==!1&&CP(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Hme=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},jme=e=>{if(!e)return null;if(af(e))return e;let t=e.length;if(!sj(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Wme=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&CP(Uint8Array)),$me=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const a=n.value;t.call(e,a[0],a[1])}},qme=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},Xme=Co("HTMLFormElement"),Yme=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,n){return i.toUpperCase()+n}),dz=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Zme=Co("RegExp"),cj=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};zg(r,(n,a)=>{t(n,a,e)!==!1&&(i[a]=n)}),Object.defineProperties(e,i)},Kme=e=>{cj(e,(t,r)=>{if(Bn(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(Bn(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Jme=(e,t)=>{const r={},i=n=>{n.forEach(a=>{r[a]=!0})};return af(e)?i(e):i(String(e).split(t)),r},Qme=()=>{},eye=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Kw="abcdefghijklmnopqrstuvwxyz",fz="0123456789",dj={DIGIT:fz,ALPHA:Kw,ALPHA_DIGIT:Kw+Kw.toUpperCase()+fz},tye=(e=16,t=dj.ALPHA_DIGIT)=>{let r="";const{length:i}=t;for(;e--;)r+=t[Math.random()*i|0];return r};function rye(e){return!!(e&&Bn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const iye=e=>{const t=new Array(10),r=(i,n)=>{if(Ix(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[n]=i;const a=af(i)?[]:{};return zg(i,(o,s)=>{const l=r(o,n+1);!qv(l)&&(a[s]=l)}),t[n]=void 0,a}}return i};return r(e,0)},nye=Co("AsyncFunction"),aye=e=>e&&(Ix(e)||Bn(e))&&Bn(e.then)&&Bn(e.catch),fe={isArray:af,isArrayBuffer:oj,isBuffer:Cme,isFormData:Nme,isArrayBufferView:Dme,isString:Pme,isNumber:sj,isBoolean:Lme,isObject:Ix,isPlainObject:R0,isUndefined:qv,isDate:Eme,isFile:Ime,isBlob:Ome,isRegExp:Zme,isFunction:Bn,isStream:zme,isURLSearchParams:kme,isTypedArray:Wme,isFileList:Rme,forEach:zg,merge:XT,extend:Fme,trim:Bme,stripBOM:Vme,inherits:Ume,toFlatObject:Gme,kindOf:Lx,kindOfTest:Co,endsWith:Hme,toArray:jme,forEachEntry:$me,matchAll:qme,isHTMLForm:Xme,hasOwnProperty:dz,hasOwnProp:dz,reduceDescriptors:cj,freezeMethods:Kme,toObjectSet:Jme,toCamelCase:Yme,noop:Qme,toFiniteNumber:eye,findKey:lj,global:uj,isContextDefined:hj,ALPHABET:dj,generateString:tye,isSpecCompliantForm:rye,toJSONObject:iye,isAsyncFn:nye,isThenable:aye};function _t(e,t,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}fe.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fj=_t.prototype,pj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pj[e]={value:e}});Object.defineProperties(_t,pj);Object.defineProperty(fj,"isAxiosError",{value:!0});_t.from=(e,t,r,i,n,a)=>{const o=Object.create(fj);return fe.toFlatObject(e,o,function(l){return l!==Error.prototype},s=>s!=="isAxiosError"),_t.call(o,e.message,t,r,i,n),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const oye=null;function YT(e){return fe.isPlainObject(e)||fe.isArray(e)}function vj(e){return fe.endsWith(e,"[]")?e.slice(0,-2):e}function pz(e,t,r){return e?e.concat(t).map(function(n,a){return n=vj(n),!r&&a?"["+n+"]":n}).join(r?".":""):t}function sye(e){return fe.isArray(e)&&!e.some(YT)}const lye=fe.toFlatObject(fe,{},null,function(t){return/^is[A-Z]/.test(t)});function Ox(e,t,r){if(!fe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=fe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!fe.isUndefined(g[v])});const i=r.metaTokens,n=r.visitor||h,a=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(t);if(!fe.isFunction(n))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(fe.isDate(p))return p.toISOString();if(!l&&fe.isBlob(p))throw new _t("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(p)||fe.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,v,g){let m=p;if(p&&!g&&typeof p=="object"){if(fe.endsWith(v,"{}"))v=i?v:v.slice(0,-2),p=JSON.stringify(p);else if(fe.isArray(p)&&sye(p)||(fe.isFileList(p)||fe.endsWith(v,"[]"))&&(m=fe.toArray(p)))return v=vj(v),m.forEach(function(_,x){!(fe.isUndefined(_)||_===null)&&t.append(o===!0?pz([v],x,a):o===null?v:v+"[]",u(_))}),!1}return YT(p)?!0:(t.append(pz(g,v,a),u(p)),!1)}const c=[],d=Object.assign(lye,{defaultVisitor:h,convertValue:u,isVisitable:YT});function f(p,v){if(!fe.isUndefined(p)){if(c.indexOf(p)!==-1)throw Error("Circular reference detected in "+v.join("."));c.push(p),fe.forEach(p,function(m,y){(!(fe.isUndefined(m)||m===null)&&n.call(t,m,fe.isString(y)?y.trim():y,v,d))===!0&&f(m,v?v.concat(y):[y])}),c.pop()}}if(!fe.isObject(e))throw new TypeError("data must be an object");return f(e),t}function vz(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function DP(e,t){this._pairs=[],e&&Ox(e,this,t)}const gj=DP.prototype;gj.append=function(t,r){this._pairs.push([t,r])};gj.toString=function(t){const r=t?function(i){return t.call(this,i,vz)}:vz;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function uye(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mj(e,t,r){if(!t)return e;const i=r&&r.encode||uye,n=r&&r.serialize;let a;if(n?a=n(t,r):a=fe.isURLSearchParams(t)?t.toString():new DP(t,r).toString(i),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class hye{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){fe.forEach(this.handlers,function(i){i!==null&&t(i)})}}const gz=hye,yj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cye=typeof URLSearchParams<"u"?URLSearchParams:DP,dye=typeof FormData<"u"?FormData:null,fye=typeof Blob<"u"?Blob:null,pye=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),vye=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),lo={isBrowser:!0,classes:{URLSearchParams:cye,FormData:dye,Blob:fye},isStandardBrowserEnv:pye,isStandardBrowserWebWorkerEnv:vye,protocols:["http","https","file","blob","url","data"]};function gye(e,t){return Ox(e,new lo.classes.URLSearchParams,Object.assign({visitor:function(r,i,n,a){return lo.isNode&&fe.isBuffer(r)?(this.append(i,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function mye(e){return fe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function yye(e){const t={},r=Object.keys(e);let i;const n=r.length;let a;for(i=0;i<n;i++)a=r[i],t[a]=e[a];return t}function _j(e){function t(r,i,n,a){let o=r[a++];const s=Number.isFinite(+o),l=a>=r.length;return o=!o&&fe.isArray(n)?n.length:o,l?(fe.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!s):((!n[o]||!fe.isObject(n[o]))&&(n[o]=[]),t(r,i,n[o],a)&&fe.isArray(n[o])&&(n[o]=yye(n[o])),!s)}if(fe.isFormData(e)&&fe.isFunction(e.entries)){const r={};return fe.forEachEntry(e,(i,n)=>{t(mye(i),n,r,0)}),r}return null}const _ye={"Content-Type":void 0};function xye(e,t,r){if(fe.isString(e))try{return(t||JSON.parse)(e),fe.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const Rx={transitional:yj,adapter:["xhr","http"],transformRequest:[function(t,r){const i=r.getContentType()||"",n=i.indexOf("application/json")>-1,a=fe.isObject(t);if(a&&fe.isHTMLForm(t)&&(t=new FormData(t)),fe.isFormData(t))return n&&n?JSON.stringify(_j(t)):t;if(fe.isArrayBuffer(t)||fe.isBuffer(t)||fe.isStream(t)||fe.isFile(t)||fe.isBlob(t))return t;if(fe.isArrayBufferView(t))return t.buffer;if(fe.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return gye(t,this.formSerializer).toString();if((s=fe.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ox(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||n?(r.setContentType("application/json",!1),xye(t)):t}],transformResponse:[function(t){const r=this.transitional||Rx.transitional,i=r&&r.forcedJSONParsing,n=this.responseType==="json";if(t&&fe.isString(t)&&(i&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?_t.from(s,_t.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lo.classes.FormData,Blob:lo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};fe.forEach(["delete","get","head"],function(t){Rx.headers[t]={}});fe.forEach(["post","put","patch"],function(t){Rx.headers[t]=fe.merge(_ye)});const PP=Rx,bye=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wye=e=>{const t={};let r,i,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),i=o.substring(n+1).trim(),!(!r||t[r]&&bye[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},mz=Symbol("internals");function Yf(e){return e&&String(e).trim().toLowerCase()}function z0(e){return e===!1||e==null?e:fe.isArray(e)?e.map(z0):String(e)}function Sye(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const Mye=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Jw(e,t,r,i,n){if(fe.isFunction(i))return i.call(this,t,r);if(n&&(t=r),!!fe.isString(t)){if(fe.isString(i))return t.indexOf(i)!==-1;if(fe.isRegExp(i))return i.test(t)}}function Tye(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function Aye(e,t){const r=fe.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(n,a,o){return this[i].call(this,t,n,a,o)},configurable:!0})})}class zx{constructor(t){t&&this.set(t)}set(t,r,i){const n=this;function a(s,l,u){const h=Yf(l);if(!h)throw new Error("header name must be a non-empty string");const c=fe.findKey(n,h);(!c||n[c]===void 0||u===!0||u===void 0&&n[c]!==!1)&&(n[c||l]=z0(s))}const o=(s,l)=>fe.forEach(s,(u,h)=>a(u,h,l));return fe.isPlainObject(t)||t instanceof this.constructor?o(t,r):fe.isString(t)&&(t=t.trim())&&!Mye(t)?o(wye(t),r):t!=null&&a(r,t,i),this}get(t,r){if(t=Yf(t),t){const i=fe.findKey(this,t);if(i){const n=this[i];if(!r)return n;if(r===!0)return Sye(n);if(fe.isFunction(r))return r.call(this,n,i);if(fe.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Yf(t),t){const i=fe.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||Jw(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let n=!1;function a(o){if(o=Yf(o),o){const s=fe.findKey(i,o);s&&(!r||Jw(i,i[s],s,r))&&(delete i[s],n=!0)}}return fe.isArray(t)?t.forEach(a):a(t),n}clear(t){const r=Object.keys(this);let i=r.length,n=!1;for(;i--;){const a=r[i];(!t||Jw(this,this[a],a,t,!0))&&(delete this[a],n=!0)}return n}normalize(t){const r=this,i={};return fe.forEach(this,(n,a)=>{const o=fe.findKey(i,a);if(o){r[o]=z0(n),delete r[a];return}const s=t?Tye(a):String(a).trim();s!==a&&delete r[a],r[s]=z0(n),i[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return fe.forEach(this,(i,n)=>{i!=null&&i!==!1&&(r[n]=t&&fe.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(n=>i.set(n)),i}static accessor(t){const i=(this[mz]=this[mz]={accessors:{}}).accessors,n=this.prototype;function a(o){const s=Yf(o);i[s]||(Aye(n,o),i[s]=!0)}return fe.isArray(t)?t.forEach(a):a(t),this}}zx.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.freezeMethods(zx.prototype);fe.freezeMethods(zx);const os=zx;function Qw(e,t){const r=this||PP,i=t||r,n=os.from(i.headers);let a=i.data;return fe.forEach(e,function(s){a=s.call(r,a,n.normalize(),t?t.status:void 0)}),n.normalize(),a}function xj(e){return!!(e&&e.__CANCEL__)}function Ng(e,t,r){_t.call(this,e??"canceled",_t.ERR_CANCELED,t,r),this.name="CanceledError"}fe.inherits(Ng,_t,{__CANCEL__:!0});function Cye(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new _t("Request failed with status code "+r.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Dye=lo.isStandardBrowserEnv?function(){return{write:function(r,i,n,a,o,s){const l=[];l.push(r+"="+encodeURIComponent(i)),fe.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),fe.isString(a)&&l.push("path="+a),fe.isString(o)&&l.push("domain="+o),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){const i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Pye(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Lye(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function bj(e,t){return e&&!Pye(t)?Lye(e,t):t}const Eye=lo.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let i;function n(a){let o=a;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(o){const s=fe.isString(o)?n(o):o;return s.protocol===i.protocol&&s.host===i.host}}():function(){return function(){return!0}}();function Iye(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Oye(e,t){e=e||10;const r=new Array(e),i=new Array(e);let n=0,a=0,o;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),h=i[a];o||(o=u),r[n]=l,i[n]=u;let c=a,d=0;for(;c!==n;)d+=r[c++],c=c%e;if(n=(n+1)%e,n===a&&(a=(a+1)%e),u-o<t)return;const f=h&&u-h;return f?Math.round(d*1e3/f):void 0}}function yz(e,t){let r=0;const i=Oye(50,250);return n=>{const a=n.loaded,o=n.lengthComputable?n.total:void 0,s=a-r,l=i(s),u=a<=o;r=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&u?(o-a)/l:void 0,event:n};h[t?"download":"upload"]=!0,e(h)}}const Rye=typeof XMLHttpRequest<"u",zye=Rye&&function(e){return new Promise(function(r,i){let n=e.data;const a=os.from(e.headers).normalize(),o=e.responseType;let s;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}fe.isFormData(n)&&(lo.isStandardBrowserEnv||lo.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(e.auth){const f=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(f+":"+p))}const h=bj(e.baseURL,e.url);u.open(e.method.toUpperCase(),mj(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function c(){if(!u)return;const f=os.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:f,config:e,request:u};Cye(function(m){r(m),l()},function(m){i(m),l()},v),u=null}if("onloadend"in u?u.onloadend=c:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(c)},u.onabort=function(){u&&(i(new _t("Request aborted",_t.ECONNABORTED,e,u)),u=null)},u.onerror=function(){i(new _t("Network Error",_t.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let p=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const v=e.transitional||yj;e.timeoutErrorMessage&&(p=e.timeoutErrorMessage),i(new _t(p,v.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,e,u)),u=null},lo.isStandardBrowserEnv){const f=(e.withCredentials||Eye(h))&&e.xsrfCookieName&&Dye.read(e.xsrfCookieName);f&&a.set(e.xsrfHeaderName,f)}n===void 0&&a.setContentType(null),"setRequestHeader"in u&&fe.forEach(a.toJSON(),function(p,v){u.setRequestHeader(v,p)}),fe.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&o!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",yz(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",yz(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=f=>{u&&(i(!f||f.type?new Ng(null,e,u):f),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const d=Iye(h);if(d&&lo.protocols.indexOf(d)===-1){i(new _t("Unsupported protocol "+d+":",_t.ERR_BAD_REQUEST,e));return}u.send(n||null)})},N0={http:oye,xhr:zye};fe.forEach(N0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Nye={getAdapter:e=>{e=fe.isArray(e)?e:[e];const{length:t}=e;let r,i;for(let n=0;n<t&&(r=e[n],!(i=fe.isString(r)?N0[r.toLowerCase()]:r));n++);if(!i)throw i===!1?new _t(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(fe.hasOwnProp(N0,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!fe.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:N0};function eS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ng(null,e)}function _z(e){return eS(e),e.headers=os.from(e.headers),e.data=Qw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Nye.getAdapter(e.adapter||PP.adapter)(e).then(function(i){return eS(e),i.data=Qw.call(e,e.transformResponse,i),i.headers=os.from(i.headers),i},function(i){return xj(i)||(eS(e),i&&i.response&&(i.response.data=Qw.call(e,e.transformResponse,i.response),i.response.headers=os.from(i.response.headers))),Promise.reject(i)})}const xz=e=>e instanceof os?e.toJSON():e;function Rd(e,t){t=t||{};const r={};function i(u,h,c){return fe.isPlainObject(u)&&fe.isPlainObject(h)?fe.merge.call({caseless:c},u,h):fe.isPlainObject(h)?fe.merge({},h):fe.isArray(h)?h.slice():h}function n(u,h,c){if(fe.isUndefined(h)){if(!fe.isUndefined(u))return i(void 0,u,c)}else return i(u,h,c)}function a(u,h){if(!fe.isUndefined(h))return i(void 0,h)}function o(u,h){if(fe.isUndefined(h)){if(!fe.isUndefined(u))return i(void 0,u)}else return i(void 0,h)}function s(u,h,c){if(c in t)return i(u,h);if(c in e)return i(void 0,u)}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(u,h)=>n(xz(u),xz(h),!0)};return fe.forEach(Object.keys(Object.assign({},e,t)),function(h){const c=l[h]||n,d=c(e[h],t[h],h);fe.isUndefined(d)&&c!==s||(r[h]=d)}),r}const wj="1.4.0",LP={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{LP[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const bz={};LP.transitional=function(t,r,i){function n(a,o){return"[Axios v"+wj+"] Transitional option '"+a+"'"+o+(i?". "+i:"")}return(a,o,s)=>{if(t===!1)throw new _t(n(o," has been removed"+(r?" in "+r:"")),_t.ERR_DEPRECATED);return r&&!bz[o]&&(bz[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,o,s):!0}};function kye(e,t,r){if(typeof e!="object")throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let n=i.length;for(;n-- >0;){const a=i[n],o=t[a];if(o){const s=e[a],l=s===void 0||o(s,a,e);if(l!==!0)throw new _t("option "+a+" must be "+l,_t.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _t("Unknown option "+a,_t.ERR_BAD_OPTION)}}const ZT={assertOptions:kye,validators:LP},Vs=ZT.validators;class t_{constructor(t){this.defaults=t,this.interceptors={request:new gz,response:new gz}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Rd(this.defaults,r);const{transitional:i,paramsSerializer:n,headers:a}=r;i!==void 0&&ZT.assertOptions(i,{silentJSONParsing:Vs.transitional(Vs.boolean),forcedJSONParsing:Vs.transitional(Vs.boolean),clarifyTimeoutError:Vs.transitional(Vs.boolean)},!1),n!=null&&(fe.isFunction(n)?r.paramsSerializer={serialize:n}:ZT.assertOptions(n,{encode:Vs.function,serialize:Vs.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o;o=a&&fe.merge(a.common,a[r.method]),o&&fe.forEach(["delete","get","head","post","put","patch","common"],p=>{delete a[p]}),r.headers=os.concat(o,a);const s=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,s.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let h,c=0,d;if(!l){const p=[_z.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,u),d=p.length,h=Promise.resolve(r);c<d;)h=h.then(p[c++],p[c++]);return h}d=s.length;let f=r;for(c=0;c<d;){const p=s[c++],v=s[c++];try{f=p(f)}catch(g){v.call(this,g);break}}try{h=_z.call(this,f)}catch(p){return Promise.reject(p)}for(c=0,d=u.length;c<d;)h=h.then(u[c++],u[c++]);return h}getUri(t){t=Rd(this.defaults,t);const r=bj(t.baseURL,t.url);return mj(r,t.params,t.paramsSerializer)}}fe.forEach(["delete","get","head","options"],function(t){t_.prototype[t]=function(r,i){return this.request(Rd(i||{},{method:t,url:r,data:(i||{}).data}))}});fe.forEach(["post","put","patch"],function(t){function r(i){return function(a,o,s){return this.request(Rd(s||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}t_.prototype[t]=r(),t_.prototype[t+"Form"]=r(!0)});const k0=t_;class EP{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const i=this;this.promise.then(n=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](n);i._listeners=null}),this.promise.then=n=>{let a;const o=new Promise(s=>{i.subscribe(s),a=s}).then(n);return o.cancel=function(){i.unsubscribe(a)},o},t(function(a,o,s){i.reason||(i.reason=new Ng(a,o,s),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new EP(function(n){t=n}),cancel:t}}}const Bye=EP;function Fye(e){return function(r){return e.apply(null,r)}}function Vye(e){return fe.isObject(e)&&e.isAxiosError===!0}const KT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(KT).forEach(([e,t])=>{KT[t]=e});const Uye=KT;function Sj(e){const t=new k0(e),r=aj(k0.prototype.request,t);return fe.extend(r,k0.prototype,t,{allOwnKeys:!0}),fe.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return Sj(Rd(e,n))},r}const Dr=Sj(PP);Dr.Axios=k0;Dr.CanceledError=Ng;Dr.CancelToken=Bye;Dr.isCancel=xj;Dr.VERSION=wj;Dr.toFormData=Ox;Dr.AxiosError=_t;Dr.Cancel=Dr.CanceledError;Dr.all=function(t){return Promise.all(t)};Dr.spread=Fye;Dr.isAxiosError=Vye;Dr.mergeConfig=Rd;Dr.AxiosHeaders=os;Dr.formToJSON=e=>_j(fe.isHTMLForm(e)?new FormData(e):e);Dr.HttpStatusCode=Uye;Dr.default=Dr;const Gye=Dr;/*! js-cookie v3.0.5 | MIT */function fy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}var Hye={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function JT(e,t){function r(n,a,o){if(!(typeof document>"u")){o=fy({},t,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var l in o)o[l]&&(s+="; "+l,o[l]!==!0&&(s+="="+o[l].split(";")[0]));return document.cookie=n+"="+e.write(a,n)+s}}function i(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var a=document.cookie?document.cookie.split("; "):[],o={},s=0;s<a.length;s++){var l=a[s].split("="),u=l.slice(1).join("=");try{var h=decodeURIComponent(l[0]);if(o[h]=e.read(u,h),n===h)break}catch{}}return n?o[n]:o}}return Object.create({set:r,get:i,remove:function(n,a){r(n,"",fy({},a,{expires:-1}))},withAttributes:function(n){return JT(this.converter,fy({},this.attributes,n))},withConverter:function(n){return JT(fy({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var jye=JT(Hye,{path:"/"});const Wye="token_key";function $ye(){return jye.get(Wye)}const IP=Gye.create({baseURL:"https://api-hmzs.itheima.net/v1",timeout:5e3});IP.interceptors.request.use(e=>{const t=$ye();return t&&(e.headers.Authorization=t),e},e=>Promise.reject(e));IP.interceptors.response.use(e=>e.data,e=>Promise.reject(e));function qye(){return IP({url:"/park/statistics/info"})}function Xye(){const e=Mh({});async function t(){const r=await qye();e.value=r.data}return{parkInfo:e,getUserInfo:t}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var QT=function(e,t){return QT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},QT(e,t)};function Y(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");QT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Yye=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),Zye=function(){function e(){this.browser=new Yye,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Ru=new Zye;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Ru.wxa=!0,Ru.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Ru.worker=!0:typeof navigator>"u"?(Ru.node=!0,Ru.svgSupported=!0):Kye(navigator.userAgent,Ru);function Kye(e,t){var r=t.browser,i=e.match(/Firefox\/([\d.]+)/),n=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(e);i&&(r.firefox=!0,r.version=i[1]),n&&(r.ie=!0,r.version=n[1]),a&&(r.edge=!0,r.version=a[1],r.newEdge=+a[1].split(".")[0]>18),o&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const at=Ru;var OP=12,Mj="sans-serif",zl=OP+"px "+Mj,Jye=20,Qye=100,e0e="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function t0e(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var i=String.fromCharCode(r+32),n=(e.charCodeAt(r)-Jye)/Qye;t[i]=n}return t}var r0e=t0e(e0e),Nl={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,i){if(!e){var n=Nl.createCanvas();e=n&&n.getContext("2d")}if(e)return t!==i&&(t=e.font=i||zl),e.measureText(r);r=r||"",i=i||zl;var a=/(\d+)px/.exec(i),o=a&&+a[1]||OP,s=0;if(i.indexOf("mono")>=0)s=o*r.length;else for(var l=0;l<r.length;l++){var u=r0e[r[l]];s+=u==null?o:u*o}return{width:s}}}(),loadImage:function(e,t,r){var i=new Image;return i.onload=t,i.onerror=r,i.src=e,i}},Tj=xo(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),Aj=xo(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),of=Object.prototype.toString,Nx=Array.prototype,i0e=Nx.forEach,n0e=Nx.filter,RP=Nx.slice,a0e=Nx.map,wz=(function(){}).constructor,py=wz?wz.prototype:null,zP="__proto__",o0e=2311;function Cj(){return o0e++}function NP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function Ee(e){if(e==null||typeof e!="object")return e;var t=e,r=of.call(e);if(r==="[object Array]"){if(!uv(e)){t=[];for(var i=0,n=e.length;i<n;i++)t[i]=Ee(e[i])}}else if(Aj[r]){if(!uv(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}}}else if(!Tj[r]&&!uv(e)&&!Xv(e)){t={};for(var o in e)e.hasOwnProperty(o)&&o!==zP&&(t[o]=Ee(e[o]))}return t}function Ue(e,t,r){if(!Pe(t)||!Pe(e))return r?Ee(t):e;for(var i in t)if(t.hasOwnProperty(i)&&i!==zP){var n=e[i],a=t[i];Pe(a)&&Pe(n)&&!ue(a)&&!ue(n)&&!Xv(a)&&!Xv(n)&&!Sz(a)&&!Sz(n)&&!uv(a)&&!uv(n)?Ue(n,a,r):(r||!(i in e))&&(e[i]=Ee(t[i]))}return e}function kP(e,t){for(var r=e[0],i=1,n=e.length;i<n;i++)r=Ue(r,e[i],t);return r}function ae(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==zP&&(e[r]=t[r]);return e}function De(e,t,r){for(var i=Ze(t),n=0;n<i.length;n++){var a=i[n];(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}return e}function We(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r}return-1}function s0e(e,t){var r=e.prototype;function i(){}i.prototype=t.prototype,e.prototype=new i;for(var n in r)r.hasOwnProperty(n)&&(e.prototype[n]=r[n]);e.prototype.constructor=e,e.superClass=t}function gr(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var a=i[n];a!=="constructor"&&(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}else De(e,t,r)}function ai(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function I(e,t,r){if(e&&t)if(e.forEach&&e.forEach===i0e)e.forEach(t,r);else if(e.length===+e.length)for(var i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(r,e[a],a,e)}function ce(e,t,r){if(!e)return[];if(!t)return BP(e);if(e.map&&e.map===a0e)return e.map(t,r);for(var i=[],n=0,a=e.length;n<a;n++)i.push(t.call(r,e[n],n,e));return i}function xo(e,t,r,i){if(e&&t){for(var n=0,a=e.length;n<a;n++)r=t.call(i,r,e[n],n,e);return r}}function xt(e,t,r){if(!e)return[];if(!t)return BP(e);if(e.filter&&e.filter===n0e)return e.filter(t,r);for(var i=[],n=0,a=e.length;n<a;n++)t.call(r,e[n],n,e)&&i.push(e[n]);return i}function l0e(e,t,r){if(e&&t){for(var i=0,n=e.length;i<n;i++)if(t.call(r,e[i],i,e))return e[i]}}function Ze(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function u0e(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return function(){return e.apply(t,r.concat(RP.call(arguments)))}}var me=py&&Ae(py.bind)?py.call.bind(py.bind):u0e;function Ne(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(RP.call(arguments)))}}function ue(e){return Array.isArray?Array.isArray(e):of.call(e)==="[object Array]"}function Ae(e){return typeof e=="function"}function ge(e){return typeof e=="string"}function eA(e){return of.call(e)==="[object String]"}function st(e){return typeof e=="number"}function Pe(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function Sz(e){return!!Tj[of.call(e)]}function hn(e){return!!Aj[of.call(e)]}function Xv(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function kx(e){return e.colorStops!=null}function h0e(e){return e.image!=null}function c0e(e){return of.call(e)==="[object RegExp]"}function Yv(e){return e!==e}function zr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,i=e.length;r<i;r++)if(e[r]!=null)return e[r]}function Ve(e,t){return e??t}function ss(e,t,r){return e??t??r}function BP(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return RP.apply(e,t)}function FP(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function wi(e,t){if(!e)throw new Error(t)}function va(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Dj="__ec_primitive__";function r_(e){e[Dj]=!0}function uv(e){return e[Dj]}var d0e=function(){function e(){this.data={}}return e.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,r){return this.data[t]=r,this},e.prototype.keys=function(){return Ze(this.data)},e.prototype.forEach=function(t){var r=this.data;for(var i in r)r.hasOwnProperty(i)&&t(r[i],i)},e}(),Pj=typeof Map=="function";function f0e(){return Pj?new Map:new d0e}var p0e=function(){function e(t){var r=ue(t);this.data=f0e();var i=this;t instanceof e?t.each(n):t&&I(t,n);function n(a,o){r?i.set(a,o):i.set(o,a)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,r){return this.data.set(t,r),r},e.prototype.each=function(t,r){this.data.forEach(function(i,n){t.call(r,i,n)})},e.prototype.keys=function(){var t=this.data.keys();return Pj?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function Me(e){return new p0e(e)}function i_(e,t){for(var r=new e.constructor(e.length+t.length),i=0;i<e.length;i++)r[i]=e[i];for(var n=e.length,i=0;i<t.length;i++)r[i+n]=t[i];return r}function Bx(e,t){var r;if(Object.create)r=Object.create(e);else{var i=function(){};i.prototype=e,r=new i}return t&&ae(r,t),r}function Lj(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function _e(e,t){return e.hasOwnProperty(t)}function sr(){}var B0=180/Math.PI;function jh(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function pi(e,t){return e[0]=t[0],e[1]=t[1],e}function ls(e){return[e[0],e[1]]}function v0e(e,t,r){return e[0]=t,e[1]=r,e}function Mz(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function tA(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function Ju(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function rA(e){return Math.sqrt(g0e(e))}function g0e(e){return e[0]*e[0]+e[1]*e[1]}function F0(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function sf(e,t){var r=rA(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function iA(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var pl=iA;function m0e(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var ph=m0e;function V0(e,t,r,i){return e[0]=t[0]+i*(r[0]-t[0]),e[1]=t[1]+i*(r[1]-t[1]),e}function Gr(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function vl(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function gl(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var mc=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),y0e=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new mc(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var i=t.offsetX,n=t.offsetY,a=i-this._x,o=n-this._y;this._x=i,this._y=n,r.drift(a,o,t),this.handler.dispatchToElement(new mc(r,t),"drag",t.event);var s=this.handler.findHover(i,n,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new mc(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new mc(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new mc(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new mc(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const _0e=y0e;var x0e=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,i,n){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof r=="function"&&(n=i,i=r,r=null),!i||!t)return this;var o=this._$eventProcessor;r!=null&&o&&o.normalizeQuery&&(r=o.normalizeQuery(r)),a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===i)return this;var l={h:i,query:r,ctx:n||this,callAtLast:i.zrEventfulCallAtLast},u=a[t].length-1,h=a[t][u];return h&&h.callAtLast?a[t].splice(u,0,l):a[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var i=this._$handlers;if(!i)return this;if(!t)return this._$handlers={},this;if(r){if(i[t]){for(var n=[],a=0,o=i[t].length;a<o;a++)i[t][a].h!==r&&n.push(i[t][a]);i[t]=n}i[t]&&i[t].length===0&&delete i[t]}else delete i[t];return this},e.prototype.trigger=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],a=this._$eventProcessor;if(n)for(var o=r.length,s=n.length,l=0;l<s;l++){var u=n[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(t,u.query)))switch(o){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],a=this._$eventProcessor;if(n)for(var o=r.length,s=r[o-1],l=n.length,u=0;u<l;u++){var h=n[u];if(!(a&&a.filter&&h.query!=null&&!a.filter(t,h.query)))switch(o){case 0:h.h.call(s);break;case 1:h.h.call(s,r[0]);break;case 2:h.h.call(s,r[0],r[1]);break;default:h.h.apply(s,r.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e}();const jn=x0e;var b0e=Math.log(2);function nA(e,t,r,i,n,a){var o=i+"-"+n,s=e.length;if(a.hasOwnProperty(o))return a[o];if(t===1){var l=Math.round(Math.log((1<<s)-1&~n)/b0e);return e[r][l]}for(var u=i|1<<r,h=r+1;i&1<<h;)h++;for(var c=0,d=0,f=0;d<s;d++){var p=1<<d;p&n||(c+=(f%2?-1:1)*e[r][d]*nA(e,t-1,h,u,n|p,a),f++)}return a[o]=c,c}function Tz(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],i={},n=nA(r,8,0,0,0,i);if(n!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*nA(r,7,o===0?1:0,1<<o,1<<s,i)/n*t[o];return function(l,u,h){var c=u*a[6]+h*a[7]+1;l[0]=(u*a[0]+h*a[1]+a[2])/c,l[1]=(u*a[3]+h*a[4]+a[5])/c}}}var Az="___zrEVENTSAVED",tS=[];function w0e(e,t,r,i,n){return aA(tS,t,i,n,!0)&&aA(e,r,tS[0],tS[1])}function aA(e,t,r,i,n){if(t.getBoundingClientRect&&at.domSupported&&!Ej(t)){var a=t[Az]||(t[Az]={}),o=S0e(t,a),s=M0e(o,a,n);if(s)return s(e,r,i),!0}return!1}function S0e(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var i=["left","right"],n=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,u=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",n[u]+":0",i[1-l]+":auto",n[1-u]+":auto",""].join("!important;"),e.appendChild(o),r.push(o)}return r}function M0e(e,t,r){for(var i=r?"invTrans":"trans",n=t[i],a=t.srcCoords,o=[],s=[],l=!0,u=0;u<4;u++){var h=e[u].getBoundingClientRect(),c=2*u,d=h.left,f=h.top;o.push(d,f),l=l&&a&&d===a[c]&&f===a[c+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&n?n:(t.srcCoords=o,t[i]=r?Tz(s,o):Tz(o,s))}function Ej(e){return e.nodeName.toUpperCase()==="CANVAS"}var T0e=/([&<>"'])/g,A0e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ii(e){return e==null?"":(e+"").replace(T0e,function(t,r){return A0e[r]})}var C0e=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rS=[],D0e=at.browser.firefox&&+at.browser.version.split(".")[0]<39;function oA(e,t,r,i){return r=r||{},i?Cz(e,t,r):D0e&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):Cz(e,t,r),r}function Cz(e,t,r){if(at.domSupported&&e.getBoundingClientRect){var i=t.clientX,n=t.clientY;if(Ej(e)){var a=e.getBoundingClientRect();r.zrX=i-a.left,r.zrY=n-a.top;return}else if(aA(rS,e,i,n)){r.zrX=rS[0],r.zrY=rS[1];return}}r.zrX=r.zrY=0}function VP(e){return e||window.event}function wn(e,t,r){if(t=VP(t),t.zrX!=null)return t;var i=t.type,n=i&&i.indexOf("touch")>=0;if(n){var o=i!=="touchend"?t.targetTouches[0]:t.changedTouches[0];o&&oA(e,o,t,r)}else{oA(e,t,t,r);var a=P0e(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&C0e.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function P0e(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,i=e.deltaY;if(r==null||i==null)return t;var n=Math.abs(i!==0?i:r),a=i>0?-1:i<0?1:r>0?-1:1;return 3*n*a}function sA(e,t,r,i){e.addEventListener(t,r,i)}function L0e(e,t,r,i){e.removeEventListener(t,r,i)}var ys=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function Dz(e){return e.which===2||e.which===3}var E0e=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,i){return this._doTrack(t,r,i),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,i){var n=t.touches;if(n){for(var a={points:[],touches:[],target:r,event:t},o=0,s=n.length;o<s;o++){var l=n[o],u=oA(i,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},e.prototype._recognize=function(t){for(var r in iS)if(iS.hasOwnProperty(r)){var i=iS[r](this._track,t);if(i)return i}},e}();function Pz(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function I0e(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var iS={pinch:function(e,t){var r=e.length;if(r){var i=(e[r-1]||{}).points,n=(e[r-2]||{}).points||i;if(n&&n.length>1&&i&&i.length>1){var a=Pz(i)/Pz(n);!isFinite(a)&&(a=1),t.pinchScale=a;var o=I0e(i);return t.pinchX=o[0],t.pinchY=o[1],{type:"pinch",target:e[0].target,event:t}}}}};function Gn(){return[1,0,0,1,0,0]}function Fx(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function UP(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function us(e,t,r){var i=t[0]*r[0]+t[2]*r[1],n=t[1]*r[0]+t[3]*r[1],a=t[0]*r[2]+t[2]*r[3],o=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e}function bo(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function Wh(e,t,r){var i=t[0],n=t[2],a=t[4],o=t[1],s=t[3],l=t[5],u=Math.sin(r),h=Math.cos(r);return e[0]=i*h+o*u,e[1]=-i*u+o*h,e[2]=n*h+s*u,e[3]=-n*u+h*s,e[4]=h*a+u*l,e[5]=h*l-u*a,e}function GP(e,t,r){var i=r[0],n=r[1];return e[0]=t[0]*i,e[1]=t[1]*n,e[2]=t[2]*i,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*n,e}function lf(e,t){var r=t[0],i=t[2],n=t[4],a=t[1],o=t[3],s=t[5],l=r*o-a*i;return l?(l=1/l,e[0]=o*l,e[1]=-a*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*s-o*n)*l,e[5]=(a*n-r*s)*l,e):null}function O0e(e){var t=Gn();return UP(t,e),t}var R0e=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,i=this.y-t.y;return Math.sqrt(r*r+i*i)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,i=this.y-t.y;return r*r+i*i},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var r=this.x,i=this.y;return this.x=t[0]*r+t[2]*i+t[4],this.y=t[1]*r+t[3]*i+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,i){t.x=r,t.y=i},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,i){t.x=r.x+i.x,t.y=r.y+i.y},e.sub=function(t,r,i){t.x=r.x-i.x,t.y=r.y-i.y},e.scale=function(t,r,i){t.x=r.x*i,t.y=r.y*i},e.scaleAndAdd=function(t,r,i,n){t.x=r.x+i.x*n,t.y=r.y+i.y*n},e.lerp=function(t,r,i,n){var a=1-n;t.x=a*r.x+n*i.x,t.y=a*r.y+n*i.y},e}();const Fe=R0e;var vy=Math.min,gy=Math.max,au=new Fe,ou=new Fe,su=new Fe,lu=new Fe,Zf=new Fe,Kf=new Fe,z0e=function(){function e(t,r,i,n){i<0&&(t=t+i,i=-i),n<0&&(r=r+n,n=-n),this.x=t,this.y=r,this.width=i,this.height=n}return e.prototype.union=function(t){var r=vy(t.x,this.x),i=vy(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=gy(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=gy(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=r,this.y=i},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,i=t.width/r.width,n=t.height/r.height,a=Gn();return bo(a,a,[-r.x,-r.y]),GP(a,a,[i,n]),bo(a,a,[t.x,t.y]),a},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var i=this,n=i.x,a=i.x+i.width,o=i.y,s=i.y+i.height,l=t.x,u=t.x+t.width,h=t.y,c=t.y+t.height,d=!(a<l||u<n||s<h||c<o);if(r){var f=1/0,p=0,v=Math.abs(a-l),g=Math.abs(u-n),m=Math.abs(s-h),y=Math.abs(c-o),_=Math.min(v,g),x=Math.min(m,y);a<l||u<n?_>p&&(p=_,v<g?Fe.set(Kf,-v,0):Fe.set(Kf,g,0)):_<f&&(f=_,v<g?Fe.set(Zf,v,0):Fe.set(Zf,-g,0)),s<h||c<o?x>p&&(p=x,m<y?Fe.set(Kf,0,-m):Fe.set(Kf,0,y)):_<f&&(f=_,m<y?Fe.set(Zf,0,m):Fe.set(Zf,0,-y))}return r&&Fe.copy(r,d?Zf:Kf),d},e.prototype.contain=function(t,r){var i=this;return t>=i.x&&t<=i.x+i.width&&r>=i.y&&r<=i.y+i.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,i){if(!i){t!==r&&e.copy(t,r);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var n=i[0],a=i[3],o=i[4],s=i[5];t.x=r.x*n+o,t.y=r.y*a+s,t.width=r.width*n,t.height=r.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}au.x=su.x=r.x,au.y=lu.y=r.y,ou.x=lu.x=r.x+r.width,ou.y=su.y=r.y+r.height,au.transform(i),lu.transform(i),ou.transform(i),su.transform(i),t.x=vy(au.x,ou.x,su.x,lu.x),t.y=vy(au.y,ou.y,su.y,lu.y);var l=gy(au.x,ou.x,su.x,lu.x),u=gy(au.y,ou.y,su.y,lu.y);t.width=l-t.x,t.height=u-t.y},e}();const Ge=z0e;var Ij="silent";function N0e(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:k0e}}function k0e(){ys(this.event)}var B0e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(jn),Jf=function(){function e(t,r){this.x=t,this.y=r}return e}(),F0e=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],nS=new Ge(0,0,0,0),Oj=function(e){Y(t,e);function t(r,i,n,a,o){var s=e.call(this)||this;return s._hovered=new Jf(0,0),s.storage=r,s.painter=i,s.painterRoot=a,s._pointerSize=o,n=n||new B0e,s.proxy=null,s.setHandlerProxy(n),s._draggingMgr=new _0e(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(I(F0e,function(i){r.on&&r.on(i,this[i],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var i=r.zrX,n=r.zrY,a=Rj(this,i,n),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new Jf(i,n):this.findHover(i,n),u=l.target,h=this.proxy;h.setCursor&&h.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(o,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var i=r.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Jf(0,0)},t.prototype.dispatch=function(r,i){var n=this[r];n&&n.call(this,i)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var i=this.proxy;i.setCursor&&i.setCursor(r)},t.prototype.dispatchToElement=function(r,i,n){r=r||{};var a=r.target;if(!(a&&a.silent)){for(var o="on"+i,s=N0e(i,r,n);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(i,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(i,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(i,s)}))}},t.prototype.findHover=function(r,i,n){var a=this.storage.getDisplayList(),o=new Jf(r,i);if(Lz(a,o,r,i,n),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,u=l/2,h=new Ge(r-u,i-u,l,l),c=a.length-1;c>=0;c--){var d=a[c];d!==n&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&(nS.copy(d.getBoundingRect()),d.transform&&nS.applyTransform(d.transform),nS.intersect(h)&&s.push(d))}if(s.length)for(var f=4,p=Math.PI/12,v=Math.PI*2,g=0;g<u;g+=f)for(var m=0;m<v;m+=p){var y=r+g*Math.cos(m),_=i+g*Math.sin(m);if(Lz(s,o,y,_,n),o.target)return o}}return o},t.prototype.processGesture=function(r,i){this._gestureMgr||(this._gestureMgr=new E0e);var n=this._gestureMgr;i==="start"&&n.clear();var a=n.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(i==="end"&&n.clear(),a){var o=a.type;r.gestureEvent=o;var s=new Jf;s.target=a.target,this.dispatchToElement(s,o,a.event)}},t}(jn);I(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Oj.prototype[e]=function(t){var r=t.zrX,i=t.zrY,n=Rj(this,r,i),a,o;if((e!=="mouseup"||!n)&&(a=this.findHover(r,i),o=a.target),e==="mousedown")this._downEl=o,this._downPoint=[t.zrX,t.zrY],this._upEl=o;else if(e==="mouseup")this._upEl=o;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||pl(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function V0e(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var i=e,n=void 0,a=!1;i;){if(i.ignoreClip&&(a=!0),!a){var o=i.getClipPath();if(o&&!o.contain(t,r))return!1;i.silent&&(n=!0)}var s=i.__hostTarget;i=s||i.parent}return n?Ij:!0}return!1}function Lz(e,t,r,i,n){for(var a=e.length-1;a>=0;a--){var o=e[a],s=void 0;if(o!==n&&!o.ignore&&(s=V0e(o,r,i))&&(!t.topTarget&&(t.topTarget=o),s!==Ij)){t.target=o;break}}}function Rj(e,t,r){var i=e.painter;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}const U0e=Oj;var zj=32,Qf=7;function G0e(e){for(var t=0;e>=zj;)t|=e&1,e>>=1;return e+t}function Ez(e,t,r,i){var n=t+1;if(n===r)return 1;if(i(e[n++],e[t])<0){for(;n<r&&i(e[n],e[n-1])<0;)n++;H0e(e,t,n)}else for(;n<r&&i(e[n],e[n-1])>=0;)n++;return n-t}function H0e(e,t,r){for(r--;t<r;){var i=e[t];e[t++]=e[r],e[r--]=i}}function Iz(e,t,r,i,n){for(i===t&&i++;i<r;i++){for(var a=e[i],o=t,s=i,l;o<s;)l=o+s>>>1,n(a,e[l])<0?s=l:o=l+1;var u=i-o;switch(u){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;u>0;)e[o+u]=e[o+u-1],u--}e[o]=a}}function aS(e,t,r,i,n,a){var o=0,s=0,l=1;if(a(e,t[r+n])>0){for(s=i-n;l<s&&a(e,t[r+n+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=n,l+=n}else{for(s=n+1;l<s&&a(e,t[r+n-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=n-l,l=n-u}for(o++;o<l;){var h=o+(l-o>>>1);a(e,t[r+h])>0?o=h+1:l=h}return l}function oS(e,t,r,i,n,a){var o=0,s=0,l=1;if(a(e,t[r+n])<0){for(s=n+1;l<s&&a(e,t[r+n-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=n-l,l=n-u}else{for(s=i-n;l<s&&a(e,t[r+n+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=n,l+=n}for(o++;o<l;){var h=o+(l-o>>>1);a(e,t[r+h])<0?l=h:o=h+1}return l}function j0e(e,t){var r=Qf,i,n,a=0;e.length;var o=[];i=[],n=[];function s(f,p){i[a]=f,n[a]=p,a+=1}function l(){for(;a>1;){var f=a-2;if(f>=1&&n[f-1]<=n[f]+n[f+1]||f>=2&&n[f-2]<=n[f]+n[f-1])n[f-1]<n[f+1]&&f--;else if(n[f]>n[f+1])break;h(f)}}function u(){for(;a>1;){var f=a-2;f>0&&n[f-1]<n[f+1]&&f--,h(f)}}function h(f){var p=i[f],v=n[f],g=i[f+1],m=n[f+1];n[f]=v+m,f===a-3&&(i[f+1]=i[f+2],n[f+1]=n[f+2]),a--;var y=oS(e[g],e,p,v,0,t);p+=y,v-=y,v!==0&&(m=aS(e[p+v-1],e,g,m,m-1,t),m!==0&&(v<=m?c(p,v,g,m):d(p,v,g,m)))}function c(f,p,v,g){var m=0;for(m=0;m<p;m++)o[m]=e[f+m];var y=0,_=v,x=f;if(e[x++]=e[_++],--g===0){for(m=0;m<p;m++)e[x+m]=o[y+m];return}if(p===1){for(m=0;m<g;m++)e[x+m]=e[_+m];e[x+g]=o[y];return}for(var w=r,b,S,M;;){b=0,S=0,M=!1;do if(t(e[_],o[y])<0){if(e[x++]=e[_++],S++,b=0,--g===0){M=!0;break}}else if(e[x++]=o[y++],b++,S=0,--p===1){M=!0;break}while((b|S)<w);if(M)break;do{if(b=oS(e[_],o,y,p,0,t),b!==0){for(m=0;m<b;m++)e[x+m]=o[y+m];if(x+=b,y+=b,p-=b,p<=1){M=!0;break}}if(e[x++]=e[_++],--g===0){M=!0;break}if(S=aS(o[y],e,_,g,0,t),S!==0){for(m=0;m<S;m++)e[x+m]=e[_+m];if(x+=S,_+=S,g-=S,g===0){M=!0;break}}if(e[x++]=o[y++],--p===1){M=!0;break}w--}while(b>=Qf||S>=Qf);if(M)break;w<0&&(w=0),w+=2}if(r=w,r<1&&(r=1),p===1){for(m=0;m<g;m++)e[x+m]=e[_+m];e[x+g]=o[y]}else{if(p===0)throw new Error;for(m=0;m<p;m++)e[x+m]=o[y+m]}}function d(f,p,v,g){var m=0;for(m=0;m<g;m++)o[m]=e[v+m];var y=f+p-1,_=g-1,x=v+g-1,w=0,b=0;if(e[x--]=e[y--],--p===0){for(w=x-(g-1),m=0;m<g;m++)e[w+m]=o[m];return}if(g===1){for(x-=p,y-=p,b=x+1,w=y+1,m=p-1;m>=0;m--)e[b+m]=e[w+m];e[x]=o[_];return}for(var S=r;;){var M=0,A=0,T=!1;do if(t(o[_],e[y])<0){if(e[x--]=e[y--],M++,A=0,--p===0){T=!0;break}}else if(e[x--]=o[_--],A++,M=0,--g===1){T=!0;break}while((M|A)<S);if(T)break;do{if(M=p-oS(o[_],e,f,p,p-1,t),M!==0){for(x-=M,y-=M,p-=M,b=x+1,w=y+1,m=M-1;m>=0;m--)e[b+m]=e[w+m];if(p===0){T=!0;break}}if(e[x--]=o[_--],--g===1){T=!0;break}if(A=g-aS(e[y],o,0,g,g-1,t),A!==0){for(x-=A,_-=A,g-=A,b=x+1,w=_+1,m=0;m<A;m++)e[b+m]=o[w+m];if(g<=1){T=!0;break}}if(e[x--]=e[y--],--p===0){T=!0;break}S--}while(M>=Qf||A>=Qf);if(T)break;S<0&&(S=0),S+=2}if(r=S,r<1&&(r=1),g===1){for(x-=p,y-=p,b=x+1,w=y+1,m=p-1;m>=0;m--)e[b+m]=e[w+m];e[x]=o[_]}else{if(g===0)throw new Error;for(w=x-(g-1),m=0;m<g;m++)e[w+m]=o[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function U0(e,t,r,i){r||(r=0),i||(i=e.length);var n=i-r;if(!(n<2)){var a=0;if(n<zj){a=Ez(e,r,i,t),Iz(e,r,i,r+a,t);return}var o=j0e(e,t),s=G0e(n);do{if(a=Ez(e,r,i,t),a<s){var l=n;l>s&&(l=s),Iz(e,r,r+l,r+a,t),a=l}o.pushRun(r,a),o.mergeRuns(),n-=a,r+=a}while(n!==0);o.forceMergeRuns()}}var rn=1,Op=2,Gc=4,Oz=!1;function sS(){Oz||(Oz=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function Rz(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var W0e=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=Rz}return e.prototype.traverse=function(t,r){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var i=this._displayList;return(t||!i.length)&&this.updateDisplayList(r),i},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,i=this._displayList,n=0,a=r.length;n<a;n++)this._updateAndAddDisplayable(r[n],null,t);i.length=this._displayListLen,U0(i,Rz)},e.prototype._updateAndAddDisplayable=function(t,r,i){if(!(t.ignore&&!i)){t.beforeUpdate(),t.update(),t.afterUpdate();var n=t.getClipPath();if(t.ignoreClip)r=null;else if(n){r?r=r.slice():r=[];for(var a=n,o=t;a;)a.parent=o,a.updateTransform(),r.push(a),o=a,a=a.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=rn),this._updateAndAddDisplayable(u,r,i)}t.__dirty=0}else{var h=t;r&&r.length?h.__clipPaths=r:h.__clipPaths&&h.__clipPaths.length>0&&(h.__clipPaths=[]),isNaN(h.z)&&(sS(),h.z=0),isNaN(h.z2)&&(sS(),h.z2=0),isNaN(h.zlevel)&&(sS(),h.zlevel=0),this._displayList[this._displayListLen++]=h}var c=t.getDecalElement&&t.getDecalElement();c&&this._updateAndAddDisplayable(c,r,i);var d=t.getTextGuideLine();d&&this._updateAndAddDisplayable(d,r,i);var f=t.getTextContent();f&&this._updateAndAddDisplayable(f,r,i)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,i=t.length;r<i;r++)this.delRoot(t[r]);return}var n=We(this._roots,t);n>=0&&this._roots.splice(n,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const $0e=W0e;var Nj;Nj=at.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const lA=Nj;var G0={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)))},elasticOut:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},elasticInOut:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-G0.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?G0.bounceIn(e*2)*.5:G0.bounceOut(e*2-1)*.5+.5}};const kj=G0;var my=Math.pow,Dl=Math.sqrt,n_=1e-8,Bj=1e-4,zz=Dl(3),yy=1/3,io=jh(),Pn=jh(),gd=jh();function ml(e){return e>-n_&&e<n_}function Fj(e){return e>n_||e<-n_}function Tr(e,t,r,i,n){var a=1-n;return a*a*(a*e+3*n*t)+n*n*(n*i+3*a*r)}function Nz(e,t,r,i,n){var a=1-n;return 3*(((t-e)*a+2*(r-t)*n)*a+(i-r)*n*n)}function a_(e,t,r,i,n,a){var o=i+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-n,h=s*s-3*o*l,c=s*l-9*o*u,d=l*l-3*s*u,f=0;if(ml(h)&&ml(c))if(ml(s))a[0]=0;else{var p=-l/s;p>=0&&p<=1&&(a[f++]=p)}else{var v=c*c-4*h*d;if(ml(v)){var g=c/h,p=-s/o+g,m=-g/2;p>=0&&p<=1&&(a[f++]=p),m>=0&&m<=1&&(a[f++]=m)}else if(v>0){var y=Dl(v),_=h*s+1.5*o*(-c+y),x=h*s+1.5*o*(-c-y);_<0?_=-my(-_,yy):_=my(_,yy),x<0?x=-my(-x,yy):x=my(x,yy);var p=(-s-(_+x))/(3*o);p>=0&&p<=1&&(a[f++]=p)}else{var w=(2*h*s-3*o*c)/(2*Dl(h*h*h)),b=Math.acos(w)/3,S=Dl(h),M=Math.cos(b),p=(-s-2*S*M)/(3*o),m=(-s+S*(M+zz*Math.sin(b)))/(3*o),A=(-s+S*(M-zz*Math.sin(b)))/(3*o);p>=0&&p<=1&&(a[f++]=p),m>=0&&m<=1&&(a[f++]=m),A>=0&&A<=1&&(a[f++]=A)}}return f}function Vj(e,t,r,i,n){var a=6*r-12*t+6*e,o=9*t+3*i-3*e-9*r,s=3*t-3*e,l=0;if(ml(o)){if(Fj(a)){var u=-s/a;u>=0&&u<=1&&(n[l++]=u)}}else{var h=a*a-4*o*s;if(ml(h))n[0]=-a/(2*o);else if(h>0){var c=Dl(h),u=(-a+c)/(2*o),d=(-a-c)/(2*o);u>=0&&u<=1&&(n[l++]=u),d>=0&&d<=1&&(n[l++]=d)}}return l}function kl(e,t,r,i,n,a){var o=(t-e)*n+e,s=(r-t)*n+t,l=(i-r)*n+r,u=(s-o)*n+o,h=(l-s)*n+s,c=(h-u)*n+u;a[0]=e,a[1]=o,a[2]=u,a[3]=c,a[4]=c,a[5]=h,a[6]=l,a[7]=i}function Uj(e,t,r,i,n,a,o,s,l,u,h){var c,d=.005,f=1/0,p,v,g,m;io[0]=l,io[1]=u;for(var y=0;y<1;y+=.05)Pn[0]=Tr(e,r,n,o,y),Pn[1]=Tr(t,i,a,s,y),g=ph(io,Pn),g<f&&(c=y,f=g);f=1/0;for(var _=0;_<32&&!(d<Bj);_++)p=c-d,v=c+d,Pn[0]=Tr(e,r,n,o,p),Pn[1]=Tr(t,i,a,s,p),g=ph(Pn,io),p>=0&&g<f?(c=p,f=g):(gd[0]=Tr(e,r,n,o,v),gd[1]=Tr(t,i,a,s,v),m=ph(gd,io),v<=1&&m<f?(c=v,f=m):d*=.5);return h&&(h[0]=Tr(e,r,n,o,c),h[1]=Tr(t,i,a,s,c)),Dl(f)}function q0e(e,t,r,i,n,a,o,s,l){for(var u=e,h=t,c=0,d=1/l,f=1;f<=l;f++){var p=f*d,v=Tr(e,r,n,o,p),g=Tr(t,i,a,s,p),m=v-u,y=g-h;c+=Math.sqrt(m*m+y*y),u=v,h=g}return c}function Or(e,t,r,i){var n=1-i;return n*(n*e+2*i*t)+i*i*r}function uA(e,t,r,i){return 2*((1-i)*(t-e)+i*(r-t))}function X0e(e,t,r,i,n){var a=e-2*t+r,o=2*(t-e),s=e-i,l=0;if(ml(a)){if(Fj(o)){var u=-s/o;u>=0&&u<=1&&(n[l++]=u)}}else{var h=o*o-4*a*s;if(ml(h)){var u=-o/(2*a);u>=0&&u<=1&&(n[l++]=u)}else if(h>0){var c=Dl(h),u=(-o+c)/(2*a),d=(-o-c)/(2*a);u>=0&&u<=1&&(n[l++]=u),d>=0&&d<=1&&(n[l++]=d)}}return l}function Gj(e,t,r){var i=e+r-2*t;return i===0?.5:(e-t)/i}function Zv(e,t,r,i,n){var a=(t-e)*i+e,o=(r-t)*i+t,s=(o-a)*i+a;n[0]=e,n[1]=a,n[2]=s,n[3]=s,n[4]=o,n[5]=r}function Hj(e,t,r,i,n,a,o,s,l){var u,h=.005,c=1/0;io[0]=o,io[1]=s;for(var d=0;d<1;d+=.05){Pn[0]=Or(e,r,n,d),Pn[1]=Or(t,i,a,d);var f=ph(io,Pn);f<c&&(u=d,c=f)}c=1/0;for(var p=0;p<32&&!(h<Bj);p++){var v=u-h,g=u+h;Pn[0]=Or(e,r,n,v),Pn[1]=Or(t,i,a,v);var f=ph(Pn,io);if(v>=0&&f<c)u=v,c=f;else{gd[0]=Or(e,r,n,g),gd[1]=Or(t,i,a,g);var m=ph(gd,io);g<=1&&m<c?(u=g,c=m):h*=.5}}return l&&(l[0]=Or(e,r,n,u),l[1]=Or(t,i,a,u)),Dl(c)}function Y0e(e,t,r,i,n,a,o){for(var s=e,l=t,u=0,h=1/o,c=1;c<=o;c++){var d=c*h,f=Or(e,r,n,d),p=Or(t,i,a,d),v=f-s,g=p-l;u+=Math.sqrt(v*v+g*g),s=f,l=p}return u}var Z0e=/cubic-bezier\(([0-9,\.e ]+)\)/;function HP(e){var t=e&&Z0e.exec(e);if(t){var r=t[1].split(","),i=+va(r[0]),n=+va(r[1]),a=+va(r[2]),o=+va(r[3]);if(isNaN(i+n+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:a_(0,i,a,1,l,s)&&Tr(0,n,o,1,s[0])}}}var K0e=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||sr,this.ondestroy=t.ondestroy||sr,this.onrestart=t.onrestart||sr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var i=this._life,n=t-this._startTime-this._pausedTime,a=n/i;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=n%i;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ae(t)?t:kj[t]||HP(t)},e}();const J0e=K0e;var jj=function(){function e(t){this.value=t}return e}(),Q0e=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new jj(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,i=t.next;r?r.next=i:this.head=i,i?i.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),e1e=function(){function e(t){this._list=new Q0e,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var i=this._list,n=this._map,a=null;if(n[t]==null){var o=i.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=i.head;i.remove(l),delete n[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new jj(r),s.key=t,i.insertEntry(s),n[t]=s}return a},e.prototype.get=function(t){var r=this._map[t],i=this._list;if(r!=null)return r!==i.tail&&(i.remove(r),i.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const kg=e1e;var kz={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function wa(e){return e=Math.round(e),e<0?0:e>255?255:e}function t1e(e){return e=Math.round(e),e<0?0:e>360?360:e}function Kv(e){return e<0?0:e>1?1:e}function lS(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?wa(parseFloat(t)/100*255):wa(parseInt(t,10))}function vh(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Kv(parseFloat(t)/100):Kv(parseFloat(t))}function uS(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function yl(e,t,r){return e+(t-e)*r}function xn(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function hA(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Wj=new kg(20),_y=null;function yc(e,t){_y&&hA(_y,t),_y=Wj.put(e,_y||t.slice())}function ln(e,t){if(e){t=t||[];var r=Wj.get(e);if(r)return hA(t,r);e=e+"";var i=e.replace(/ /g,"").toLowerCase();if(i in kz)return hA(t,kz[i]),yc(e,t),t;var n=i.length;if(i.charAt(0)==="#"){if(n===4||n===5){var a=parseInt(i.slice(1,4),16);if(!(a>=0&&a<=4095)){xn(t,0,0,0,1);return}return xn(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,n===5?parseInt(i.slice(4),16)/15:1),yc(e,t),t}else if(n===7||n===9){var a=parseInt(i.slice(1,7),16);if(!(a>=0&&a<=16777215)){xn(t,0,0,0,1);return}return xn(t,(a&16711680)>>16,(a&65280)>>8,a&255,n===9?parseInt(i.slice(7),16)/255:1),yc(e,t),t}return}var o=i.indexOf("("),s=i.indexOf(")");if(o!==-1&&s+1===n){var l=i.substr(0,o),u=i.substr(o+1,s-(o+1)).split(","),h=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?xn(t,+u[0],+u[1],+u[2],1):xn(t,0,0,0,1);h=vh(u.pop());case"rgb":if(u.length>=3)return xn(t,lS(u[0]),lS(u[1]),lS(u[2]),u.length===3?h:vh(u[3])),yc(e,t),t;xn(t,0,0,0,1);return;case"hsla":if(u.length!==4){xn(t,0,0,0,1);return}return u[3]=vh(u[3]),cA(u,t),yc(e,t),t;case"hsl":if(u.length!==3){xn(t,0,0,0,1);return}return cA(u,t),yc(e,t),t;default:return}}xn(t,0,0,0,1)}}function cA(e,t){var r=(parseFloat(e[0])%360+360)%360/360,i=vh(e[1]),n=vh(e[2]),a=n<=.5?n*(i+1):n+i-n*i,o=n*2-a;return t=t||[],xn(t,wa(uS(o,a,r+1/3)*255),wa(uS(o,a,r)*255),wa(uS(o,a,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function r1e(e){if(e){var t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(t,r,i),a=Math.max(t,r,i),o=a-n,s=(a+n)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+n):u=o/(2-a-n);var h=((a-t)/6+o/2)/o,c=((a-r)/6+o/2)/o,d=((a-i)/6+o/2)/o;t===a?l=d-c:r===a?l=1/3+h-d:i===a&&(l=2/3+c-h),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,u,s];return e[3]!=null&&f.push(e[3]),f}}function dA(e,t){var r=ln(e);if(r){for(var i=0;i<3;i++)t<0?r[i]=r[i]*(1-t)|0:r[i]=(255-r[i])*t+r[i]|0,r[i]>255?r[i]=255:r[i]<0&&(r[i]=0);return hs(r,r.length===4?"rgba":"rgb")}}function hS(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var i=e*(t.length-1),n=Math.floor(i),a=Math.ceil(i),o=t[n],s=t[a],l=i-n;return r[0]=wa(yl(o[0],s[0],l)),r[1]=wa(yl(o[1],s[1],l)),r[2]=wa(yl(o[2],s[2],l)),r[3]=Kv(yl(o[3],s[3],l)),r}}function i1e(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var i=e*(t.length-1),n=Math.floor(i),a=Math.ceil(i),o=ln(t[n]),s=ln(t[a]),l=i-n,u=hs([wa(yl(o[0],s[0],l)),wa(yl(o[1],s[1],l)),wa(yl(o[2],s[2],l)),Kv(yl(o[3],s[3],l))],"rgba");return r?{color:u,leftIndex:n,rightIndex:a,value:i}:u}}function hv(e,t,r,i){var n=ln(e);if(e)return n=r1e(n),t!=null&&(n[0]=t1e(t)),r!=null&&(n[1]=vh(r)),i!=null&&(n[2]=vh(i)),hs(cA(n),"rgba")}function o_(e,t){var r=ln(e);if(r&&t!=null)return r[3]=Kv(t),hs(r,"rgba")}function hs(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function s_(e,t){var r=ln(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var l_=Math.round;function Jv(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var r=ln(e);r&&(e="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:e,opacity:t??1}}var Bz=1e-4;function _l(e){return e<Bz&&e>-Bz}function xy(e){return l_(e*1e3)/1e3}function fA(e){return l_(e*1e4)/1e4}function n1e(e){return"matrix("+xy(e[0])+","+xy(e[1])+","+xy(e[2])+","+xy(e[3])+","+fA(e[4])+","+fA(e[5])+")"}var a1e={left:"start",right:"end",center:"middle",middle:"middle"};function o1e(e,t,r){return r==="top"?e+=t/2:r==="bottom"&&(e-=t/2),e}function s1e(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function l1e(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function $j(e){return e&&!!e.image}function u1e(e){return e&&!!e.svgElement}function jP(e){return $j(e)||u1e(e)}function qj(e){return e.type==="linear"}function Xj(e){return e.type==="radial"}function Yj(e){return e&&(e.type==="linear"||e.type==="radial")}function Vx(e){return"url(#"+e+")"}function Zj(e){var t=e.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function Kj(e){var t=e.x||0,r=e.y||0,i=(e.rotation||0)*B0,n=Ve(e.scaleX,1),a=Ve(e.scaleY,1),o=e.skewX||0,s=e.skewY||0,l=[];return(t||r)&&l.push("translate("+t+"px,"+r+"px)"),i&&l.push("rotate("+i+")"),(n!==1||a!==1)&&l.push("scale("+n+","+a+")"),(o||s)&&l.push("skew("+l_(o*B0)+"deg, "+l_(s*B0)+"deg)"),l.join(" ")}var h1e=function(){return at.hasGlobalWindow&&Ae(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),pA=Array.prototype.slice;function Yo(e,t,r){return(t-e)*r+e}function cS(e,t,r,i){for(var n=t.length,a=0;a<n;a++)e[a]=Yo(t[a],r[a],i);return e}function c1e(e,t,r,i){for(var n=t.length,a=n&&t[0].length,o=0;o<n;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=Yo(t[o][s],r[o][s],i)}return e}function by(e,t,r,i){for(var n=t.length,a=0;a<n;a++)e[a]=t[a]+r[a]*i;return e}function Fz(e,t,r,i){for(var n=t.length,a=n&&t[0].length,o=0;o<n;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=t[o][s]+r[o][s]*i}return e}function d1e(e,t){for(var r=e.length,i=t.length,n=r>i?t:e,a=Math.min(r,i),o=n[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(r,i);s++)n.push({offset:o.offset,color:o.color.slice()})}function f1e(e,t,r){var i=e,n=t;if(!(!i.push||!n.push)){var a=i.length,o=n.length;if(a!==o){var s=a>o;if(s)i.length=o;else for(var l=a;l<o;l++)i.push(r===1?n[l]:pA.call(n[l]))}for(var u=i[0]&&i[0].length,l=0;l<i.length;l++)if(r===1)isNaN(i[l])&&(i[l]=n[l]);else for(var h=0;h<u;h++)isNaN(i[l][h])&&(i[l][h]=n[l][h])}}function cv(e){if(ai(e)){var t=e.length;if(ai(e[0])){for(var r=[],i=0;i<t;i++)r.push(pA.call(e[i]));return r}return pA.call(e)}return e}function H0(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function p1e(e){return ai(e&&e[0])?2:1}var wy=0,j0=1,Jj=2,Rp=3,vA=4,gA=5,Vz=6;function Uz(e){return e===vA||e===gA}function Sy(e){return e===j0||e===Jj}var ep=[0,0,0,0],v1e=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,i){this._needsSort=!0;var n=this.keyframes,a=n.length,o=!1,s=Vz,l=r;if(ai(r)){var u=p1e(r);s=u,(u===1&&!st(r[0])||u===2&&!st(r[0][0]))&&(o=!0)}else if(st(r)&&!Yv(r))s=wy;else if(ge(r))if(!isNaN(+r))s=wy;else{var h=ln(r);h&&(l=h,s=Rp)}else if(kx(r)){var c=ae({},l);c.colorStops=ce(r.colorStops,function(f){return{offset:f.offset,color:ln(f.color)}}),qj(r)?s=vA:Xj(r)&&(s=gA),l=c}a===0?this.valType=s:(s!==this.valType||s===Vz)&&(o=!0),this.discrete=this.discrete||o;var d={time:t,value:l,rawValue:r,percent:0};return i&&(d.easing=i,d.easingFunc=Ae(i)?i:kj[i]||HP(i)),n.push(d),d},e.prototype.prepare=function(t,r){var i=this.keyframes;this._needsSort&&i.sort(function(v,g){return v.time-g.time});for(var n=this.valType,a=i.length,o=i[a-1],s=this.discrete,l=Sy(n),u=Uz(n),h=0;h<a;h++){var c=i[h],d=c.value,f=o.value;c.percent=c.time/t,s||(l&&h!==a-1?f1e(d,f,n):u&&d1e(d.colorStops,f.colorStops))}if(!s&&n!==gA&&r&&this.needsAnimate()&&r.needsAnimate()&&n===r.valType&&!r._finished){this._additiveTrack=r;for(var p=i[0].value,h=0;h<a;h++)n===wy?i[h].additiveValue=i[h].value-p:n===Rp?i[h].additiveValue=by([],i[h].value,p,-1):Sy(n)&&(i[h].additiveValue=n===j0?by([],i[h].value,p,-1):Fz([],i[h].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,n=i?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,u=a===Rp,h,c=this._lastFr,d=Math.min,f,p;if(s===1)f=p=o[0];else{if(r<0)h=0;else if(r<this._lastFrP){var v=d(c+1,s-1);for(h=v;h>=0&&!(o[h].percent<=r);h--);h=d(h,s-2)}else{for(h=c;h<s&&!(o[h].percent>r);h++);h=d(h-1,s-2)}p=o[h+1],f=o[h]}if(f&&p){this._lastFr=h,this._lastFrP=r;var g=p.percent-f.percent,m=g===0?1:d((r-f.percent)/g,1);p.easingFunc&&(m=p.easingFunc(m));var y=i?this._additiveValue:u?ep:t[l];if((Sy(a)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?f.rawValue:p.rawValue;else if(Sy(a))a===j0?cS(y,f[n],p[n],m):c1e(y,f[n],p[n],m);else if(Uz(a)){var _=f[n],x=p[n],w=a===vA;t[l]={type:w?"linear":"radial",x:Yo(_.x,x.x,m),y:Yo(_.y,x.y,m),colorStops:ce(_.colorStops,function(S,M){var A=x.colorStops[M];return{offset:Yo(S.offset,A.offset,m),color:H0(cS([],S.color,A.color,m))}}),global:x.global},w?(t[l].x2=Yo(_.x2,x.x2,m),t[l].y2=Yo(_.y2,x.y2,m)):t[l].r=Yo(_.r,x.r,m)}else if(u)cS(y,f[n],p[n],m),i||(t[l]=H0(y));else{var b=Yo(f[n],p[n],m);i?this._additiveValue=b:t[l]=b}i&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,i=this.propName,n=this._additiveValue;r===wy?t[i]=t[i]+n:r===Rp?(ln(t[i],ep),by(ep,ep,n,1),t[i]=H0(ep)):r===j0?by(t[i],t[i],n,1):r===Jj&&Fz(t[i],t[i],n,1)},e}(),WP=function(){function e(t,r,i,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&n){NP("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=i}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,i){return this.whenWithKeys(t,r,Ze(r),i)},e.prototype.whenWithKeys=function(t,r,i,n){for(var a=this._tracks,o=0;o<i.length;o++){var s=i[o],l=a[s];if(!l){l=a[s]=new v1e(s);var u=void 0,h=this._getAdditiveTrack(s);if(h){var c=h.keyframes,d=c[c.length-1];u=d&&d.value,h.valType===Rp&&u&&(u=H0(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,cv(u),n),this._trackKeys.push(s)}l.addKeyframe(t,cv(r[s]),n)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,i=0;i<r;i++)t[i].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var i=0;i<r.length;i++)r[i].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,i=0;i<r.length;i++)t[r[i]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,i=this._additiveAnimators;if(i)for(var n=0;n<i.length;n++){var a=i[n].getTrack(t);a&&(r=a)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,i=[],n=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),u=s.keyframes,h=u.length;if(s.prepare(n,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var c=u[h-1];c&&(r._target[s.propName]=c.rawValue),s.setFinished()}else i.push(s)}if(i.length||this._force){var d=new J0e({life:n,loop:this._loop,delay:this._delay||0,onframe:function(f){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,g=0;g<p.length;g++)if(p[g]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var g=0;g<i.length;g++)i[g].step(r._target,f);var m=r._onframeCbs;if(m)for(var g=0;g<m.length;g++)m[g](r._target,f)},ondestroy:function(){r._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),t&&d.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return ce(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var i=this._tracks,n=this._trackKeys,a=0;a<t.length;a++){var o=i[t[a]];o&&!o.isFinished()&&(r?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<n.length;a++)if(!i[n[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,i){if(t){r=r||this._trackKeys;for(var n=0;n<r.length;n++){var a=r[n],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[i?0:s.length-1];l&&(t[a]=cv(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||Ze(t);for(var i=0;i<r.length;i++){var n=r[i],a=this._tracks[n];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,t[n]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},e}();function td(){return new Date().getTime()}var g1e=function(e){Y(t,e);function t(r){var i=e.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,r=r||{},i.stage=r.stage||{},i}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var i=r.getClip();i&&this.addClip(i)},t.prototype.removeClip=function(r){if(r.animation){var i=r.prev,n=r.next;i?i.next=n:this._head=n,n?n.prev=i:this._tail=i,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var i=r.getClip();i&&this.removeClip(i),r.animation=null},t.prototype.update=function(r){for(var i=td()-this._pausedTime,n=i-this._time,a=this._head;a;){var o=a.next,s=a.step(i,n);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=i,r||(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function i(){r._running&&(lA(i),!r._paused&&r.update())}lA(i)},t.prototype.start=function(){this._running||(this._time=td(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=td(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=td()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var i=r.next;r.prev=r.next=r.animation=null,r=i}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,i){i=i||{},this.start();var n=new WP(r,i.loop);return this.addAnimator(n),n},t}(jn);const m1e=g1e;var y1e=300,dS=at.domSupported,fS=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=ce(e,function(n){var a=n.replace("mouse","pointer");return r.hasOwnProperty(a)?a:n});return{mouse:e,touch:t,pointer:i}}(),Gz={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},Hz=!1;function mA(e){var t=e.pointerType;return t==="pen"||t==="touch"}function _1e(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function pS(e){e&&(e.zrByTouch=!0)}function x1e(e,t){return wn(e.dom,new b1e(e,t),!0)}function Qj(e,t){for(var r=t,i=!1;r&&r.nodeType!==9&&!(i=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return i}var b1e=function(){function e(t,r){this.stopPropagation=sr,this.stopImmediatePropagation=sr,this.preventDefault=sr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),aa={mousedown:function(e){e=wn(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=wn(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=wn(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=wn(this.dom,e);var t=e.toElement||e.relatedTarget;Qj(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){Hz=!0,e=wn(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){Hz||(e=wn(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=wn(this.dom,e),pS(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),aa.mousemove.call(this,e),aa.mousedown.call(this,e)},touchmove:function(e){e=wn(this.dom,e),pS(e),this.handler.processGesture(e,"change"),aa.mousemove.call(this,e)},touchend:function(e){e=wn(this.dom,e),pS(e),this.handler.processGesture(e,"end"),aa.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<y1e&&aa.click.call(this,e)},pointerdown:function(e){aa.mousedown.call(this,e)},pointermove:function(e){mA(e)||aa.mousemove.call(this,e)},pointerup:function(e){aa.mouseup.call(this,e)},pointerout:function(e){mA(e)||aa.mouseout.call(this,e)}};I(["click","dblclick","contextmenu"],function(e){aa[e]=function(t){t=wn(this.dom,t),this.trigger(e,t)}});var yA={pointermove:function(e){mA(e)||yA.mousemove.call(this,e)},pointerup:function(e){yA.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function w1e(e,t){var r=t.domHandlers;at.pointerEventsSupported?I(fS.pointer,function(i){W0(t,i,function(n){r[i].call(e,n)})}):(at.touchEventsSupported&&I(fS.touch,function(i){W0(t,i,function(n){r[i].call(e,n),_1e(t)})}),I(fS.mouse,function(i){W0(t,i,function(n){n=VP(n),t.touching||r[i].call(e,n)})}))}function S1e(e,t){at.pointerEventsSupported?I(Gz.pointer,r):at.touchEventsSupported||I(Gz.mouse,r);function r(i){function n(a){a=VP(a),Qj(e,a.target)||(a=x1e(e,a),t.domHandlers[i].call(e,a))}W0(t,i,n,{capture:!0})}}function W0(e,t,r,i){e.mounted[t]=r,e.listenerOpts[t]=i,sA(e.domTarget,t,r,i)}function vS(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&L0e(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var jz=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),M1e=function(e){Y(t,e);function t(r,i){var n=e.call(this)||this;return n.__pointerCapturing=!1,n.dom=r,n.painterRoot=i,n._localHandlerScope=new jz(r,aa),dS&&(n._globalHandlerScope=new jz(document,yA)),w1e(n,n._localHandlerScope),n}return t.prototype.dispose=function(){vS(this._localHandlerScope),dS&&vS(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,dS&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var i=this._globalHandlerScope;r?S1e(this,i):vS(i)}},t}(jn);const T1e=M1e;var eW=1;at.hasGlobalWindow&&(eW=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var u_=eW,_A=.4,xA="#333",bA="#ccc",A1e="#eee",Wz=Fx,$z=5e-5;function uu(e){return e>$z||e<-$z}var hu=[],_c=[],gS=Gn(),mS=Math.abs,C1e=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return uu(this.rotation)||uu(this.x)||uu(this.y)||uu(this.scaleX-1)||uu(this.scaleY-1)||uu(this.skewX)||uu(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),i=this.transform;if(!(r||t)){i&&Wz(i);return}i=i||Gn(),r?this.getLocalTransform(i):Wz(i),t&&(r?us(i,t,i):UP(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(hu);var i=hu[0]<0?-1:1,n=hu[1]<0?-1:1,a=((hu[0]-i)*r+i)/hu[0]||0,o=((hu[1]-n)*r+n)/hu[1]||0;t[0]*=a,t[1]*=a,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||Gn(),lf(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],n=Math.atan2(t[1],t[0]),a=Math.PI/2+n-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(a),r=Math.sqrt(r),this.skewX=a,this.skewY=0,this.rotation=-n,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=i,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(us(_c,t.invTransform,r),r=_c);var i=this.originX,n=this.originY;(i||n)&&(gS[4]=i,gS[5]=n,us(_c,r,gS),_c[4]-=i,_c[5]-=n,r=_c),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var i=[t,r],n=this.invTransform;return n&&Gr(i,i,n),i},e.prototype.transformCoordToGlobal=function(t,r){var i=[t,r],n=this.transform;return n&&Gr(i,i,n),i},e.prototype.getLineScale=function(){var t=this.transform;return t&&mS(t[0]-1)>1e-10&&mS(t[3]-1)>1e-10?Math.sqrt(mS(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){tW(this,t)},e.getLocalTransform=function(t,r){r=r||[];var i=t.originX||0,n=t.originY||0,a=t.scaleX,o=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,h=t.x,c=t.y,d=t.skewX?Math.tan(t.skewX):0,f=t.skewY?Math.tan(-t.skewY):0;if(i||n||s||l){var p=i+s,v=n+l;r[4]=-p*a-d*v*o,r[5]=-v*o-f*p*a}else r[4]=r[5]=0;return r[0]=a,r[3]=o,r[1]=f*a,r[2]=d*o,u&&Wh(r,r,u),r[4]+=i+h,r[5]+=n+c,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),wo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function tW(e,t){for(var r=0;r<wo.length;r++){var i=wo[r];e[i]=t[i]}}const es=C1e;var qz={};function un(e,t){t=t||zl;var r=qz[t];r||(r=qz[t]=new kg(500));var i=r.get(e);return i==null&&(i=Nl.measureText(e,t).width,r.put(e,i)),i}function Xz(e,t,r,i){var n=un(e,t),a=Ux(t),o=zp(0,n,r),s=Hc(0,a,i),l=new Ge(o,s,n,a);return l}function Bg(e,t,r,i){var n=((e||"")+"").split(`
`),a=n.length;if(a===1)return Xz(n[0],t,r,i);for(var o=new Ge(0,0,0,0),s=0;s<n.length;s++){var l=Xz(n[s],t,r,i);s===0?o.copy(l):o.union(l)}return o}function zp(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function Hc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function Ux(e){return un("国",e)}function Aa(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function h_(e,t,r){var i=t.position||"inside",n=t.distance!=null?t.distance:5,a=r.height,o=r.width,s=a/2,l=r.x,u=r.y,h="left",c="top";if(i instanceof Array)l+=Aa(i[0],r.width),u+=Aa(i[1],r.height),h=null,c=null;else switch(i){case"left":l-=n,u+=s,h="right",c="middle";break;case"right":l+=n+o,u+=s,c="middle";break;case"top":l+=o/2,u-=n,h="center",c="bottom";break;case"bottom":l+=o/2,u+=a+n,h="center";break;case"inside":l+=o/2,u+=s,h="center",c="middle";break;case"insideLeft":l+=n,u+=s,c="middle";break;case"insideRight":l+=o-n,u+=s,h="right",c="middle";break;case"insideTop":l+=o/2,u+=n,h="center";break;case"insideBottom":l+=o/2,u+=a-n,h="center",c="bottom";break;case"insideTopLeft":l+=n,u+=n;break;case"insideTopRight":l+=o-n,u+=n,h="right";break;case"insideBottomLeft":l+=n,u+=a-n,c="bottom";break;case"insideBottomRight":l+=o-n,u+=a-n,h="right",c="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=h,e.verticalAlign=c,e}var yS="__zr_normal__",_S=wo.concat(["ignore"]),D1e=xo(wo,function(e,t){return e[t]=!0,e},{ignore:!1}),xc={},P1e=new Ge(0,0,0,0),$P=function(){function e(t){this.id=Cj(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,i){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var i=this.textConfig,n=i.local,a=r.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=n?this:null;var u=!1;if(a.copyTransform(r),i.position!=null){var h=P1e;i.layoutRect?h.copy(i.layoutRect):h.copy(this.getBoundingRect()),n||h.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(xc,i,h):h_(xc,i,h),a.x=xc.x,a.y=xc.y,o=xc.align,s=xc.verticalAlign;var c=i.origin;if(c&&i.rotation!=null){var d=void 0,f=void 0;c==="center"?(d=h.width*.5,f=h.height*.5):(d=Aa(c[0],h.width),f=Aa(c[1],h.height)),u=!0,a.originX=-a.x+d+(n?0:h.x),a.originY=-a.y+f+(n?0:h.y)}}i.rotation!=null&&(a.rotation=i.rotation);var p=i.offset;p&&(a.x+=p[0],a.y+=p[1],u||(a.originX=-p[0],a.originY=-p[1]));var v=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,_=void 0;v&&this.canBeInsideText()?(m=i.insideFill,y=i.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),_=!0)):(m=i.outsideFill,y=i.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),_=!0)),m=m||"#000",(m!==g.fill||y!==g.stroke||_!==g.autoStroke||o!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=m,g.stroke=y,g.autoStroke=_,g.align=o,g.verticalAlign=s,r.setDefaultTextStyle(g)),r.__dirty|=rn,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?bA:xA},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),i=typeof r=="string"&&ln(r);i||(i=[255,255,255,1]);for(var n=i[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)i[o]=i[o]*n+(a?0:255)*(1-n);return i[3]=1,hs(i,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},ae(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Pe(t))for(var i=t,n=Ze(i),a=0;a<n.length;a++){var o=n[a];this.attrKV(o,t[o])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,i=0;i<this.animators.length;i++){var n=this.animators[i],a=n.__fromStateTransition;if(!(n.getLoop()||a&&a!==yS)){var o=n.targetName,s=o?r[o]:r;n.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,_S)},e.prototype._savePrimaryToNormal=function(t,r,i){for(var n=0;n<i.length;n++){var a=i[n];t[a]!=null&&!(a in r)&&(r[a]=this[a])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(yS,!1,t)},e.prototype.useState=function(t,r,i,n){var a=t===yS,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(We(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!a){NP("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(u);var h=!!(u&&u.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!i&&!this.__inHover&&l&&l.duration>0,l);var c=this._textContent,d=this._textGuide;return c&&c.useState(t,r,i,h),d&&d.useState(t,r,i,h),a?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~rn),u}}},e.prototype.useStates=function(t,r,i){if(!t.length)this.clearStates();else{var n=[],a=this.currentStates,o=t.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(t[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var u=t[l],h=void 0;this.stateProxy&&(h=this.stateProxy(u,t)),h||(h=this.states[u]),h&&n.push(h)}var c=n[o-1],d=!!(c&&c.hoverLayer||i);d&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(n),p=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(t.join(","),f,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,g=this._textGuide;v&&v.useStates(t,r,d),g&&g.useStates(t,r,d),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~rn)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=We(this.currentStates,t);if(r>=0){var i=this.currentStates.slice();i.splice(r,1),this.useStates(i)}},e.prototype.replaceState=function(t,r,i){var n=this.currentStates.slice(),a=We(n,t),o=We(n,r)>=0;a>=0?o?n.splice(a,1):n[a]=r:i&&!o&&n.push(r),this.useStates(n)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},i,n=0;n<t.length;n++){var a=t[n];ae(r,a),a.textConfig&&(i=i||{},ae(i,a.textConfig))}return i&&(r.textConfig=i),r},e.prototype._applyStateObj=function(t,r,i,n,a,o){var s=!(r&&n);r&&r.textConfig?(this.textConfig=ae({},n?this.textConfig:i.textConfig),ae(this.textConfig,r.textConfig)):s&&i.textConfig&&(this.textConfig=i.textConfig);for(var l={},u=!1,h=0;h<_S.length;h++){var c=_S[h],d=a&&D1e[c];r&&r[c]!=null?d?(u=!0,l[c]=r[c]):this[c]=r[c]:s&&i[c]!=null&&(d?(u=!0,l[c]=i[c]):this[c]=i[c])}if(!a)for(var h=0;h<this.animators.length;h++){var f=this.animators[h],p=f.targetName;f.getLoop()||f.__changeFinalValue(p?(r||i)[p]:r||i)}u&&this._transitionState(t,l,o)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new es,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ae(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=rn;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,i=this._textGuide;r&&(r.__inHover=t),i&&(i.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.addAnimator(r[i]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.removeAnimator(r[i]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,i){var n=t?this[t]:this,a=new WP(n,r,i);return t&&(a.targetName=t),this.addAnimator(a,t),a},e.prototype.addAnimator=function(t,r){var i=this.__zr,n=this;t.during(function(){n.updateDuringAnimation(r)}).done(function(){var a=n.animators,o=We(a,t);o>=0&&a.splice(o,1)}),this.animators.push(t),i&&i.animation.addAnimator(t),i&&i.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var i=this.animators,n=i.length,a=[],o=0;o<n;o++){var s=i[o];!t||t===s.scope?s.stop(r):a.push(s)}return this.animators=a,this},e.prototype.animateTo=function(t,r,i){xS(this,t,r,i)},e.prototype.animateFrom=function(t,r,i){xS(this,t,r,i,!0)},e.prototype._transitionState=function(t,r,i,n){for(var a=xS(this,r,i,n),o=0;o<a.length;o++)a[o].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=rn;function r(i,n,a,o){Object.defineProperty(t,i,{get:function(){if(!this[n]){var l=this[n]=[];s(this,l)}return this[n]},set:function(l){this[a]=l[0],this[o]=l[1],this[n]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(h){l[a]=h}}),Object.defineProperty(u,1,{get:function(){return l[o]},set:function(h){l[o]=h}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();gr($P,jn);gr($P,es);function xS(e,t,r,i,n){r=r||{};var a=[];rW(e,"",e,t,r,i,a,n);var o=a.length,s=!1,l=r.done,u=r.aborted,h=function(){s=!0,o--,o<=0&&(s?l&&l():u&&u())},c=function(){o--,o<=0&&(s?l&&l():u&&u())};o||l&&l(),a.length>0&&r.during&&a[0].during(function(p,v){r.during(v)});for(var d=0;d<a.length;d++){var f=a[d];h&&f.done(h),c&&f.aborted(c),r.force&&f.duration(r.duration),f.start(r.easing)}return a}function bS(e,t,r){for(var i=0;i<r;i++)e[i]=t[i]}function L1e(e){return ai(e[0])}function E1e(e,t,r){if(ai(t[r]))if(ai(e[r])||(e[r]=[]),hn(t[r])){var i=t[r].length;e[r].length!==i&&(e[r]=new t[r].constructor(i),bS(e[r],t[r],i))}else{var n=t[r],a=e[r],o=n.length;if(L1e(n))for(var s=n[0].length,l=0;l<o;l++)a[l]?bS(a[l],n[l],s):a[l]=Array.prototype.slice.call(n[l]);else bS(a,n,o);a.length=n.length}else e[r]=t[r]}function I1e(e,t){return e===t||ai(e)&&ai(t)&&O1e(e,t)}function O1e(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function rW(e,t,r,i,n,a,o,s){for(var l=Ze(i),u=n.duration,h=n.delay,c=n.additive,d=n.setToFinal,f=!Pe(a),p=e.animators,v=[],g=0;g<l.length;g++){var m=l[g],y=i[m];if(y!=null&&r[m]!=null&&(f||a[m]))if(Pe(y)&&!ai(y)&&!kx(y)){if(t){s||(r[m]=y,e.updateDuringAnimation(t));continue}rW(e,m,r[m],y,n,a&&a[m],o,s)}else v.push(m);else s||(r[m]=y,e.updateDuringAnimation(t),v.push(m))}var _=v.length;if(!c&&_)for(var x=0;x<p.length;x++){var w=p[x];if(w.targetName===t){var b=w.stopTracks(v);if(b){var S=We(p,w);p.splice(S,1)}}}if(n.force||(v=xt(v,function(C){return!I1e(i[C],r[C])}),_=v.length),_>0||n.force&&!o.length){var M=void 0,A=void 0,T=void 0;if(s){A={},d&&(M={});for(var x=0;x<_;x++){var m=v[x];A[m]=r[m],d?M[m]=i[m]:r[m]=i[m]}}else if(d){T={};for(var x=0;x<_;x++){var m=v[x];T[m]=cv(r[m]),E1e(r,i,m)}}var w=new WP(r,!1,!1,c?xt(p,function(D){return D.targetName===t}):null);w.targetName=t,n.scope&&(w.scope=n.scope),d&&M&&w.whenWithKeys(0,M,v),T&&w.whenWithKeys(0,T,v),w.whenWithKeys(u??500,s?A:i,v).delay(h||0),e.addAnimator(w,t),o.push(w)}}const iW=$P;var nW=function(e){Y(t,e);function t(r){var i=e.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(r),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var i=this._children,n=0;n<i.length;n++)if(i[n].name===r)return i[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,i){if(r&&r!==this&&r.parent!==this&&i&&i.parent===this){var n=this._children,a=n.indexOf(i);a>=0&&(n.splice(a,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,i){var n=We(this._children,r);return n>=0&&this.replaceAt(i,n),this},t.prototype.replaceAt=function(r,i){var n=this._children,a=n[i];if(r&&r!==this&&r.parent!==this&&r!==a){n[i]=r,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var i=this.__zr;i&&i!==r.__zr&&r.addSelfToZr(i),i&&i.refresh()},t.prototype.remove=function(r){var i=this.__zr,n=this._children,a=We(n,r);return a<0?this:(n.splice(a,1),r.parent=null,i&&r.removeSelfFromZr(i),i&&i.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,i=this.__zr,n=0;n<r.length;n++){var a=r[n];i&&a.removeSelfFromZr(i),a.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,i){for(var n=this._children,a=0;a<n.length;a++){var o=n[a];r.call(i,o,a)}return this},t.prototype.traverse=function(r,i){for(var n=0;n<this._children.length;n++){var a=this._children[n],o=r.call(i,a);a.isGroup&&!o&&a.traverse(r,i)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var i=new Ge(0,0,0,0),n=r||this._children,a=[],o=null,s=0;s<n.length;s++){var l=n[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),h=l.getLocalTransform(a);h?(Ge.applyTransform(i,u,h),o=o||i.clone(),o.union(i)):(o=o||u.clone(),o.union(u))}}return o||i},t}(iW);nW.prototype.type="group";const Ie=nW;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var $0={},aW={};function R1e(e){delete aW[e]}function z1e(e){if(!e)return!1;if(typeof e=="string")return s_(e,1)<_A;if(e.colorStops){for(var t=e.colorStops,r=0,i=t.length,n=0;n<i;n++)r+=s_(t[n].color,1);return r/=i,r<_A}return!1}var N1e=function(){function e(t,r,i){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=r,this.id=t;var a=new $0e,o=i.renderer||"canvas";$0[o]||(o=Ze($0)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var s=new $0[o](r,a,i,t),l=i.ssr||s.ssrOnly;this.storage=a,this.painter=s;var u=!at.node&&!at.worker&&!l?new T1e(s.getViewportRoot(),s.root):null,h=i.useCoarsePointer,c=h==null||h==="auto"?at.touchEventsSupported:!!h,d=44,f;c&&(f=Ve(i.pointerSize,d)),this.handler=new U0e(a,s,u,s.root,f),this.animation=new m1e({stage:{update:l?null:function(){return n._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=z1e(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,i=td();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var n=td();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,i){return this.handler.on(t,r,i),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Ie&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,R1e(this.id)},e}();function Yz(e,t){var r=new N1e(Cj(),e,t);return aW[r.id]=r,r}function k1e(e,t){$0[e]=t}var Zz=1e-4,oW=20;function B1e(e){return e.replace(/^\s+|\s+$/g,"")}function mt(e,t,r,i){var n=t[0],a=t[1],o=r[0],s=r[1],l=a-n,u=s-o;if(l===0)return u===0?o:(o+s)/2;if(i)if(l>0){if(e<=n)return o;if(e>=a)return s}else{if(e>=n)return o;if(e<=a)return s}else{if(e===n)return o;if(e===a)return s}return(e-n)/l*u+o}function ve(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return ge(e)?B1e(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function Qt(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),oW),e=(+e).toFixed(t),r?e:+e}function zn(e){return e.sort(function(t,r){return t-r}),e}function uo(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return F1e(e)}function F1e(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),i=r>0?+t.slice(r+1):0,n=r>0?r:t.length,a=t.indexOf("."),o=a<0?0:n-1-a;return Math.max(0,o-i)}function sW(e,t){var r=Math.log,i=Math.LN10,n=Math.floor(r(e[1]-e[0])/i),a=Math.round(r(Math.abs(t[1]-t[0]))/i),o=Math.min(Math.max(-n+a,0),20);return isFinite(o)?o:20}function V1e(e,t){var r=xo(e,function(f,p){return f+(isNaN(p)?0:p)},0);if(r===0)return[];for(var i=Math.pow(10,t),n=ce(e,function(f){return(isNaN(f)?0:f)/r*i*100}),a=i*100,o=ce(n,function(f){return Math.floor(f)}),s=xo(o,function(f,p){return f+p},0),l=ce(n,function(f,p){return f-o[p]});s<a;){for(var u=Number.NEGATIVE_INFINITY,h=null,c=0,d=l.length;c<d;++c)l[c]>u&&(u=l[c],h=c);++o[h],l[h]=0,++s}return ce(o,function(f){return f/i})}function U1e(e,t){var r=Math.max(uo(e),uo(t)),i=e+t;return r>oW?i:Qt(i,r)}var Kz=9007199254740991;function lW(e){var t=Math.PI*2;return(e%t+t)%t}function c_(e){return e>-Zz&&e<Zz}var G1e=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function So(e){if(e instanceof Date)return e;if(ge(e)){var t=G1e.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function H1e(e){return Math.pow(10,qP(e))}function qP(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function uW(e,t){var r=qP(e),i=Math.pow(10,r),n=e/i,a;return t?n<1.5?a=1:n<2.5?a=2:n<4?a=3:n<7?a=5:a=10:n<1?a=1:n<2?a=2:n<3?a=3:n<5?a=5:a=10,e=a*i,r>=-20?+e.toFixed(r<0?-r:0):e}function wS(e,t){var r=(e.length-1)*t+1,i=Math.floor(r),n=+e[i-1],a=r-i;return a?n+a*(e[i]-n):n}function Jz(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,i=0;i<e.length;){for(var n=e[i].interval,a=e[i].close,o=0;o<2;o++)n[o]<=t&&(n[o]=t,a[o]=o?1:1-r),t=n[o],r=a[o];n[0]===n[1]&&a[0]*a[1]!==1?e.splice(i,1):i++}return e;function s(l,u,h){return l.interval[h]<u.interval[h]||l.interval[h]===u.interval[h]&&(l.close[h]-u.close[h]===(h?-1:1)||!h&&s(l,u,1))}}function _s(e){var t=parseFloat(e);return t==e&&(t!==0||!ge(e)||e.indexOf("x")<=0)?t:NaN}function hW(e){return!isNaN(_s(e))}function cW(){return Math.round(Math.random()*9)}function dW(e,t){return t===0?e:dW(t,e%t)}function Qz(e,t){return e==null?t:t==null?e:e*t/dW(e,t)}function dt(e){throw new Error(e)}function eN(e,t,r){return(t-e)*r+e}var fW="series\0",pW="\0_ec_\0";function Mt(e){return e instanceof Array?e:e==null?[]:[e]}function Lh(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var i=0,n=r.length;i<n;i++){var a=r[i];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var tN=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function uf(e){return Pe(e)&&!ue(e)&&!(e instanceof Date)?e.value:e}function j1e(e){return Pe(e)&&!(e instanceof Array)}function vW(e,t,r){var i=r==="normalMerge",n=r==="replaceMerge",a=r==="replaceAll";e=e||[],t=(t||[]).slice();var o=Me();I(t,function(l,u){if(!Pe(l)){t[u]=null;return}});var s=W1e(e,o,r);return(i||n)&&$1e(s,e,o,t),i&&q1e(s,t),i||n?X1e(s,t,n):a&&Y1e(s,t),Z1e(s),s}function W1e(e,t,r){var i=[];if(r==="replaceAll")return i;for(var n=0;n<e.length;n++){var a=e[n];a&&a.id!=null&&t.set(a.id,n),i.push({existing:r==="replaceMerge"||Qv(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return i}function $1e(e,t,r,i){I(i,function(n,a){if(!(!n||n.id==null)){var o=dv(n.id),s=r.get(o);if(s!=null){var l=e[s];wi(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=n,l.existing=t[s],i[a]=null}}})}function q1e(e,t){I(t,function(r,i){if(!(!r||r.name==null))for(var n=0;n<e.length;n++){var a=e[n].existing;if(!e[n].newOption&&a&&(a.id==null||r.id==null)&&!Qv(r)&&!Qv(a)&&gW("name",a,r)){e[n].newOption=r,t[i]=null;return}}})}function X1e(e,t,r){I(t,function(i){if(i){for(var n,a=0;(n=e[a])&&(n.newOption||Qv(n.existing)||n.existing&&i.id!=null&&!gW("id",i,n.existing));)a++;n?(n.newOption=i,n.brandNew=r):e.push({newOption:i,brandNew:r,existing:null,keyInfo:null}),a++}})}function Y1e(e,t){I(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function Z1e(e){var t=Me();I(e,function(r){var i=r.existing;i&&t.set(i.id,r)}),I(e,function(r){var i=r.newOption;wi(!i||i.id==null||!t.get(i.id)||t.get(i.id)===r,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&t.set(i.id,r),!r.keyInfo&&(r.keyInfo={})}),I(e,function(r,i){var n=r.existing,a=r.newOption,o=r.keyInfo;if(Pe(a)){if(o.name=a.name!=null?dv(a.name):n?n.name:fW+i,n)o.id=dv(n.id);else if(a.id!=null)o.id=dv(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(t.get(o.id))}t.set(o.id,r)}})}function gW(e,t,r){var i=xr(t[e],null),n=xr(r[e],null);return i!=null&&n!=null&&i===n}function dv(e){return xr(e,"")}function xr(e,t){return e==null?t:ge(e)?e:st(e)||eA(e)?e+"":t}function XP(e){var t=e.name;return!!(t&&t.indexOf(fW))}function Qv(e){return e&&e.id!=null&&dv(e.id).indexOf(pW)===0}function K1e(e){return pW+e}function J1e(e,t,r){I(e,function(i){var n=i.newOption;Pe(n)&&(i.keyInfo.mainType=t,i.keyInfo.subType=Q1e(t,n,i.existing,r))})}function Q1e(e,t,r,i){var n=t.type?t.type:r?r.subType:i.determineSubType(e,t);return n}function e_e(e,t){var r={},i={};return n(e||[],r),n(t||[],i,r),[a(r),a(i)];function n(o,s,l){for(var u=0,h=o.length;u<h;u++){var c=xr(o[u].seriesId,null);if(c==null)return;for(var d=Mt(o[u].dataIndex),f=l&&l[c],p=0,v=d.length;p<v;p++){var g=d[p];f&&f[g]?f[g]=null:(s[c]||(s[c]={}))[g]=1}}}function a(o,s){var l=[];for(var u in o)if(o.hasOwnProperty(u)&&o[u]!=null)if(s)l.push(+u);else{var h=a(o[u],!0);h.length&&l.push({seriesId:u,dataIndex:h})}return l}}function Eh(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ue(t.dataIndex)?ce(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ue(t.name)?ce(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function it(){var e="__ec_inner_"+t_e++;return function(t){return t[e]||(t[e]={})}}var t_e=cW();function fv(e,t,r){var i=YP(t,r),n=i.mainTypeSpecified,a=i.queryOptionMap,o=i.others,s=o,l=r?r.defaultMainType:null;return!n&&l&&a.set(l,{}),a.each(function(u,h){var c=Fg(e,h,u,{useDefault:l===h,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[h+"Models"]=c.models,s[h+"Model"]=c.models[0]}),s}function YP(e,t){var r;if(ge(e)){var i={};i[e+"Index"]=0,r=i}else r=e;var n=Me(),a={},o=!1;return I(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],h=u[1],c=(u[2]||"").toLowerCase();if(!(!h||!c||t&&t.includeMainTypes&&We(t.includeMainTypes,h)<0)){o=o||!!h;var d=n.get(h)||n.set(h,{});d[c]=s}}),{mainTypeSpecified:o,queryOptionMap:n,others:a}}var dr={useDefault:!0,enableAll:!1,enableNone:!1},r_e={useDefault:!1,enableAll:!0,enableNone:!0};function Fg(e,t,r,i){i=i||dr;var n=r.index,a=r.id,o=r.name,s={models:null,specified:n!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=i.useDefault&&(l=e.getComponent(t))?[l]:[],s}return n==="none"||n===!1?(wi(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(n==="all"&&(wi(i.enableAll,'`"all"` is not a valid value on index option.'),n=a=o=null),s.models=e.queryComponents({mainType:t,index:n,id:a,name:o}),s)}function mW(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function i_e(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function n_e(e){return e==="auto"?at.domSupported?"html":"richText":e||"html"}function wA(e,t){var r=Me(),i=[];return I(e,function(n){var a=t(n);(r.get(a)||(i.push(a),r.set(a,[]))).push(n)}),{keys:i,buckets:r}}function yW(e,t,r,i,n){var a=t==null||t==="auto";if(i==null)return i;if(st(i)){var o=eN(r||0,i,n);return Qt(o,a?Math.max(uo(r||0),uo(i)):t)}else{if(ge(i))return n<1?r:i;for(var s=[],l=r,u=i,h=Math.max(l?l.length:0,u.length),c=0;c<h;++c){var d=e.getDimensionInfo(c);if(d&&d.type==="ordinal")s[c]=(n<1&&l?l:u)[c];else{var f=l&&l[c]?l[c]:0,p=u[c],o=eN(f,p,n);s[c]=Qt(o,a?Math.max(uo(f),uo(p)):t)}}return s}}var a_e=".",cu="___EC__COMPONENT__CONTAINER___",_W="___EC__EXTENDED_CLASS___";function ho(e){var t={main:"",sub:""};if(e){var r=e.split(a_e);t.main=r[0]||"",t.sub=r[1]||""}return t}function o_e(e){wi(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function s_e(e){return!!(e&&e[_W])}function ZP(e,t){e.$constructor=e,e.extend=function(r){var i=this,n;return l_e(i)?n=function(a){Y(o,a);function o(){return a.apply(this,arguments)||this}return o}(i):(n=function(){(r.$constructor||i).apply(this,arguments)},s0e(n,this)),ae(n.prototype,r),n[_W]=!0,n.extend=this.extend,n.superCall=c_e,n.superApply=d_e,n.superClass=i,n}}function l_e(e){return Ae(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function xW(e,t){e.extend=t.extend}var u_e=Math.round(Math.random()*10);function h_e(e){var t=["__\0is_clz",u_e++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function c_e(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this.superClass.prototype[t].apply(e,r)}function d_e(e,t,r){return this.superClass.prototype[t].apply(e,r)}function Gx(e){var t={};e.registerClass=function(i){var n=i.type||i.prototype.type;if(n){o_e(n),i.prototype.type=n;var a=ho(n);if(!a.sub)t[a.main]=i;else if(a.sub!==cu){var o=r(a);o[a.sub]=i}}return i},e.getClass=function(i,n,a){var o=t[i];if(o&&o[cu]&&(o=n?o[n]:null),a&&!o)throw new Error(n?"Component "+i+"."+(n||"")+" is used but not imported.":i+".type should be specified.");return o},e.getClassesByMainType=function(i){var n=ho(i),a=[],o=t[n.main];return o&&o[cu]?I(o,function(s,l){l!==cu&&a.push(s)}):a.push(o),a},e.hasClass=function(i){var n=ho(i);return!!t[n.main]},e.getAllClassMainTypes=function(){var i=[];return I(t,function(n,a){i.push(a)}),i},e.hasSubTypes=function(i){var n=ho(i),a=t[n.main];return a&&a[cu]};function r(i){var n=t[i.main];return(!n||!n[cu])&&(n=t[i.main]={},n[cu]=!0),n}}function Ih(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(i,n,a){for(var o={},s=0;s<e.length;s++){var l=e[s][1];if(!(n&&We(n,l)>=0||a&&We(a,l)<0)){var u=i.getShallow(l,t);u!=null&&(o[e[s][0]]=u)}}return o}}var f_e=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],p_e=Ih(f_e),v_e=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return p_e(this,t,r)},e}(),SA=new kg(50);function g_e(e){if(typeof e=="string"){var t=SA.get(e);return t&&t.image}else return e}function KP(e,t,r,i,n){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var a=SA.get(e),o={hostEl:r,cb:i,cbPayload:n};return a?(t=a.image,!Hx(t)&&a.pending.push(o)):(t=Nl.loadImage(e,rN,rN),t.__zrImageSrc=e,SA.put(e,t.__cachedImgObj={image:t,pending:[o]})),t}else return e;else return t}function rN(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],i=r.cb;i&&i(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function Hx(e){return e&&e.width&&e.height}var SS=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function m_e(e,t,r,i,n){if(!t)return"";var a=(e+"").split(`
`);n=bW(t,r,i,n);for(var o=0,s=a.length;o<s;o++)a[o]=wW(a[o],n);return a.join(`
`)}function bW(e,t,r,i){i=i||{};var n=ae({},i);n.font=t,r=Ve(r,"..."),n.maxIterations=Ve(i.maxIterations,2);var a=n.minChar=Ve(i.minChar,0);n.cnCharWidth=un("国",t);var o=n.ascCharWidth=un("a",t);n.placeholder=Ve(i.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<a&&s>=o;l++)s-=o;var u=un(r,t);return u>s&&(r="",u=0),s=e-u,n.ellipsis=r,n.ellipsisWidth=u,n.contentWidth=s,n.containerWidth=e,n}function wW(e,t){var r=t.containerWidth,i=t.font,n=t.contentWidth;if(!r)return"";var a=un(e,i);if(a<=r)return e;for(var o=0;;o++){if(a<=n||o>=t.maxIterations){e+=t.ellipsis;break}var s=o===0?y_e(e,n,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*n/a):0;e=e.substr(0,s),a=un(e,i)}return e===""&&(e=t.placeholder),e}function y_e(e,t,r,i){for(var n=0,a=0,o=e.length;a<o&&n<t;a++){var s=e.charCodeAt(a);n+=0<=s&&s<=127?r:i}return a}function __e(e,t){e!=null&&(e+="");var r=t.overflow,i=t.padding,n=t.font,a=r==="truncate",o=Ux(n),s=Ve(t.lineHeight,o),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",h=t.width,c;h!=null&&(r==="break"||r==="breakAll")?c=e?SW(e,t.font,h,r==="breakAll",0).lines:[]:c=e?e.split(`
`):[];var d=c.length*s,f=Ve(t.height,d);if(d>f&&u){var p=Math.floor(f/s);c=c.slice(0,p)}if(e&&a&&h!=null)for(var v=bW(h,n,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),g=0;g<c.length;g++)c[g]=wW(c[g],v);for(var m=f,y=0,g=0;g<c.length;g++)y=Math.max(un(c[g],n),y);h==null&&(h=y);var _=y;return i&&(m+=i[0]+i[2],_+=i[1]+i[3],h+=i[1]+i[3]),l&&(_=h),{lines:c,height:f,outerWidth:_,outerHeight:m,lineHeight:s,calculatedLineHeight:o,contentWidth:y,contentHeight:d,width:h}}var x_e=function(){function e(){}return e}(),iN=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),b_e=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function w_e(e,t){var r=new b_e;if(e!=null&&(e+=""),!e)return r;for(var i=t.width,n=t.height,a=t.overflow,o=(a==="break"||a==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:a==="breakAll"}:null,s=SS.lastIndex=0,l;(l=SS.exec(e))!=null;){var u=l.index;u>s&&MS(r,e.substring(s,u),t,o),MS(r,l[2],t,o,l[1]),s=SS.lastIndex}s<e.length&&MS(r,e.substring(s,e.length),t,o);var h=[],c=0,d=0,f=t.padding,p=a==="truncate",v=t.lineOverflow==="truncate";function g(N,F,G){N.width=F,N.lineHeight=G,c+=G,d=Math.max(d,F)}e:for(var m=0;m<r.lines.length;m++){for(var y=r.lines[m],_=0,x=0,w=0;w<y.tokens.length;w++){var b=y.tokens[w],S=b.styleName&&t.rich[b.styleName]||{},M=b.textPadding=S.padding,A=M?M[1]+M[3]:0,T=b.font=S.font||t.font;b.contentHeight=Ux(T);var C=Ve(S.height,b.contentHeight);if(b.innerHeight=C,M&&(C+=M[0]+M[2]),b.height=C,b.lineHeight=ss(S.lineHeight,t.lineHeight,C),b.align=S&&S.align||t.align,b.verticalAlign=S&&S.verticalAlign||"middle",v&&n!=null&&c+b.lineHeight>n){w>0?(y.tokens=y.tokens.slice(0,w),g(y,x,_),r.lines=r.lines.slice(0,m+1)):r.lines=r.lines.slice(0,m);break e}var D=S.width,P=D==null||D==="auto";if(typeof D=="string"&&D.charAt(D.length-1)==="%")b.percentWidth=D,h.push(b),b.contentWidth=un(b.text,T);else{if(P){var E=S.backgroundColor,O=E&&E.image;O&&(O=g_e(O),Hx(O)&&(b.width=Math.max(b.width,O.width*C/O.height)))}var z=p&&i!=null?i-x:null;z!=null&&z<b.width?!P||z<A?(b.text="",b.width=b.contentWidth=0):(b.text=m_e(b.text,z-A,T,t.ellipsis,{minChar:t.truncateMinChar}),b.width=b.contentWidth=un(b.text,T)):b.contentWidth=un(b.text,T)}b.width+=A,x+=b.width,S&&(_=Math.max(_,b.lineHeight))}g(y,x,_)}r.outerWidth=r.width=Ve(i,d),r.outerHeight=r.height=Ve(n,c),r.contentHeight=c,r.contentWidth=d,f&&(r.outerWidth+=f[1]+f[3],r.outerHeight+=f[0]+f[2]);for(var m=0;m<h.length;m++){var b=h[m],B=b.percentWidth;b.width=parseInt(B,10)/100*r.width}return r}function MS(e,t,r,i,n){var a=t==="",o=n&&r.rich[n]||{},s=e.lines,l=o.font||r.font,u=!1,h,c;if(i){var d=o.padding,f=d?d[1]+d[3]:0;if(o.width!=null&&o.width!=="auto"){var p=Aa(o.width,i.width)+f;s.length>0&&p+i.accumWidth>i.width&&(h=t.split(`
`),u=!0),i.accumWidth=p}else{var v=SW(t,l,i.width,i.breakAll,i.accumWidth);i.accumWidth=v.accumWidth+f,c=v.linesWidths,h=v.lines}}else h=t.split(`
`);for(var g=0;g<h.length;g++){var m=h[g],y=new x_e;if(y.styleName=n,y.text=m,y.isLineHolder=!m&&!a,typeof o.width=="number"?y.width=o.width:y.width=c?c[g]:un(m,l),!g&&!u){var _=(s[s.length-1]||(s[0]=new iN)).tokens,x=_.length;x===1&&_[0].isLineHolder?_[0]=y:(m||!x||a)&&_.push(y)}else s.push(new iN([y]))}}function S_e(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var M_e=xo(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function T_e(e){return S_e(e)?!!M_e[e]:!0}function SW(e,t,r,i,n){for(var a=[],o=[],s="",l="",u=0,h=0,c=0;c<e.length;c++){var d=e.charAt(c);if(d===`
`){l&&(s+=l,h+=u),a.push(s),o.push(h),s="",l="",u=0,h=0;continue}var f=un(d,t),p=i?!1:!T_e(d);if(a.length?h+f>r:n+h+f>r){h?(s||l)&&(p?(s||(s=l,l="",u=0,h=u),a.push(s),o.push(h-u),l+=d,u+=f,s="",h=u):(l&&(s+=l,l="",u=0),a.push(s),o.push(h),s=d,h=f)):p?(a.push(l),o.push(u),l=d,u=f):(a.push(d),o.push(f));continue}h+=f,p?(l+=d,u+=f):(l&&(s+=l,l="",u=0),s+=d)}return!a.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(a.push(s),o.push(h)),a.length===1&&(h+=n),{accumWidth:h,lines:a,linesWidths:o}}var MA="__zr_style_"+Math.round(Math.random()*10),gh={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},jx={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};gh[MA]=!0;var nN=["z","z2","invisible"],A_e=["invisible"],C_e=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var i=Ze(r),n=0;n<i.length;n++){var a=i[n];a==="style"?this.useStyle(r[a]):e.prototype.attrKV.call(this,a,r[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,i,n,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&D_e(this,r,i)||o&&!o[0]&&!o[3])return!1;if(n&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,i){return this.rectContain(r,i)},t.prototype.traverse=function(r,i){r.call(i,this)},t.prototype.rectContain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();return a.contain(n[0],n[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,n=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new Ge(0,0,0,0)),i?Ge.applyTransform(r,n,i):r.copy(n),(o||s||l)&&(r.width+=o*2+Math.abs(s),r.height+=o*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-o),r.y=Math.min(r.y,r.y+l-o));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new Ge(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,i){r!=="style"?e.prototype.attrKV.call(this,r,i):this.style?this.setStyle(i):this.useStyle(i)},t.prototype.setStyle=function(r,i){return typeof r=="string"?this.style[r]=i:ae(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Op,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Op)},t.prototype.styleUpdated=function(){this.__dirty&=~Op},t.prototype.createStyle=function(r){return Bx(gh,r)},t.prototype.useStyle=function(r){r[MA]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[MA]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,i,nN)},t.prototype._applyStateObj=function(r,i,n,a,o,s){e.prototype._applyStateObj.call(this,r,i,n,a,o,s);var l=!(i&&a),u;if(i&&i.style?o?a?u=i.style:(u=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(u,i.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:n.style),this._mergeStyle(u,i.style)):l&&(u=n.style),u)if(o){var h=this.style;if(this.style=this.createStyle(l?{}:h),l)for(var c=Ze(h),d=0;d<c.length;d++){var f=c[d];f in u&&(u[f]=u[f],this.style[f]=h[f])}for(var p=Ze(u),d=0;d<p.length;d++){var f=p[d];this.style[f]=this.style[f]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?A_e:nN,d=0;d<v.length;d++){var f=v[d];i&&i[f]!=null?this[f]=i[f]:l&&n[f]!=null&&(this[f]=n[f])}},t.prototype._mergeStates=function(r){for(var i=e.prototype._mergeStates.call(this,r),n,a=0;a<r.length;a++){var o=r[a];o.style&&(n=n||{},this._mergeStyle(n,o.style))}return n&&(i.style=n),i},t.prototype._mergeStyle=function(r,i){return ae(r,i),r},t.prototype.getAnimationStyleProps=function(){return jx},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=rn|Op}(),t}(iW),TS=new Ge(0,0,0,0),AS=new Ge(0,0,0,0);function D_e(e,t,r){return TS.copy(e.getBoundingRect()),e.transform&&TS.applyTransform(e.transform),AS.width=t,AS.height=r,!TS.intersect(AS)}const Hn=C_e;var Oi=Math.min,Ri=Math.max,CS=Math.sin,DS=Math.cos,du=Math.PI*2,My=jh(),Ty=jh(),Ay=jh();function Wx(e,t,r){if(e.length!==0){for(var i=e[0],n=i[0],a=i[0],o=i[1],s=i[1],l=1;l<e.length;l++)i=e[l],n=Oi(n,i[0]),a=Ri(a,i[0]),o=Oi(o,i[1]),s=Ri(s,i[1]);t[0]=n,t[1]=o,r[0]=a,r[1]=s}}function aN(e,t,r,i,n,a){n[0]=Oi(e,r),n[1]=Oi(t,i),a[0]=Ri(e,r),a[1]=Ri(t,i)}var oN=[],sN=[];function P_e(e,t,r,i,n,a,o,s,l,u){var h=Vj,c=Tr,d=h(e,r,n,o,oN);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var f=0;f<d;f++){var p=c(e,r,n,o,oN[f]);l[0]=Oi(p,l[0]),u[0]=Ri(p,u[0])}d=h(t,i,a,s,sN);for(var f=0;f<d;f++){var v=c(t,i,a,s,sN[f]);l[1]=Oi(v,l[1]),u[1]=Ri(v,u[1])}l[0]=Oi(e,l[0]),u[0]=Ri(e,u[0]),l[0]=Oi(o,l[0]),u[0]=Ri(o,u[0]),l[1]=Oi(t,l[1]),u[1]=Ri(t,u[1]),l[1]=Oi(s,l[1]),u[1]=Ri(s,u[1])}function L_e(e,t,r,i,n,a,o,s){var l=Gj,u=Or,h=Ri(Oi(l(e,r,n),1),0),c=Ri(Oi(l(t,i,a),1),0),d=u(e,r,n,h),f=u(t,i,a,c);o[0]=Oi(e,n,d),o[1]=Oi(t,a,f),s[0]=Ri(e,n,d),s[1]=Ri(t,a,f)}function E_e(e,t,r,i,n,a,o,s,l){var u=vl,h=gl,c=Math.abs(n-a);if(c%du<1e-4&&c>1e-4){s[0]=e-r,s[1]=t-i,l[0]=e+r,l[1]=t+i;return}if(My[0]=DS(n)*r+e,My[1]=CS(n)*i+t,Ty[0]=DS(a)*r+e,Ty[1]=CS(a)*i+t,u(s,My,Ty),h(l,My,Ty),n=n%du,n<0&&(n=n+du),a=a%du,a<0&&(a=a+du),n>a&&!o?a+=du:n<a&&o&&(n+=du),o){var d=a;a=n,n=d}for(var f=0;f<a;f+=Math.PI/2)f>n&&(Ay[0]=DS(f)*r+e,Ay[1]=CS(f)*i+t,u(s,Ay,s),h(l,Ay,l))}var Ct={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},fu=[],pu=[],Ga=[],Us=[],Ha=[],ja=[],PS=Math.min,LS=Math.max,vu=Math.cos,gu=Math.sin,Vo=Math.abs,TA=Math.PI,Ys=TA*2,ES=typeof Float32Array<"u",tp=[];function IS(e){var t=Math.round(e/TA*1e8)/1e8;return t%2*TA}function MW(e,t){var r=IS(e[0]);r<0&&(r+=Ys);var i=r-e[0],n=e[1];n+=i,!t&&n-r>=Ys?n=r+Ys:t&&r-n>=Ys?n=r-Ys:!t&&r>n?n=r+(Ys-IS(r-n)):t&&r<n&&(n=r-(Ys-IS(n-r))),e[0]=r,e[1]=n}var Mo=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,i){i=i||0,i>0&&(this._ux=Vo(i/u_/t)||0,this._uy=Vo(i/u_/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(Ct.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var i=Vo(t-this._xi),n=Vo(r-this._yi),a=i>this._ux||n>this._uy;if(this.addData(Ct.L,t,r),this._ctx&&a&&this._ctx.lineTo(t,r),a)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var o=i*i+n*n;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=o)}return this},e.prototype.bezierCurveTo=function(t,r,i,n,a,o){return this._drawPendingPt(),this.addData(Ct.C,t,r,i,n,a,o),this._ctx&&this._ctx.bezierCurveTo(t,r,i,n,a,o),this._xi=a,this._yi=o,this},e.prototype.quadraticCurveTo=function(t,r,i,n){return this._drawPendingPt(),this.addData(Ct.Q,t,r,i,n),this._ctx&&this._ctx.quadraticCurveTo(t,r,i,n),this._xi=i,this._yi=n,this},e.prototype.arc=function(t,r,i,n,a,o){this._drawPendingPt(),tp[0]=n,tp[1]=a,MW(tp,o),n=tp[0],a=tp[1];var s=a-n;return this.addData(Ct.A,t,r,i,i,n,s,0,o?0:1),this._ctx&&this._ctx.arc(t,r,i,n,a,o),this._xi=vu(a)*i+t,this._yi=gu(a)*i+r,this},e.prototype.arcTo=function(t,r,i,n,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,i,n,a),this},e.prototype.rect=function(t,r,i,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,i,n),this.addData(Ct.R,t,r,i,n),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(Ct.Z);var t=this._ctx,r=this._x0,i=this._y0;return t&&t.closePath(),this._xi=r,this._yi=i,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&ES&&(this.data=new Float32Array(r));for(var i=0;i<r;i++)this.data[i]=t[i];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,i=0,n=this._len,a=0;a<r;a++)i+=t[a].len();ES&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var a=0;a<r;a++)for(var o=t[a].data,s=0;s<o.length;s++)this.data[n++]=o[s];this._len=n},e.prototype.addData=function(t,r,i,n,a,o,s,l,u){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var c=0;c<arguments.length;c++)h[this._len++]=arguments[c]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,ES&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Ga[0]=Ga[1]=Ha[0]=Ha[1]=Number.MAX_VALUE,Us[0]=Us[1]=ja[0]=ja[1]=-Number.MAX_VALUE;var t=this.data,r=0,i=0,n=0,a=0,o;for(o=0;o<this._len;){var s=t[o++],l=o===1;switch(l&&(r=t[o],i=t[o+1],n=r,a=i),s){case Ct.M:r=n=t[o++],i=a=t[o++],Ha[0]=n,Ha[1]=a,ja[0]=n,ja[1]=a;break;case Ct.L:aN(r,i,t[o],t[o+1],Ha,ja),r=t[o++],i=t[o++];break;case Ct.C:P_e(r,i,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],Ha,ja),r=t[o++],i=t[o++];break;case Ct.Q:L_e(r,i,t[o++],t[o++],t[o],t[o+1],Ha,ja),r=t[o++],i=t[o++];break;case Ct.A:var u=t[o++],h=t[o++],c=t[o++],d=t[o++],f=t[o++],p=t[o++]+f;o+=1;var v=!t[o++];l&&(n=vu(f)*c+u,a=gu(f)*d+h),E_e(u,h,c,d,f,p,v,Ha,ja),r=vu(p)*c+u,i=gu(p)*d+h;break;case Ct.R:n=r=t[o++],a=i=t[o++];var g=t[o++],m=t[o++];aN(n,a,n+g,a+m,Ha,ja);break;case Ct.Z:r=n,i=a;break}vl(Ga,Ga,Ha),gl(Us,Us,ja)}return o===0&&(Ga[0]=Ga[1]=Us[0]=Us[1]=0),new Ge(Ga[0],Ga[1],Us[0]-Ga[0],Us[1]-Ga[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,i=this._ux,n=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,h=0,c=0,d=0;d<r;){var f=t[d++],p=d===1;p&&(a=t[d],o=t[d+1],s=a,l=o);var v=-1;switch(f){case Ct.M:a=s=t[d++],o=l=t[d++];break;case Ct.L:{var g=t[d++],m=t[d++],y=g-a,_=m-o;(Vo(y)>i||Vo(_)>n||d===r-1)&&(v=Math.sqrt(y*y+_*_),a=g,o=m);break}case Ct.C:{var x=t[d++],w=t[d++],g=t[d++],m=t[d++],b=t[d++],S=t[d++];v=q0e(a,o,x,w,g,m,b,S,10),a=b,o=S;break}case Ct.Q:{var x=t[d++],w=t[d++],g=t[d++],m=t[d++];v=Y0e(a,o,x,w,g,m,10),a=g,o=m;break}case Ct.A:var M=t[d++],A=t[d++],T=t[d++],C=t[d++],D=t[d++],P=t[d++],E=P+D;d+=1,t[d++],p&&(s=vu(D)*T+M,l=gu(D)*C+A),v=LS(T,C)*PS(Ys,Math.abs(P)),a=vu(E)*T+M,o=gu(E)*C+A;break;case Ct.R:{s=a=t[d++],l=o=t[d++];var O=t[d++],z=t[d++];v=O*2+z*2;break}case Ct.Z:{var y=s-a,_=l-o;v=Math.sqrt(y*y+_*_),a=s,o=l;break}}v>=0&&(u[c++]=v,h+=v)}return this._pathLen=h,h},e.prototype.rebuildPath=function(t,r){var i=this.data,n=this._ux,a=this._uy,o=this._len,s,l,u,h,c,d,f=r<1,p,v,g=0,m=0,y,_=0,x,w;if(!(f&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=r*v,!y)))e:for(var b=0;b<o;){var S=i[b++],M=b===1;switch(M&&(u=i[b],h=i[b+1],s=u,l=h),S!==Ct.L&&_>0&&(t.lineTo(x,w),_=0),S){case Ct.M:s=u=i[b++],l=h=i[b++],t.moveTo(u,h);break;case Ct.L:{c=i[b++],d=i[b++];var A=Vo(c-u),T=Vo(d-h);if(A>n||T>a){if(f){var C=p[m++];if(g+C>y){var D=(y-g)/C;t.lineTo(u*(1-D)+c*D,h*(1-D)+d*D);break e}g+=C}t.lineTo(c,d),u=c,h=d,_=0}else{var P=A*A+T*T;P>_&&(x=c,w=d,_=P)}break}case Ct.C:{var E=i[b++],O=i[b++],z=i[b++],B=i[b++],N=i[b++],F=i[b++];if(f){var C=p[m++];if(g+C>y){var D=(y-g)/C;kl(u,E,z,N,D,fu),kl(h,O,B,F,D,pu),t.bezierCurveTo(fu[1],pu[1],fu[2],pu[2],fu[3],pu[3]);break e}g+=C}t.bezierCurveTo(E,O,z,B,N,F),u=N,h=F;break}case Ct.Q:{var E=i[b++],O=i[b++],z=i[b++],B=i[b++];if(f){var C=p[m++];if(g+C>y){var D=(y-g)/C;Zv(u,E,z,D,fu),Zv(h,O,B,D,pu),t.quadraticCurveTo(fu[1],pu[1],fu[2],pu[2]);break e}g+=C}t.quadraticCurveTo(E,O,z,B),u=z,h=B;break}case Ct.A:var G=i[b++],H=i[b++],$=i[b++],Z=i[b++],X=i[b++],ne=i[b++],te=i[b++],U=!i[b++],W=$>Z?$:Z,j=Vo($-Z)>.001,K=X+ne,ee=!1;if(f){var C=p[m++];g+C>y&&(K=X+ne*(y-g)/C,ee=!0),g+=C}if(j&&t.ellipse?t.ellipse(G,H,$,Z,te,X,K,U):t.arc(G,H,W,X,K,U),ee)break e;M&&(s=vu(X)*$+G,l=gu(X)*Z+H),u=vu(K)*$+G,h=gu(K)*Z+H;break;case Ct.R:s=u=i[b],l=h=i[b+1],c=i[b++],d=i[b++];var R=i[b++],k=i[b++];if(f){var C=p[m++];if(g+C>y){var V=y-g;t.moveTo(c,d),t.lineTo(c+PS(V,R),d),V-=R,V>0&&t.lineTo(c+R,d+PS(V,k)),V-=k,V>0&&t.lineTo(c+LS(R-V,0),d+k),V-=R,V>0&&t.lineTo(c,d+LS(k-V,0));break e}g+=C}t.rect(c,d,R,k);break;case Ct.Z:if(f){var C=p[m++];if(g+C>y){var D=(y-g)/C;t.lineTo(u*(1-D)+s*D,h*(1-D)+l*D);break e}g+=C}t.closePath(),u=s,h=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=Ct,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();function rl(e,t,r,i,n,a,o){if(n===0)return!1;var s=n,l=0,u=e;if(o>t+s&&o>i+s||o<t-s&&o<i-s||a>e+s&&a>r+s||a<e-s&&a<r-s)return!1;if(e!==r)l=(t-i)/(e-r),u=(e*i-r*t)/(e-r);else return Math.abs(a-e)<=s/2;var h=l*a-o+u,c=h*h/(l*l+1);return c<=s/2*s/2}function I_e(e,t,r,i,n,a,o,s,l,u,h){if(l===0)return!1;var c=l;if(h>t+c&&h>i+c&&h>a+c&&h>s+c||h<t-c&&h<i-c&&h<a-c&&h<s-c||u>e+c&&u>r+c&&u>n+c&&u>o+c||u<e-c&&u<r-c&&u<n-c&&u<o-c)return!1;var d=Uj(e,t,r,i,n,a,o,s,u,h,null);return d<=c/2}function TW(e,t,r,i,n,a,o,s,l){if(o===0)return!1;var u=o;if(l>t+u&&l>i+u&&l>a+u||l<t-u&&l<i-u&&l<a-u||s>e+u&&s>r+u&&s>n+u||s<e-u&&s<r-u&&s<n-u)return!1;var h=Hj(e,t,r,i,n,a,s,l,null);return h<=u/2}var lN=Math.PI*2;function ts(e){return e%=lN,e<0&&(e+=lN),e}var rp=Math.PI*2;function O_e(e,t,r,i,n,a,o,s,l){if(o===0)return!1;var u=o;s-=e,l-=t;var h=Math.sqrt(s*s+l*l);if(h-u>r||h+u<r)return!1;if(Math.abs(i-n)%rp<1e-4)return!0;if(a){var c=i;i=ts(n),n=ts(c)}else i=ts(i),n=ts(n);i>n&&(n+=rp);var d=Math.atan2(l,s);return d<0&&(d+=rp),d>=i&&d<=n||d+rp>=i&&d+rp<=n}function Zo(e,t,r,i,n,a){if(a>t&&a>i||a<t&&a<i||i===t)return 0;var o=(a-t)/(i-t),s=i<t?1:-1;(o===1||o===0)&&(s=i<t?.5:-.5);var l=o*(r-e)+e;return l===n?1/0:l>n?s:0}var Gs=Mo.CMD,mu=Math.PI*2,R_e=1e-4;function z_e(e,t){return Math.abs(e-t)<R_e}var vi=[-1,-1,-1],Tn=[-1,-1];function N_e(){var e=Tn[0];Tn[0]=Tn[1],Tn[1]=e}function k_e(e,t,r,i,n,a,o,s,l,u){if(u>t&&u>i&&u>a&&u>s||u<t&&u<i&&u<a&&u<s)return 0;var h=a_(t,i,a,s,u,vi);if(h===0)return 0;for(var c=0,d=-1,f=void 0,p=void 0,v=0;v<h;v++){var g=vi[v],m=g===0||g===1?.5:1,y=Tr(e,r,n,o,g);y<l||(d<0&&(d=Vj(t,i,a,s,Tn),Tn[1]<Tn[0]&&d>1&&N_e(),f=Tr(t,i,a,s,Tn[0]),d>1&&(p=Tr(t,i,a,s,Tn[1]))),d===2?g<Tn[0]?c+=f<t?m:-m:g<Tn[1]?c+=p<f?m:-m:c+=s<p?m:-m:g<Tn[0]?c+=f<t?m:-m:c+=s<f?m:-m)}return c}function B_e(e,t,r,i,n,a,o,s){if(s>t&&s>i&&s>a||s<t&&s<i&&s<a)return 0;var l=X0e(t,i,a,s,vi);if(l===0)return 0;var u=Gj(t,i,a);if(u>=0&&u<=1){for(var h=0,c=Or(t,i,a,u),d=0;d<l;d++){var f=vi[d]===0||vi[d]===1?.5:1,p=Or(e,r,n,vi[d]);p<o||(vi[d]<u?h+=c<t?f:-f:h+=a<c?f:-f)}return h}else{var f=vi[0]===0||vi[0]===1?.5:1,p=Or(e,r,n,vi[0]);return p<o?0:a<t?f:-f}}function F_e(e,t,r,i,n,a,o,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);vi[0]=-l,vi[1]=l;var u=Math.abs(i-n);if(u<1e-4)return 0;if(u>=mu-1e-4){i=0,n=mu;var h=a?1:-1;return o>=vi[0]+e&&o<=vi[1]+e?h:0}if(i>n){var c=i;i=n,n=c}i<0&&(i+=mu,n+=mu);for(var d=0,f=0;f<2;f++){var p=vi[f];if(p+e>o){var v=Math.atan2(s,p),h=a?1:-1;v<0&&(v=mu+v),(v>=i&&v<=n||v+mu>=i&&v+mu<=n)&&(v>Math.PI/2&&v<Math.PI*1.5&&(h=-h),d+=h)}}return d}function AW(e,t,r,i,n){for(var a=e.data,o=e.len(),s=0,l=0,u=0,h=0,c=0,d,f,p=0;p<o;){var v=a[p++],g=p===1;switch(v===Gs.M&&p>1&&(r||(s+=Zo(l,u,h,c,i,n))),g&&(l=a[p],u=a[p+1],h=l,c=u),v){case Gs.M:h=a[p++],c=a[p++],l=h,u=c;break;case Gs.L:if(r){if(rl(l,u,a[p],a[p+1],t,i,n))return!0}else s+=Zo(l,u,a[p],a[p+1],i,n)||0;l=a[p++],u=a[p++];break;case Gs.C:if(r){if(I_e(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],t,i,n))return!0}else s+=k_e(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],i,n)||0;l=a[p++],u=a[p++];break;case Gs.Q:if(r){if(TW(l,u,a[p++],a[p++],a[p],a[p+1],t,i,n))return!0}else s+=B_e(l,u,a[p++],a[p++],a[p],a[p+1],i,n)||0;l=a[p++],u=a[p++];break;case Gs.A:var m=a[p++],y=a[p++],_=a[p++],x=a[p++],w=a[p++],b=a[p++];p+=1;var S=!!(1-a[p++]);d=Math.cos(w)*_+m,f=Math.sin(w)*x+y,g?(h=d,c=f):s+=Zo(l,u,d,f,i,n);var M=(i-m)*x/_+m;if(r){if(O_e(m,y,x,w,w+b,S,t,M,n))return!0}else s+=F_e(m,y,x,w,w+b,S,M,n);l=Math.cos(w+b)*_+m,u=Math.sin(w+b)*x+y;break;case Gs.R:h=l=a[p++],c=u=a[p++];var A=a[p++],T=a[p++];if(d=h+A,f=c+T,r){if(rl(h,c,d,c,t,i,n)||rl(d,c,d,f,t,i,n)||rl(d,f,h,f,t,i,n)||rl(h,f,h,c,t,i,n))return!0}else s+=Zo(d,c,d,f,i,n),s+=Zo(h,f,h,c,i,n);break;case Gs.Z:if(r){if(rl(l,u,h,c,t,i,n))return!0}else s+=Zo(l,u,h,c,i,n);l=h,u=c;break}}return!r&&!z_e(u,c)&&(s+=Zo(l,u,h,c,i,n)||0),s!==0}function V_e(e,t,r){return AW(e,0,!1,t,r)}function U_e(e,t,r,i){return AW(e,t,!0,r,i)}var d_=De({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},gh),G_e={style:De({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},jx.style)},OS=wo.concat(["invisible","culling","z","z2","zlevel","parent"]),H_e=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var i=this.style;if(i.decal){var n=this._decalEl=this._decalEl||new t;n.buildPath===t.prototype.buildPath&&(n.buildPath=function(l){r.buildPath(l,r.shape)}),n.silent=!0;var a=n.style;for(var o in i)a[o]!==i[o]&&(a[o]=i[o]);a.fill=i.fill?i.decal:null,a.decal=null,a.shadowColor=null,i.strokeFirst&&(a.stroke=null);for(var s=0;s<OS.length;++s)n[OS[s]]=this[OS[s]];n.__dirty|=rn}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var i=Ze(r);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var a=0;a<i.length;a++){var o=i[a],s=r[o];o==="style"?this.style?ae(this.style,s):this.useStyle(s):o==="shape"?ae(this.shape,s):e.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(ge(r)){var i=s_(r,0);return i>.5?xA:i>.2?A1e:bA}else if(r)return bA}return xA},t.prototype.getInsideTextStroke=function(r){var i=this.style.fill;if(ge(i)){var n=this.__zr,a=!!(n&&n.isDarkMode()),o=s_(r,0)<_A;if(a===o)return i}},t.prototype.buildPath=function(r,i,n){},t.prototype.pathUpdated=function(){this.__dirty&=~Gc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Mo(!1)},t.prototype.hasStroke=function(){var r=this.style,i=r.stroke;return!(i==null||i==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,i=r.fill;return i!=null&&i!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,i=this.style,n=!r;if(n){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&Gc)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),r=o.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||n){s.copy(r);var l=i.strokeNoScale?this.getLineScale():1,u=i.lineWidth;if(!this.hasFill()){var h=this.strokeContainThreshold;u=Math.max(u,h??4)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect(),o=this.style;if(r=n[0],i=n[1],a.contain(r,i)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),U_e(s,l/u,r,i)))return!0}if(this.hasFill())return V_e(s,r,i)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=Gc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,i){r==="shape"?this.setShape(i):e.prototype.attrKV.call(this,r,i)},t.prototype.setShape=function(r,i){var n=this.shape;return n||(n=this.shape={}),typeof r=="string"?n[r]=i:ae(n,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&Gc)},t.prototype.createStyle=function(r){return Bx(d_,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.shape&&!i.shape&&(i.shape=ae({},this.shape))},t.prototype._applyStateObj=function(r,i,n,a,o,s){e.prototype._applyStateObj.call(this,r,i,n,a,o,s);var l=!(i&&a),u;if(i&&i.shape?o?a?u=i.shape:(u=ae({},n.shape),ae(u,i.shape)):(u=ae({},a?this.shape:n.shape),ae(u,i.shape)):l&&(u=n.shape),u)if(o){this.shape=ae({},this.shape);for(var h={},c=Ze(u),d=0;d<c.length;d++){var f=c[d];typeof u[f]=="object"?this.shape[f]=u[f]:h[f]=u[f]}this._transitionState(r,{shape:h},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var i=e.prototype._mergeStates.call(this,r),n,a=0;a<r.length;a++){var o=r[a];o.shape&&(n=n||{},this._mergeStyle(n,o.shape))}return n&&(i.shape=n),i},t.prototype.getAnimationStyleProps=function(){return G_e},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var i=function(a){Y(o,a);function o(s){var l=a.call(this,s)||this;return r.init&&r.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return Ee(r.style)},o.prototype.getDefaultShape=function(){return Ee(r.shape)},o}(t);for(var n in r)typeof r[n]=="function"&&(i.prototype[n]=r[n]);return i},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=rn|Op|Gc}(),t}(Hn);const qe=H_e;var j_e=De({strokeFirst:!0,font:zl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},d_),CW=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,i=r.stroke;return i!=null&&i!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,i=r.fill;return i!=null&&i!=="none"},t.prototype.createStyle=function(r){return Bx(j_e,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var i=r.text;i!=null?i+="":i="";var n=Bg(i,r.font,r.textAlign,r.textBaseline);if(n.x+=r.x||0,n.y+=r.y||0,this.hasStroke()){var a=r.lineWidth;n.x-=a/2,n.y-=a/2,n.width+=a,n.height+=a}this._rect=n}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Hn);CW.prototype.type="tspan";const eg=CW;var W_e=De({x:0,y:0},gh),$_e={style:De({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},jx.style)};function q_e(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var DW=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return Bx(W_e,r)},t.prototype._getSize=function(r){var i=this.style,n=i[r];if(n!=null)return n;var a=q_e(i.image)?i.image:this.__image;if(!a)return 0;var o=r==="width"?"height":"width",s=i[o];return s==null?a[r]:a[r]/a[o]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return $_e},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new Ge(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Hn);DW.prototype.type="image";const $r=DW;function X_e(e,t){var r=t.x,i=t.y,n=t.width,a=t.height,o=t.r,s,l,u,h;n<0&&(r=r+n,n=-n),a<0&&(i=i+a,a=-a),typeof o=="number"?s=l=u=h=o:o instanceof Array?o.length===1?s=l=u=h=o[0]:o.length===2?(s=u=o[0],l=h=o[1]):o.length===3?(s=o[0],l=h=o[1],u=o[2]):(s=o[0],l=o[1],u=o[2],h=o[3]):s=l=u=h=0;var c;s+l>n&&(c=s+l,s*=n/c,l*=n/c),u+h>n&&(c=u+h,u*=n/c,h*=n/c),l+u>a&&(c=l+u,l*=a/c,u*=a/c),s+h>a&&(c=s+h,s*=a/c,h*=a/c),e.moveTo(r+s,i),e.lineTo(r+n-l,i),l!==0&&e.arc(r+n-l,i+l,l,-Math.PI/2,0),e.lineTo(r+n,i+a-u),u!==0&&e.arc(r+n-u,i+a-u,u,0,Math.PI/2),e.lineTo(r+h,i+a),h!==0&&e.arc(r+h,i+a-h,h,Math.PI/2,Math.PI),e.lineTo(r,i+s),s!==0&&e.arc(r+s,i+s,s,Math.PI,Math.PI*1.5)}var rd=Math.round;function PW(e,t,r){if(t){var i=t.x1,n=t.x2,a=t.y1,o=t.y2;e.x1=i,e.x2=n,e.y1=a,e.y2=o;var s=r&&r.lineWidth;return s&&(rd(i*2)===rd(n*2)&&(e.x1=e.x2=Qu(i,s,!0)),rd(a*2)===rd(o*2)&&(e.y1=e.y2=Qu(a,s,!0))),e}}function LW(e,t,r){if(t){var i=t.x,n=t.y,a=t.width,o=t.height;e.x=i,e.y=n,e.width=a,e.height=o;var s=r&&r.lineWidth;return s&&(e.x=Qu(i,s,!0),e.y=Qu(n,s,!0),e.width=Math.max(Qu(i+a,s,!1)-e.x,a===0?0:1),e.height=Math.max(Qu(n+o,s,!1)-e.y,o===0?0:1)),e}}function Qu(e,t,r){if(!t)return e;var i=rd(e*2);return(i+rd(t))%2===0?i/2:(i+(r?1:-1))/2}var Y_e=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),Z_e={},EW=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Y_e},t.prototype.buildPath=function(r,i){var n,a,o,s;if(this.subPixelOptimize){var l=LW(Z_e,i,this.style);n=l.x,a=l.y,o=l.width,s=l.height,l.r=i.r,i=l}else n=i.x,a=i.y,o=i.width,s=i.height;i.r?X_e(r,i):r.rect(n,a,o,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(qe);EW.prototype.type="rect";const rt=EW;var uN={fill:"#000"},hN=2,K_e={style:De({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},jx.style)},IW=function(e){Y(t,e);function t(r){var i=e.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=uN,i.attr(r),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var i=this._children[r];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var i=this.innerTransformable;return i?i.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,exe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new Ge(0,0,0,0),i=this._children,n=[],a=null,o=0;o<i.length;o++){var s=i[o],l=s.getBoundingRect(),u=s.getLocalTransform(n);u?(r.copy(l),r.applyTransform(u),a=a||r.clone(),a.union(r)):(a=a||l.clone(),a.union(l))}this._rect=a||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||uN},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,i){if(!i)return r;var n=i.rich,a=r.rich||n&&{};return ae(r,i),n&&a?(this._mergeRich(a,n),r.rich=a):a&&(r.rich=a),r},t.prototype._mergeRich=function(r,i){for(var n=Ze(i),a=0;a<n.length;a++){var o=n[a];r[o]=r[o]||{},ae(r[o],i[o])}},t.prototype.getAnimationStyleProps=function(){return K_e},t.prototype._getOrCreateChild=function(r){var i=this._children[this._childCursor];return(!i||!(i instanceof r))&&(i=new r),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},t.prototype._updatePlainTexts=function(){var r=this.style,i=r.font||zl,n=r.padding,a=mN(r),o=__e(a,r),s=RS(r),l=!!r.backgroundColor,u=o.outerHeight,h=o.outerWidth,c=o.contentWidth,d=o.lines,f=o.lineHeight,p=this._defaultStyle,v=r.x||0,g=r.y||0,m=r.align||p.align||"left",y=r.verticalAlign||p.verticalAlign||"top",_=v,x=Hc(g,o.contentHeight,y);if(s||n){var w=zp(v,h,m),b=Hc(g,u,y);s&&this._renderBackground(r,r,w,b,h,u)}x+=f/2,n&&(_=gN(v,m,n),y==="top"?x+=n[0]:y==="bottom"&&(x-=n[2]));for(var S=0,M=!1,A=vN("fill"in r?r.fill:(M=!0,p.fill)),T=pN("stroke"in r?r.stroke:!l&&(!p.autoStroke||M)?(S=hN,p.stroke):null),C=r.textShadowBlur>0,D=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),P=o.calculatedLineHeight,E=0;E<d.length;E++){var O=this._getOrCreateChild(eg),z=O.createStyle();O.useStyle(z),z.text=d[E],z.x=_,z.y=x,m&&(z.textAlign=m),z.textBaseline="middle",z.opacity=r.opacity,z.strokeFirst=!0,C&&(z.shadowBlur=r.textShadowBlur||0,z.shadowColor=r.textShadowColor||"transparent",z.shadowOffsetX=r.textShadowOffsetX||0,z.shadowOffsetY=r.textShadowOffsetY||0),z.stroke=T,z.fill=A,T&&(z.lineWidth=r.lineWidth||S,z.lineDash=r.lineDash,z.lineDashOffset=r.lineDashOffset||0),z.font=i,dN(z,r),x+=f,D&&O.setBoundingRect(new Ge(zp(z.x,r.width,z.textAlign),Hc(z.y,P,z.textBaseline),c,P))}},t.prototype._updateRichTexts=function(){var r=this.style,i=mN(r),n=w_e(i,r),a=n.width,o=n.outerWidth,s=n.outerHeight,l=r.padding,u=r.x||0,h=r.y||0,c=this._defaultStyle,d=r.align||c.align,f=r.verticalAlign||c.verticalAlign,p=zp(u,o,d),v=Hc(h,s,f),g=p,m=v;l&&(g+=l[3],m+=l[0]);var y=g+a;RS(r)&&this._renderBackground(r,r,p,v,o,s);for(var _=!!r.backgroundColor,x=0;x<n.lines.length;x++){for(var w=n.lines[x],b=w.tokens,S=b.length,M=w.lineHeight,A=w.width,T=0,C=g,D=y,P=S-1,E=void 0;T<S&&(E=b[T],!E.align||E.align==="left");)this._placeToken(E,r,M,m,C,"left",_),A-=E.width,C+=E.width,T++;for(;P>=0&&(E=b[P],E.align==="right");)this._placeToken(E,r,M,m,D,"right",_),A-=E.width,D-=E.width,P--;for(C+=(a-(C-g)-(y-D)-A)/2;T<=P;)E=b[T],this._placeToken(E,r,M,m,C+E.width/2,"center",_),C+=E.width,T++;m+=M}},t.prototype._placeToken=function(r,i,n,a,o,s,l){var u=i.rich[r.styleName]||{};u.text=r.text;var h=r.verticalAlign,c=a+n/2;h==="top"?c=a+r.height/2:h==="bottom"&&(c=a+n-r.height/2);var d=!r.isLineHolder&&RS(u);d&&this._renderBackground(u,i,s==="right"?o-r.width:s==="center"?o-r.width/2:o,c-r.height/2,r.width,r.height);var f=!!u.backgroundColor,p=r.textPadding;p&&(o=gN(o,s,p),c-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(eg),g=v.createStyle();v.useStyle(g);var m=this._defaultStyle,y=!1,_=0,x=vN("fill"in u?u.fill:"fill"in i?i.fill:(y=!0,m.fill)),w=pN("stroke"in u?u.stroke:"stroke"in i?i.stroke:!f&&!l&&(!m.autoStroke||y)?(_=hN,m.stroke):null),b=u.textShadowBlur>0||i.textShadowBlur>0;g.text=r.text,g.x=o,g.y=c,b&&(g.shadowBlur=u.textShadowBlur||i.textShadowBlur||0,g.shadowColor=u.textShadowColor||i.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||i.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||i.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=r.font||zl,g.opacity=ss(u.opacity,i.opacity,1),dN(g,u),w&&(g.lineWidth=ss(u.lineWidth,i.lineWidth,_),g.lineDash=Ve(u.lineDash,i.lineDash),g.lineDashOffset=i.lineDashOffset||0,g.stroke=w),x&&(g.fill=x);var S=r.contentWidth,M=r.contentHeight;v.setBoundingRect(new Ge(zp(g.x,S,g.textAlign),Hc(g.y,M,g.textBaseline),S,M))},t.prototype._renderBackground=function(r,i,n,a,o,s){var l=r.backgroundColor,u=r.borderWidth,h=r.borderColor,c=l&&l.image,d=l&&!c,f=r.borderRadius,p=this,v,g;if(d||r.lineHeight||u&&h){v=this._getOrCreateChild(rt),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=n,m.y=a,m.width=o,m.height=s,m.r=f,v.dirtyShape()}if(d){var y=v.style;y.fill=l||null,y.fillOpacity=Ve(r.fillOpacity,1)}else if(c){g=this._getOrCreateChild($r),g.onload=function(){p.dirtyStyle()};var _=g.style;_.image=l.image,_.x=n,_.y=a,_.width=o,_.height=s}if(u&&h){var y=v.style;y.lineWidth=u,y.stroke=h,y.strokeOpacity=Ve(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var x=(v||g).style;x.shadowBlur=r.shadowBlur||0,x.shadowColor=r.shadowColor||"transparent",x.shadowOffsetX=r.shadowOffsetX||0,x.shadowOffsetY=r.shadowOffsetY||0,x.opacity=ss(r.opacity,i.opacity,1)},t.makeFont=function(r){var i="";return RW(r)&&(i=[r.fontStyle,r.fontWeight,OW(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),i&&va(i)||r.textFont||r.font},t}(Hn),J_e={left:!0,right:1,center:1},Q_e={top:1,bottom:1,middle:1},cN=["fontStyle","fontWeight","fontSize","fontFamily"];function OW(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?OP+"px":e+"px"}function dN(e,t){for(var r=0;r<cN.length;r++){var i=cN[r],n=t[i];n!=null&&(e[i]=n)}}function RW(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function exe(e){return fN(e),I(e.rich,fN),e}function fN(e){if(e){e.font=IW.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||J_e[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||Q_e[r]?r:"top";var i=e.padding;i&&(e.padding=FP(e.padding))}}function pN(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function vN(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function gN(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function mN(e){var t=e.text;return t!=null&&(t+=""),t}function RS(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const ot=IW;var Re=it(),AA=function(e,t,r,i){if(i){var n=Re(i);n.dataIndex=r,n.dataType=t,n.seriesIndex=e,i.type==="group"&&i.traverse(function(a){var o=Re(a);o.seriesIndex=e,o.dataIndex=r,o.dataType=t})}},yN=1,_N={},zW=it(),JP=it(),QP=0,Vg=1,$x=2,Si=["emphasis","blur","select"],tg=["normal","emphasis","blur","select"],hf=10,txe=9,mh="highlight",q0="downplay",pv="select",X0="unselect",vv="toggleSelect";function bc(e){return e!=null&&e!=="none"}var xN=new kg(100);function bN(e){if(ge(e)){var t=xN.get(e);return t||(t=dA(e,-.1),xN.put(e,t)),t}else if(kx(e)){var r=ae({},e);return r.colorStops=ce(e.colorStops,function(i){return{offset:i.offset,color:dA(i.color,-.1)}}),r}return e}function qx(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function NW(e){qx(e,"emphasis",$x)}function kW(e){e.hoverState===$x&&qx(e,"normal",QP)}function eL(e){qx(e,"blur",Vg)}function BW(e){e.hoverState===Vg&&qx(e,"normal",QP)}function rxe(e){e.selected=!0}function ixe(e){e.selected=!1}function wN(e,t,r){t(e,r)}function Cs(e,t,r){wN(e,t,r),e.isGroup&&e.traverse(function(i){wN(i,t,r)})}function f_(e,t){switch(t){case"emphasis":e.hoverState=$x;break;case"normal":e.hoverState=QP;break;case"blur":e.hoverState=Vg;break;case"select":e.selected=!0}}function nxe(e,t,r,i){for(var n=e.style,a={},o=0;o<t.length;o++){var s=t[o],l=n[s];a[s]=l??(i&&i[s])}for(var o=0;o<e.animators.length;o++){var u=e.animators[o];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(a,t)}return a}function axe(e,t,r,i){var n=r&&We(r,"select")>=0,a=!1;if(e instanceof qe){var o=zW(e),s=n&&o.selectFill||o.normalFill,l=n&&o.selectStroke||o.normalStroke;if(bc(s)||bc(l)){i=i||{};var u=i.style||{};u.fill==="inherit"?(a=!0,i=ae({},i),u=ae({},u),u.fill=s):!bc(u.fill)&&bc(s)?(a=!0,i=ae({},i),u=ae({},u),u.fill=bN(s)):!bc(u.stroke)&&bc(l)&&(a||(i=ae({},i),u=ae({},u)),u.stroke=bN(l)),i.style=u}}if(i&&i.z2==null){a||(i=ae({},i));var h=e.z2EmphasisLift;i.z2=e.z2+(h??hf)}return i}function oxe(e,t,r){if(r&&r.z2==null){r=ae({},r);var i=e.z2SelectLift;r.z2=e.z2+(i??txe)}return r}function sxe(e,t,r){var i=We(e.currentStates,t)>=0,n=e.style.opacity,a=i?null:nxe(e,["opacity"],t,{opacity:1});r=r||{};var o=r.style||{};return o.opacity==null&&(r=ae({},r),o=ae({opacity:i?n:a.opacity*.1},o),r.style=o),r}function zS(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return axe(this,e,t,r);if(e==="blur")return sxe(this,e,r);if(e==="select")return oxe(this,e,r)}return r}function Oh(e){e.stateProxy=zS;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=zS),r&&(r.stateProxy=zS)}function SN(e,t){!GW(e,t)&&!e.__highByOuter&&Cs(e,NW)}function MN(e,t){!GW(e,t)&&!e.__highByOuter&&Cs(e,kW)}function xs(e,t){e.__highByOuter|=1<<(t||0),Cs(e,NW)}function bs(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Cs(e,kW)}function FW(e){Cs(e,eL)}function tL(e){Cs(e,BW)}function VW(e){Cs(e,rxe)}function UW(e){Cs(e,ixe)}function GW(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function HW(e){var t=e.getModel(),r=[],i=[];t.eachComponent(function(n,a){var o=JP(a),s=n==="series",l=s?e.getViewOfSeriesModel(a):e.getViewOfComponentModel(a);!s&&i.push(l),o.isBlured&&(l.group.traverse(function(u){BW(u)}),s&&r.push(a)),o.isBlured=!1}),I(i,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(r,!1,t)})}function CA(e,t,r,i){var n=i.getModel();r=r||"coordinateSystem";function a(u,h){for(var c=0;c<h.length;c++){var d=u.getItemGraphicEl(h[c]);d&&tL(d)}}if(e!=null&&!(!t||t==="none")){var o=n.getSeriesByIndex(e),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];n.eachSeries(function(u){var h=o===u,c=u.coordinateSystem;c&&c.master&&(c=c.master);var d=c&&s?c===s:h;if(!(r==="series"&&!h||r==="coordinateSystem"&&!d||t==="series"&&h)){var f=i.getViewOfSeriesModel(u);if(f.group.traverse(function(g){eL(g)}),ai(t))a(u.getData(),t);else if(Pe(t))for(var p=Ze(t),v=0;v<p.length;v++)a(u.getData(p[v]),t[p[v]]);l.push(u),JP(u).isBlured=!0}}),n.eachComponent(function(u,h){if(u!=="series"){var c=i.getViewOfComponentModel(h);c&&c.toggleBlurSeries&&c.toggleBlurSeries(l,!0,n)}})}}function DA(e,t,r){if(!(e==null||t==null)){var i=r.getModel().getComponent(e,t);if(i){JP(i).isBlured=!0;var n=r.getViewOfComponentModel(i);!n||!n.focusBlurEnabled||n.group.traverse(function(a){eL(a)})}}}function lxe(e,t,r){var i=e.seriesIndex,n=e.getData(t.dataType);if(n){var a=Eh(n,t);a=(ue(a)?a[0]:a)||0;var o=n.getItemGraphicEl(a);if(!o)for(var s=n.count(),l=0;!o&&l<s;)o=n.getItemGraphicEl(l++);if(o){var u=Re(o);CA(i,u.focus,u.blurScope,r)}else{var h=e.get(["emphasis","focus"]),c=e.get(["emphasis","blurScope"]);h!=null&&CA(i,h,c,r)}}}function rL(e,t,r,i){var n={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return n;var a=i.getModel().getComponent(e,t);if(!a)return n;var o=i.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return n;for(var s=o.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(Re(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function uxe(e,t,r){var i=Re(e),n=rL(i.componentMainType,i.componentIndex,i.componentHighDownName,r),a=n.dispatchers,o=n.focusSelf;a?(o&&DA(i.componentMainType,i.componentIndex,r),I(a,function(s){return SN(s,t)})):(CA(i.seriesIndex,i.focus,i.blurScope,r),i.focus==="self"&&DA(i.componentMainType,i.componentIndex,r),SN(e,t))}function hxe(e,t,r){HW(r);var i=Re(e),n=rL(i.componentMainType,i.componentIndex,i.componentHighDownName,r).dispatchers;n?I(n,function(a){return MN(a,t)}):MN(e,t)}function cxe(e,t,r){if(LA(t)){var i=t.dataType,n=e.getData(i),a=Eh(n,t);ue(a)||(a=[a]),e[t.type===vv?"toggleSelect":t.type===pv?"select":"unselect"](a,i)}}function TN(e){var t=e.getAllData();I(t,function(r){var i=r.data,n=r.type;i.eachItemGraphicEl(function(a,o){e.isSelected(o,n)?VW(a):UW(a)})})}function dxe(e){var t=[];return e.eachSeries(function(r){var i=r.getAllData();I(i,function(n){n.data;var a=n.type,o=r.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:r.seriesIndex};a!=null&&(s.dataType=a),t.push(s)}})}),t}function yh(e,t,r){eh(e,!0),Cs(e,Oh),PA(e,t,r)}function fxe(e){eh(e,!1)}function Zt(e,t,r,i){i?fxe(e):yh(e,t,r)}function PA(e,t,r){var i=Re(e);t!=null?(i.focus=t,i.blurScope=r):i.focus&&(i.focus=null)}var AN=["emphasis","blur","select"],pxe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function jr(e,t,r,i){r=r||"itemStyle";for(var n=0;n<AN.length;n++){var a=AN[n],o=t.getModel([a,r]),s=e.ensureState(a);s.style=i?i(o):o[pxe[r]]()}}function eh(e,t){var r=t===!1,i=e;e.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!r)}function rg(e){return!!(e&&e.__highDownDispatcher)}function vxe(e,t,r){var i=Re(e);i.componentMainType=t.mainType,i.componentIndex=t.componentIndex,i.componentHighDownName=r}function gxe(e){var t=_N[e];return t==null&&yN<=32&&(t=_N[e]=yN++),t}function LA(e){var t=e.type;return t===pv||t===X0||t===vv}function CN(e){var t=e.type;return t===mh||t===q0}function mxe(e){var t=zW(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var wc=Mo.CMD,yxe=[[],[],[]],DN=Math.sqrt,_xe=Math.atan2;function jW(e,t){if(t){var r=e.data,i=e.len(),n,a,o,s,l,u,h=wc.M,c=wc.C,d=wc.L,f=wc.R,p=wc.A,v=wc.Q;for(o=0,s=0;o<i;){switch(n=r[o++],s=o,a=0,n){case h:a=1;break;case d:a=1;break;case c:a=3;break;case v:a=2;break;case p:var g=t[4],m=t[5],y=DN(t[0]*t[0]+t[1]*t[1]),_=DN(t[2]*t[2]+t[3]*t[3]),x=_xe(-t[1]/_,t[0]/y);r[o]*=y,r[o++]+=g,r[o]*=_,r[o++]+=m,r[o++]*=y,r[o++]*=_,r[o++]+=x,r[o++]+=x,o+=2,s=o;break;case f:u[0]=r[o++],u[1]=r[o++],Gr(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[o++],u[1]+=r[o++],Gr(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<a;l++){var w=yxe[l];w[0]=r[o++],w[1]=r[o++],Gr(w,w,t),r[s++]=w[0],r[s++]=w[1]}}e.increaseVersion()}}var NS=Math.sqrt,Cy=Math.sin,Dy=Math.cos,ip=Math.PI;function PN(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function EA(e,t){return(e[0]*t[0]+e[1]*t[1])/(PN(e)*PN(t))}function LN(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(EA(e,t))}function EN(e,t,r,i,n,a,o,s,l,u,h){var c=l*(ip/180),d=Dy(c)*(e-r)/2+Cy(c)*(t-i)/2,f=-1*Cy(c)*(e-r)/2+Dy(c)*(t-i)/2,p=d*d/(o*o)+f*f/(s*s);p>1&&(o*=NS(p),s*=NS(p));var v=(n===a?-1:1)*NS((o*o*(s*s)-o*o*(f*f)-s*s*(d*d))/(o*o*(f*f)+s*s*(d*d)))||0,g=v*o*f/s,m=v*-s*d/o,y=(e+r)/2+Dy(c)*g-Cy(c)*m,_=(t+i)/2+Cy(c)*g+Dy(c)*m,x=LN([1,0],[(d-g)/o,(f-m)/s]),w=[(d-g)/o,(f-m)/s],b=[(-1*d-g)/o,(-1*f-m)/s],S=LN(w,b);if(EA(w,b)<=-1&&(S=ip),EA(w,b)>=1&&(S=0),S<0){var M=Math.round(S/ip*1e6)/1e6;S=ip*2+M%2*ip}h.addData(u,y,_,o,s,x,S,c,a)}var xxe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,bxe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function wxe(e){var t=new Mo;if(!e)return t;var r=0,i=0,n=r,a=i,o,s=Mo.CMD,l=e.match(xxe);if(!l)return t;for(var u=0;u<l.length;u++){for(var h=l[u],c=h.charAt(0),d=void 0,f=h.match(bxe)||[],p=f.length,v=0;v<p;v++)f[v]=parseFloat(f[v]);for(var g=0;g<p;){var m=void 0,y=void 0,_=void 0,x=void 0,w=void 0,b=void 0,S=void 0,M=r,A=i,T=void 0,C=void 0;switch(c){case"l":r+=f[g++],i+=f[g++],d=s.L,t.addData(d,r,i);break;case"L":r=f[g++],i=f[g++],d=s.L,t.addData(d,r,i);break;case"m":r+=f[g++],i+=f[g++],d=s.M,t.addData(d,r,i),n=r,a=i,c="l";break;case"M":r=f[g++],i=f[g++],d=s.M,t.addData(d,r,i),n=r,a=i,c="L";break;case"h":r+=f[g++],d=s.L,t.addData(d,r,i);break;case"H":r=f[g++],d=s.L,t.addData(d,r,i);break;case"v":i+=f[g++],d=s.L,t.addData(d,r,i);break;case"V":i=f[g++],d=s.L,t.addData(d,r,i);break;case"C":d=s.C,t.addData(d,f[g++],f[g++],f[g++],f[g++],f[g++],f[g++]),r=f[g-2],i=f[g-1];break;case"c":d=s.C,t.addData(d,f[g++]+r,f[g++]+i,f[g++]+r,f[g++]+i,f[g++]+r,f[g++]+i),r+=f[g-2],i+=f[g-1];break;case"S":m=r,y=i,T=t.len(),C=t.data,o===s.C&&(m+=r-C[T-4],y+=i-C[T-3]),d=s.C,M=f[g++],A=f[g++],r=f[g++],i=f[g++],t.addData(d,m,y,M,A,r,i);break;case"s":m=r,y=i,T=t.len(),C=t.data,o===s.C&&(m+=r-C[T-4],y+=i-C[T-3]),d=s.C,M=r+f[g++],A=i+f[g++],r+=f[g++],i+=f[g++],t.addData(d,m,y,M,A,r,i);break;case"Q":M=f[g++],A=f[g++],r=f[g++],i=f[g++],d=s.Q,t.addData(d,M,A,r,i);break;case"q":M=f[g++]+r,A=f[g++]+i,r+=f[g++],i+=f[g++],d=s.Q,t.addData(d,M,A,r,i);break;case"T":m=r,y=i,T=t.len(),C=t.data,o===s.Q&&(m+=r-C[T-4],y+=i-C[T-3]),r=f[g++],i=f[g++],d=s.Q,t.addData(d,m,y,r,i);break;case"t":m=r,y=i,T=t.len(),C=t.data,o===s.Q&&(m+=r-C[T-4],y+=i-C[T-3]),r+=f[g++],i+=f[g++],d=s.Q,t.addData(d,m,y,r,i);break;case"A":_=f[g++],x=f[g++],w=f[g++],b=f[g++],S=f[g++],M=r,A=i,r=f[g++],i=f[g++],d=s.A,EN(M,A,r,i,b,S,_,x,w,d,t);break;case"a":_=f[g++],x=f[g++],w=f[g++],b=f[g++],S=f[g++],M=r,A=i,r+=f[g++],i+=f[g++],d=s.A,EN(M,A,r,i,b,S,_,x,w,d,t);break}}(c==="z"||c==="Z")&&(d=s.Z,t.addData(d),r=n,i=a),o=d}return t.toStatic(),t}var WW=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(qe);function $W(e){return e.setData!=null}function qW(e,t){var r=wxe(e),i=ae({},t);return i.buildPath=function(n){if($W(n)){n.setData(r.data);var a=n.getContext();a&&n.rebuildPath(a,1)}else{var a=n;r.rebuildPath(a,1)}},i.applyTransform=function(n){jW(r,n),this.dirtyShape()},i}function XW(e,t){return new WW(qW(e,t))}function Sxe(e,t){var r=qW(e,t),i=function(n){Y(a,n);function a(o){var s=n.call(this,o)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return a}(WW);return i}function Mxe(e,t){for(var r=[],i=e.length,n=0;n<i;n++){var a=e[n];r.push(a.getUpdatedPathProxy(!0))}var o=new qe(t);return o.createPathProxy(),o.buildPath=function(s){if($W(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function iL(e,t){t=t||{};var r=new qe;return e.shape&&r.setShape(e.shape),r.setStyle(e.style),t.bakeTransform?jW(r.path,e.getComputedTransform()):t.toLocal?r.setLocalTransform(e.getComputedTransform()):r.copyTransform(e),r.buildPath=e.buildPath,r.applyTransform=r.applyTransform,r.z=e.z,r.z2=e.z2,r.zlevel=e.zlevel,r}var Txe=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),YW=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Txe},t.prototype.buildPath=function(r,i){r.moveTo(i.cx+i.r,i.cy),r.arc(i.cx,i.cy,i.r,0,Math.PI*2)},t}(qe);YW.prototype.type="circle";const To=YW;var Axe=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),ZW=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Axe},t.prototype.buildPath=function(r,i){var n=.5522848,a=i.cx,o=i.cy,s=i.rx,l=i.ry,u=s*n,h=l*n;r.moveTo(a-s,o),r.bezierCurveTo(a-s,o-h,a-u,o-l,a,o-l),r.bezierCurveTo(a+u,o-l,a+s,o-h,a+s,o),r.bezierCurveTo(a+s,o+h,a+u,o+l,a,o+l),r.bezierCurveTo(a-u,o+l,a-s,o+h,a-s,o),r.closePath()},t}(qe);ZW.prototype.type="ellipse";const nL=ZW;var KW=Math.PI,kS=KW*2,yu=Math.sin,Sc=Math.cos,Cxe=Math.acos,Yr=Math.atan2,IN=Math.abs,gv=Math.sqrt,Np=Math.max,Wa=Math.min,ia=1e-4;function Dxe(e,t,r,i,n,a,o,s){var l=r-e,u=i-t,h=o-n,c=s-a,d=c*l-h*u;if(!(d*d<ia))return d=(h*(t-a)-c*(e-n))/d,[e+d*l,t+d*u]}function Py(e,t,r,i,n,a,o){var s=e-r,l=t-i,u=(o?a:-a)/gv(s*s+l*l),h=u*l,c=-u*s,d=e+h,f=t+c,p=r+h,v=i+c,g=(d+p)/2,m=(f+v)/2,y=p-d,_=v-f,x=y*y+_*_,w=n-a,b=d*v-p*f,S=(_<0?-1:1)*gv(Np(0,w*w*x-b*b)),M=(b*_-y*S)/x,A=(-b*y-_*S)/x,T=(b*_+y*S)/x,C=(-b*y+_*S)/x,D=M-g,P=A-m,E=T-g,O=C-m;return D*D+P*P>E*E+O*O&&(M=T,A=C),{cx:M,cy:A,x0:-h,y0:-c,x1:M*(n/w-1),y1:A*(n/w-1)}}function Pxe(e){var t;if(ue(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function Lxe(e,t){var r,i=Np(t.r,0),n=Np(t.r0||0,0),a=i>0,o=n>0;if(!(!a&&!o)){if(a||(i=n,n=0),n>i){var s=i;i=n,n=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var h=t.cx,c=t.cy,d=!!t.clockwise,f=IN(u-l),p=f>kS&&f%kS;if(p>ia&&(f=p),!(i>ia))e.moveTo(h,c);else if(f>kS-ia)e.moveTo(h+i*Sc(l),c+i*yu(l)),e.arc(h,c,i,l,u,!d),n>ia&&(e.moveTo(h+n*Sc(u),c+n*yu(u)),e.arc(h,c,n,u,l,d));else{var v=void 0,g=void 0,m=void 0,y=void 0,_=void 0,x=void 0,w=void 0,b=void 0,S=void 0,M=void 0,A=void 0,T=void 0,C=void 0,D=void 0,P=void 0,E=void 0,O=i*Sc(l),z=i*yu(l),B=n*Sc(u),N=n*yu(u),F=f>ia;if(F){var G=t.cornerRadius;G&&(r=Pxe(G),v=r[0],g=r[1],m=r[2],y=r[3]);var H=IN(i-n)/2;if(_=Wa(H,m),x=Wa(H,y),w=Wa(H,v),b=Wa(H,g),A=S=Np(_,x),T=M=Np(w,b),(S>ia||M>ia)&&(C=i*Sc(u),D=i*yu(u),P=n*Sc(l),E=n*yu(l),f<KW)){var $=Dxe(O,z,P,E,C,D,B,N);if($){var Z=O-$[0],X=z-$[1],ne=C-$[0],te=D-$[1],U=1/yu(Cxe((Z*ne+X*te)/(gv(Z*Z+X*X)*gv(ne*ne+te*te)))/2),W=gv($[0]*$[0]+$[1]*$[1]);A=Wa(S,(i-W)/(U+1)),T=Wa(M,(n-W)/(U-1))}}}if(!F)e.moveTo(h+O,c+z);else if(A>ia){var j=Wa(m,A),K=Wa(y,A),ee=Py(P,E,O,z,i,j,d),R=Py(C,D,B,N,i,K,d);e.moveTo(h+ee.cx+ee.x0,c+ee.cy+ee.y0),A<S&&j===K?e.arc(h+ee.cx,c+ee.cy,A,Yr(ee.y0,ee.x0),Yr(R.y0,R.x0),!d):(j>0&&e.arc(h+ee.cx,c+ee.cy,j,Yr(ee.y0,ee.x0),Yr(ee.y1,ee.x1),!d),e.arc(h,c,i,Yr(ee.cy+ee.y1,ee.cx+ee.x1),Yr(R.cy+R.y1,R.cx+R.x1),!d),K>0&&e.arc(h+R.cx,c+R.cy,K,Yr(R.y1,R.x1),Yr(R.y0,R.x0),!d))}else e.moveTo(h+O,c+z),e.arc(h,c,i,l,u,!d);if(!(n>ia)||!F)e.lineTo(h+B,c+N);else if(T>ia){var j=Wa(v,T),K=Wa(g,T),ee=Py(B,N,C,D,n,-K,d),R=Py(O,z,P,E,n,-j,d);e.lineTo(h+ee.cx+ee.x0,c+ee.cy+ee.y0),T<M&&j===K?e.arc(h+ee.cx,c+ee.cy,T,Yr(ee.y0,ee.x0),Yr(R.y0,R.x0),!d):(K>0&&e.arc(h+ee.cx,c+ee.cy,K,Yr(ee.y0,ee.x0),Yr(ee.y1,ee.x1),!d),e.arc(h,c,n,Yr(ee.cy+ee.y1,ee.cx+ee.x1),Yr(R.cy+R.y1,R.cx+R.x1),d),j>0&&e.arc(h+R.cx,c+R.cy,j,Yr(R.y1,R.x1),Yr(R.y0,R.x0),!d))}else e.lineTo(h+B,c+N),e.arc(h,c,n,u,l,d)}e.closePath()}}}var Exe=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),JW=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Exe},t.prototype.buildPath=function(r,i){Lxe(r,i)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(qe);JW.prototype.type="sector";const $i=JW;var Ixe=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),QW=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Ixe},t.prototype.buildPath=function(r,i){var n=i.cx,a=i.cy,o=Math.PI*2;r.moveTo(n+i.r,a),r.arc(n,a,i.r,0,o,!1),r.moveTo(n+i.r0,a),r.arc(n,a,i.r0,0,o,!0)},t}(qe);QW.prototype.type="ring";const Xx=QW;function Oxe(e,t,r,i){var n=[],a=[],o=[],s=[],l,u,h,c;if(i){h=[1/0,1/0],c=[-1/0,-1/0];for(var d=0,f=e.length;d<f;d++)vl(h,h,e[d]),gl(c,c,e[d]);vl(h,h,i[0]),gl(c,c,i[1])}for(var d=0,f=e.length;d<f;d++){var p=e[d];if(r)l=e[d?d-1:f-1],u=e[(d+1)%f];else if(d===0||d===f-1){n.push(ls(e[d]));continue}else l=e[d-1],u=e[d+1];Ju(a,u,l),F0(a,a,t);var v=iA(p,l),g=iA(p,u),m=v+g;m!==0&&(v/=m,g/=m),F0(o,a,-v),F0(s,a,g);var y=Mz([],p,o),_=Mz([],p,s);i&&(gl(y,y,h),vl(y,y,c),gl(_,_,h),vl(_,_,c)),n.push(y),n.push(_)}return r&&n.push(n.shift()),n}function e8(e,t,r){var i=t.smooth,n=t.points;if(n&&n.length>=2){if(i){var a=Oxe(n,i,r,t.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var o=n.length,s=0;s<(r?o:o-1);s++){var l=a[s*2],u=a[s*2+1],h=n[(s+1)%o];e.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{e.moveTo(n[0][0],n[0][1]);for(var s=1,c=n.length;s<c;s++)e.lineTo(n[s][0],n[s][1])}r&&e.closePath()}}var Rxe=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),t8=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Rxe},t.prototype.buildPath=function(r,i){e8(r,i,!0)},t}(qe);t8.prototype.type="polygon";const qi=t8;var zxe=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),r8=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zxe},t.prototype.buildPath=function(r,i){e8(r,i,!1)},t}(qe);r8.prototype.type="polyline";const Yi=r8;var Nxe={},kxe=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),i8=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new kxe},t.prototype.buildPath=function(r,i){var n,a,o,s;if(this.subPixelOptimize){var l=PW(Nxe,i,this.style);n=l.x1,a=l.y1,o=l.x2,s=l.y2}else n=i.x1,a=i.y1,o=i.x2,s=i.y2;var u=i.percent;u!==0&&(r.moveTo(n,a),u<1&&(o=n*(1-u)+o*u,s=a*(1-u)+s*u),r.lineTo(o,s))},t.prototype.pointAt=function(r){var i=this.shape;return[i.x1*(1-r)+i.x2*r,i.y1*(1-r)+i.y2*r]},t}(qe);i8.prototype.type="line";const Nr=i8;var Ci=[],Bxe=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function ON(e,t,r){var i=e.cpx2,n=e.cpy2;return i!=null||n!=null?[(r?Nz:Tr)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?Nz:Tr)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?uA:Or)(e.x1,e.cpx1,e.x2,t),(r?uA:Or)(e.y1,e.cpy1,e.y2,t)]}var n8=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Bxe},t.prototype.buildPath=function(r,i){var n=i.x1,a=i.y1,o=i.x2,s=i.y2,l=i.cpx1,u=i.cpy1,h=i.cpx2,c=i.cpy2,d=i.percent;d!==0&&(r.moveTo(n,a),h==null||c==null?(d<1&&(Zv(n,l,o,d,Ci),l=Ci[1],o=Ci[2],Zv(a,u,s,d,Ci),u=Ci[1],s=Ci[2]),r.quadraticCurveTo(l,u,o,s)):(d<1&&(kl(n,l,h,o,d,Ci),l=Ci[1],h=Ci[2],o=Ci[3],kl(a,u,c,s,d,Ci),u=Ci[1],c=Ci[2],s=Ci[3]),r.bezierCurveTo(l,u,h,c,o,s)))},t.prototype.pointAt=function(r){return ON(this.shape,r,!1)},t.prototype.tangentAt=function(r){var i=ON(this.shape,r,!0);return sf(i,i)},t}(qe);n8.prototype.type="bezier-curve";const Yx=n8;var Fxe=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),a8=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Fxe},t.prototype.buildPath=function(r,i){var n=i.cx,a=i.cy,o=Math.max(i.r,0),s=i.startAngle,l=i.endAngle,u=i.clockwise,h=Math.cos(s),c=Math.sin(s);r.moveTo(h*o+n,c*o+a),r.arc(n,a,o,s,l,!u)},t}(qe);a8.prototype.type="arc";const aL=a8;var Vxe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,i=this.shapeChanged(),n=0;n<r.length;n++)i=i||r[n].shapeChanged();i&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],i=this.getGlobalScale(),n=0;n<r.length;n++)r[n].path||r[n].createPathProxy(),r[n].path.setScale(i[0],i[1],r[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,i){for(var n=i.paths||[],a=0;a<n.length;a++)n[a].buildPath(r,n[a].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],i=0;i<r.length;i++)r[i].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),qe.prototype.getBoundingRect.call(this)},t}(qe);const oL=Vxe;var Uxe=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const o8=Uxe;var Gxe=function(e){Y(t,e);function t(r,i,n,a,o,s){var l=e.call(this,o)||this;return l.x=r??0,l.y=i??0,l.x2=n??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return t}(o8);const Rh=Gxe;var Hxe=function(e){Y(t,e);function t(r,i,n,a,o){var s=e.call(this,a)||this;return s.x=r??.5,s.y=i??.5,s.r=n??.5,s.type="radial",s.global=o||!1,s}return t}(o8);const s8=Hxe;var _u=[0,0],xu=[0,0],Ly=new Fe,Ey=new Fe,jxe=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new Fe;for(var i=0;i<2;i++)this._axes[i]=new Fe;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var i=this._corners,n=this._axes,a=t.x,o=t.y,s=a+t.width,l=o+t.height;if(i[0].set(a,o),i[1].set(s,o),i[2].set(s,l),i[3].set(a,l),r)for(var u=0;u<4;u++)i[u].transform(r);Fe.sub(n[0],i[1],i[0]),Fe.sub(n[1],i[3],i[0]),n[0].normalize(),n[1].normalize();for(var u=0;u<2;u++)this._origin[u]=n[u].dot(i[0])},e.prototype.intersect=function(t,r){var i=!0,n=!r;return Ly.set(1/0,1/0),Ey.set(0,0),!this._intersectCheckOneSide(this,t,Ly,Ey,n,1)&&(i=!1,n)||!this._intersectCheckOneSide(t,this,Ly,Ey,n,-1)&&(i=!1,n)||n||Fe.copy(r,i?Ly:Ey),i},e.prototype._intersectCheckOneSide=function(t,r,i,n,a,o){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,_u),this._getProjMinMaxOnAxis(l,r._corners,xu),_u[1]<xu[0]||_u[0]>xu[1]){if(s=!1,a)return s;var h=Math.abs(xu[0]-_u[1]),c=Math.abs(_u[0]-xu[1]);Math.min(h,c)>n.len()&&(h<c?Fe.scale(n,u,-h*o):Fe.scale(n,u,c*o))}else if(i){var h=Math.abs(xu[0]-_u[1]),c=Math.abs(_u[0]-xu[1]);Math.min(h,c)<i.len()&&(h<c?Fe.scale(i,u,h*o):Fe.scale(i,u,-c*o))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,i){for(var n=this._axes[t],a=this._origin,o=r[0].dot(n)+a[t],s=o,l=o,u=1;u<r.length;u++){var h=r[u].dot(n)+a[t];s=Math.min(h,s),l=Math.max(h,l)}i[0]=s,i[1]=l},e}();const p_=jxe;var Wxe=[],$xe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,i){r.call(i,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,i){i?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,i){i=i||!1;for(var n=0;n<r.length;n++)this.addDisplayable(r[n],i)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var i=this._cursor;i<this._displayables.length;i++)r&&r(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)r&&r(this._temporaryDisplayables[i])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var i=this._displayables[r];i.parent=this,i.update(),i.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var i=this._temporaryDisplayables[r];i.parent=this,i.update(),i.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new Ge(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var n=this._displayables[i],a=n.getBoundingRect().clone();n.needLocalTransform()&&a.applyTransform(n.getLocalTransform(Wxe)),r.union(a)}this._rect=r}return this._rect},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(a.contain(n[0],n[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(r,i))return!0}return!1},t}(Hn);const qxe=$xe;var l8=it();function cf(e,t,r,i,n){var a;if(t&&t.ecModel){var o=t.ecModel.getUpdatePayload();a=o&&o.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,h=void 0,c=void 0;i?(u=Ve(i.duration,200),h=Ve(i.easing,"cubicOut"),c=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),h=t.getShallow(l?"animationEasingUpdate":"animationEasing"),c=t.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(h=a.easing),a.delay!=null&&(c=a.delay)),Ae(c)&&(c=c(r,n)),Ae(u)&&(u=u(r));var d={duration:u||0,delay:c,easing:h};return d}else return null}function sL(e,t,r,i,n,a,o){var s=!1,l;Ae(n)?(o=a,a=n,n=null):Pe(n)&&(a=n.cb,o=n.during,s=n.isFrom,l=n.removeOpt,n=n.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var h=cf(e,i,n,u?l||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(t,n):null);if(h&&h.duration>0){var c=h.duration,d=h.delay,f=h.easing,p={duration:c,delay:d||0,easing:f,done:a,force:!!a||!!o,setToFinal:!u,scope:e,during:o};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),o&&o(1),a&&a()}function ut(e,t,r,i,n,a){sL("update",e,t,r,i,n,a)}function Ut(e,t,r,i,n,a){sL("enter",e,t,r,i,n,a)}function md(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function Bl(e,t,r,i,n,a){md(e)||sL("leave",e,t,r,i,n,a)}function RN(e,t,r,i){e.removeTextContent(),e.removeTextGuideLine(),Bl(e,{style:{opacity:0}},t,r,i)}function ig(e,t,r){function i(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(n){n.isGroup||RN(n,t,r,i)}):RN(e,t,r,i)}function Ca(e){l8(e).oldStyle=e.style}function Xxe(e){return l8(e).oldStyle}var v_=Math.max,g_=Math.min,IA={};function Yxe(e){return qe.extend(e)}var Zxe=Sxe;function Kxe(e,t){return Zxe(e,t)}function La(e,t){IA[e]=t}function lL(e){if(IA.hasOwnProperty(e))return IA[e]}function Zx(e,t,r,i){var n=XW(e,t);return r&&(i==="center"&&(r=h8(r,n.getBoundingRect())),c8(n,r)),n}function u8(e,t,r){var i=new $r({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(n){if(r==="center"){var a={width:n.width,height:n.height};i.setStyle(h8(t,a))}}});return i}function h8(e,t){var r=t.width/t.height,i=e.height*r,n;i<=e.width?n=e.height:(i=e.width,n=i/r);var a=e.x+e.width/2,o=e.y+e.height/2;return{x:a-i/2,y:o-n/2,width:i,height:n}}var In=Mxe;function c8(e,t){if(e.applyTransform){var r=e.getBoundingRect(),i=r.calculateTransform(t);e.applyTransform(i)}}function zd(e,t){return PW(e,e,{lineWidth:t}),e}function Jxe(e){return LW(e.shape,e.shape,e.style),e}var Y0=Qu;function _h(e,t){for(var r=Fx([]);e&&e!==t;)us(r,e.getLocalTransform(),r),e=e.parent;return r}function Sa(e,t,r){return t&&!ai(t)&&(t=es.getLocalTransform(t)),r&&(t=lf([],t)),Gr([],e,t)}function Kx(e,t,r){var i=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),n=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[e==="left"?-i:e==="right"?i:0,e==="top"?-n:e==="bottom"?n:0];return a=Sa(a,t,r),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function zN(e){return!e.isGroup}function Qxe(e){return e.shape!=null}function Ug(e,t,r){if(!e||!t)return;function i(o){var s={};return o.traverse(function(l){zN(l)&&l.anid&&(s[l.anid]=l)}),s}function n(o){var s={x:o.x,y:o.y,rotation:o.rotation};return Qxe(o)&&(s.shape=ae({},o.shape)),s}var a=i(e);t.traverse(function(o){if(zN(o)&&o.anid){var s=a[o.anid];if(s){var l=n(o);o.attr(n(s)),ut(o,l,r,Re(o).dataIndex)}}})}function d8(e,t){return ce(e,function(r){var i=r[0];i=v_(i,t.x),i=g_(i,t.x+t.width);var n=r[1];return n=v_(n,t.y),n=g_(n,t.y+t.height),[i,n]})}function ebe(e,t){var r=v_(e.x,t.x),i=g_(e.x+e.width,t.x+t.width),n=v_(e.y,t.y),a=g_(e.y+e.height,t.y+t.height);if(i>=r&&a>=n)return{x:r,y:n,width:i-r,height:a-n}}function Gg(e,t,r){var i=ae({rectHover:!0},t),n=i.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(n.image=e.slice(8),De(n,r),new $r(i)):Zx(e.replace("path://",""),i,r,"center")}function kp(e,t,r,i,n){for(var a=0,o=n[n.length-1];a<n.length;a++){var s=n[a];if(f8(e,t,r,i,s[0],s[1],o[0],o[1]))return!0;o=s}}function f8(e,t,r,i,n,a,o,s){var l=r-e,u=i-t,h=o-n,c=s-a,d=BS(h,c,l,u);if(tbe(d))return!1;var f=e-n,p=t-a,v=BS(f,p,l,u)/d;if(v<0||v>1)return!1;var g=BS(f,p,h,c)/d;return!(g<0||g>1)}function BS(e,t,r,i){return e*i-r*t}function tbe(e){return e<=1e-6&&e>=-1e-6}function df(e){var t=e.itemTooltipOption,r=e.componentModel,i=e.itemName,n=ge(t)?{formatter:t}:t,a=r.mainType,o=r.componentIndex,s={componentType:a,name:i,$vars:["name"]};s[a+"Index"]=o;var l=e.formatterParamsExtra;l&&I(Ze(l),function(h){_e(s,h)||(s[h]=l[h],s.$vars.push(h))});var u=Re(e.el);u.componentMainType=a,u.componentIndex=o,u.tooltipConfig={name:i,option:De({content:i,formatterParams:s},n)}}function NN(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function Xl(e,t){if(e)if(ue(e))for(var r=0;r<e.length;r++)NN(e[r],t);else NN(e,t)}La("circle",To);La("ellipse",nL);La("sector",$i);La("ring",Xx);La("polygon",qi);La("polyline",Yi);La("rect",rt);La("line",Nr);La("bezierCurve",Yx);La("arc",aL);const Hg=Object.freeze(Object.defineProperty({__proto__:null,Arc:aL,BezierCurve:Yx,BoundingRect:Ge,Circle:To,CompoundPath:oL,Ellipse:nL,Group:Ie,Image:$r,IncrementalDisplayable:qxe,Line:Nr,LinearGradient:Rh,OrientedBoundingRect:p_,Path:qe,Point:Fe,Polygon:qi,Polyline:Yi,RadialGradient:s8,Rect:rt,Ring:Xx,Sector:$i,Text:ot,applyTransform:Sa,clipPointsByRect:d8,clipRectByRect:ebe,createIcon:Gg,extendPath:Kxe,extendShape:Yxe,getShapeClass:lL,getTransform:_h,groupTransition:Ug,initProps:Ut,isElementRemoved:md,lineLineIntersect:f8,linePolygonIntersect:kp,makeImage:u8,makePath:Zx,mergePath:In,registerShape:La,removeElement:Bl,removeElementWithFadeOut:ig,resizePath:c8,setTooltipConfig:df,subPixelOptimize:Y0,subPixelOptimizeLine:zd,subPixelOptimizeRect:Jxe,transformDirection:Kx,traverseElements:Xl,updateProps:ut},Symbol.toStringTag,{value:"Module"}));var Jx={};function p8(e,t){for(var r=0;r<Si.length;r++){var i=Si[r],n=t[i],a=e.ensureState(i);a.style=a.style||{},a.style.text=n}var o=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(o,!0)}function OA(e,t,r){var i=e.labelFetcher,n=e.labelDataIndex,a=e.labelDimIndex,o=t.normal,s;i&&(s=i.getFormattedLabel(n,"normal",null,a,o&&o.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Ae(e.defaultText)?e.defaultText(n,e,r):e.defaultText);for(var l={normal:s},u=0;u<Si.length;u++){var h=Si[u],c=t[h];l[h]=Ve(i?i.getFormattedLabel(n,h,null,a,c&&c.get("formatter")):null,s)}return l}function Wr(e,t,r,i){r=r||Jx;for(var n=e instanceof ot,a=!1,o=0;o<tg.length;o++){var s=t[tg[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=n?e:e.getTextContent();if(a){n||(l||(l=new ot,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=OA(r,t),h=t.normal,c=!!h.getShallow("show"),d=zt(h,i&&i.normal,r,!1,!n);d.text=u.normal,n||e.setTextConfig(m_(h,r,!1));for(var o=0;o<Si.length;o++){var f=Si[o],s=t[f];if(s){var p=l.ensureState(f),v=!!Ve(s.getShallow("show"),c);if(v!==c&&(p.ignore=!v),p.style=zt(s,i&&i[f],r,!0,!n),p.style.text=u[f],!n){var g=e.ensureState(f);g.textConfig=m_(s,r,!0)}}}l.silent=!!h.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!c,l.useStyle(d),l.dirty(),r.enableTextSetter&&(ff(l).setLabelText=function(m){var y=OA(r,t,m);p8(l,y)})}else l&&(l.ignore=!0);e.dirty()}function Pr(e,t){t=t||"label";for(var r={normal:e.getModel(t)},i=0;i<Si.length;i++){var n=Si[i];r[n]=e.getModel([n,t])}return r}function zt(e,t,r,i,n){var a={};return rbe(a,e,r,i,n),t&&ae(a,t),a}function m_(e,t,r){t=t||{};var i={},n,a=e.getShallow("rotate"),o=Ve(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return n=e.getShallow("position")||(r?null:"inside"),n==="outside"&&(n=t.defaultOutsidePosition||"top"),n!=null&&(i.position=n),s!=null&&(i.offset=s),a!=null&&(a*=Math.PI/180,i.rotation=a),o!=null&&(i.distance=o),i.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",i}function rbe(e,t,r,i,n){r=r||Jx;var a=t.ecModel,o=a&&a.option.textStyle,s=ibe(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var h=t.getModel(["rich",u]);VN(l[u]={},h,o,r,i,n,!1,!0)}}l&&(e.rich=l);var c=t.get("overflow");c&&(e.overflow=c);var d=t.get("minMargin");d!=null&&(e.margin=d),VN(e,t,o,r,i,n,!0,!1)}function ibe(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||Jx).rich;if(r){t=t||{};for(var i=Ze(r),n=0;n<i.length;n++){var a=i[n];t[a]=1}}e=e.parentModel}return t}var kN=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],BN=["align","lineHeight","width","height","tag","verticalAlign"],FN=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function VN(e,t,r,i,n,a,o,s){r=!n&&r||Jx;var l=i&&i.inheritColor,u=t.getShallow("color"),h=t.getShallow("textBorderColor"),c=Ve(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(h==="inherit"||h==="auto")&&(l?h=l:h=null),a||(u=u||r.color,h=h||r.textBorderColor),u!=null&&(e.fill=u),h!=null&&(e.stroke=h);var d=Ve(t.getShallow("textBorderWidth"),r.textBorderWidth);d!=null&&(e.lineWidth=d);var f=Ve(t.getShallow("textBorderType"),r.textBorderType);f!=null&&(e.lineDash=f);var p=Ve(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!n&&c==null&&!s&&(c=i&&i.defaultOpacity),c!=null&&(e.opacity=c),!n&&!a&&e.fill==null&&i.inheritColor&&(e.fill=i.inheritColor);for(var v=0;v<kN.length;v++){var g=kN[v],m=Ve(t.getShallow(g),r[g]);m!=null&&(e[g]=m)}for(var v=0;v<BN.length;v++){var g=BN[v],m=t.getShallow(g);m!=null&&(e[g]=m)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!o||!i.disableBox){for(var v=0;v<FN.length;v++){var g=FN[v],m=t.getShallow(g);m!=null&&(e[g]=m)}var _=t.getShallow("borderType");_!=null&&(e.borderDash=_),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function v8(e,t){var r=t&&t.getModel("textStyle");return va([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var ff=it();function g8(e,t,r,i){if(e){var n=ff(e);n.prevValue=n.value,n.value=r;var a=t.normal;n.valueAnimation=a.get("valueAnimation"),n.valueAnimation&&(n.precision=a.get("precision"),n.defaultInterpolatedText=i,n.statesModels=t)}}function m8(e,t,r,i,n){var a=ff(e);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Ve(a.interpolatedValue,a.prevValue),l=a.value;function u(h){var c=yW(r,a.precision,s,l,h);a.interpolatedValue=h===1?null:c;var d=OA({labelDataIndex:t,labelFetcher:n,defaultText:o?o(c):c+""},a.statesModels,c);p8(e,d)}e.percent=0,(a.prevValue==null?Ut:ut)(e,{percent:1},i,t,null,u)}var nbe=["textStyle","color"],FS=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],VS=new ot,abe=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(nbe):null)},e.prototype.getFont=function(){return v8({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<FS.length;i++)r[FS[i]]=this.getShallow(FS[i]);return VS.useStyle(r),VS.update(),VS.getBoundingRect()},e}();const obe=abe;var y8=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],sbe=Ih(y8),lbe=function(){function e(){}return e.prototype.getLineStyle=function(t){return sbe(this,t)},e}(),_8=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],ube=Ih(_8),hbe=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return ube(this,t,r)},e}(),$h=function(){function e(t,r,i){this.parentModel=r,this.ecModel=i,this.option=t}return e.prototype.init=function(t,r,i){},e.prototype.mergeOption=function(t,r){Ue(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var i=this.option,n=i==null?i:i[t];if(n==null&&!r){var a=this.parentModel;a&&(n=a.getShallow(t))}return n},e.prototype.getModel=function(t,r){var i=t!=null,n=i?this.parsePath(t):null,a=i?this._doGet(n):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new e(a,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(Ee(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!at.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var i=this.option;if(!t)return i;for(var n=0;n<t.length&&!(t[n]&&(i=i&&typeof i=="object"?i[t[n]]:null,i==null));n++);return i==null&&r&&(i=r._doGet(this.resolveParentPath(t),r.parentModel)),i},e}();ZP($h);h_e($h);gr($h,lbe);gr($h,hbe);gr($h,v_e);gr($h,obe);const Nt=$h;var cbe=Math.round(Math.random()*10);function pf(e){return[e||"",cbe++].join("_")}function dbe(e){var t={};e.registerSubTypeDefaulter=function(r,i){var n=ho(r);t[n.main]=i},e.determineSubType=function(r,i){var n=i.type;if(!n){var a=ho(r).main;e.hasSubTypes(r)&&t[a]&&(n=t[a](i))}return n}}function fbe(e,t){e.topologicalTravel=function(a,o,s,l){if(!a.length)return;var u=r(o),h=u.graph,c=u.noEntryList,d={};for(I(a,function(y){d[y]=!0});c.length;){var f=c.pop(),p=h[f],v=!!d[f];v&&(s.call(l,f,p.originalDeps.slice()),delete d[f]),I(p.successor,v?m:g)}I(d,function(){var y="";throw new Error(y)});function g(y){h[y].entryCount--,h[y].entryCount===0&&c.push(y)}function m(y){d[y]=!0,g(y)}};function r(a){var o={},s=[];return I(a,function(l){var u=i(o,l),h=u.originalDeps=t(l),c=n(h,a);u.entryCount=c.length,u.entryCount===0&&s.push(l),I(c,function(d){We(u.predecessor,d)<0&&u.predecessor.push(d);var f=i(o,d);We(f.successor,d)<0&&f.successor.push(l)})}),{graph:o,noEntryList:s}}function i(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function n(a,o){var s=[];return I(a,function(l){We(o,l)>=0&&s.push(l)}),s}}function Yl(e,t){return Ue(Ue({},e,!0),t,!0)}const pbe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},vbe={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var y_="ZH",uL="EN",ng=uL,Z0={},hL={},x8=at.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(y_)>-1?y_:ng}():ng;function b8(e,t){e=e.toUpperCase(),hL[e]=new Nt(t),Z0[e]=t}function gbe(e){if(ge(e)){var t=Z0[e.toUpperCase()]||{};return e===y_||e===uL?Ee(t):Ue(Ee(t),Ee(Z0[ng]),!1)}else return Ue(Ee(e),Ee(Z0[ng]),!1)}function RA(e){return hL[e]}function mbe(){return hL[ng]}b8(uL,pbe);b8(y_,vbe);var cL=1e3,dL=cL*60,mv=dL*60,On=mv*24,UN=On*365,Bp={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Iy="{yyyy}-{MM}-{dd}",GN={year:"{yyyy}",month:"{yyyy}-{MM}",day:Iy,hour:Iy+" "+Bp.hour,minute:Iy+" "+Bp.minute,second:Iy+" "+Bp.second,millisecond:Bp.none},US=["year","month","day","hour","minute","second","millisecond"],w8=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function bu(e,t){return e+="","0000".substr(0,t-e.length)+e}function yd(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function ybe(e){return e===yd(e)}function _be(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Qx(e,t,r,i){var n=So(e),a=n[fL(r)](),o=n[_d(r)]()+1,s=Math.floor((o-1)/3)+1,l=n[eb(r)](),u=n["get"+(r?"UTC":"")+"Day"](),h=n[ag(r)](),c=(h-1)%12+1,d=n[tb(r)](),f=n[rb(r)](),p=n[ib(r)](),v=i instanceof Nt?i:RA(i||x8)||mbe(),g=v.getModel("time"),m=g.get("month"),y=g.get("monthAbbr"),_=g.get("dayOfWeek"),x=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,a%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[o-1]).replace(/{MMM}/g,y[o-1]).replace(/{MM}/g,bu(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,bu(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,_[u]).replace(/{ee}/g,x[u]).replace(/{e}/g,u+"").replace(/{HH}/g,bu(h,2)).replace(/{H}/g,h+"").replace(/{hh}/g,bu(c+"",2)).replace(/{h}/g,c+"").replace(/{mm}/g,bu(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,bu(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,bu(p,3)).replace(/{S}/g,p+"")}function xbe(e,t,r,i,n){var a=null;if(ge(r))a=r;else if(Ae(r))a=r(e.value,t,{level:e.level});else{var o=ae({},Bp);if(e.level>0)for(var s=0;s<US.length;++s)o[US[s]]="{primary|"+o[US[s]]+"}";var l=r?r.inherit===!1?r:De(r,o):o,u=S8(e.value,n);if(l[u])a=l[u];else if(l.inherit){for(var h=w8.indexOf(u),s=h-1;s>=0;--s)if(l[u]){a=l[u];break}a=a||o.none}if(ue(a)){var c=e.level==null?0:e.level>=0?e.level:a.length+e.level;c=Math.min(c,a.length-1),a=a[c]}}return Qx(new Date(e.value),a,n,i)}function S8(e,t){var r=So(e),i=r[_d(t)]()+1,n=r[eb(t)](),a=r[ag(t)](),o=r[tb(t)](),s=r[rb(t)](),l=r[ib(t)](),u=l===0,h=u&&s===0,c=h&&o===0,d=c&&a===0,f=d&&n===1,p=f&&i===1;return p?"year":f?"month":d?"day":c?"hour":h?"minute":u?"second":"millisecond"}function HN(e,t,r){var i=st(e)?So(e):e;switch(t=t||S8(e,r),t){case"year":return i[fL(r)]();case"half-year":return i[_d(r)]()>=6?1:0;case"quarter":return Math.floor((i[_d(r)]()+1)/4);case"month":return i[_d(r)]();case"day":return i[eb(r)]();case"half-day":return i[ag(r)]()/24;case"hour":return i[ag(r)]();case"minute":return i[tb(r)]();case"second":return i[rb(r)]();case"millisecond":return i[ib(r)]()}}function fL(e){return e?"getUTCFullYear":"getFullYear"}function _d(e){return e?"getUTCMonth":"getMonth"}function eb(e){return e?"getUTCDate":"getDate"}function ag(e){return e?"getUTCHours":"getHours"}function tb(e){return e?"getUTCMinutes":"getMinutes"}function rb(e){return e?"getUTCSeconds":"getSeconds"}function ib(e){return e?"getUTCMilliseconds":"getMilliseconds"}function bbe(e){return e?"setUTCFullYear":"setFullYear"}function M8(e){return e?"setUTCMonth":"setMonth"}function T8(e){return e?"setUTCDate":"setDate"}function A8(e){return e?"setUTCHours":"setHours"}function C8(e){return e?"setUTCMinutes":"setMinutes"}function D8(e){return e?"setUTCSeconds":"setSeconds"}function P8(e){return e?"setUTCMilliseconds":"setMilliseconds"}function L8(e){if(!hW(e))return ge(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function E8(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,i){return i.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var vf=FP;function zA(e,t,r){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(h){return h&&va(h)?h:"-"}function a(h){return!!(h!=null&&!isNaN(h)&&isFinite(h))}var o=t==="time",s=e instanceof Date;if(o||s){var l=o?So(e):e;if(isNaN(+l)){if(s)return"-"}else return Qx(l,i,r)}if(t==="ordinal")return eA(e)?n(e):st(e)&&a(e)?e+"":"-";var u=_s(e);return a(u)?L8(u):eA(e)?n(e):typeof e=="boolean"?e+"":"-"}var jN=["a","b","c","d","e","f","g"],GS=function(e,t){return"{"+e+(t??"")+"}"};function I8(e,t,r){ue(t)||(t=[t]);var i=t.length;if(!i)return"";for(var n=t[0].$vars||[],a=0;a<n.length;a++){var o=jN[a];e=e.replace(GS(o),GS(o,0))}for(var s=0;s<i;s++)for(var l=0;l<n.length;l++){var u=t[s][n[l]];e=e.replace(GS(jN[l],s),r?Ii(u):u)}return e}function wbe(e,t,r){return I(t,function(i,n){e=e.replace("{"+n+"}",r?Ii(i):i)}),e}function Sbe(e,t){var r=ge(e)?{color:e,extraCssText:t}:e||{},i=r.color,n=r.type;t=r.extraCssText;var a=r.renderMode||"html";if(!i)return"";if(a==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ii(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Ii(i)+";"+(t||"")+'"></span>';var o=r.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function zh(e,t){return t=t||"transparent",ge(e)?e:Pe(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function __(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var K0=I,O8=["left","right","top","bottom","width","height"],th=[["width","left","right"],["height","top","bottom"]];function pL(e,t,r,i,n){var a=0,o=0;i==null&&(i=1/0),n==null&&(n=1/0);var s=0;t.eachChild(function(l,u){var h=l.getBoundingRect(),c=t.childAt(u+1),d=c&&c.getBoundingRect(),f,p;if(e==="horizontal"){var v=h.width+(d?-d.x+h.x:0);f=a+v,f>i||l.newline?(a=0,f=v,o+=s+r,s=h.height):s=Math.max(s,h.height)}else{var g=h.height+(d?-d.y+h.y:0);p=o+g,p>n||l.newline?(a+=s+r,o=0,p=g,s=h.width):s=Math.max(s,h.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),e==="horizontal"?a=f+r:o=p+r)})}var xh=pL;Ne(pL,"vertical");Ne(pL,"horizontal");function Mbe(e,t,r){var i=t.width,n=t.height,a=ve(e.left,i),o=ve(e.top,n),s=ve(e.right,i),l=ve(e.bottom,n);return(isNaN(a)||isNaN(parseFloat(e.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(e.right)))&&(s=i),(isNaN(o)||isNaN(parseFloat(e.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(e.bottom)))&&(l=n),r=vf(r||0),{width:Math.max(s-a-r[1]-r[3],0),height:Math.max(l-o-r[0]-r[2],0)}}function br(e,t,r){r=vf(r||0);var i=t.width,n=t.height,a=ve(e.left,i),o=ve(e.top,n),s=ve(e.right,i),l=ve(e.bottom,n),u=ve(e.width,i),h=ve(e.height,n),c=r[2]+r[0],d=r[1]+r[3],f=e.aspect;switch(isNaN(u)&&(u=i-s-d-a),isNaN(h)&&(h=n-l-c-o),f!=null&&(isNaN(u)&&isNaN(h)&&(f>i/n?u=i*.8:h=n*.8),isNaN(u)&&(u=f*h),isNaN(h)&&(h=u/f)),isNaN(a)&&(a=i-s-u-d),isNaN(o)&&(o=n-l-h-c),e.left||e.right){case"center":a=i/2-u/2-r[3];break;case"right":a=i-u-d;break}switch(e.top||e.bottom){case"middle":case"center":o=n/2-h/2-r[0];break;case"bottom":o=n-h-c;break}a=a||0,o=o||0,isNaN(u)&&(u=i-d-a-(s||0)),isNaN(h)&&(h=n-c-o-(l||0));var p=new Ge(a+r[3],o+r[0],u,h);return p.margin=r,p}function nb(e,t,r,i,n,a){var o=!n||!n.hv||n.hv[0],s=!n||!n.hv||n.hv[1],l=n&&n.boundingMode||"all";if(a=a||e,a.x=e.x,a.y=e.y,!o&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new Ge(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var h=e.getLocalTransform();u=u.clone(),u.applyTransform(h)}var c=br(De({width:u.width,height:u.height},t),r,i),d=o?c.x-u.x:0,f=s?c.y-u.y:0;return l==="raw"?(a.x=d,a.y=f):(a.x+=d,a.y+=f),a===e&&e.markRedraw(),!0}function Tbe(e,t){return e[th[t][0]]!=null||e[th[t][1]]!=null&&e[th[t][2]]!=null}function og(e){var t=e.layoutMode||e.constructor.layoutMode;return Pe(t)?t:t?{type:t}:null}function Fl(e,t,r){var i=r&&r.ignoreSize;!ue(i)&&(i=[i,i]);var n=o(th[0],0),a=o(th[1],1);u(th[0],e,n),u(th[1],e,a);function o(h,c){var d={},f=0,p={},v=0,g=2;if(K0(h,function(_){p[_]=e[_]}),K0(h,function(_){s(t,_)&&(d[_]=p[_]=t[_]),l(d,_)&&f++,l(p,_)&&v++}),i[c])return l(t,h[1])?p[h[2]]=null:l(t,h[2])&&(p[h[1]]=null),p;if(v===g||!f)return p;if(f>=g)return d;for(var m=0;m<h.length;m++){var y=h[m];if(!s(d,y)&&s(e,y)){d[y]=e[y];break}}return d}function s(h,c){return h.hasOwnProperty(c)}function l(h,c){return h[c]!=null&&h[c]!=="auto"}function u(h,c,d){K0(h,function(f){c[f]=d[f]})}}function gf(e){return R8({},e)}function R8(e,t){return t&&e&&K0(O8,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var Abe=it(),mf=function(e){Y(t,e);function t(r,i,n){var a=e.call(this,r,i,n)||this;return a.uid=pf("ec_cpt_model"),a}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n)},t.prototype.mergeDefaultAndTheme=function(r,i){var n=og(this),a=n?gf(r):{},o=i.getTheme();Ue(r,o.get(this.mainType)),Ue(r,this.getDefaultOption()),n&&Fl(r,a,n)},t.prototype.mergeOption=function(r,i){Ue(this.option,r,!0);var n=og(this);n&&Fl(this.option,r,n)},t.prototype.optionUpdated=function(r,i){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!s_e(r))return r.defaultOption;var i=Abe(this);if(!i.defaultOption){for(var n=[],a=r;a;){var o=a.prototype.defaultOption;o&&n.push(o),a=a.superClass}for(var s={},l=n.length-1;l>=0;l--)s=Ue(s,n[l],!0);i.defaultOption=s}return i.defaultOption},t.prototype.getReferringComponents=function(r,i){var n=r+"Index",a=r+"Id";return Fg(this.ecModel,r,{index:this.get(n,!0),id:this.get(a,!0)},i)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Nt);xW(mf,Nt);Gx(mf);dbe(mf);fbe(mf,Cbe);function Cbe(e){var t=[];return I(mf.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=ce(t,function(r){return ho(r).main}),e!=="dataset"&&We(t,"dataset")<=0&&t.unshift("dataset"),t}const nt=mf;var z8="";typeof navigator<"u"&&(z8=navigator.platform||"");var Mc="rgba(0, 0, 0, 0.2)";const Dbe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Mc,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Mc,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Mc,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Mc,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Mc,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Mc,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:z8.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var N8=Me(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Wn="original",oi="arrayRows",$n="objectRows",Do="keyedColumns",Pl="typedArray",k8="unknown",go="column",yf="row",Vr={Must:1,Might:2,Not:3},B8=it();function Pbe(e){B8(e).datasetMap=Me()}function F8(e,t,r){var i={},n=gL(t);if(!n||!e)return i;var a=[],o=[],s=t.ecModel,l=B8(s).datasetMap,u=n.uid+"_"+r.seriesLayoutBy,h,c;e=e.slice(),I(e,function(v,g){var m=Pe(v)?v:e[g]={name:v};m.type==="ordinal"&&h==null&&(h=g,c=p(m)),i[m.name]=[]});var d=l.get(u)||l.set(u,{categoryWayDim:c,valueWayDim:0});I(e,function(v,g){var m=v.name,y=p(v);if(h==null){var _=d.valueWayDim;f(i[m],_,y),f(o,_,y),d.valueWayDim+=y}else if(h===g)f(i[m],0,y),f(a,0,y);else{var _=d.categoryWayDim;f(i[m],_,y),f(o,_,y),d.categoryWayDim+=y}});function f(v,g,m){for(var y=0;y<m;y++)v.push(g+y)}function p(v){var g=v.dimsDef;return g?g.length:1}return a.length&&(i.itemName=a),o.length&&(i.seriesName=o),i}function vL(e,t,r){var i={},n=gL(e);if(!n)return i;var a=t.sourceFormat,o=t.dimensionsDefine,s;(a===$n||a===Do)&&I(o,function(h,c){(Pe(h)?h.name:h)==="name"&&(s=c)});var l=function(){for(var h={},c={},d=[],f=0,p=Math.min(5,r);f<p;f++){var v=U8(t.data,a,t.seriesLayoutBy,o,t.startIndex,f);d.push(v);var g=v===Vr.Not;if(g&&h.v==null&&f!==s&&(h.v=f),(h.n==null||h.n===h.v||!g&&d[h.n]===Vr.Not)&&(h.n=f),m(h)&&d[h.n]!==Vr.Not)return h;g||(v===Vr.Might&&c.v==null&&f!==s&&(c.v=f),(c.n==null||c.n===c.v)&&(c.n=f))}function m(y){return y.v!=null&&y.n!=null}return m(h)?h:m(c)?c:null}();if(l){i.value=[l.v];var u=s??l.n;i.itemName=[u],i.seriesName=[u]}return i}function gL(e){var t=e.get("data",!0);if(!t)return Fg(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},dr).models[0]}function Lbe(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:Fg(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},dr).models}function V8(e,t){return U8(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function U8(e,t,r,i,n,a){var o,s=5;if(hn(e))return Vr.Not;var l,u;if(i){var h=i[a];Pe(h)?(l=h.name,u=h.type):ge(h)&&(l=h)}if(u!=null)return u==="ordinal"?Vr.Must:Vr.Not;if(t===oi){var c=e;if(r===yf){for(var d=c[a],f=0;f<(d||[]).length&&f<s;f++)if((o=x(d[n+f]))!=null)return o}else for(var f=0;f<c.length&&f<s;f++){var p=c[n+f];if(p&&(o=x(p[a]))!=null)return o}}else if(t===$n){var v=e;if(!l)return Vr.Not;for(var f=0;f<v.length&&f<s;f++){var g=v[f];if(g&&(o=x(g[l]))!=null)return o}}else if(t===Do){var m=e;if(!l)return Vr.Not;var d=m[l];if(!d||hn(d))return Vr.Not;for(var f=0;f<d.length&&f<s;f++)if((o=x(d[f]))!=null)return o}else if(t===Wn)for(var y=e,f=0;f<y.length&&f<s;f++){var g=y[f],_=uf(g);if(!ue(_))return Vr.Not;if((o=x(_[a]))!=null)return o}function x(w){var b=ge(w);if(w!=null&&isFinite(w)&&w!=="")return b?Vr.Might:Vr.Not;if(b&&w!=="-")return Vr.Must}return Vr.Not}var NA=Me();function Ebe(e,t){wi(NA.get(e)==null&&t),NA.set(e,t)}function Ibe(e,t,r){var i=NA.get(t);if(!i)return r;var n=i(e);return n?r.concat(n):r}var WN=it(),Obe=it(),mL=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,i){var n=Mt(this.get("color",!0)),a=this.get("colorLayer",!0);return G8(this,WN,n,a,t,r,i)},e.prototype.clearColorPalette=function(){zbe(this,WN)},e}();function kA(e,t,r,i){var n=Mt(e.get(["aria","decal","decals"]));return G8(e,Obe,n,null,t,r,i)}function Rbe(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i].length>t)return e[i];return e[r-1]}function G8(e,t,r,i,n,a,o){a=a||e;var s=t(a),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(n))return u[n];var h=o==null||!i?r:Rbe(i,o);if(h=h||r,!(!h||!h.length)){var c=h[l];return n&&(u[n]=c),s.paletteIdx=(l+1)%h.length,c}}function zbe(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var Oy,np,$N,qN="\0_ec_inner",Nbe=1,H8=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,i,n,a,o,s){a=a||{},this.option=null,this._theme=new Nt(a),this._locale=new Nt(o),this._optionManager=s},t.prototype.setOption=function(r,i,n){var a=ZN(i);this._optionManager.setOption(r,n,a),this._resetOption(null,a)},t.prototype.resetOption=function(r,i){return this._resetOption(r,ZN(i))},t.prototype._resetOption=function(r,i){var n=!1,a=this._optionManager;if(!r||r==="recreate"){var o=a.mountOption(r==="recreate");!this.option||r==="recreate"?$N(this,o):(this.restoreData(),this._mergeOption(o,i)),n=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=a.getTimelineOption(this);s&&(n=!0,this._mergeOption(s,i))}if(!r||r==="recreate"||r==="media"){var l=a.getMediaOption(this);l.length&&I(l,function(u){n=!0,this._mergeOption(u,i)},this)}return n},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,i){var n=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=Me(),u=i&&i.replaceMergeMainTypeMap;Pbe(this),I(r,function(c,d){c!=null&&(nt.hasClass(d)?d&&(s.push(d),l.set(d,!0)):n[d]=n[d]==null?Ee(c):Ue(n[d],c,!0))}),u&&u.each(function(c,d){nt.hasClass(d)&&!l.get(d)&&(s.push(d),l.set(d,!0))}),nt.topologicalTravel(s,nt.getAllClassMainTypes(),h,this);function h(c){var d=Ibe(this,c,Mt(r[c])),f=a.get(c),p=f?u&&u.get(c)?"replaceMerge":"normalMerge":"replaceAll",v=vW(f,d,p);J1e(v,c,nt),n[c]=null,a.set(c,null),o.set(c,0);var g=[],m=[],y=0,_;I(v,function(x,w){var b=x.existing,S=x.newOption;if(!S)b&&(b.mergeOption({},this),b.optionUpdated({},!1));else{var M=c==="series",A=nt.getClass(c,x.keyInfo.subType,!M);if(!A)return;if(c==="tooltip"){if(_)return;_=!0}if(b&&b.constructor===A)b.name=x.keyInfo.name,b.mergeOption(S,this),b.optionUpdated(S,!1);else{var T=ae({componentIndex:w},x.keyInfo);b=new A(S,this,this,T),ae(b,T),x.brandNew&&(b.__requireNewView=!0),b.init(S,this,this),b.optionUpdated(null,!0)}}b?(g.push(b.option),m.push(b),y++):(g.push(void 0),m.push(void 0))},this),n[c]=g,a.set(c,m),o.set(c,y),c==="series"&&Oy(this)}this._seriesIndices||Oy(this)},t.prototype.getOption=function(){var r=Ee(this.option);return I(r,function(i,n){if(nt.hasClass(n)){for(var a=Mt(i),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!Qv(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,r[n]=a}}),delete r[qN],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,i){var n=this._componentsMap.get(r);if(n){var a=n[i||0];if(a)return a;if(i==null){for(var o=0;o<n.length;o++)if(n[o])return n[o]}}},t.prototype.queryComponents=function(r){var i=r.mainType;if(!i)return[];var n=r.index,a=r.id,o=r.name,s=this._componentsMap.get(i);if(!s||!s.length)return[];var l;return n!=null?(l=[],I(Mt(n),function(u){s[u]&&l.push(s[u])})):a!=null?l=XN("id",a,s):o!=null?l=XN("name",o,s):l=xt(s,function(u){return!!u}),YN(l,r)},t.prototype.findComponents=function(r){var i=r.query,n=r.mainType,a=s(i),o=a?this.queryComponents(a):xt(this._componentsMap.get(n),function(u){return!!u});return l(YN(o,r));function s(u){var h=n+"Index",c=n+"Id",d=n+"Name";return u&&(u[h]!=null||u[c]!=null||u[d]!=null)?{mainType:n,index:u[h],id:u[c],name:u[d]}:null}function l(u){return r.filter?xt(u,r.filter):u}},t.prototype.eachComponent=function(r,i,n){var a=this._componentsMap;if(Ae(r)){var o=i,s=r;a.each(function(c,d){for(var f=0;c&&f<c.length;f++){var p=c[f];p&&s.call(o,d,p,p.componentIndex)}})}else for(var l=ge(r)?a.get(r):Pe(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var h=l[u];h&&i.call(n,h,h.componentIndex)}},t.prototype.getSeriesByName=function(r){var i=xr(r,null);return xt(this._componentsMap.get("series"),function(n){return!!n&&i!=null&&n.name===i})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return xt(this._componentsMap.get("series"),function(i){return!!i&&i.subType===r})},t.prototype.getSeries=function(){return xt(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,i){np(this),I(this._seriesIndices,function(n){var a=this._componentsMap.get("series")[n];r.call(i,a,n)},this)},t.prototype.eachRawSeries=function(r,i){I(this._componentsMap.get("series"),function(n){n&&r.call(i,n,n.componentIndex)})},t.prototype.eachSeriesByType=function(r,i,n){np(this),I(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===r&&i.call(n,o,a)},this)},t.prototype.eachRawSeriesByType=function(r,i,n){return I(this.getSeriesByType(r),i,n)},t.prototype.isSeriesFiltered=function(r){return np(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,i){np(this);var n=[];I(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];r.call(i,o,a)&&n.push(a)},this),this._seriesIndices=n,this._seriesIndicesMap=Me(n)},t.prototype.restoreData=function(r){Oy(this);var i=this._componentsMap,n=[];i.each(function(a,o){nt.hasClass(o)&&n.push(o)}),nt.topologicalTravel(n,nt.getAllClassMainTypes(),function(a){I(i.get(a),function(o){o&&(a!=="series"||!kbe(o,r))&&o.restoreData()})})},t.internalField=function(){Oy=function(r){var i=r._seriesIndices=[];I(r._componentsMap.get("series"),function(n){n&&i.push(n.componentIndex)}),r._seriesIndicesMap=Me(i)},np=function(r){},$N=function(r,i){r.option={},r.option[qN]=Nbe,r._componentsMap=Me({series:[]}),r._componentsCount=Me();var n=i.aria;Pe(n)&&n.enabled==null&&(n.enabled=!0),Bbe(i,r._theme.option),Ue(i,Dbe,!1),r._mergeOption(i,null)}}(),t}(Nt);function kbe(e,t){if(t){var r=t.seriesIndex,i=t.seriesId,n=t.seriesName;return r!=null&&e.componentIndex!==r||i!=null&&e.id!==i||n!=null&&e.name!==n}}function Bbe(e,t){var r=e.color&&!e.colorLayer;I(t,function(i,n){n==="colorLayer"&&r||nt.hasClass(n)||(typeof i=="object"?e[n]=e[n]?Ue(e[n],i,!1):Ee(i):e[n]==null&&(e[n]=i))})}function XN(e,t,r){if(ue(t)){var i=Me();return I(t,function(a){if(a!=null){var o=xr(a,null);o!=null&&i.set(a,!0)}}),xt(r,function(a){return a&&i.get(a[e])})}else{var n=xr(t,null);return xt(r,function(a){return a&&n!=null&&a[e]===n})}}function YN(e,t){return t.hasOwnProperty("subType")?xt(e,function(r){return r&&r.subType===t.subType}):e}function ZN(e){var t=Me();return e&&I(Mt(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}gr(H8,mL);const j8=H8;var Fbe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Vbe=function(){function e(t){I(Fbe,function(r){this[r]=me(t[r],t)},this)}return e}();const W8=Vbe;var HS={},Ube=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var i=[];I(HS,function(n,a){var o=n.create(t,r);i=i.concat(o||[])}),this._coordinateSystems=i},e.prototype.update=function(t,r){I(this._coordinateSystems,function(i){i.update&&i.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){HS[t]=r},e.get=function(t){return HS[t]},e}();const jg=Ube;var Gbe=/^(min|max)?(.+)$/,Hbe=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,i){t&&(I(Mt(t.series),function(o){o&&o.data&&hn(o.data)&&r_(o.data)}),I(Mt(t.dataset),function(o){o&&o.source&&hn(o.source)&&r_(o.source)})),t=Ee(t);var n=this._optionBackup,a=jbe(t,r,!n);this._newBaseOption=a.baseOption,n?(a.timelineOptions.length&&(n.timelineOptions=a.timelineOptions),a.mediaList.length&&(n.mediaList=a.mediaList),a.mediaDefault&&(n.mediaDefault=a.mediaDefault)):this._optionBackup=a},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],Ee(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,i=this._timelineOptions;if(i.length){var n=t.getComponent("timeline");n&&(r=Ee(i[n.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!n.length&&!a)return s;for(var l=0,u=n.length;l<u;l++)Wbe(n[l].query,r,i)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!qbe(o,this._currentMediaIndices)&&(s=ce(o,function(h){return Ee(h===-1?a.option:n[h].option)})),this._currentMediaIndices=o,s},e}();function jbe(e,t,r){var i=[],n,a,o=e.baseOption,s=e.timeline,l=e.options,u=e.media,h=!!e.media,c=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((c||h)&&(e.options=e.media=null),a=e),h&&ue(u)&&I(u,function(f){f&&f.option&&(f.query?i.push(f):n||(n=f))}),d(a),I(l,function(f){return d(f)}),I(i,function(f){return d(f.option)});function d(f){I(t,function(p){p(f,r)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:n,mediaList:i}}function Wbe(e,t,r){var i={width:t,height:r,aspectratio:t/r},n=!0;return I(e,function(a,o){var s=o.match(Gbe);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();$be(i[u],a,l)||(n=!1)}}),n}function $be(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function qbe(e,t){return e.join(",")===t.join(",")}const Xbe=Hbe;var ta=I,sg=Pe,KN=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function jS(e){var t=e&&e.itemStyle;if(t)for(var r=0,i=KN.length;r<i;r++){var n=KN[r],a=t.normal,o=t.emphasis;a&&a[n]&&(e[n]=e[n]||{},e[n].normal?Ue(e[n].normal,a[n]):e[n].normal=a[n],a[n]=null),o&&o[n]&&(e[n]=e[n]||{},e[n].emphasis?Ue(e[n].emphasis,o[n]):e[n].emphasis=o[n],o[n]=null)}}function Jr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var i=e[t].normal,n=e[t].emphasis;i&&(r?(e[t].normal=e[t].emphasis=null,De(e[t],i)):e[t]=i),n&&(e.emphasis=e.emphasis||{},e.emphasis[t]=n,n.focus&&(e.emphasis.focus=n.focus),n.blurScope&&(e.emphasis.blurScope=n.blurScope))}}function Fp(e){Jr(e,"itemStyle"),Jr(e,"lineStyle"),Jr(e,"areaStyle"),Jr(e,"label"),Jr(e,"labelLine"),Jr(e,"upperLabel"),Jr(e,"edgeLabel")}function cr(e,t){var r=sg(e)&&e[t],i=sg(r)&&r.textStyle;if(i)for(var n=0,a=tN.length;n<a;n++){var o=tN[n];i.hasOwnProperty(o)&&(r[o]=i[o])}}function Sn(e){e&&(Fp(e),cr(e,"label"),e.emphasis&&cr(e.emphasis,"label"))}function Ybe(e){if(sg(e)){jS(e),Fp(e),cr(e,"label"),cr(e,"upperLabel"),cr(e,"edgeLabel"),e.emphasis&&(cr(e.emphasis,"label"),cr(e.emphasis,"upperLabel"),cr(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(jS(t),Sn(t));var r=e.markLine;r&&(jS(r),Sn(r));var i=e.markArea;i&&Sn(i);var n=e.data;if(e.type==="graph"){n=n||e.nodes;var a=e.links||e.edges;if(a&&!hn(a))for(var o=0;o<a.length;o++)Sn(a[o]);I(e.categories,function(u){Fp(u)})}if(n&&!hn(n))for(var o=0;o<n.length;o++)Sn(n[o]);if(t=e.markPoint,t&&t.data)for(var s=t.data,o=0;o<s.length;o++)Sn(s[o]);if(r=e.markLine,r&&r.data)for(var l=r.data,o=0;o<l.length;o++)ue(l[o])?(Sn(l[o][0]),Sn(l[o][1])):Sn(l[o]);e.type==="gauge"?(cr(e,"axisLabel"),cr(e,"title"),cr(e,"detail")):e.type==="treemap"?(Jr(e.breadcrumb,"itemStyle"),I(e.levels,function(u){Fp(u)})):e.type==="tree"&&Fp(e.leaves)}}function Uo(e){return ue(e)?e:e?[e]:[]}function JN(e){return(ue(e)?e[0]:e)||{}}function Zbe(e,t){ta(Uo(e.series),function(i){sg(i)&&Ybe(i)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),ta(r,function(i){ta(Uo(e[i]),function(n){n&&(cr(n,"axisLabel"),cr(n.axisPointer,"label"))})}),ta(Uo(e.parallel),function(i){var n=i&&i.parallelAxisDefault;cr(n,"axisLabel"),cr(n&&n.axisPointer,"label")}),ta(Uo(e.calendar),function(i){Jr(i,"itemStyle"),cr(i,"dayLabel"),cr(i,"monthLabel"),cr(i,"yearLabel")}),ta(Uo(e.radar),function(i){cr(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),ta(Uo(e.geo),function(i){sg(i)&&(Sn(i),ta(Uo(i.regions),function(n){Sn(n)}))}),ta(Uo(e.timeline),function(i){Sn(i),Jr(i,"label"),Jr(i,"itemStyle"),Jr(i,"controlStyle",!0);var n=i.data;ue(n)&&I(n,function(a){Pe(a)&&(Jr(a,"label"),Jr(a,"itemStyle"))})}),ta(Uo(e.toolbox),function(i){Jr(i,"iconStyle"),ta(i.feature,function(n){Jr(n,"iconStyle")})}),cr(JN(e.axisPointer),"label"),cr(JN(e.tooltip).axisPointer,"label")}function Kbe(e,t){for(var r=t.split(","),i=e,n=0;n<r.length&&(i=i&&i[r[n]],i!=null);n++);return i}function Jbe(e,t,r,i){for(var n=t.split(","),a=e,o,s=0;s<n.length-1;s++)o=n[s],a[o]==null&&(a[o]={}),a=a[o];(i||a[n[s]]==null)&&(a[n[s]]=r)}function QN(e){e&&I(Qbe,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Qbe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],ewe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],WS=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function ap(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<WS.length;r++){var i=WS[r][1],n=WS[r][0];t[i]!=null&&(t[n]=t[i])}}function ek(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function tk(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function twe(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function $8(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&$8(e[r].children,t)}function q8(e,t){Zbe(e,t),e.series=Mt(e.series),I(e.series,function(r){if(Pe(r)){var i=r.type;if(i==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(i==="pie"||i==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),ek(r.label);var n=r.data;if(n&&!hn(n))for(var a=0;a<n.length;a++)ek(n[a]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(i==="gauge"){var o=Kbe(r,"pointer.color");o!=null&&Jbe(r,"itemStyle.color",o)}else if(i==="bar"){ap(r),ap(r.backgroundStyle),ap(r.emphasis);var n=r.data;if(n&&!hn(n))for(var a=0;a<n.length;a++)typeof n[a]=="object"&&(ap(n[a]),ap(n[a]&&n[a].emphasis))}else if(i==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),tk(r),$8(r.data,tk)}else i==="graph"||i==="sankey"?twe(r):i==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&De(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),QN(r)}}),e.dataRange&&(e.visualMap=e.dataRange),I(ewe,function(r){var i=e[r];i&&(ue(i)||(i=[i]),I(i,function(n){QN(n)}))})}function rwe(e){var t=Me();e.eachSeries(function(r){var i=r.get("stack");if(i){var n=t.get(i)||t.set(i,[]),a=r.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:r};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;n.length&&a.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(o)}}),t.each(iwe)}function iwe(e){I(e,function(t,r){var i=[],n=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],o=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(u,h,c){var d=o.get(t.stackedDimension,c);if(isNaN(d))return n;var f,p;s?p=o.getRawIndex(c):f=o.get(t.stackedByDimension,c);for(var v=NaN,g=r-1;g>=0;g--){var m=e[g];if(s||(p=m.data.rawIndexOf(m.stackedByDimension,f)),p>=0){var y=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&d>=0&&y>0||l==="samesign"&&d<=0&&y<0){d=U1e(d,y),v=y;break}}}return i[0]=d,i[1]=v,i})})}var ab=function(){function e(t){this.data=t.data||(t.sourceFormat===Do?{}:[]),this.sourceFormat=t.sourceFormat||k8,this.seriesLayoutBy=t.seriesLayoutBy||go,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var i=0;i<r.length;i++){var n=r[i];n.type==null&&V8(this,i)===Vr.Must&&(n.type="ordinal")}}return e}();function yL(e){return e instanceof ab}function BA(e,t,r){r=r||X8(e);var i=t.seriesLayoutBy,n=awe(e,r,i,t.sourceHeader,t.dimensions),a=new ab({data:e,sourceFormat:r,seriesLayoutBy:i,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:Ee(t)});return a}function _L(e){return new ab({data:e,sourceFormat:hn(e)?Pl:Wn})}function nwe(e){return new ab({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:Ee(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function X8(e){var t=k8;if(hn(e))t=Pl;else if(ue(e)){e.length===0&&(t=oi);for(var r=0,i=e.length;r<i;r++){var n=e[r];if(n!=null){if(ue(n)){t=oi;break}else if(Pe(n)){t=$n;break}}}}else if(Pe(e)){for(var a in e)if(_e(e,a)&&ai(e[a])){t=Do;break}}return t}function awe(e,t,r,i,n){var a,o;if(!e)return{dimensionsDefine:rk(n),startIndex:o,dimensionsDetectedCount:a};if(t===oi){var s=e;i==="auto"||i==null?ik(function(u){u!=null&&u!=="-"&&(ge(u)?o==null&&(o=1):o=0)},r,s,10):o=st(i)?i:i?1:0,!n&&o===1&&(n=[],ik(function(u,h){n[h]=u!=null?u+"":""},r,s,1/0)),a=n?n.length:r===yf?s.length:s[0]?s[0].length:null}else if(t===$n)n||(n=owe(e));else if(t===Do)n||(n=[],I(e,function(u,h){n.push(h)}));else if(t===Wn){var l=uf(e[0]);a=ue(l)&&l.length||1}return{startIndex:o,dimensionsDefine:rk(n),dimensionsDetectedCount:a}}function owe(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r)return Ze(r)}function rk(e){if(e){var t=Me();return ce(e,function(r,i){r=Pe(r)?r:{name:r};var n={name:r.name,displayName:r.displayName,type:r.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var a=t.get(n.name);return a?n.name+="-"+a.count++:t.set(n.name,{count:1}),n})}}function ik(e,t,r,i){if(t===yf)for(var n=0;n<r.length&&n<i;n++)e(r[n]?r[n][0]:null,n);else for(var a=r[0]||[],n=0;n<a.length&&n<i;n++)e(a[n],n)}function Y8(e){var t=e.sourceFormat;return t===$n||t===Do}var wu,Su,Mu,nk,ak,Z8=function(){function e(t,r){var i=yL(t)?t:_L(t);this._source=i;var n=this._data=i.data;i.sourceFormat===Pl&&(this._offset=0,this._dimSize=r,this._data=n),ak(this,n,i)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;ak=function(o,s,l){var u=l.sourceFormat,h=l.seriesLayoutBy,c=l.startIndex,d=l.dimensionsDefine,f=nk[xL(u,h)];if(ae(o,f),u===Pl)o.getItem=r,o.count=n,o.fillStorage=i;else{var p=K8(u,h);o.getItem=me(p,null,s,c,d);var v=J8(u,h);o.count=me(v,null,s,c,d)}};var r=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,h=u*o,c=0;c<u;c++)s[c]=l[h+c];return s},i=function(o,s,l,u){for(var h=this._data,c=this._dimSize,d=0;d<c;d++){for(var f=u[d],p=f[0]==null?1/0:f[0],v=f[1]==null?-1/0:f[1],g=s-o,m=l[d],y=0;y<g;y++){var _=h[y*c+d];m[o+y]=_,_<p&&(p=_),_>v&&(v=_)}f[0]=p,f[1]=v}},n=function(){return this._data?this._data.length/this._dimSize:0};nk=(t={},t[oi+"_"+go]={pure:!0,appendData:a},t[oi+"_"+yf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[$n]={pure:!0,appendData:a},t[Do]={pure:!0,appendData:function(o){var s=this._data;I(o,function(l,u){for(var h=s[u]||(s[u]=[]),c=0;c<(l||[]).length;c++)h.push(l[c])})}},t[Wn]={appendData:a},t[Pl]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),e}(),ok=function(e,t,r,i){return e[i]},swe=(wu={},wu[oi+"_"+go]=function(e,t,r,i){return e[i+t]},wu[oi+"_"+yf]=function(e,t,r,i,n){i+=t;for(var a=n||[],o=e,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[i]:null}return a},wu[$n]=ok,wu[Do]=function(e,t,r,i,n){for(var a=n||[],o=0;o<r.length;o++){var s=r[o].name,l=e[s];a[o]=l?l[i]:null}return a},wu[Wn]=ok,wu);function K8(e,t){var r=swe[xL(e,t)];return r}var sk=function(e,t,r){return e.length},lwe=(Su={},Su[oi+"_"+go]=function(e,t,r){return Math.max(0,e.length-t)},Su[oi+"_"+yf]=function(e,t,r){var i=e[0];return i?Math.max(0,i.length-t):0},Su[$n]=sk,Su[Do]=function(e,t,r){var i=r[0].name,n=e[i];return n?n.length:0},Su[Wn]=sk,Su);function J8(e,t){var r=lwe[xL(e,t)];return r}var $S=function(e,t,r){return e[t]},uwe=(Mu={},Mu[oi]=$S,Mu[$n]=function(e,t,r){return e[r]},Mu[Do]=$S,Mu[Wn]=function(e,t,r){var i=uf(e);return i instanceof Array?i[t]:i},Mu[Pl]=$S,Mu);function Q8(e){var t=uwe[e];return t}function xL(e,t){return e===oi?e+"_"+t:e}function Nd(e,t,r){if(e){var i=e.getRawDataItem(t);if(i!=null){var n=e.getStore(),a=n.getSource().sourceFormat;if(r!=null){var o=e.getDimensionIndex(r),s=n.getDimensionProperty(o);return Q8(a)(i,o,s)}else{var l=i;return a===Wn&&(l=uf(i)),l}}}}var hwe=/\{@(.+?)\}/g,bL=function(){function e(){}return e.prototype.getDataParams=function(t,r){var i=this.getData(r),n=this.getRawValue(t,r),a=i.getRawIndex(t),o=i.getName(t),s=i.getRawDataItem(t),l=i.getItemVisual(t,"style"),u=l&&l[i.getItemVisual(t,"drawType")||"fill"],h=l&&l.stroke,c=this.mainType,d=c==="series",f=i.userOutput&&i.userOutput.get();return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:o,dataIndex:a,data:s,dataType:r,value:n,color:u,borderColor:h,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,i,n,a,o){r=r||"normal";var s=this.getData(i),l=this.getDataParams(t,i);if(o&&(l.value=o.interpolatedValue),n!=null&&ue(l.value)&&(l.value=l.value[n]),!a){var u=s.getItemModel(t);a=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ae(a))return l.status=r,l.dimensionIndex=n,a(l);if(ge(a)){var h=I8(a,l);return h.replace(hwe,function(c,d){var f=d.length,p=d;p.charAt(0)==="["&&p.charAt(f-1)==="]"&&(p=+p.slice(1,f-1));var v=Nd(s,t,p);if(o&&ue(o.interpolatedValue)){var g=s.getDimensionIndex(p);g>=0&&(v=o.interpolatedValue[g])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return Nd(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,i){},e}();function lk(e){var t,r;return Pe(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function yv(e){return new cwe(e)}var cwe=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,i=t&&t.skip;if(this._dirty&&r){var n=this.context;n.data=n.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!i&&(a=this._plan(this.context));var o=h(this._modBy),s=this._modDataCount||0,l=h(t&&t.modBy),u=t&&t.modDataCount||0;(o!==l||s!==u)&&(a="reset");function h(y){return!(y>=1)&&(y=1),y}var c;(this._dirty||a==="reset")&&(this._dirty=!1,c=this._doReset(i)),this._modBy=l,this._modDataCount=u;var d=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,p=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!i&&(c||f<p)){var v=this._progress;if(ue(v))for(var g=0;g<v.length;g++)this._doProgress(v[g],f,p,l,u);else this._doProgress(v,f,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,i,n,a){uk.reset(r,i,n,a),this._callingProgress=t,this._callingProgress({start:r,end:i,count:i-r,next:uk.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,i;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(i=r.forceFirstProgress,r=r.progress),ue(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),i},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),uk=function(){var e,t,r,i,n,a={reset:function(l,u,h,c){t=l,e=u,r=h,i=c,n=Math.ceil(i/r),a.next=r>1&&i>0?s:o}};return a;function o(){return t<e?t++:null}function s(){var l=t%n*r+Math.ceil(t/n),u=t>=e?null:l<i?l:t;return t++,u}}();function Ll(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!st(e)&&e!=null&&e!=="-"&&(e=+So(e)),e==null||e===""?NaN:+e)}var dwe=Me({number:function(e){return parseFloat(e)},time:function(e){return+So(e)},trim:function(e){return ge(e)?va(e):e}});function e9(e){return dwe.get(e)}var t9={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},fwe=function(){function e(t,r){if(!st(r)){var i="";dt(i)}this._opFn=t9[t],this._rvalFloat=_s(r)}return e.prototype.evaluate=function(t){return st(t)?this._opFn(t,this._rvalFloat):this._opFn(_s(t),this._rvalFloat)},e}(),r9=function(){function e(t,r){var i=t==="desc";this._resultLT=i?1:-1,r==null&&(r=i?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var i=st(t)?t:_s(t),n=st(r)?r:_s(r),a=isNaN(i),o=isNaN(n);if(a&&(i=this._incomparable),o&&(n=this._incomparable),a&&o){var s=ge(t),l=ge(r);s&&(i=l?t:0),l&&(n=s?r:0)}return i<n?this._resultLT:i>n?-this._resultLT:0},e}(),pwe=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=_s(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var i=typeof t;i!==this._rvalTypeof&&(i==="number"||this._rvalTypeof==="number")&&(r=_s(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function vwe(e,t){return e==="eq"||e==="ne"?new pwe(e==="eq",t):_e(t9,e)?new fwe(e,t):null}var gwe=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Ll(t,r)},e}();function mwe(e,t){var r=new gwe,i=e.data,n=r.sourceFormat=e.sourceFormat,a=e.startIndex,o="";e.seriesLayoutBy!==go&&dt(o);var s=[],l={},u=e.dimensionsDefine;if(u)I(u,function(v,g){var m=v.name,y={index:g,name:m,displayName:v.displayName};if(s.push(y),m!=null){var _="";_e(l,m)&&dt(_),l[m]=y}});else for(var h=0;h<e.dimensionsDetectedCount;h++)s.push({index:h});var c=K8(n,go);t.__isBuiltIn&&(r.getRawDataItem=function(v){return c(i,a,s,v)},r.getRawData=me(ywe,null,e)),r.cloneRawData=me(_we,null,e);var d=J8(n,go);r.count=me(d,null,i,a,s);var f=Q8(n);r.retrieveValue=function(v,g){var m=c(i,a,s,v);return p(m,g)};var p=r.retrieveValueFromItem=function(v,g){if(v!=null){var m=s[g];if(m)return f(v,g,m.name)}};return r.getDimensionInfo=me(xwe,null,s,l),r.cloneAllDimensionInfo=me(bwe,null,s),r}function ywe(e){var t=e.sourceFormat;if(!wL(t)){var r="";dt(r)}return e.data}function _we(e){var t=e.sourceFormat,r=e.data;if(!wL(t)){var i="";dt(i)}if(t===oi){for(var n=[],a=0,o=r.length;a<o;a++)n.push(r[a].slice());return n}else if(t===$n){for(var n=[],a=0,o=r.length;a<o;a++)n.push(ae({},r[a]));return n}}function xwe(e,t,r){if(r!=null){if(st(r)||!isNaN(r)&&!_e(t,r))return e[r];if(_e(t,r))return t[r]}}function bwe(e){return Ee(e)}var i9=Me();function wwe(e){e=Ee(e);var t=e.type,r="";t||dt(r);var i=t.split(":");i.length!==2&&dt(r);var n=!1;i[0]==="echarts"&&(t=i[1],n=!0),e.__isBuiltIn=n,i9.set(t,e)}function Swe(e,t,r){var i=Mt(e),n=i.length,a="";n||dt(a);for(var o=0,s=n;o<s;o++){var l=i[o];t=Mwe(l,t),o!==s-1&&(t.length=Math.max(t.length,1))}return t}function Mwe(e,t,r,i){var n="";t.length||dt(n),Pe(e)||dt(n);var a=e.type,o=i9.get(a);o||dt(n);var s=ce(t,function(u){return mwe(u,o)}),l=Mt(o.transform({upstream:s[0],upstreamList:s,config:Ee(e.config)}));return ce(l,function(u,h){var c="";Pe(u)||dt(c),u.data||dt(c);var d=X8(u.data);wL(d)||dt(c);var f,p=t[0];if(p&&h===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),f={seriesLayoutBy:go,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else f={seriesLayoutBy:go,sourceHeader:0,dimensions:u.dimensions};return BA(u.data,f,null)})}function wL(e){return e===oi||e===$n}var ob="undefined",Twe=typeof Uint32Array===ob?Array:Uint32Array,Awe=typeof Uint16Array===ob?Array:Uint16Array,n9=typeof Int32Array===ob?Array:Int32Array,hk=typeof Float64Array===ob?Array:Float64Array,a9={float:hk,int:n9,ordinal:Array,number:Array,time:hk},qS;function op(e){return e>65535?Twe:Awe}function Tc(){return[1/0,-1/0]}function Cwe(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function ck(e,t,r,i,n){var a=a9[r||"float"];if(n){var o=e[t],s=o&&o.length;if(s!==i){for(var l=new a(i),u=0;u<s;u++)l[u]=o[u];e[t]=l}}else e[t]=new a(i)}var FA=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Me()}return e.prototype.initData=function(t,r,i){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=t.getSource(),a=this.defaultDimValueGetter=qS[n.sourceFormat];this._dimValueGetter=i||a,this._rawExtent=[],Y8(n),this._dimensions=ce(r,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var i=this._calcDimNameToIdx,n=this._dimensions,a=i.get(t);if(a!=null){if(n[a].type===r)return a}else a=n.length;return n[a]={type:r},i.set(t,a),this._chunks[a]=new a9[r||"float"](this._rawCount),this._rawExtent[a]=Tc(),a},e.prototype.collectOrdinalMeta=function(t,r){var i=this._chunks[t],n=this._dimensions[t],a=this._rawExtent,o=n.ordinalOffset||0,s=i.length;o===0&&(a[t]=Tc());for(var l=a[t],u=o;u<s;u++){var h=i[u]=r.parseAndCollect(i[u]);isNaN(h)||(l[0]=Math.min(h,l[0]),l[1]=Math.max(h,l[1]))}n.ordinalMeta=r,n.ordinalOffset=s,n.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],i=r.ordinalMeta;return i},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,i=this.count();r.appendData(t);var n=r.count();return r.persistent||(n+=i),i<n&&this._initDataFromProvider(i,n,!0),[i,n]},e.prototype.appendValues=function(t,r){for(var i=this._chunks,n=this._dimensions,a=n.length,o=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<a;u++){var h=n[u];ck(i,u,h.type,l,!0)}for(var c=[],d=s;d<l;d++)for(var f=d-s,p=0;p<a;p++){var h=n[p],v=qS.arrayRows.call(this,t[f]||c,h.property,f,p);i[p][d]=v;var g=o[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,i){for(var n=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=ce(o,function(y){return y.property}),h=0;h<s;h++){var c=o[h];l[h]||(l[h]=Tc()),ck(a,h,c.type,r,i)}if(n.fillStorage)n.fillStorage(t,r,a,l);else for(var d=[],f=t;f<r;f++){d=n.getItem(f,d);for(var p=0;p<s;p++){var v=a[p],g=this._dimValueGetter(d,u[p],f,p);v[f]=g;var m=l[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var i=this._chunks[t];return i?i[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var i=[],n=[];if(r==null){r=t,t=[];for(var a=0;a<this._dimensions.length;a++)n.push(a)}else n=t;for(var a=0,o=n.length;a<o;a++)i.push(this.get(n[a],r));return i},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var i=this._chunks[t];return i?i[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],i=0;if(r)for(var n=0,a=this.count();n<a;n++){var o=this.get(t,n);isNaN(o)||(i+=o)}return i},e.prototype.getMedian=function(t){var r=[];this.each([t],function(a){isNaN(a)||r.push(a)});var i=r.sort(function(a,o){return a-o}),n=this.count();return n===0?0:n%2===1?i[(n-1)/2]:(i[n/2]+i[n/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,i=r[t];if(i!=null&&i<this._count&&i===t)return t;for(var n=0,a=this._count-1;n<=a;){var o=(n+a)/2|0;if(r[o]<t)n=o+1;else if(r[o]>t)a=o-1;else return o}return-1},e.prototype.indicesOfNearest=function(t,r,i){var n=this._chunks,a=n[t],o=[];if(!a)return o;i==null&&(i=1/0);for(var s=1/0,l=-1,u=0,h=0,c=this.count();h<c;h++){var d=this.getRawIndex(h),f=r-a[d],p=Math.abs(f);p<=i&&((p<s||p===s&&f>=0&&l<0)&&(s=p,l=f,u=0),f===l&&(o[u++]=h))}return o.length=u,o},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var i=r.constructor,n=this._count;if(i===Array){t=new i(n);for(var a=0;a<n;a++)t[a]=r[a]}else t=new i(r.buffer,0,n)}else{var i=op(this._rawCount);t=new i(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var i=this.clone(),n=i.count(),a=op(i._rawCount),o=new a(n),s=[],l=t.length,u=0,h=t[0],c=i._chunks,d=0;d<n;d++){var f=void 0,p=i.getRawIndex(d);if(l===0)f=r(d);else if(l===1){var v=c[h][p];f=r(v,d)}else{for(var g=0;g<l;g++)s[g]=c[t[g]][p];s[g]=d,f=r.apply(null,s)}f&&(o[u++]=p)}return u<n&&(i._indices=o),i._count=u,i._extent=[],i._updateGetRawIdx(),i},e.prototype.selectRange=function(t){var r=this.clone(),i=r._count;if(!i)return this;var n=Ze(t),a=n.length;if(!a)return this;var o=r.count(),s=op(r._rawCount),l=new s(o),u=0,h=n[0],c=t[h][0],d=t[h][1],f=r._chunks,p=!1;if(!r._indices){var v=0;if(a===1){for(var g=f[n[0]],m=0;m<i;m++){var y=g[m];(y>=c&&y<=d||isNaN(y))&&(l[u++]=v),v++}p=!0}else if(a===2){for(var g=f[n[0]],_=f[n[1]],x=t[n[1]][0],w=t[n[1]][1],m=0;m<i;m++){var y=g[m],b=_[m];(y>=c&&y<=d||isNaN(y))&&(b>=x&&b<=w||isNaN(b))&&(l[u++]=v),v++}p=!0}}if(!p)if(a===1)for(var m=0;m<o;m++){var S=r.getRawIndex(m),y=f[n[0]][S];(y>=c&&y<=d||isNaN(y))&&(l[u++]=S)}else for(var m=0;m<o;m++){for(var M=!0,S=r.getRawIndex(m),A=0;A<a;A++){var T=n[A],y=f[T][S];(y<t[T][0]||y>t[T][1])&&(M=!1)}M&&(l[u++]=r.getRawIndex(m))}return u<o&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var i=this.clone(t);return this._updateDims(i,t,r),i},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,i){for(var n=t._chunks,a=[],o=r.length,s=t.count(),l=[],u=t._rawExtent,h=0;h<r.length;h++)u[r[h]]=Tc();for(var c=0;c<s;c++){for(var d=t.getRawIndex(c),f=0;f<o;f++)l[f]=n[r[f]][d];l[o]=c;var p=i&&i.apply(null,l);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var h=0;h<p.length;h++){var v=r[h],g=p[h],m=u[v],y=n[v];y&&(y[d]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},e.prototype.lttbDownSample=function(t,r){var i=this.clone([t],!0),n=i._chunks,a=n[t],o=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),h,c,d,f=new(op(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));f[s++]=u;for(var p=1;p<o-1;p+=l){for(var v=Math.min(p+l,o-1),g=Math.min(p+l*2,o),m=(g+v)/2,y=0,_=v;_<g;_++){var x=this.getRawIndex(_),w=a[x];isNaN(w)||(y+=w)}y/=g-v;var b=p,S=Math.min(p+l,o),M=p-1,A=a[u];h=-1,d=b;for(var T=-1,C=0,_=b;_<S;_++){var x=this.getRawIndex(_),w=a[x];if(isNaN(w)){C++,T<0&&(T=x);continue}c=Math.abs((M-m)*(w-A)-(M-_)*(y-A)),c>h&&(h=c,d=x)}C>0&&C<S-b&&(f[s++]=Math.min(T,d),d=Math.max(T,d)),f[s++]=d,u=d}return f[s++]=this.getRawIndex(o-1),i._count=s,i._indices=f,i.getRawIndex=this._getRawIdx,i},e.prototype.downSample=function(t,r,i,n){for(var a=this.clone([t],!0),o=a._chunks,s=[],l=Math.floor(1/r),u=o[t],h=this.count(),c=a._rawExtent[t]=Tc(),d=new(op(this._rawCount))(Math.ceil(h/l)),f=0,p=0;p<h;p+=l){l>h-p&&(l=h-p,s.length=l);for(var v=0;v<l;v++){var g=this.getRawIndex(p+v);s[v]=u[g]}var m=i(s),y=this.getRawIndex(Math.min(p+n(s,m)||0,h-1));u[y]=m,m<c[0]&&(c[0]=m),m>c[1]&&(c[1]=m),d[f++]=y}return a._count=f,a._indices=d,a._updateGetRawIdx(),a},e.prototype.each=function(t,r){if(this._count)for(var i=t.length,n=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(i){case 0:r(a);break;case 1:r(n[t[0]][s],a);break;case 2:r(n[t[0]][s],n[t[1]][s],a);break;default:for(var l=0,u=[];l<i;l++)u[l]=n[t[l]][s];u[l]=a,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],i=Tc();if(!r)return i;var n=this.count(),a=!this._indices,o;if(a)return this._rawExtent[t].slice();if(o=this._extent[t],o)return o.slice();o=i;for(var s=o[0],l=o[1],u=0;u<n;u++){var h=this.getRawIndex(u),c=r[h];c<s&&(s=c),c>l&&(l=c)}return o=[s,l],this._extent[t]=o,o},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var i=[],n=this._chunks,a=0;a<n.length;a++)i.push(n[a][r]);return i},e.prototype.clone=function(t,r){var i=new e,n=this._chunks,a=t&&xo(t,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<n.length;o++)i._chunks[o]=a[o]?Cwe(n[o]):n[o];else i._chunks=n;return this._copyCommonProps(i),r||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Ee(this._extent),t._rawExtent=Ee(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var i=this._indices.length;r=new t(i);for(var n=0;n<i;n++)r[n]=this._indices[n]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,i,n,a){return Ll(r[a],this._dimensions[a])}qS={arrayRows:t,objectRows:function(r,i,n,a){return Ll(r[i],this._dimensions[a])},keyedColumns:t,original:function(r,i,n,a){var o=r&&(r.value==null?r:r.value);return Ll(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(r,i,n,a){return r[a]}}}(),e}(),o9=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),i=!!r.length,n,a;if(Ry(t)){var o=t,s=void 0,l=void 0,u=void 0;if(i){var h=r[0];h.prepareSource(),u=h.getSource(),s=u.data,l=u.sourceFormat,a=[h._getVersionSign()]}else s=o.get("data",!0),l=hn(s)?Pl:Wn,a=[];var c=this._getSourceMetaRawOption()||{},d=u&&u.metaRawOption||{},f=Ve(c.seriesLayoutBy,d.seriesLayoutBy)||null,p=Ve(c.sourceHeader,d.sourceHeader),v=Ve(c.dimensions,d.dimensions),g=f!==d.seriesLayoutBy||!!p!=!!d.sourceHeader||v;n=g?[BA(s,{seriesLayoutBy:f,sourceHeader:p,dimensions:v},l)]:[]}else{var m=t;if(i){var y=this._applyTransform(r);n=y.sourceList,a=y.upstreamSignList}else{var _=m.get("source",!0);n=[BA(_,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(n,a)},e.prototype._applyTransform=function(t){var r=this._sourceHost,i=r.get("transform",!0),n=r.get("fromTransformResult",!0);if(n!=null){var a="";t.length!==1&&fk(a)}var o,s=[],l=[];return I(t,function(u){u.prepareSource();var h=u.getSource(n||0),c="";n!=null&&!h&&fk(c),s.push(h),l.push(u._getVersionSign())}),i?o=Swe(i,s,{datasetIndex:r.componentIndex}):n!=null&&(o=[nwe(s[0])]),{sourceList:o,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var i=t[r];if(i._isDirty()||this._upstreamSignList[r]!==i._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,i){var n=0,a=this._storeList,o=a[n];o||(o=a[n]={});var s=o[i];if(!s){var l=this._getUpstreamSourceManagers()[0];Ry(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,i):(s=new FA,s.initData(new Z8(r,t.length),t)),o[i]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Ry(t)){var r=gL(t);return r?[r.getSourceManager()]:[]}else return ce(Lbe(t),function(i){return i.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,i,n;if(Ry(t))r=t.get("seriesLayoutBy",!0),i=t.get("sourceHeader",!0),n=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;r=a.get("seriesLayoutBy",!0),i=a.get("sourceHeader",!0),n=a.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:i,dimensions:n}},e}();function dk(e){var t=e.option.transform;t&&r_(e.option.transform)}function Ry(e){return e.mainType==="series"}function fk(e){throw new Error(e)}var s9="line-height:1";function l9(e,t){var r=e.color||"#6e7079",i=e.fontSize||12,n=e.fontWeight||"400",a=e.color||"#464646",o=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Ii(i+"")+"px;color:"+Ii(r)+";font-weight:"+Ii(n+""),valueStyle:"font-size:"+Ii(o+"")+"px;color:"+Ii(a)+";font-weight:"+Ii(s+"")}:{nameStyle:{fontSize:i,fill:r,fontWeight:n},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var Dwe=[0,10,20,30],Pwe=["",`
`,`

`,`


`];function Lr(e,t){return t.type=e,t}function VA(e){return e.type==="section"}function u9(e){return VA(e)?Lwe:Ewe}function h9(e){if(VA(e)){var t=0,r=e.blocks.length,i=r>1||r>0&&!e.noHeader;return I(e.blocks,function(n){var a=h9(n);a>=t&&(t=a+ +(i&&(!a||VA(n)&&!n.noHeader)))}),t}return 0}function Lwe(e,t,r,i){var n=t.noHeader,a=Iwe(h9(t)),o=[],s=t.blocks||[];wi(!s||ue(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(_e(u,l)){var h=new r9(u[l],null);s.sort(function(p,v){return h.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}I(s,function(p,v){var g=t.valueFormatter,m=u9(p)(g?ae(ae({},e),{valueFormatter:g}):e,p,v>0?a.html:0,i);m!=null&&o.push(m)});var c=e.renderMode==="richText"?o.join(a.richText):UA(o.join(""),n?r:a.html);if(n)return c;var d=zA(t.header,"ordinal",e.useUTC),f=l9(i,e.renderMode).nameStyle;return e.renderMode==="richText"?c9(e,d,f)+a.richText+c:UA('<div style="'+f+";"+s9+';">'+Ii(d)+"</div>"+c,r)}function Ewe(e,t,r,i){var n=e.renderMode,a=t.noName,o=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,h=t.valueFormatter||e.valueFormatter||function(x){return x=ue(x)?x:[x],ce(x,function(w,b){return zA(w,ue(f)?f[b]:f,u)})};if(!(a&&o)){var c=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",n),d=a?"":zA(l,"ordinal",u),f=t.valueType,p=o?[]:h(t.value),v=!s||!a,g=!s&&a,m=l9(i,n),y=m.nameStyle,_=m.valueStyle;return n==="richText"?(s?"":c)+(a?"":c9(e,d,y))+(o?"":zwe(e,p,v,g,_)):UA((s?"":c)+(a?"":Owe(d,!s,y))+(o?"":Rwe(p,v,g,_)),r)}}function pk(e,t,r,i,n,a){if(e){var o=u9(e),s={useUTC:n,renderMode:r,orderMode:i,markupStyleCreator:t,valueFormatter:e.valueFormatter};return o(s,e,0,a)}}function Iwe(e){return{html:Dwe[e],richText:Pwe[e]}}function UA(e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0";return'<div style="'+i+";"+s9+';">'+e+r+"</div>"}function Owe(e,t,r){var i=t?"margin-left:2px":"";return'<span style="'+r+";"+i+'">'+Ii(e)+"</span>"}function Rwe(e,t,r,i){var n=r?"10px":"20px",a=t?"float:right;margin-left:"+n:"";return e=ue(e)?e:[e],'<span style="'+a+";"+i+'">'+ce(e,function(o){return Ii(o)}).join("&nbsp;&nbsp;")+"</span>"}function c9(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function zwe(e,t,r,i,n){var a=[n],o=i?10:20;return r&&a.push({padding:[0,0,0,o],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ue(t)?t.join("  "):t,a)}function d9(e,t){var r=e.getData().getItemVisual(t,"style"),i=r[e.visualDrawType];return zh(i)}function f9(e,t){var r=e.get("padding");return r??(t==="richText"?[8,10]:10)}var XS=function(){function e(){this.richTextStyles={},this._nextStyleNameId=cW()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,i){var n=i==="richText"?this._generateStyleName():null,a=Sbe({color:r,type:t,renderMode:i,markerId:n});return ge(a)?a:(this.richTextStyles[n]=a.style,a.content)},e.prototype.wrapRichTextStyle=function(t,r){var i={};ue(r)?I(r,function(a){return ae(i,a)}):ae(i,r);var n=this._generateStyleName();return this.richTextStyles[n]=i,"{"+n+"|"+t+"}"},e}();function p9(e){var t=e.series,r=e.dataIndex,i=e.multipleSeries,n=t.getData(),a=n.mapDimensionsAll("defaultedTooltip"),o=a.length,s=t.getRawValue(r),l=ue(s),u=d9(t,r),h,c,d,f;if(o>1||l&&!o){var p=Nwe(s,t,r,a,u);h=p.inlineValues,c=p.inlineValueTypes,d=p.blocks,f=p.inlineValues[0]}else if(o){var v=n.getDimensionInfo(a[0]);f=h=Nd(n,r,a[0]),c=v.type}else f=h=l?s[0]:s;var g=XP(t),m=g&&t.name||"",y=n.getName(r),_=i?m:y;return Lr("section",{header:m,noHeader:i||!g,sortParam:f,blocks:[Lr("nameValue",{markerType:"item",markerColor:u,name:_,noName:!va(_),value:h,valueType:c})].concat(d||[])})}function Nwe(e,t,r,i,n){var a=t.getData(),o=xo(e,function(c,d,f){var p=a.getDimensionInfo(f);return c=c||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];i.length?I(i,function(c){h(Nd(a,r,c),c)}):I(e,h);function h(c,d){var f=a.getDimensionInfo(d);!f||f.otherDims.tooltip===!1||(o?u.push(Lr("nameValue",{markerType:"subItem",markerColor:n,name:f.displayName,value:c,valueType:f.type})):(s.push(c),l.push(f.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Hs=it();function zy(e,t){return e.getName(t)||e.getId(t)}var J0="__universalTransitionEnabled",sb=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,i,n){this.seriesIndex=this.componentIndex,this.dataTask=yv({count:Bwe,reset:Fwe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,n);var a=Hs(this).sourceManager=new o9(this);a.prepareSource();var o=this.getInitialData(r,n);gk(o,this),this.dataTask.context.data=o,Hs(this).dataBeforeProcessed=o,vk(this),this._initSelectedMapFromData(o)},t.prototype.mergeDefaultAndTheme=function(r,i){var n=og(this),a=n?gf(r):{},o=this.subType;nt.hasClass(o)&&(o+="Series"),Ue(r,i.getTheme().get(this.subType)),Ue(r,this.getDefaultOption()),Lh(r,"label",["show"]),this.fillDataTextStyle(r.data),n&&Fl(r,a,n)},t.prototype.mergeOption=function(r,i){r=Ue(this.option,r,!0),this.fillDataTextStyle(r.data);var n=og(this);n&&Fl(this.option,r,n);var a=Hs(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(r,i);gk(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Hs(this).dataBeforeProcessed=o,vk(this),this._initSelectedMapFromData(o)},t.prototype.fillDataTextStyle=function(r){if(r&&!hn(r))for(var i=["show"],n=0;n<r.length;n++)r[n]&&r[n].label&&Lh(r[n],"label",i)},t.prototype.getInitialData=function(r,i){},t.prototype.appendData=function(r){var i=this.getRawData();i.appendData(r.data)},t.prototype.getData=function(r){var i=GA(this);if(i){var n=i.context.data;return r==null?n:n.getLinkedData(r)}else return Hs(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var i=GA(this);if(i){var n=i.context;n.outputData=r,i!==this.dataTask&&(n.data=r)}Hs(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return Me(r)},t.prototype.getSourceManager=function(){return Hs(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Hs(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,i,n){return p9({series:this,dataIndex:r,multipleSeries:i})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(at.node&&!(r&&r.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,i,n){var a=this.ecModel,o=mL.prototype.getColorFromPalette.call(this,r,i,n);return o||(o=a.getColorFromPalette(r,i,n)),o},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,i){this._innerSelect(this.getData(i),r)},t.prototype.unselect=function(r,i){var n=this.option.selectedMap;if(n){var a=this.option.selectedMode,o=this.getData(i);if(a==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=zy(o,l);n[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,i){for(var n=[],a=0;a<r.length;a++)n[0]=r[a],this.isSelected(r[a],i)?this.unselect(n,i):this.select(n,i)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,i=Ze(r),n=[],a=0;a<i.length;a++){var o=r[i[a]];o>=0&&n.push(o)}return n},t.prototype.isSelected=function(r,i){var n=this.option.selectedMap;if(!n)return!1;var a=this.getData(i);return(n==="all"||n[zy(a,r)])&&!a.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[J0])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,i){var n,a,o=this.option,s=o.selectedMode,l=i.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){Pe(o.selectedMap)||(o.selectedMap={});for(var u=o.selectedMap,h=0;h<l;h++){var c=i[h],d=zy(r,c);u[d]=!0,this._selectedDataIndicesMap[d]=r.getRawIndex(c)}}else if(s==="single"||s===!0){var f=i[l-1],d=zy(r,f);o.selectedMap=(n={},n[d]=!0,n),this._selectedDataIndicesMap=(a={},a[d]=r.getRawIndex(f),a)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var i=[];r.hasItemOption&&r.each(function(n){var a=r.getRawDataItem(n);a&&a.selected&&i.push(n)}),i.length>0&&this._innerSelect(r,i)}},t.registerClass=function(r){return nt.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(nt);gr(sb,bL);gr(sb,mL);xW(sb,nt);function vk(e){var t=e.name;XP(e)||(e.name=kwe(e)||t)}function kwe(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),i=[];return I(r,function(n){var a=t.getDimensionInfo(n);a.displayName&&i.push(a.displayName)}),i.join(" ")}function Bwe(e){return e.model.getRawData().count()}function Fwe(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Vwe}function Vwe(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function gk(e,t){I(i_(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,Ne(Uwe,t))})}function Uwe(e,t){var r=GA(e);return r&&r.setOutputEnd((t||this).count()),t}function GA(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var i=r.currentTask;if(i){var n=i.agentStubMap;n&&(i=n.get(e.uid))}return i}}const $t=sb;var SL=function(){function e(){this.group=new Ie,this.uid=pf("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i,n){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,i,n){},e.prototype.updateLayout=function(t,r,i,n){},e.prototype.updateVisual=function(t,r,i,n){},e.prototype.toggleBlurSeries=function(t,r,i){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();ZP(SL);Gx(SL);const Kt=SL;function _f(){var e=it();return function(t){var r=e(t),i=t.pipelineContext,n=!!r.large,a=!!r.progressiveRender,o=r.large=!!(i&&i.large),s=r.progressiveRender=!!(i&&i.progressiveRender);return(n!==o||a!==s)&&"reset"}}var v9=it(),Gwe=_f(),ML=function(){function e(){this.group=new Ie,this.uid=pf("viewChart"),this.renderTask=yv({plan:Hwe,reset:jwe}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i,n){},e.prototype.highlight=function(t,r,i,n){var a=t.getData(n&&n.dataType);a&&yk(a,n,"emphasis")},e.prototype.downplay=function(t,r,i,n){var a=t.getData(n&&n.dataType);a&&yk(a,n,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.updateLayout=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.updateVisual=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.eachRendered=function(t){Xl(this.group,t)},e.markUpdateMethod=function(t,r){v9(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function mk(e,t,r){e&&rg(e)&&(t==="emphasis"?xs:bs)(e,r)}function yk(e,t,r){var i=Eh(e,t),n=t&&t.highlightKey!=null?gxe(t.highlightKey):null;i!=null?I(Mt(i),function(a){mk(e.getItemGraphicEl(a),r,n)}):e.eachItemGraphicEl(function(a){mk(a,r,n)})}ZP(ML);Gx(ML);function Hwe(e){return Gwe(e.model)}function jwe(e){var t=e.model,r=e.ecModel,i=e.api,n=e.payload,a=t.pipelineContext.progressiveRender,o=e.view,s=n&&v9(n).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](t,r,i,n),Wwe[l]}var Wwe={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const kt=ML;var x_="\0__throttleOriginMethod",_k="\0__throttleRate",xk="\0__throttleType";function TL(e,t,r){var i,n=0,a=0,o=null,s,l,u,h;t=t||0;function c(){a=new Date().getTime(),o=null,e.apply(l,u||[])}var d=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];i=new Date().getTime(),l=this,u=f;var v=h||t,g=h||r;h=null,s=i-(g?n:a)-v,clearTimeout(o),g?o=setTimeout(c,v):s>=0?c():o=setTimeout(c,-s),n=i};return d.clear=function(){o&&(clearTimeout(o),o=null)},d.debounceNextCall=function(f){h=f},d}function xf(e,t,r,i){var n=e[t];if(n){var a=n[x_]||n,o=n[xk],s=n[_k];if(s!==r||o!==i){if(r==null||!i)return e[t]=a;n=e[t]=TL(a,r,i==="debounce"),n[x_]=a,n[xk]=i,n[_k]=r}return n}}function lg(e,t){var r=e[t];r&&r[x_]&&(r.clear&&r.clear(),e[t]=r[x_])}var bk=it(),wk={itemStyle:Ih(_8,!0),lineStyle:Ih(y8,!0)},$we={lineStyle:"stroke",itemStyle:"fill"};function g9(e,t){var r=e.visualStyleMapper||wk[t];return r||(console.warn("Unknown style type '"+t+"'."),wk.itemStyle)}function m9(e,t){var r=e.visualDrawType||$we[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var qwe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=e.getModel(i),a=g9(e,i),o=a(n),s=n.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=m9(e,i),u=o[l],h=Ae(u)?u:null,c=o.fill==="auto"||o.stroke==="auto";if(!o[l]||h||c){var d=e.getColorFromPalette(e.name,null,t.getSeriesCount());o[l]||(o[l]=d,r.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||Ae(o.fill)?d:o.fill,o.stroke=o.stroke==="auto"||Ae(o.stroke)?d:o.stroke}if(r.setVisual("style",o),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&h)return r.setVisual("colorFromPalette",!1),{dataEach:function(f,p){var v=e.getDataParams(p),g=ae({},o);g[l]=h(v),f.setItemVisual(p,"style",g)}}}},sp=new Nt,Xwe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=g9(e,i),a=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[i]){sp.option=l[i];var u=n(sp),h=o.ensureUniqueItemVisual(s,"style");ae(h,u),sp.option.decal&&(o.setItemVisual(s,"decal",sp.option.decal),sp.option.decal.dirty=!0),a in u&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},Ywe={performRawSeries:!0,overallReset:function(e){var t=Me();e.eachSeries(function(r){var i=r.getColorBy();if(!r.isColorBySeries()){var n=r.type+"-"+i,a=t.get(n);a||(a={},t.set(n,a)),bk(r).scope=a}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var i=r.getRawData(),n={},a=r.getData(),o=bk(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=m9(r,s);a.each(function(u){var h=a.getRawIndex(u);n[h]=u}),i.each(function(u){var h=n[u],c=a.getItemVisual(h,"colorFromPalette");if(c){var d=a.ensureUniqueItemVisual(h,"style"),f=i.getName(u)||u+"",p=i.count();d[l]=r.getColorFromPalette(f,o,p)}})}})}},Ny=Math.PI;function Zwe(e,t){t=t||{},De(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Ie,i=new rt({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(i);var n=new ot({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new rt({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(a);var o;return t.showSpinner&&(o=new aL({shape:{startAngle:-Ny/2,endAngle:-Ny/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:Ny*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:Ny*3/2}).delay(300).start("circularInOut"),r.add(o)),r.resize=function(){var s=n.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),h=e.getHeight()/2;t.showSpinner&&o.setShape({cx:u,cy:h}),a.setShape({x:u-l,y:h-l,width:l*2,height:l*2}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var Kwe=function(){function e(t,r,i,n){this._stageTaskMap=Me(),this.ecInstance=t,this.api=r,i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=i.concat(n)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(i){var n=i.overallTask;n&&n.dirty()})},e.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),n=i.context,a=!r&&i.progressiveEnabled&&(!n||n.progressiveRender)&&t.__idxInPipeline>i.blockIndex,o=a?i.step:null,s=n&&n.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var i=this._pipelineMap.get(t.uid),n=t.getData(),a=n.count(),o=i.progressiveEnabled&&r.incrementalPrepareRender&&a>=i.threshold,s=t.get("large")&&a>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=i.context={progressiveRender:o,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,i=r._pipelineMap=Me();t.eachSeries(function(n){var a=n.getProgressive(),o=n.uid;i.set(o,{id:o,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:a&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),r._pipe(n,n.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),i=this.api;I(this._allHandlers,function(n){var a=t.get(n.uid)||t.set(n.uid,{}),o="";wi(!(n.reset&&n.overallReset),o),n.reset&&this._createSeriesStageTask(n,a,r,i),n.overallReset&&this._createOverallStageTask(n,a,r,i)},this)},e.prototype.prepareView=function(t,r,i,n){var a=t.renderTask,o=a.context;o.model=r,o.ecModel=i,o.api=n,a.__block=!t.incrementalPrepareRender,this._pipe(r,a)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,i){this._performStageTasks(this._visualHandlers,t,r,i)},e.prototype._performStageTasks=function(t,r,i,n){n=n||{};var a=!1,o=this;I(t,function(l,u){if(!(n.visualType&&n.visualType!==l.visualType)){var h=o._stageTaskMap.get(l.uid),c=h.seriesTaskMap,d=h.overallTask;if(d){var f,p=d.agentStubMap;p.each(function(g){s(n,g)&&(g.dirty(),f=!0)}),f&&d.dirty(),o.updatePayload(d,i);var v=o.getPerformArgs(d,n.block);p.each(function(g){g.perform(v)}),d.perform(v)&&(a=!0)}else c&&c.each(function(g,m){s(n,g)&&g.dirty();var y=o.getPerformArgs(g,n.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(g.context.model),o.updatePayload(g,i),g.perform(y)&&(a=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(i){r=i.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,i,n){var a=this,o=r.seriesTaskMap,s=r.seriesTaskMap=Me(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?i.eachRawSeries(h):l?i.eachRawSeriesByType(l,h):u&&u(i,n).each(h);function h(c){var d=c.uid,f=s.set(d,o&&o.get(d)||yv({plan:rSe,reset:iSe,count:aSe}));f.context={model:c,ecModel:i,api:n,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(c,f)}},e.prototype._createOverallStageTask=function(t,r,i,n){var a=this,o=r.overallTask=r.overallTask||yv({reset:Jwe});o.context={ecModel:i,api:n,overallReset:t.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=Me(),u=t.seriesType,h=t.getTargetSeries,c=!0,d=!1,f="";wi(!t.createOnAllSeries,f),u?i.eachRawSeriesByType(u,p):h?h(i,n).each(p):(c=!1,I(i.getSeries(),p));function p(v){var g=v.uid,m=l.set(g,s&&s.get(g)||(d=!0,yv({reset:Qwe,onDirty:tSe})));m.context={model:v,overallProgress:c},m.agent=o,m.__block=c,a._pipe(v,m)}d&&o.dirty()},e.prototype._pipe=function(t,r){var i=t.uid,n=this._pipelineMap.get(i);!n.head&&(n.head=r),n.tail&&n.tail.pipe(r),n.tail=r,r.__idxInPipeline=n.count++,r.__pipeline=n},e.wrapStageHandler=function(t,r){return Ae(t)&&(t={overallReset:t,seriesType:oSe(t)}),t.uid=pf("stageHandler"),r&&(t.visualType=r),t},e}();function Jwe(e){e.overallReset(e.ecModel,e.api,e.payload)}function Qwe(e){return e.overallProgress&&eSe}function eSe(){this.agent.dirty(),this.getDownstream().dirty()}function tSe(){this.agent&&this.agent.dirty()}function rSe(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function iSe(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Mt(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?ce(t,function(r,i){return y9(i)}):nSe}var nSe=y9(0);function y9(e){return function(t,r){var i=r.data,n=r.resetDefines[e];if(n&&n.dataEach)for(var a=t.start;a<t.end;a++)n.dataEach(i,a);else n&&n.progress&&n.progress(t,i)}}function aSe(e){return e.data.count()}function oSe(e){b_=null;try{e(ug,_9)}catch{}return b_}var ug={},_9={},b_;x9(ug,j8);x9(_9,W8);ug.eachSeriesByType=ug.eachRawSeriesByType=function(e){b_=e};ug.eachComponent=function(e){e.mainType==="series"&&e.subType&&(b_=e.subType)};function x9(e,t){for(var r in t.prototype)e[r]=sr}const b9=Kwe;var Sk=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const sSe={color:Sk,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Sk]};var di="#B9B8CE",Mk="#100C2A",ky=function(){return{axisLine:{lineStyle:{color:di}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},Tk=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],w9={darkMode:!0,color:Tk,backgroundColor:Mk,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:di}},textStyle:{color:di},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:di}},dataZoom:{borderColor:"#71708A",textStyle:{color:di},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:di}},timeline:{lineStyle:{color:di},label:{color:di},controlStyle:{color:di,borderColor:di}},calendar:{itemStyle:{color:Mk},dayLabel:{color:di},monthLabel:{color:di},yearLabel:{color:di}},timeAxis:ky(),logAxis:ky(),valueAxis:ky(),categoryAxis:ky(),line:{symbol:"circle"},graph:{color:Tk},gauge:{title:{color:di},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:di},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};w9.categoryAxis.splitLine.show=!1;const lSe=w9;var uSe=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},i={},n={};if(ge(t)){var a=ho(t);r.mainType=a.main||null,r.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};I(t,function(l,u){for(var h=!1,c=0;c<o.length;c++){var d=o[c],f=u.lastIndexOf(d);if(f>0&&f===u.length-d.length){var p=u.slice(0,f);p!=="data"&&(r.mainType=p,r[d.toLowerCase()]=l,h=!0)}}s.hasOwnProperty(u)&&(i[u]=l,h=!0),h||(n[u]=l)})}return{cptQuery:r,dataQuery:i,otherQuery:n}},e.prototype.filter=function(t,r){var i=this.eventInfo;if(!i)return!0;var n=i.targetEl,a=i.packedEvent,o=i.model,s=i.view;if(!o||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return h(l,o,"mainType")&&h(l,o,"subType")&&h(l,o,"index","componentIndex")&&h(l,o,"name")&&h(l,o,"id")&&h(u,a,"name")&&h(u,a,"dataIndex")&&h(u,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,n,a));function h(c,d,f,p){return c[f]==null||d[p||f]===c[f]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),HA=["symbol","symbolSize","symbolRotate","symbolOffset"],Ak=HA.concat(["symbolKeepAspect"]),hSe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var i={},n={},a=!1,o=0;o<HA.length;o++){var s=HA[o],l=e.get(s);Ae(l)?(a=!0,n[s]=l):i[s]=l}if(i.symbol=i.symbol||e.defaultSymbol,r.setVisual(ae({legendIcon:e.legendIcon||i.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},i)),t.isSeriesFiltered(e))return;var u=Ze(n);function h(c,d){for(var f=e.getRawValue(d),p=e.getDataParams(d),v=0;v<u.length;v++){var g=u[v];c.setItemVisual(d,g,n[g](f,p))}}return{dataEach:a?h:null}}},cSe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function i(n,a){for(var o=n.getItemModel(a),s=0;s<Ak.length;s++){var l=Ak[s],u=o.getShallow(l,!0);u!=null&&n.setItemVisual(a,l,u)}}return{dataEach:r.hasItemOption?i:null}}};function AL(e,t,r){switch(r){case"color":var i=e.getItemVisual(t,"style");return i[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function Wg(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function S9(e,t,r,i){switch(r){case"color":var n=e.ensureUniqueItemVisual(t,"style");n[e.getVisual("drawType")]=i,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,i);break}}function M9(e,t){function r(i,n){var a=[];return i.eachComponent({mainType:"series",subType:e,query:n},function(o){a.push(o.seriesIndex)}),a}I([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(i){t(i[0],function(n,a,o){n=ae({},n),o.dispatchAction(ae(n,{type:i[1],seriesIndex:r(a,n)}))})})}function Ac(e,t,r,i,n){var a=e+t;r.isSilent(a)||i.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,u=n.selected,h=0;h<u.length;h++)if(u[h].seriesIndex===s){var c=o.getData(),d=Eh(c,n.fromActionPayload);r.trigger(a,{type:a,seriesId:o.id,name:ue(d)?c.getName(d[0]):c.getName(d),selected:ge(l)?l:ae({},l)})}})}function dSe(e,t,r){e.on("selectchanged",function(i){var n=r.getModel();i.isFromClick?(Ac("map","selectchanged",t,n,i),Ac("pie","selectchanged",t,n,i)):i.fromAction==="select"?(Ac("map","selected",t,n,i),Ac("pie","selected",t,n,i)):i.fromAction==="unselect"&&(Ac("map","unselected",t,n,i),Ac("pie","unselected",t,n,i))})}function rh(e,t,r){for(var i;e&&!(t(e)&&(i=e,r));)e=e.__hostTarget||e.parent;return i}var fSe=Math.round(Math.random()*9),pSe=typeof Object.defineProperty=="function",vSe=function(){function e(){this._id="__ec_inner_"+fSe++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var i=this._guard(t);return pSe?Object.defineProperty(i,this._id,{value:r,enumerable:!1,configurable:!0}):i[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const gSe=vSe;var mSe=qe.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,a=t.height/2;e.moveTo(r,i-a),e.lineTo(r+n,i+a),e.lineTo(r-n,i+a),e.closePath()}}),ySe=qe.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,a=t.height/2;e.moveTo(r,i-a),e.lineTo(r+n,i),e.lineTo(r,i+a),e.lineTo(r-n,i),e.closePath()}}),_Se=qe.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,i=t.y,n=t.width/5*3,a=Math.max(n,t.height),o=n/2,s=o*o/(a-o),l=i-a+o+s,u=Math.asin(s/o),h=Math.cos(u)*o,c=Math.sin(u),d=Math.cos(u),f=o*.6,p=o*.7;e.moveTo(r-h,l+s),e.arc(r,l,o,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+h-c*f,l+s+d*f,r,i-p,r,i),e.bezierCurveTo(r,i-p,r-h+c*f,l+s+d*f,r-h,l+s),e.closePath()}}),xSe=qe.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,i=t.width,n=t.x,a=t.y,o=i/3*2;e.moveTo(n,a),e.lineTo(n+o,a+r),e.lineTo(n,a+r/4*3),e.lineTo(n-o,a+r),e.lineTo(n,a),e.closePath()}}),bSe={line:Nr,rect:rt,roundRect:rt,square:rt,circle:To,diamond:ySe,pin:_Se,arrow:xSe,triangle:mSe},wSe={line:function(e,t,r,i,n){n.x1=e,n.y1=t+i/2,n.x2=e+r,n.y2=t+i/2},rect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i},roundRect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i,n.r=Math.min(r,i)/4},square:function(e,t,r,i,n){var a=Math.min(r,i);n.x=e,n.y=t,n.width=a,n.height=a},circle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.r=Math.min(r,i)/2},diamond:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i},pin:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},arrow:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},triangle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i}},w_={};I(bSe,function(e,t){w_[t]=new e});var SSe=qe.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var i=h_(e,t,r),n=this.shape;return n&&n.symbolType==="pin"&&t.position==="inside"&&(i.y=r.y+r.height*.4),i},buildPath:function(e,t,r){var i=t.symbolType;if(i!=="none"){var n=w_[i];n||(i="rect",n=w_[i]),wSe[i](t.x,t.y,t.width,t.height,n.shape),n.buildPath(e,n.shape,r)}}});function MSe(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function vr(e,t,r,i,n,a,o){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=u8(e.slice(8),new Ge(t,r,i,n),o?"center":"cover"):e.indexOf("path://")===0?l=Zx(e.slice(7),{},new Ge(t,r,i,n),o?"center":"cover"):l=new SSe({shape:{symbolType:e,x:t,y:r,width:i,height:n}}),l.__isEmptyBrush=s,l.setColor=MSe,a&&l.setColor(a),l}function $g(e){return ue(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function bf(e,t){if(e!=null)return ue(e)||(e=[e,e]),[ve(e[0],t[0])||0,ve(Ve(e[1],e[0]),t[1])||0]}function ih(e){return isFinite(e)}function TSe(e,t,r){var i=t.x==null?0:t.x,n=t.x2==null?1:t.x2,a=t.y==null?0:t.y,o=t.y2==null?0:t.y2;t.global||(i=i*r.width+r.x,n=n*r.width+r.x,a=a*r.height+r.y,o=o*r.height+r.y),i=ih(i)?i:0,n=ih(n)?n:1,a=ih(a)?a:0,o=ih(o)?o:0;var s=e.createLinearGradient(i,a,n,o);return s}function ASe(e,t,r){var i=r.width,n=r.height,a=Math.min(i,n),o=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(o=o*i+r.x,s=s*n+r.y,l=l*a),o=ih(o)?o:.5,s=ih(s)?s:.5,l=l>=0&&ih(l)?l:.5;var u=e.createRadialGradient(o,s,0,o,s,l);return u}function jA(e,t,r){for(var i=t.type==="radial"?ASe(e,t,r):TSe(e,t,r),n=t.colorStops,a=0;a<n.length;a++)i.addColorStop(n[a].offset,n[a].color);return i}function CSe(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function By(e){return parseInt(e,10)}function id(e,t,r){var i=["width","height"][t],n=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(r[i]!=null&&r[i]!=="auto")return parseFloat(r[i]);var s=document.defaultView.getComputedStyle(e);return(e[n]||By(s[i])||By(e.style[i]))-(By(s[a])||0)-(By(s[o])||0)|0}function DSe(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:st(e)?[e]:ue(e)?e:null}function CL(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&DSe(t.lineDash,t.lineWidth),i=t.lineDashOffset;if(r){var n=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;n&&n!==1&&(r=ce(r,function(a){return a/n}),i/=n)}return[r,i]}var PSe=new Mo(!0);function S_(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function Ck(e){return typeof e=="string"&&e!=="none"}function M_(e){var t=e.fill;return t!=null&&t!=="none"}function Dk(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function Pk(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function WA(e,t,r){var i=KP(t.image,t.__image,r);if(Hx(i)){var n=e.createPattern(i,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*B0),a.scaleSelf(t.scaleX||1,t.scaleY||1),n.setTransform(a)}return n}}function LSe(e,t,r,i){var n,a=S_(r),o=M_(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var h=t.path||PSe,c=t.__dirty;if(!i){var d=r.fill,f=r.stroke,p=o&&!!d.colorStops,v=a&&!!f.colorStops,g=o&&!!d.image,m=a&&!!f.image,y=void 0,_=void 0,x=void 0,w=void 0,b=void 0;(p||v)&&(b=t.getBoundingRect()),p&&(y=c?jA(e,d,b):t.__canvasFillGradient,t.__canvasFillGradient=y),v&&(_=c?jA(e,f,b):t.__canvasStrokeGradient,t.__canvasStrokeGradient=_),g&&(x=c||!t.__canvasFillPattern?WA(e,d,t):t.__canvasFillPattern,t.__canvasFillPattern=x),m&&(w=c||!t.__canvasStrokePattern?WA(e,f,t):t.__canvasStrokePattern,t.__canvasStrokePattern=x),p?e.fillStyle=y:g&&(x?e.fillStyle=x:o=!1),v?e.strokeStyle=_:m&&(w?e.strokeStyle=w:a=!1)}var S=t.getGlobalScale();h.setScale(S[0],S[1],t.segmentIgnoreThreshold);var M,A;e.setLineDash&&r.lineDash&&(n=CL(t),M=n[0],A=n[1]);var T=!0;(u||c&Gc)&&(h.setDPR(e.dpr),l?h.setContext(null):(h.setContext(e),T=!1),h.reset(),t.buildPath(h,t.shape,i),h.toStatic(),t.pathUpdated()),T&&h.rebuildPath(e,l?s:1),M&&(e.setLineDash(M),e.lineDashOffset=A),i||(r.strokeFirst?(a&&Pk(e,r),o&&Dk(e,r)):(o&&Dk(e,r),a&&Pk(e,r))),M&&e.setLineDash([])}function ESe(e,t,r){var i=t.__image=KP(r.image,t.__image,t,t.onload);if(!(!i||!Hx(i))){var n=r.x||0,a=r.y||0,o=t.getWidth(),s=t.getHeight(),l=i.width/i.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=i.width,s=i.height),r.sWidth&&r.sHeight){var u=r.sx||0,h=r.sy||0;e.drawImage(i,u,h,r.sWidth,r.sHeight,n,a,o,s)}else if(r.sx&&r.sy){var u=r.sx,h=r.sy,c=o-u,d=s-h;e.drawImage(i,u,h,c,d,n,a,o,s)}else e.drawImage(i,n,a,o,s)}}function ISe(e,t,r){var i,n=r.text;if(n!=null&&(n+=""),n){e.font=r.font||zl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var a=void 0,o=void 0;e.setLineDash&&r.lineDash&&(i=CL(t),a=i[0],o=i[1]),a&&(e.setLineDash(a),e.lineDashOffset=o),r.strokeFirst?(S_(r)&&e.strokeText(n,r.x,r.y),M_(r)&&e.fillText(n,r.x,r.y)):(M_(r)&&e.fillText(n,r.x,r.y),S_(r)&&e.strokeText(n,r.x,r.y)),a&&e.setLineDash([])}}var Lk=["shadowBlur","shadowOffsetX","shadowOffsetY"],Ek=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function T9(e,t,r,i,n){var a=!1;if(!i&&(r=r||{},t===r))return!1;if(i||t.opacity!==r.opacity){Fi(e,n),a=!0;var o=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(o)?gh.opacity:o}(i||t.blend!==r.blend)&&(a||(Fi(e,n),a=!0),e.globalCompositeOperation=t.blend||gh.blend);for(var s=0;s<Lk.length;s++){var l=Lk[s];(i||t[l]!==r[l])&&(a||(Fi(e,n),a=!0),e[l]=e.dpr*(t[l]||0))}return(i||t.shadowColor!==r.shadowColor)&&(a||(Fi(e,n),a=!0),e.shadowColor=t.shadowColor||gh.shadowColor),a}function Ik(e,t,r,i,n){var a=hg(t,n.inHover),o=i?null:r&&hg(r,n.inHover)||{};if(a===o)return!1;var s=T9(e,a,o,i,n);if((i||a.fill!==o.fill)&&(s||(Fi(e,n),s=!0),Ck(a.fill)&&(e.fillStyle=a.fill)),(i||a.stroke!==o.stroke)&&(s||(Fi(e,n),s=!0),Ck(a.stroke)&&(e.strokeStyle=a.stroke)),(i||a.opacity!==o.opacity)&&(s||(Fi(e,n),s=!0),e.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(Fi(e,n),s=!0),e.lineWidth=u)}for(var h=0;h<Ek.length;h++){var c=Ek[h],d=c[0];(i||a[d]!==o[d])&&(s||(Fi(e,n),s=!0),e[d]=a[d]||c[1])}return s}function OSe(e,t,r,i,n){return T9(e,hg(t,n.inHover),r&&hg(r,n.inHover),i,n)}function A9(e,t){var r=t.transform,i=e.dpr||1;r?e.setTransform(i*r[0],i*r[1],i*r[2],i*r[3],i*r[4],i*r[5]):e.setTransform(i,0,0,i,0,0)}function RSe(e,t,r){for(var i=!1,n=0;n<e.length;n++){var a=e[n];i=i||a.isZeroArea(),A9(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}r.allClipped=i}function zSe(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var Ok=1,Rk=2,zk=3,Nk=4;function NSe(e){var t=M_(e),r=S_(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function Fi(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function hg(e,t){return t&&e.__hoverStyle||e.style}function C9(e,t){nh(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function nh(e,t,r,i){var n=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~rn,t.__isRendered=!1;return}var a=t.__clipPaths,o=r.prevElClipPaths,s=!1,l=!1;if((!o||CSe(a,o))&&(o&&o.length&&(Fi(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),a&&a.length&&(Fi(e,r),e.save(),RSe(a,e,r),s=!0),r.prevElClipPaths=a),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var h=t instanceof qe&&t.autoBatch&&NSe(t.style);s||zSe(n,u.transform)?(Fi(e,r),A9(e,t)):h||Fi(e,r);var c=hg(t,r.inHover);t instanceof qe?(r.lastDrawType!==Ok&&(l=!0,r.lastDrawType=Ok),Ik(e,t,u,l,r),(!h||!r.batchFill&&!r.batchStroke)&&e.beginPath(),LSe(e,t,c,h),h&&(r.batchFill=c.fill||"",r.batchStroke=c.stroke||"")):t instanceof eg?(r.lastDrawType!==zk&&(l=!0,r.lastDrawType=zk),Ik(e,t,u,l,r),ISe(e,t,c)):t instanceof $r?(r.lastDrawType!==Rk&&(l=!0,r.lastDrawType=Rk),OSe(e,t,u,l,r),ESe(e,t,c)):t.getTemporalDisplayables&&(r.lastDrawType!==Nk&&(l=!0,r.lastDrawType=Nk),kSe(e,t,r)),h&&i&&Fi(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function kSe(e,t,r){var i=t.getDisplayables(),n=t.getTemporalDisplayables();e.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},o,s;for(o=t.getCursor(),s=i.length;o<s;o++){var l=i[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),nh(e,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,h=n.length;u<h;u++){var l=n[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),nh(e,l,a,u===h-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var YS=new gSe,kk=new kg(100),Bk=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function kd(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),i=t.getZr(),n=i.painter.type==="svg";e.dirty&&YS.delete(e);var a=YS.get(e);if(a)return a;var o=De(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=n?1:1/r,YS.set(e,s),e.dirty=!1,s;function l(u){for(var h=[r],c=!0,d=0;d<Bk.length;++d){var f=o[Bk[d]];if(f!=null&&!ue(f)&&!ge(f)&&!st(f)&&typeof f!="boolean"){c=!1;break}h.push(f)}var p;if(c){p=h.join(",")+(n?"-svg":"");var v=kk.get(p);v&&(n?u.svgElement=v:u.image=v)}var g=P9(o.dashArrayX),m=BSe(o.dashArrayY),y=D9(o.symbol),_=FSe(g),x=L9(m),w=!n&&Nl.createCanvas(),b=n&&{tag:"g",attrs:{},key:"dcl",children:[]},S=A(),M;w&&(w.width=S.width*r,w.height=S.height*r,M=w.getContext("2d")),T(),c&&kk.put(p,w||b),u.image=w,u.svgElement=b,u.svgWidth=S.width,u.svgHeight=S.height;function A(){for(var C=1,D=0,P=_.length;D<P;++D)C=Qz(C,_[D]);for(var E=1,D=0,P=y.length;D<P;++D)E=Qz(E,y[D].length);C*=E;var O=x*_.length*y.length;return{width:Math.max(1,Math.min(C,o.maxTileWidth)),height:Math.max(1,Math.min(O,o.maxTileHeight))}}function T(){M&&(M.clearRect(0,0,w.width,w.height),o.backgroundColor&&(M.fillStyle=o.backgroundColor,M.fillRect(0,0,w.width,w.height)));for(var C=0,D=0;D<m.length;++D)C+=m[D];if(C<=0)return;for(var P=-x,E=0,O=0,z=0;P<S.height;){if(E%2===0){for(var B=O/2%y.length,N=0,F=0,G=0;N<S.width*2;){for(var H=0,D=0;D<g[z].length;++D)H+=g[z][D];if(H<=0)break;if(F%2===0){var $=(1-o.symbolSize)*.5,Z=N+g[z][F]*$,X=P+m[E]*$,ne=g[z][F]*o.symbolSize,te=m[E]*o.symbolSize,U=G/2%y[B].length;W(Z,X,ne,te,y[B][U])}N+=g[z][F],++G,++F,F===g[z].length&&(F=0)}++z,z===g.length&&(z=0)}P+=m[E],++O,++E,E===m.length&&(E=0)}function W(j,K,ee,R,k){var V=n?1:r,q=vr(k,j*V,K*V,ee*V,R*V,o.color,o.symbolKeepAspect);if(n){var Q=i.painter.renderOneToVNode(q);Q&&b.children.push(Q)}else C9(M,q)}}}}function D9(e){if(!e||e.length===0)return[["rect"]];if(ge(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!ge(e[r])){t=!1;break}if(t)return D9([e]);for(var i=[],r=0;r<e.length;++r)ge(e[r])?i.push([e[r]]):i.push(e[r]);return i}function P9(e){if(!e||e.length===0)return[[0,0]];if(st(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,i=0;i<e.length;++i)if(!st(e[i])){r=!1;break}if(r)return P9([e]);for(var n=[],i=0;i<e.length;++i)if(st(e[i])){var t=Math.ceil(e[i]);n.push([t,t])}else{var t=ce(e[i],function(s){return Math.ceil(s)});t.length%2===1?n.push(t.concat(t)):n.push(t)}return n}function BSe(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(st(e)){var t=Math.ceil(e);return[t,t]}var r=ce(e,function(i){return Math.ceil(i)});return e.length%2?r.concat(r):r}function FSe(e){return ce(e,function(t){return L9(t)})}function L9(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function VSe(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var i=r.getData();i.hasItemVisual()&&i.each(function(o){var s=i.getItemVisual(o,"decal");if(s){var l=i.ensureUniqueItemVisual(o,"style");l.decal=kd(s,t)}});var n=i.getVisual("decal");if(n){var a=i.getVisual("style");a.decal=kd(n,t)}}})}var USe=new jn;const oa=USe;var E9={};function GSe(e,t){E9[e]=t}function HSe(e){return E9[e]}var jSe=1,WSe=800,$Se=900,qSe=1e3,XSe=2e3,YSe=5e3,I9=1e3,ZSe=1100,DL=2e3,O9=3e3,KSe=4e3,lb=4500,JSe=4600,QSe=5e3,e2e=6e3,R9=7e3,t2e={PROCESSOR:{FILTER:qSe,SERIES_FILTER:WSe,STATISTIC:YSe},VISUAL:{LAYOUT:I9,PROGRESSIVE_LAYOUT:ZSe,GLOBAL:DL,CHART:O9,POST_CHART_LAYOUT:JSe,COMPONENT:KSe,BRUSH:QSe,CHART_ITEM:lb,ARIA:e2e,DECAL:R9}},Zr="__flagInMainProcess",Di="__pendingUpdate",ZS="__needsUpdateStatus",Fk=/^[a-zA-Z0-9_]+$/,KS="__connectUpdateStatus",Vk=0,r2e=1,i2e=2;function z9(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return k9(this,e,t)}}function N9(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return k9(this,e,t)}}function k9(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),jn.prototype[t].apply(e,r)}var B9=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(jn),F9=B9.prototype;F9.on=N9("on");F9.off=N9("off");var Cc,JS,Fy,js,QS,e2,t2,lp,up,Uk,Gk,r2,Hk,Vy,jk,V9,gn,Wk,U9=function(e){Y(t,e);function t(r,i,n){var a=e.call(this,new uSe)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],n=n||{},ge(i)&&(i=G9[i]),a._dom=r;var o="canvas",s="auto",l=!1,u=a._zr=Yz(r,{renderer:n.renderer||o,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:Ve(n.useDirtyRect,l),useCoarsePointer:Ve(n.useCoarsePointer,s),pointerSize:n.pointerSize});a._ssr=n.ssr,a._throttledZrFlush=TL(me(u.flush,u),17),i=Ee(i),i&&q8(i,!0),a._theme=i,a._locale=gbe(n.locale||x8),a._coordSysMgr=new jg;var h=a._api=jk(a);function c(d,f){return d.__prio-f.__prio}return U0(A_,c),U0($A,c),a._scheduler=new b9(a,h,$A,A_),a._messageCenter=new B9,a._initEvents(),a.resize=me(a.resize,a),u.animation.on("frame",a._onframe,a),Uk(u,a),Gk(u,a),r_(a),a}return t.prototype._onframe=function(){if(!this._disposed){Wk(this);var r=this._scheduler;if(this[Di]){var i=this[Di].silent;this[Zr]=!0;try{Cc(this),js.update.call(this,null,this[Di].updateParams)}catch(l){throw this[Zr]=!1,this[Di]=null,l}this._zr.flush(),this[Zr]=!1,this[Di]=null,lp.call(this,i),up.call(this,i)}else if(r.unfinished){var n=jSe,a=this._model,o=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(a),r.performDataProcessorTasks(a),e2(this,a),r.performVisualTasks(a),Vy(this,this._model,o,"remain",{}),n-=+new Date-s}while(n>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,i,n){if(!this[Zr]){if(this._disposed){this.id;return}var a,o,s;if(Pe(i)&&(n=i.lazyUpdate,a=i.silent,o=i.replaceMerge,s=i.transition,i=i.notMerge),this[Zr]=!0,!this._model||i){var l=new Xbe(this._api),u=this._theme,h=this._model=new j8;h.scheduler=this._scheduler,h.ssr=this._ssr,h.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:o},qA);var c={seriesTransition:s,optionChanged:!0};if(n)this[Di]={silent:a,updateParams:c},this[Zr]=!1,this.getZr().wakeUp();else{try{Cc(this),js.update.call(this,null,c)}catch(d){throw this[Di]=null,this[Zr]=!1,d}this._ssr||this._zr.flush(),this[Di]=null,this[Zr]=!1,lp.call(this,a),up.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||at.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var i=this._zr.painter;return i.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(at.svgSupported){var r=this._zr,i=r.storage.getDisplayList();return I(i,function(n){n.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var i=r.excludeComponents,n=this._model,a=[],o=this;I(i,function(l){n.eachComponent({mainType:l},function(u){var h=o._componentsMap[u.__viewId];h.group.ignore||(a.push(h),h.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return I(a,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var i=r.type==="svg",n=this.group,a=Math.min,o=Math.max,s=1/0;if($k[n]){var l=s,u=s,h=-s,c=-s,d=[],f=r&&r.pixelRatio||this.getDevicePixelRatio();I(xv,function(_,x){if(_.group===n){var w=i?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas(Ee(r)),b=_.getDom().getBoundingClientRect();l=a(b.left,l),u=a(b.top,u),h=o(b.right,h),c=o(b.bottom,c),d.push({dom:w,left:b.left,top:b.top})}}),l*=f,u*=f,h*=f,c*=f;var p=h-l,v=c-u,g=Nl.createCanvas(),m=Yz(g,{renderer:i?"svg":"canvas"});if(m.resize({width:p,height:v}),i){var y="";return I(d,function(_){var x=_.left-l,w=_.top-u;y+='<g transform="translate('+x+","+w+')">'+_.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&m.painter.setBackgroundColor(r.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return r.connectedBackgroundColor&&m.add(new rt({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),I(d,function(_){var x=new $r({style:{x:_.left*f-l,y:_.top*f-u,image:_.dom}});m.add(x)}),m.refreshImmediately(),g.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,i){return QS(this,"convertToPixel",r,i)},t.prototype.convertFromPixel=function(r,i){return QS(this,"convertFromPixel",r,i)},t.prototype.containPixel=function(r,i){if(this._disposed){this.id;return}var n=this._model,a,o=fv(n,r);return I(o,function(s,l){l.indexOf("Models")>=0&&I(s,function(u){var h=u.coordinateSystem;if(h&&h.containPoint)a=a||!!h.containPoint(i);else if(l==="seriesModels"){var c=this._chartsMap[u.__viewId];c&&c.containPoint&&(a=a||c.containPoint(i,u))}},this)},this),!!a},t.prototype.getVisual=function(r,i){var n=this._model,a=fv(n,r,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?AL(s,l,i):Wg(s,i)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;I(n2e,function(i){var n=function(a){var o=r.getModel(),s=a.target,l,u=i==="globalout";if(u?l={}:s&&rh(s,function(p){var v=Re(p);if(v&&v.dataIndex!=null){var g=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return l=g&&g.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=ae({},v.eventData),!0},!0),l){var h=l.componentType,c=l.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",c=l.seriesIndex);var d=h&&c!=null&&o.getComponent(h,c),f=d&&r[d.mainType==="series"?"_chartsMap":"_componentsMap"][d.__viewId];l.event=a,l.type=i,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:d,view:f},r.trigger(i,l)}};n.zrEventfulCallAtLast=!0,r._zr.on(i,n,r)}),I(_v,function(i,n){r._messageCenter.on(n,function(a){this.trigger(n,a)},r)}),I(["selectchanged"],function(i){r._messageCenter.on(i,function(n){this.trigger(i,n)},r)}),dSe(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&mW(this.getDom(),LL,"");var i=this,n=i._api,a=i._model;I(i._componentsViews,function(o){o.dispose(a,n)}),I(i._chartsViews,function(o){o.dispose(a,n)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete xv[i.id]},t.prototype.resize=function(r){if(!this[Zr]){if(this._disposed){this.id;return}this._zr.resize(r);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var n=i.resetOption("media"),a=r&&r.silent;this[Di]&&(a==null&&(a=this[Di].silent),n=!0,this[Di]=null),this[Zr]=!0;try{n&&Cc(this),js.update.call(this,{type:"resize",animation:ae({duration:0},r&&r.animation)})}catch(o){throw this[Zr]=!1,o}this[Zr]=!1,lp.call(this,a),up.call(this,a)}}},t.prototype.showLoading=function(r,i){if(this._disposed){this.id;return}if(Pe(r)&&(i=r,r=""),r=r||"default",this.hideLoading(),!!XA[r]){var n=XA[r](this._api,i),a=this._zr;this._loadingFX=n,a.add(n)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var i=ae({},r);return i.type=_v[r.type],i},t.prototype.dispatchAction=function(r,i){if(this._disposed){this.id;return}if(Pe(i)||(i={silent:!!i}),!!T_[r.type]&&this._model){if(this[Zr]){this._pendingActions.push(r);return}var n=i.silent;t2.call(this,r,n);var a=i.flush;a?this._zr.flush():a!==!1&&at.browser.weChat&&this._throttledZrFlush(),lp.call(this,n),up.call(this,n)}},t.prototype.updateLabelLayout=function(){oa.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var i=r.seriesIndex,n=this.getModel(),a=n.getSeriesByIndex(i);a.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Cc=function(c){var d=c._scheduler;d.restorePipelines(c._model),d.prepareStageTasks(),JS(c,!0),JS(c,!1),d.plan()},JS=function(c,d){for(var f=c._model,p=c._scheduler,v=d?c._componentsViews:c._chartsViews,g=d?c._componentsMap:c._chartsMap,m=c._zr,y=c._api,_=0;_<v.length;_++)v[_].__alive=!1;d?f.eachComponent(function(b,S){b!=="series"&&x(S)}):f.eachSeries(x);function x(b){var S=b.__requireNewView;b.__requireNewView=!1;var M="_ec_"+b.id+"_"+b.type,A=!S&&g[M];if(!A){var T=ho(b.type),C=d?Kt.getClass(T.main,T.sub):kt.getClass(T.sub);A=new C,A.init(f,y),g[M]=A,v.push(A),m.add(A.group)}b.__viewId=A.__id=M,A.__alive=!0,A.__model=b,A.group.__ecComponentInfo={mainType:b.mainType,index:b.componentIndex},!d&&p.prepareView(A,b,f,y)}for(var _=0;_<v.length;){var w=v[_];w.__alive?_++:(!d&&w.renderTask.dispose(),m.remove(w.group),w.dispose(f,y),v.splice(_,1),g[w.__id]===w&&delete g[w.__id],w.__id=w.group.__ecComponentInfo=null)}},Fy=function(c,d,f,p,v){var g=c._model;if(g.setUpdatePayload(f),!p){I([].concat(c._componentsViews).concat(c._chartsViews),w);return}var m={};m[p+"Id"]=f[p+"Id"],m[p+"Index"]=f[p+"Index"],m[p+"Name"]=f[p+"Name"];var y={mainType:p,query:m};v&&(y.subType=v);var _=f.excludeSeriesId,x;_!=null&&(x=Me(),I(Mt(_),function(b){var S=xr(b,null);S!=null&&x.set(S,!0)})),g&&g.eachComponent(y,function(b){var S=x&&x.get(b.id)!=null;if(!S)if(CN(f))if(b instanceof $t)f.type===mh&&!f.notBlur&&!b.get(["emphasis","disabled"])&&lxe(b,f,c._api);else{var M=rL(b.mainType,b.componentIndex,f.name,c._api),A=M.focusSelf,T=M.dispatchers;f.type===mh&&A&&!f.notBlur&&DA(b.mainType,b.componentIndex,c._api),T&&I(T,function(C){f.type===mh?xs(C):bs(C)})}else LA(f)&&b instanceof $t&&(cxe(b,f,c._api),TN(b),gn(c))},c),g&&g.eachComponent(y,function(b){var S=x&&x.get(b.id)!=null;S||w(c[p==="series"?"_chartsMap":"_componentsMap"][b.__viewId])},c);function w(b){b&&b.__alive&&b[d]&&b[d](b.__model,g,c._api,f)}},js={prepareAndUpdate:function(c){Cc(this),js.update.call(this,c,{optionChanged:c.newOption!=null})},update:function(c,d){var f=this._model,p=this._api,v=this._zr,g=this._coordSysMgr,m=this._scheduler;if(f){f.setUpdatePayload(c),m.restoreData(f,c),m.performSeriesTasks(f),g.create(f,p),m.performDataProcessorTasks(f,c),e2(this,f),g.update(f,p),r(f),m.performVisualTasks(f,c),r2(this,f,p,c,d);var y=f.get("backgroundColor")||"transparent",_=f.get("darkMode");v.setBackgroundColor(y),_!=null&&_!=="auto"&&v.setDarkMode(_),oa.trigger("afterupdate",f,p)}},updateTransform:function(c){var d=this,f=this._model,p=this._api;if(f){f.setUpdatePayload(c);var v=[];f.eachComponent(function(m,y){if(m!=="series"){var _=d.getViewOfComponentModel(y);if(_&&_.__alive)if(_.updateTransform){var x=_.updateTransform(y,f,p,c);x&&x.update&&v.push(_)}else v.push(_)}});var g=Me();f.eachSeries(function(m){var y=d._chartsMap[m.__viewId];if(y.updateTransform){var _=y.updateTransform(m,f,p,c);_&&_.update&&g.set(m.uid,1)}else g.set(m.uid,1)}),r(f),this._scheduler.performVisualTasks(f,c,{setDirty:!0,dirtyMap:g}),Vy(this,f,p,c,{},g),oa.trigger("afterupdate",f,p)}},updateView:function(c){var d=this._model;d&&(d.setUpdatePayload(c),kt.markUpdateMethod(c,"updateView"),r(d),this._scheduler.performVisualTasks(d,c,{setDirty:!0}),r2(this,d,this._api,c,{}),oa.trigger("afterupdate",d,this._api))},updateVisual:function(c){var d=this,f=this._model;f&&(f.setUpdatePayload(c),f.eachSeries(function(p){p.getData().clearAllVisual()}),kt.markUpdateMethod(c,"updateVisual"),r(f),this._scheduler.performVisualTasks(f,c,{visualType:"visual",setDirty:!0}),f.eachComponent(function(p,v){if(p!=="series"){var g=d.getViewOfComponentModel(v);g&&g.__alive&&g.updateVisual(v,f,d._api,c)}}),f.eachSeries(function(p){var v=d._chartsMap[p.__viewId];v.updateVisual(p,f,d._api,c)}),oa.trigger("afterupdate",f,this._api))},updateLayout:function(c){js.update.call(this,c)}},QS=function(c,d,f,p){if(c._disposed){c.id;return}for(var v=c._model,g=c._coordSysMgr.getCoordinateSystems(),m,y=fv(v,f),_=0;_<g.length;_++){var x=g[_];if(x[d]&&(m=x[d](v,y,p))!=null)return m}},e2=function(c,d){var f=c._chartsMap,p=c._scheduler;d.eachSeries(function(v){p.updateStreamModes(v,f[v.__viewId])})},t2=function(c,d){var f=this,p=this.getModel(),v=c.type,g=c.escapeConnect,m=T_[v],y=m.actionInfo,_=(y.update||"update").split(":"),x=_.pop(),w=_[0]!=null&&ho(_[0]);this[Zr]=!0;var b=[c],S=!1;c.batch&&(S=!0,b=ce(c.batch,function(E){return E=De(ae({},E),c),E.batch=null,E}));var M=[],A,T=LA(c),C=CN(c);if(C&&HW(this._api),I(b,function(E){if(A=m.action(E,f._model,f._api),A=A||ae({},E),A.type=y.event||A.type,M.push(A),C){var O=YP(c),z=O.queryOptionMap,B=O.mainTypeSpecified,N=B?z.keys()[0]:"series";Fy(f,x,E,N),gn(f)}else T?(Fy(f,x,E,"series"),gn(f)):w&&Fy(f,x,E,w.main,w.sub)}),x!=="none"&&!C&&!T&&!w)try{this[Di]?(Cc(this),js.update.call(this,c),this[Di]=null):js[x].call(this,c)}catch(E){throw this[Zr]=!1,E}if(S?A={type:y.event||v,escapeConnect:g,batch:M}:A=M[0],this[Zr]=!1,!d){var D=this._messageCenter;if(D.trigger(A.type,A),T){var P={type:"selectchanged",escapeConnect:g,selected:dxe(p),isFromClick:c.isFromClick||!1,fromAction:c.type,fromActionPayload:c};D.trigger(P.type,P)}}},lp=function(c){for(var d=this._pendingActions;d.length;){var f=d.shift();t2.call(this,f,c)}},up=function(c){!c&&this.trigger("updated")},Uk=function(c,d){c.on("rendered",function(f){d.trigger("rendered",f),c.animation.isFinished()&&!d[Di]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},Gk=function(c,d){c.on("mouseover",function(f){var p=f.target,v=rh(p,rg);v&&(uxe(v,f,d._api),gn(d))}).on("mouseout",function(f){var p=f.target,v=rh(p,rg);v&&(hxe(v,f,d._api),gn(d))}).on("click",function(f){var p=f.target,v=rh(p,function(y){return Re(y).dataIndex!=null},!0);if(v){var g=v.selected?"unselect":"select",m=Re(v);d._api.dispatchAction({type:g,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function r(c){c.clearColorPalette(),c.eachSeries(function(d){d.clearColorPalette()})}function i(c){var d=[],f=[],p=!1;if(c.eachComponent(function(y,_){var x=_.get("zlevel")||0,w=_.get("z")||0,b=_.getZLevelKey();p=p||!!b,(y==="series"?f:d).push({zlevel:x,z:w,idx:_.componentIndex,type:y,key:b})}),p){var v=d.concat(f),g,m;U0(v,function(y,_){return y.zlevel===_.zlevel?y.z-_.z:y.zlevel-_.zlevel}),I(v,function(y){var _=c.getComponent(y.type,y.idx),x=y.zlevel,w=y.key;g!=null&&(x=Math.max(g,x)),w?(x===g&&w!==m&&x++,m=w):m&&(x===g&&x++,m=""),g=x,_.setZLevel(x)})}}r2=function(c,d,f,p,v){i(d),Hk(c,d,f,p,v),I(c._chartsViews,function(g){g.__alive=!1}),Vy(c,d,f,p,v),I(c._chartsViews,function(g){g.__alive||g.remove(d,f)})},Hk=function(c,d,f,p,v,g){I(g||c._componentsViews,function(m){var y=m.__model;u(y,m),m.render(y,d,f,p),s(y,m),h(y,m)})},Vy=function(c,d,f,p,v,g){var m=c._scheduler;v=ae(v||{},{updatedSeries:d.getSeries()}),oa.trigger("series:beforeupdate",d,f,v);var y=!1;d.eachSeries(function(_){var x=c._chartsMap[_.__viewId];x.__alive=!0;var w=x.renderTask;m.updatePayload(w,p),u(_,x),g&&g.get(_.uid)&&w.dirty(),w.perform(m.getPerformArgs(w))&&(y=!0),x.group.silent=!!_.get("silent"),o(_,x),TN(_)}),m.unfinished=y||m.unfinished,oa.trigger("series:layoutlabels",d,f,v),oa.trigger("series:transition",d,f,v),d.eachSeries(function(_){var x=c._chartsMap[_.__viewId];s(_,x),h(_,x)}),a(c,d),oa.trigger("series:afterupdate",d,f,v)},gn=function(c){c[ZS]=!0,c.getZr().wakeUp()},Wk=function(c){c[ZS]&&(c.getZr().storage.traverse(function(d){md(d)||n(d)}),c[ZS]=!1)};function n(c){for(var d=[],f=c.currentStates,p=0;p<f.length;p++){var v=f[p];v==="emphasis"||v==="blur"||v==="select"||d.push(v)}c.selected&&c.states.select&&d.push("select"),c.hoverState===$x&&c.states.emphasis?d.push("emphasis"):c.hoverState===Vg&&c.states.blur&&d.push("blur"),c.useStates(d)}function a(c,d){var f=c._zr,p=f.storage,v=0;p.traverse(function(g){g.isGroup||v++}),v>d.get("hoverLayerThreshold")&&!at.node&&!at.worker&&d.eachSeries(function(g){if(!g.preventUsingHoverLayer){var m=c._chartsMap[g.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function o(c,d){var f=c.get("blendMode")||null;d.eachRendered(function(p){p.isGroup||(p.style.blend=f)})}function s(c,d){if(!c.preventAutoZ){var f=c.get("z")||0,p=c.get("zlevel")||0;d.eachRendered(function(v){return l(v,f,p,-1/0),!0})}}function l(c,d,f,p){var v=c.getTextContent(),g=c.getTextGuideLine(),m=c.isGroup;if(m)for(var y=c.childrenRef(),_=0;_<y.length;_++)p=Math.max(l(y[_],d,f,p),p);else c.z=d,c.zlevel=f,p=Math.max(c.z2,p);if(v&&(v.z=d,v.zlevel=f,isFinite(p)&&(v.z2=p+2)),g){var x=c.textGuideLineConfig;g.z=d,g.zlevel=f,isFinite(p)&&(g.z2=p+(x&&x.showAbove?1:-1))}return p}function u(c,d){d.eachRendered(function(f){if(!md(f)){var p=f.getTextContent(),v=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function h(c,d){var f=c.getModel("stateAnimation"),p=c.isAnimationEnabled(),v=f.get("duration"),g=v>0?{duration:v,delay:f.get("delay"),easing:f.get("easing")}:null;d.eachRendered(function(m){if(m.states&&m.states.emphasis){if(md(m))return;if(m instanceof qe&&mxe(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(p){m.stateTransition=g;var _=m.getTextContent(),x=m.getTextGuideLine();_&&(_.stateTransition=g),x&&(x.stateTransition=g)}m.__dirty&&n(m)}})}jk=function(c){return new(function(d){Y(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return c._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return c._model.getComponent(v.mainType,v.index);p=p.parent}},f.prototype.enterEmphasis=function(p,v){xs(p,v),gn(c)},f.prototype.leaveEmphasis=function(p,v){bs(p,v),gn(c)},f.prototype.enterBlur=function(p){FW(p),gn(c)},f.prototype.leaveBlur=function(p){tL(p),gn(c)},f.prototype.enterSelect=function(p){VW(p),gn(c)},f.prototype.leaveSelect=function(p){UW(p),gn(c)},f.prototype.getModel=function(){return c.getModel()},f.prototype.getViewOfComponentModel=function(p){return c.getViewOfComponentModel(p)},f.prototype.getViewOfSeriesModel=function(p){return c.getViewOfSeriesModel(p)},f}(W8))(c)},V9=function(c){function d(f,p){for(var v=0;v<f.length;v++){var g=f[v];g[KS]=p}}I(_v,function(f,p){c._messageCenter.on(p,function(v){if($k[c.group]&&c[KS]!==Vk){if(v&&v.escapeConnect)return;var g=c.makeActionFromEvent(v),m=[];I(xv,function(y){y!==c&&y.group===c.group&&m.push(y)}),d(m,Vk),I(m,function(y){y[KS]!==r2e&&y.dispatchAction(g)}),d(m,i2e)}})})}}(),t}(jn),PL=U9.prototype;PL.on=z9("on");PL.off=z9("off");PL.one=function(e,t,r){var i=this;function n(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];t&&t.apply&&t.apply(this,a),i.off(e,n)}this.on.call(this,e,n,r)};var n2e=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],T_={},_v={},$A=[],qA=[],A_=[],G9={},XA={},xv={},$k={},a2e=+new Date-0,LL="_echarts_instance_";function H9(e,t,r){var i=!(r&&r.ssr);if(i){var n=o2e(e);if(n)return n}var a=new U9(e,t,r);return a.id="ec_"+a2e++,xv[a.id]=a,i&&mW(e,LL,a.id),V9(a),oa.trigger("afterinit",a),a}function o2e(e){return xv[i_e(e,LL)]}function j9(e,t){G9[e]=t}function W9(e){We(qA,e)<0&&qA.push(e)}function $9(e,t){IL($A,e,t,XSe)}function s2e(e){EL("afterinit",e)}function l2e(e){EL("afterupdate",e)}function EL(e,t){oa.on(e,t)}function Po(e,t,r){Ae(t)&&(r=t,t="");var i=Pe(e)?e.type:[e,e={event:t}][0];e.event=(e.event||i).toLowerCase(),t=e.event,!_v[t]&&(wi(Fk.test(i)&&Fk.test(t)),T_[i]||(T_[i]={action:r,actionInfo:e}),_v[t]=i)}function u2e(e,t){jg.register(e,t)}function h2e(e,t){IL(A_,e,t,I9,"layout")}function qh(e,t){IL(A_,e,t,O9,"visual")}var qk=[];function IL(e,t,r,i,n){if((Ae(t)||Pe(t))&&(r=t,t=i),!(We(qk,r)>=0)){qk.push(r);var a=b9.wrapStageHandler(r,n);a.__prio=t,a.__raw=r,e.push(a)}}function q9(e,t){XA[e]=t}function c2e(e,t,r){var i=HSe("registerMap");i&&i(e,t,r)}var d2e=wwe;qh(DL,qwe);qh(lb,Xwe);qh(lb,Ywe);qh(DL,hSe);qh(lb,cSe);qh(R9,VSe);W9(q8);$9($Se,rwe);q9("default",Zwe);Po({type:mh,event:mh,update:mh},sr);Po({type:q0,event:q0,update:q0},sr);Po({type:pv,event:pv,update:pv},sr);Po({type:X0,event:X0,update:X0},sr);Po({type:vv,event:vv,update:vv},sr);j9("light",sSe);j9("dark",lSe);var Xk=[],f2e={registerPreprocessor:W9,registerProcessor:$9,registerPostInit:s2e,registerPostUpdate:l2e,registerUpdateLifecycle:EL,registerAction:Po,registerCoordinateSystem:u2e,registerLayout:h2e,registerVisual:qh,registerTransform:d2e,registerLoading:q9,registerMap:c2e,registerImpl:GSe,PRIORITY:t2e,ComponentModel:nt,ComponentView:Kt,SeriesModel:$t,ChartView:kt,registerComponentModel:function(e){nt.registerClass(e)},registerComponentView:function(e){Kt.registerClass(e)},registerSeriesModel:function(e){$t.registerClass(e)},registerChartView:function(e){kt.registerClass(e)},registerSubTypeDefaulter:function(e,t){nt.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){k1e(e,t)}};function $e(e){if(ue(e)){I(e,function(t){$e(t)});return}We(Xk,e)>=0||(Xk.push(e),Ae(e)&&(e={install:e}),e.install(f2e))}function hp(e){return e==null?0:e.length||1}function Yk(e){return e}var p2e=function(){function e(t,r,i,n,a,o){this._old=t,this._new=r,this._oldKeyGetter=i||Yk,this._newKeyGetter=n||Yk,this.context=a,this._diffModeMultiple=o==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,i={},n=new Array(t.length),a=new Array(r.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=n[o],l=i[s],u=hp(l);if(u>1){var h=l.shift();l.length===1&&(i[s]=l[0]),this._update&&this._update(h,o)}else u===1?(i[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,i)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,i={},n={},a=[],o=[];this._initIndexMap(t,i,a,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],u=i[l],h=n[l],c=hp(u),d=hp(h);if(c>1&&d===1)this._updateManyToOne&&this._updateManyToOne(h,u),n[l]=null;else if(c===1&&d>1)this._updateOneToMany&&this._updateOneToMany(h,u),n[l]=null;else if(c===1&&d===1)this._update&&this._update(h,u),n[l]=null;else if(c>1&&d>1)this._updateManyToMany&&this._updateManyToMany(h,u),n[l]=null;else if(c>1)for(var f=0;f<c;f++)this._remove&&this._remove(u[f]);else this._remove&&this._remove(u)}this._performRestAdd(o,n)},e.prototype._performRestAdd=function(t,r){for(var i=0;i<t.length;i++){var n=t[i],a=r[n],o=hp(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);r[n]=null}},e.prototype._initIndexMap=function(t,r,i,n){for(var a=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[n](t[o],o);if(a||(i[o]=s),!!r){var l=r[s],u=hp(l);u===0?(r[s]=o,a&&i.push(s)):u===1?r[s]=[l,o]:l.push(o)}}},e}();const ws=p2e;var v2e=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function g2e(e,t){var r={},i=r.encode={},n=Me(),a=[],o=[],s={};I(e.dimensions,function(d){var f=e.getDimensionInfo(d),p=f.coordDim;if(p){var v=f.coordDimIndex;i2(i,p)[v]=d,f.isExtraCoord||(n.set(p,1),m2e(f.type)&&(a[0]=d),i2(s,p)[v]=e.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(d)}N8.each(function(g,m){var y=i2(i,m),_=f.otherDims[m];_!=null&&_!==!1&&(y[_]=f.name)})});var l=[],u={};n.each(function(d,f){var p=i[f];u[f]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=ce(l,function(d){return e.getDimensionInfo(d).storeDimIndex}),r.encodeFirstDimNotExtra=u;var h=i.label;h&&h.length&&(a=h.slice());var c=i.tooltip;return c&&c.length?o=c.slice():o.length||(o=a.slice()),i.defaultedLabel=a,i.defaultedTooltip=o,r.userOutput=new v2e(s,t),r}function i2(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function C_(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function m2e(e){return!(e==="ordinal"||e==="time")}var y2e=function(){function e(t){this.otherDims={},t!=null&&ae(this,t)}return e}();const Q0=y2e;var _2e=it(),x2e={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},X9=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=K9(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Ve(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=Y8(this.source),i=!J9(t),n="",a=[],o=0,s=0;o<t;o++){var l=void 0,u=void 0,h=void 0,c=this.dimensions[s];if(c&&c.storeDimIndex===o)l=r?c.name:null,u=c.type,h=c.ordinalMeta,s++;else{var d=this.getSourceDimension(o);d&&(l=r?d.name:null,u=d.type)}a.push({property:l,type:u,ordinalMeta:h}),r&&l!=null&&(!c||!c.isCalculationCoord)&&(n+=i?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),n+="$",n+=x2e[u]||"f",h&&(n+=h.uid),n+="$"}var f=this.source,p=[f.seriesLayoutBy,f.startIndex,n].join("$$");return{dimensions:a,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,i=0;r<this._fullDimCount;r++){var n=void 0,a=this.dimensions[i];if(a&&a.storeDimIndex===r)a.isCalculationCoord||(n=a.name),i++;else{var o=this.getSourceDimension(r);o&&(n=o.name)}t.push(n)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function Y9(e){return e instanceof X9}function Z9(e){for(var t=Me(),r=0;r<(e||[]).length;r++){var i=e[r],n=Pe(i)?i.name:i;n!=null&&t.get(n)==null&&t.set(n,r)}return t}function K9(e){var t=_2e(e);return t.dimNameMap||(t.dimNameMap=Z9(e.dimensionsDefine))}function J9(e){return e>30}var cp=Pe,Ws=ce,b2e=typeof Int32Array>"u"?Array:Int32Array,w2e="e\0\0",Zk=-1,S2e=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],M2e=["_approximateExtent"],Kk,Uy,dp,fp,n2,Gy,a2,T2e=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,n=!1;Y9(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,i=t),i=i||["x","y"];for(var a={},o=[],s={},l=!1,u={},h=0;h<i.length;h++){var c=i[h],d=ge(c)?new Q0({name:c}):c instanceof Q0?c:new Q0(c),f=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=f,d.coordDimIndex=0);var p=d.otherDims=d.otherDims||{};o.push(f),a[f]=d,u[f]!=null&&(l=!0),d.createInvertedIndices&&(s[f]=[]),p.itemName===0&&(this._nameDimIdx=h),p.itemId===0&&(this._idDimIdx=h),n&&(d.storeDimIndex=h)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=Me();I(o,function(g){v.set(a[g].storeDimIndex,g)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var i=this._dimIdxToName.get(r);if(i!=null)return i;var n=this._schema.getSourceDimension(r);if(n)return n.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(st(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(i){return r.hasOwnProperty(i)?r[i]:void 0}:function(i){return r[i]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var i=this._dimSummary;if(r==null)return i.encodeFirstDimNotExtra[t];var n=i.encode[t];return n?n[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,i=r.encode[t];return(i||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,i){var n=this,a;if(t instanceof FA&&(a=t),!a){var o=this.dimensions,s=yL(t)||ai(t)?new Z8(t,o.length):t;a=new FA;var l=Ws(o,function(u){return{type:n._dimInfos[u].type,property:u}});a.initData(s,l,i)}this._store=a,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=g2e(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var i=this._store.appendValues(t,r.length),n=i.start,a=i.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=n;s<a;s++){var l=s-n;this._nameList[s]=r[l],o&&a2(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,i=0;i<r.length;i++){var n=this._dimInfos[r[i]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Pl&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var i=this._store,n=i.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=n.getSource().sourceFormat,l=s===Wn;if(l&&!n.pure)for(var u=[],h=t;h<r;h++){var c=n.getItem(h,u);if(!this.hasItemOption&&j1e(c)&&(this.hasItemOption=!0),c){var d=c.name;a[h]==null&&d!=null&&(a[h]=xr(d,null));var f=c.id;o[h]==null&&f!=null&&(o[h]=xr(f,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<r;h++)a2(this,h);Kk(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){cp(t)?ae(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),i=this._nameList[r];return i==null&&this._nameDimIdx!=null&&(i=dp(this,this._nameDimIdx,r)),i==null&&(i=""),i},e.prototype._getCategory=function(t,r){var i=this._store.get(t,r),n=this._store.getOrdinalMeta(t);return n?n.categories[i]:i},e.prototype.getId=function(t){return Uy(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var i=this._store,n=this._dimInfos[t];if(n)return i.get(n.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var i=this._store,n=this._dimInfos[t];if(n)return i.getByRawIndex(n.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var i=this,n=this._store;return ue(t)?n.getValues(Ws(t,function(a){return i._getStoreDimIndex(a)}),r):n.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,i=0,n=r.length;i<n;i++)if(isNaN(this._store.get(r[i],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,i=this._store.count();r<i;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var i=t&&this._invertedIndicesMap[t],n=i[r];return n==null||isNaN(n)?Zk:n},e.prototype.indicesOfNearest=function(t,r,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,i)},e.prototype.each=function(t,r,i){Ae(t)&&(i=r,r=t,t=[]);var n=i||this,a=Ws(fp(t),this._getStoreDimIndex,this);this._store.each(a,n?me(r,n):r)},e.prototype.filterSelf=function(t,r,i){Ae(t)&&(i=r,r=t,t=[]);var n=i||this,a=Ws(fp(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,n?me(r,n):r),this},e.prototype.selectRange=function(t){var r=this,i={},n=Ze(t);return I(n,function(a){var o=r._getStoreDimIndex(a);i[o]=t[a]}),this._store=this._store.selectRange(i),this},e.prototype.mapArray=function(t,r,i){Ae(t)&&(i=r,r=t,t=[]),i=i||this;var n=[];return this.each(t,function(){n.push(r&&r.apply(this,arguments))},i),n},e.prototype.map=function(t,r,i,n){var a=i||n||this,o=Ws(fp(t),this._getStoreDimIndex,this),s=Gy(this);return s._store=this._store.map(o,a?me(r,a):r),s},e.prototype.modify=function(t,r,i,n){var a=i||n||this,o=Ws(fp(t),this._getStoreDimIndex,this);this._store.modify(o,a?me(r,a):r)},e.prototype.downSample=function(t,r,i,n){var a=Gy(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),r,i,n),a},e.prototype.lttbDownSample=function(t,r){var i=Gy(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),i},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,i=this.getRawDataItem(t);return new Nt(i,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new ws(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(i){return Uy(t,i)},function(i){return Uy(r,i)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},cp(t)?ae(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var i=this._itemVisuals[t],n=i&&i[r];return n??this.getVisual(r)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var i=this._itemVisuals,n=i[t];n||(n=i[t]={});var a=n[r];return a==null&&(a=this.getVisual(r),ue(a)?a=a.slice():cp(a)&&(a=ae({},a)),n[r]=a),a},e.prototype.setItemVisual=function(t,r,i){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,cp(r)?ae(n,r):n[r]=i},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){cp(t)?ae(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,i){this._itemLayouts[t]=i?ae(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var i=this.hostModel&&this.hostModel.seriesIndex;AA(i,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){I(this._graphicEls,function(i,n){i&&t&&t.call(r,i,n)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Ws(this.dimensions,this._getDimInfo,this),this.hostModel)),n2(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var i=this[t];Ae(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var n=i.apply(this,arguments);return r.apply(this,[n].concat(BP(arguments)))})},e.internalField=function(){Kk=function(t){var r=t._invertedIndicesMap;I(r,function(i,n){var a=t._dimInfos[n],o=a.ordinalMeta,s=t._store;if(o){i=r[n]=new b2e(o.categories.length);for(var l=0;l<i.length;l++)i[l]=Zk;for(var l=0;l<s.count();l++)i[s.get(a.storeDimIndex,l)]=l}})},dp=function(t,r,i){return xr(t._getCategory(r,i),null)},Uy=function(t,r){var i=t._idList[r];return i==null&&t._idDimIdx!=null&&(i=dp(t,t._idDimIdx,r)),i==null&&(i=w2e+r),i},fp=function(t){return ue(t)||(t=t!=null?[t]:[]),t},Gy=function(t){var r=new e(t._schema?t._schema:Ws(t.dimensions,t._getDimInfo,t),t.hostModel);return n2(r,t),r},n2=function(t,r){I(S2e.concat(r.__wrappedMethods||[]),function(i){r.hasOwnProperty(i)&&(t[i]=r[i])}),t.__wrappedMethods=r.__wrappedMethods,I(M2e,function(i){t[i]=Ee(r[i])}),t._calculationInfo=ae({},r._calculationInfo)},a2=function(t,r){var i=t._nameList,n=t._idList,a=t._nameDimIdx,o=t._idDimIdx,s=i[r],l=n[r];if(s==null&&a!=null&&(i[r]=s=dp(t,a,r)),l==null&&o!=null&&(n[r]=l=dp(t,o,r)),l==null&&s!=null){var u=t._nameRepeatCount,h=u[s]=(u[s]||0)+1;l=s,h>1&&(l+="__ec__"+h),n[r]=l}}}(),e}();const xi=T2e;function qg(e,t){yL(e)||(e=_L(e)),t=t||{};var r=t.coordDimensions||[],i=t.dimensionsDefine||e.dimensionsDefine||[],n=Me(),a=[],o=C2e(e,r,i,t.dimensionsCount),s=t.canOmitUnusedDimensions&&J9(o),l=i===e.dimensionsDefine,u=l?K9(e):Z9(i),h=t.encodeDefine;!h&&t.encodeDefaulter&&(h=t.encodeDefaulter(e,o));for(var c=Me(h),d=new n9(o),f=0;f<d.length;f++)d[f]=-1;function p(A){var T=d[A];if(T<0){var C=i[A],D=Pe(C)?C:{name:C},P=new Q0,E=D.name;E!=null&&u.get(E)!=null&&(P.name=P.displayName=E),D.type!=null&&(P.type=D.type),D.displayName!=null&&(P.displayName=D.displayName);var O=a.length;return d[A]=O,P.storeDimIndex=A,a.push(P),P}return a[T]}if(!s)for(var f=0;f<o;f++)p(f);c.each(function(A,T){var C=Mt(A).slice();if(C.length===1&&!ge(C[0])&&C[0]<0){c.set(T,!1);return}var D=c.set(T,[]);I(C,function(P,E){var O=ge(P)?u.get(P):P;O!=null&&O<o&&(D[E]=O,g(p(O),T,E))})});var v=0;I(r,function(A){var T,C,D,P;if(ge(A))T=A,P={};else{P=A,T=P.name;var E=P.ordinalMeta;P.ordinalMeta=null,P=ae({},P),P.ordinalMeta=E,C=P.dimsDef,D=P.otherDims,P.name=P.coordDim=P.coordDimIndex=P.dimsDef=P.otherDims=null}var O=c.get(T);if(O!==!1){if(O=Mt(O),!O.length)for(var z=0;z<(C&&C.length||1);z++){for(;v<o&&p(v).coordDim!=null;)v++;v<o&&O.push(v++)}I(O,function(B,N){var F=p(B);if(l&&P.type!=null&&(F.type=P.type),g(De(F,P),T,N),F.name==null&&C){var G=C[N];!Pe(G)&&(G={name:G}),F.name=F.displayName=G.name,F.defaultTooltip=G.defaultTooltip}D&&De(F.otherDims,D)})}});function g(A,T,C){N8.get(T)!=null?A.otherDims[T]=C:(A.coordDim=T,A.coordDimIndex=C,n.set(T,!0))}var m=t.generateCoord,y=t.generateCoordCount,_=y!=null;y=m?y||1:0;var x=m||"value";function w(A){A.name==null&&(A.name=A.coordDim)}if(s)I(a,function(A){w(A)}),a.sort(function(A,T){return A.storeDimIndex-T.storeDimIndex});else for(var b=0;b<o;b++){var S=p(b),M=S.coordDim;M==null&&(S.coordDim=D2e(x,n,_),S.coordDimIndex=0,(!m||y<=0)&&(S.isExtraCoord=!0),y--),w(S),S.type==null&&(V8(e,b)===Vr.Must||S.isExtraCoord&&(S.otherDims.itemName!=null||S.otherDims.seriesName!=null))&&(S.type="ordinal")}return A2e(a),new X9({source:e,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function A2e(e){for(var t=Me(),r=0;r<e.length;r++){var i=e[r],n=i.name,a=t.get(n)||0;a>0&&(i.name=n+(a-1)),a++,t.set(n,a)}}function C2e(e,t,r,i){var n=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,i||0);return I(t,function(a){var o;Pe(a)&&(o=a.dimsDef)&&(n=Math.max(n,o.length))}),n}function D2e(e,t,r){if(r||t.hasKey(e)){for(var i=0;t.hasKey(e+i);)i++;e+=i}return t.set(e,!0),e}var P2e=function(){function e(t){this.coordSysDims=[],this.axisMap=Me(),this.categoryAxisMap=Me(),this.coordSysName=t}return e}();function L2e(e){var t=e.get("coordinateSystem"),r=new P2e(t),i=E2e[t];if(i)return i(e,r,r.axisMap,r.categoryAxisMap),r}var E2e={cartesian2d:function(e,t,r,i){var n=e.getReferringComponents("xAxis",dr).models[0],a=e.getReferringComponents("yAxis",dr).models[0];t.coordSysDims=["x","y"],r.set("x",n),r.set("y",a),Dc(n)&&(i.set("x",n),t.firstCategoryDimIndex=0),Dc(a)&&(i.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,i){var n=e.getReferringComponents("singleAxis",dr).models[0];t.coordSysDims=["single"],r.set("single",n),Dc(n)&&(i.set("single",n),t.firstCategoryDimIndex=0)},polar:function(e,t,r,i){var n=e.getReferringComponents("polar",dr).models[0],a=n.findAxisModel("radiusAxis"),o=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",a),r.set("angle",o),Dc(a)&&(i.set("radius",a),t.firstCategoryDimIndex=0),Dc(o)&&(i.set("angle",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,i){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,i){var n=e.ecModel,a=n.getComponent("parallel",e.get("parallelIndex")),o=t.coordSysDims=a.dimensions.slice();I(a.parallelAxisIndex,function(s,l){var u=n.getComponent("parallelAxis",s),h=o[l];r.set(h,u),Dc(u)&&(i.set(h,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Dc(e){return e.get("type")==="category"}function I2e(e,t,r){r=r||{};var i=r.byIndex,n=r.stackedCoordDimension,a,o,s;O2e(t)?a=t:(o=t.schema,a=o.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,h,c,d;if(I(a,function(y,_){ge(y)&&(a[_]=y={name:y}),l&&!y.isExtraCoord&&(!i&&!u&&y.ordinalMeta&&(u=y),!h&&y.type!=="ordinal"&&y.type!=="time"&&(!n||n===y.coordDim)&&(h=y))}),h&&!i&&!u&&(i=!0),h){c="__\0ecstackresult_"+e.id,d="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var f=h.coordDim,p=h.type,v=0;I(a,function(y){y.coordDim===f&&v++});var g={name:c,coordDim:f,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},m={name:d,coordDim:d,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(g.storeDimIndex=s.ensureCalculationDimension(d,p),m.storeDimIndex=s.ensureCalculationDimension(c,p)),o.appendCalculationDimension(g),o.appendCalculationDimension(m)):(a.push(g),a.push(m))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:i,stackedOverDimension:d,stackResultDimension:c}}function O2e(e){return!Y9(e.schema)}function Vl(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function Q9(e,t){return Vl(e,t)?e.getCalculationInfo("stackResultDimension"):t}function R2e(e,t){var r=e.get("coordinateSystem"),i=jg.get(r),n;return t&&t.coordSysDims&&(n=ce(t.coordSysDims,function(a){var o={name:a},s=t.axisMap.get(a);if(s){var l=s.get("type");o.type=C_(l)}return o})),n||(n=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),n}function z2e(e,t,r){var i,n;return r&&I(e,function(a,o){var s=a.coordDim,l=r.categoryAxisMap.get(s);l&&(i==null&&(i=o),a.ordinalMeta=l.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(n=!0)}),!n&&i!=null&&(e[i].otherDims.itemName=0),i}function Ds(e,t,r){r=r||{};var i=t.getSourceManager(),n,a=!1;e?(a=!0,n=_L(e)):(n=i.getSource(),a=n.sourceFormat===Wn);var o=L2e(t),s=R2e(t,o),l=r.useEncodeDefaulter,u=Ae(l)?l:l?Ne(F8,s,t):null,h={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},c=qg(n,h),d=z2e(c.dimensions,r.createInvertedIndices,o),f=a?null:i.getSharedDataStore(c),p=I2e(t,{schema:c,store:f}),v=new xi(c,t);v.setCalculationInfo(p);var g=d!=null&&N2e(n)?function(m,y,_,x){return x===d?_:this.defaultDimValueGetter(m,y,_,x)}:null;return v.hasItemOption=!1,v.initData(a?n:f,null,g),v}function N2e(e){if(e.sourceFormat===Wn){var t=k2e(e.data||[]);return!ue(uf(t))}}function k2e(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var e7=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(r)||(i[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();Gx(e7);const Ps=e7;var B2e=0,F2e=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++B2e}return e.createByAxisModel=function(t){var r=t.option,i=r.data,n=i&&ce(i,V2e);return new e({categories:n,needCollect:!n,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,i=this._needCollect;if(!ge(t)&&!i)return t;if(i&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var n=this._getOrCreateMap();return r=n.get(t),r==null&&(i?(r=this.categories.length,this.categories[r]=t,n.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Me(this.categories))},e}();function V2e(e){return Pe(e)&&e.value!=null?e.value:e+""}const YA=F2e;function ZA(e){return e.type==="interval"||e.type==="log"}function U2e(e,t,r,i){var n={},a=e[1]-e[0],o=n.interval=uW(a/t,!0);r!=null&&o<r&&(o=n.interval=r),i!=null&&o>i&&(o=n.interval=i);var s=n.intervalPrecision=t7(o),l=n.niceTickExtent=[Qt(Math.ceil(e[0]/o)*o,s),Qt(Math.floor(e[1]/o)*o,s)];return G2e(l,e),n}function o2(e){var t=Math.pow(10,qP(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,Qt(r*t)}function t7(e){return uo(e)+2}function Jk(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function G2e(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),Jk(e,0,t),Jk(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function ub(e,t){return e>=t[0]&&e<=t[1]}function hb(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function cb(e,t){return e*(t[1]-t[0])+t[0]}var r7=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;i.type="ordinal";var n=i.getSetting("ordinalMeta");return n||(n=new YA({})),ue(n)&&(n=new YA({categories:ce(n,function(a){return Pe(a)?a.value:a})})),i._ordinalMeta=n,i._extent=i.getSetting("extent")||[0,n.categories.length-1],i}return t.prototype.parse=function(r){return r==null?NaN:ge(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),ub(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),hb(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(cb(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],i=this._extent,n=i[0];n<=i[1];)r.push({value:n}),n++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var i=r.ordinalNumbers,n=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,i.length);o<l;++o){var u=i[o];n[o]=u,a[u]=o}for(var h=0;o<s;++o){for(;a[h]!=null;)h++;n.push(h),a[h]=o}},t.prototype._getTickNumber=function(r){var i=this._ticksByOrdinalNumber;return i&&r>=0&&r<i.length?i[r]:r},t.prototype.getRawOrdinalNumber=function(r){var i=this._ordinalNumbersByTick;return i&&r>=0&&r<i.length?i[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var i=this.getRawOrdinalNumber(r.value),n=this._ordinalMeta.categories[i];return n==null?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,i){this.unionExtent(r.getApproximateExtent(i))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Ps);Ps.registerClass(r7);const OL=r7;var Tu=Qt,i7=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return ub(r,this._extent)},t.prototype.normalize=function(r){return hb(r,this._extent)},t.prototype.scale=function(r){return cb(r,this._extent)},t.prototype.setExtent=function(r,i){var n=this._extent;isNaN(r)||(n[0]=parseFloat(r)),isNaN(i)||(n[1]=parseFloat(i))},t.prototype.unionExtent=function(r){var i=this._extent;r[0]<i[0]&&(i[0]=r[0]),r[1]>i[1]&&(i[1]=r[1]),this.setExtent(i[0],i[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=t7(r)},t.prototype.getTicks=function(r){var i=this._interval,n=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!i)return s;var l=1e4;n[0]<a[0]&&(r?s.push({value:Tu(a[0]-i,o)}):s.push({value:n[0]}));for(var u=a[0];u<=a[1]&&(s.push({value:u}),u=Tu(u+i,o),u!==s[s.length-1].value);)if(s.length>l)return[];var h=s.length?s[s.length-1].value:a[1];return n[1]>h&&(r?s.push({value:Tu(h+i,o)}):s.push({value:n[1]})),s},t.prototype.getMinorTicks=function(r){for(var i=this.getTicks(!0),n=[],a=this.getExtent(),o=1;o<i.length;o++){for(var s=i[o],l=i[o-1],u=0,h=[],c=s.value-l.value,d=c/r;u<r-1;){var f=Tu(l.value+(u+1)*d);f>a[0]&&f<a[1]&&h.push(f),u++}n.push(h)}return n},t.prototype.getLabel=function(r,i){if(r==null)return"";var n=i&&i.precision;n==null?n=uo(r.value)||0:n==="auto"&&(n=this._intervalPrecision);var a=Tu(r.value,n,!0);return L8(a)},t.prototype.calcNiceTicks=function(r,i,n){r=r||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=U2e(a,r,i,n);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var i=this._extent;if(i[0]===i[1])if(i[0]!==0){var n=Math.abs(i[0]);r.fixMax||(i[1]+=n/2),i[0]-=n/2}else i[1]=1;var a=i[1]-i[0];isFinite(a)||(i[0]=0,i[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var o=this._interval;r.fixMin||(i[0]=Tu(Math.floor(i[0]/o)*o)),r.fixMax||(i[1]=Tu(Math.ceil(i[1]/o)*o))},t.prototype.setNiceExtent=function(r,i){this._niceExtent=[r,i]},t.type="interval",t}(Ps);Ps.registerClass(i7);const Ul=i7;var n7=typeof Float32Array<"u",H2e=n7?Float32Array:Array;function co(e){return ue(e)?n7?new Float32Array(e):e:new H2e(e)}var KA="__ec_stack_";function RL(e){return e.get("stack")||KA+e.seriesIndex}function zL(e){return e.dim+e.index}function j2e(e){var t=[],r=e.axis,i="axis0";if(r.type==="category"){for(var n=r.getBandWidth(),a=0;a<e.count;a++)t.push(De({bandWidth:n,axisKey:i,stackId:KA+a},e));for(var o=s7(t),s=[],a=0;a<e.count;a++){var l=o[i][KA+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function a7(e,t){var r=[];return t.eachSeriesByType(e,function(i){h7(i)&&r.push(i)}),r}function W2e(e){var t={};I(e,function(l){var u=l.coordinateSystem,h=u.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var c=l.getData(),d=h.dim+"_"+h.index,f=c.getDimensionIndex(c.mapDimension(h.dim)),p=c.getStore(),v=0,g=p.count();v<g;++v){var m=p.get(f,v);t[d]?t[d].push(m):t[d]=[m]}});var r={};for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(n){n.sort(function(l,u){return l-u});for(var a=null,o=1;o<n.length;++o){var s=n[o]-n[o-1];s>0&&(a=a===null?s:Math.min(a,s))}r[i]=a}}return r}function o7(e){var t=W2e(e),r=[];return I(e,function(i){var n=i.coordinateSystem,a=n.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=t[l],h=Math.abs(o[1]-o[0]),c=a.scale.getExtent(),d=Math.abs(c[1]-c[0]);s=u?h/d*u:h}else{var f=i.getData();s=Math.abs(o[1]-o[0])/f.count()}var p=ve(i.get("barWidth"),s),v=ve(i.get("barMaxWidth"),s),g=ve(i.get("barMinWidth")||(c7(i)?.5:1),s),m=i.get("barGap"),y=i.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:g,barGap:m,barCategoryGap:y,axisKey:zL(a),stackId:RL(i)})}),s7(r)}function s7(e){var t={};I(e,function(i,n){var a=i.axisKey,o=i.bandWidth,s=t[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[a]=s;var u=i.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=i.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(s.remainedWidth,h),s.remainedWidth-=h);var c=i.barMaxWidth;c&&(l[u].maxWidth=c);var d=i.barMinWidth;d&&(l[u].minWidth=d);var f=i.barGap;f!=null&&(s.gap=f);var p=i.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return I(t,function(i,n){r[n]={};var a=i.stacks,o=i.bandWidth,s=i.categoryGap;if(s==null){var l=Ze(a).length;s=Math.max(35-l*4,15)+"%"}var u=ve(s,o),h=ve(i.gap,1),c=i.remainedWidth,d=i.autoWidthCount,f=(c-u)/(d+(d-1)*h);f=Math.max(f,0),I(a,function(m){var y=m.maxWidth,_=m.minWidth;if(m.width){var x=m.width;y&&(x=Math.min(x,y)),_&&(x=Math.max(x,_)),m.width=x,c-=x+h*x,d--}else{var x=f;y&&y<x&&(x=Math.min(y,c)),_&&_>x&&(x=_),x!==f&&(m.width=x,c-=x+h*x,d--)}}),f=(c-u)/(d+(d-1)*h),f=Math.max(f,0);var p=0,v;I(a,function(m,y){m.width||(m.width=f),v=m,p+=m.width*(1+h)}),v&&(p-=v.width*h);var g=-p/2;I(a,function(m,y){r[n][y]=r[n][y]||{bandWidth:o,offset:g,width:m.width},g+=m.width*(1+h)})}),r}function $2e(e,t,r){if(e&&t){var i=e[zL(t)];return i!=null&&r!=null?i[RL(r)]:i}}function l7(e,t){var r=a7(e,t),i=o7(r);I(r,function(n){var a=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=RL(n),u=i[zL(s)][l],h=u.offset,c=u.width;a.setLayout({bandWidth:u.bandWidth,offset:h,size:c})})}function u7(e){return{seriesType:e,plan:_f(),reset:function(t){if(h7(t)){var r=t.getData(),i=t.coordinateSystem,n=i.getBaseAxis(),a=i.getOtherAxis(n),o=r.getDimensionIndex(r.mapDimension(a.dim)),s=r.getDimensionIndex(r.mapDimension(n.dim)),l=t.get("showBackground",!0),u=r.mapDimension(a.dim),h=r.getCalculationInfo("stackResultDimension"),c=Vl(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),d=a.isHorizontal(),f=q2e(n,a),p=c7(t),v=t.get("barMinHeight")||0,g=h&&r.getDimensionIndex(h),m=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(_,x){for(var w=_.count,b=p&&co(w*3),S=p&&l&&co(w*3),M=p&&co(w),A=i.master.getRect(),T=d?A.width:A.height,C,D=x.getStore(),P=0;(C=_.next())!=null;){var E=D.get(c?g:o,C),O=D.get(s,C),z=f,B=void 0;c&&(B=+E-D.get(o,C));var N=void 0,F=void 0,G=void 0,H=void 0;if(d){var $=i.dataToPoint([E,O]);if(c){var Z=i.dataToPoint([B,O]);z=Z[0]}N=z,F=$[1]+y,G=$[0]-z,H=m,Math.abs(G)<v&&(G=(G<0?-1:1)*v)}else{var $=i.dataToPoint([O,E]);if(c){var Z=i.dataToPoint([O,B]);z=Z[1]}N=$[0]+y,F=z,G=m,H=$[1]-z,Math.abs(H)<v&&(H=(H<=0?-1:1)*v)}p?(b[P]=N,b[P+1]=F,b[P+2]=d?G:H,S&&(S[P]=d?A.x:N,S[P+1]=d?F:A.y,S[P+2]=T),M[C]=C):x.setItemLayout(C,{x:N,y:F,width:G,height:H}),P+=3}p&&x.setLayout({largePoints:b,largeDataIndices:M,largeBackgroundPoints:S,valueAxisHorizontal:d})}}}}}}function h7(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function c7(e){return e.pipelineContext&&e.pipelineContext.large}function q2e(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var X2e=function(e,t,r,i){for(;r<i;){var n=r+i>>>1;e[n][1]<t?r=n+1:i=n}return r},d7=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="time",i}return t.prototype.getLabel=function(r){var i=this.getSetting("useUTC");return Qx(r.value,GN[_be(yd(this._minLevelUnit))]||GN.second,i,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,i,n){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return xbe(r,i,n,o,a)},t.prototype.getTicks=function(){var r=this._interval,i=this._extent,n=[];if(!r)return n;n.push({value:i[0],level:0});var a=this.getSetting("useUTC"),o=tMe(this._minLevelUnit,this._approxInterval,a,i);return n=n.concat(o),n.push({value:i[1],level:0}),n},t.prototype.calcNiceExtent=function(r){var i=this._extent;if(i[0]===i[1]&&(i[0]-=On,i[1]+=On),i[1]===-1/0&&i[0]===1/0){var n=new Date;i[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),i[0]=i[1]-On}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,i,n){r=r||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/r,i!=null&&this._approxInterval<i&&(this._approxInterval=i),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var s=Hy.length,l=Math.min(X2e(Hy,this._approxInterval,0,s),s-1);this._interval=Hy[l][1],this._minLevelUnit=Hy[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return st(r)?r:+So(r)},t.prototype.contain=function(r){return ub(this.parse(r),this._extent)},t.prototype.normalize=function(r){return hb(this.parse(r),this._extent)},t.prototype.scale=function(r){return cb(r,this._extent)},t.type="time",t}(Ul),Hy=[["second",cL],["minute",dL],["hour",mv],["quarter-day",mv*6],["half-day",mv*12],["day",On*1.2],["half-week",On*3.5],["week",On*7],["month",On*31],["quarter",On*95],["half-year",UN/2],["year",UN]];function Y2e(e,t,r,i){var n=So(t),a=So(r),o=function(p){return HN(n,p,i)===HN(a,p,i)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},h=function(){return u()&&o("hour")},c=function(){return h()&&o("minute")},d=function(){return c()&&o("second")},f=function(){return d()&&o("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return h();case"minute":return c();case"second":return d();case"millisecond":return f()}}function Z2e(e,t){return e/=On,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function K2e(e){var t=30*On;return e/=t,e>6?6:e>3?3:e>2?2:1}function J2e(e){return e/=mv,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function Qk(e,t){return e/=t?dL:cL,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Q2e(e){return uW(e,!0)}function eMe(e,t,r){var i=new Date(e);switch(yd(t)){case"year":case"month":i[M8(r)](0);case"day":i[T8(r)](1);case"hour":i[A8(r)](0);case"minute":i[C8(r)](0);case"second":i[D8(r)](0),i[P8(r)](0)}return i.getTime()}function tMe(e,t,r,i){var n=1e4,a=w8,o=0;function s(T,C,D,P,E,O,z){for(var B=new Date(C),N=C,F=B[P]();N<D&&N<=i[1];)z.push({value:N}),F+=T,B[E](F),N=B.getTime();z.push({value:N,notAdd:!0})}function l(T,C,D){var P=[],E=!C.length;if(!Y2e(yd(T),i[0],i[1],r)){E&&(C=[{value:eMe(new Date(i[0]),T,r)},{value:i[1]}]);for(var O=0;O<C.length-1;O++){var z=C[O].value,B=C[O+1].value;if(z!==B){var N=void 0,F=void 0,G=void 0,H=!1;switch(T){case"year":N=Math.max(1,Math.round(t/On/365)),F=fL(r),G=bbe(r);break;case"half-year":case"quarter":case"month":N=K2e(t),F=_d(r),G=M8(r);break;case"week":case"half-week":case"day":N=Z2e(t),F=eb(r),G=T8(r),H=!0;break;case"half-day":case"quarter-day":case"hour":N=J2e(t),F=ag(r),G=A8(r);break;case"minute":N=Qk(t,!0),F=tb(r),G=C8(r);break;case"second":N=Qk(t,!1),F=rb(r),G=D8(r);break;case"millisecond":N=Q2e(t),F=ib(r),G=P8(r);break}s(N,z,B,F,G,H,P),T==="year"&&D.length>1&&O===0&&D.unshift({value:D[0].value-N})}}for(var O=0;O<P.length;O++)D.push(P[O]);return P}}for(var u=[],h=[],c=0,d=0,f=0;f<a.length&&o++<n;++f){var p=yd(a[f]);if(ybe(a[f])){l(a[f],u[u.length-1]||[],h);var v=a[f+1]?yd(a[f+1]):null;if(p!==v){if(h.length){d=c,h.sort(function(T,C){return T.value-C.value});for(var g=[],m=0;m<h.length;++m){var y=h[m].value;(m===0||h[m-1].value!==y)&&(g.push(h[m]),y>=i[0]&&y<=i[1]&&c++)}var _=(i[1]-i[0])/t;if(c>_*1.5&&d>_/1.5||(u.push(g),c>_||e===a[f]))break}h=[]}}}for(var x=xt(ce(u,function(T){return xt(T,function(C){return C.value>=i[0]&&C.value<=i[1]&&!C.notAdd})}),function(T){return T.length>0}),w=[],b=x.length-1,f=0;f<x.length;++f)for(var S=x[f],M=0;M<S.length;++M)w.push({value:S[M].value,level:b-f});w.sort(function(T,C){return T.value-C.value});for(var A=[],f=0;f<w.length;++f)(f===0||w[f].value!==w[f-1].value)&&A.push(w[f]);return A}Ps.registerClass(d7);const f7=d7;var eB=Ps.prototype,bv=Ul.prototype,rMe=Qt,iMe=Math.floor,nMe=Math.ceil,jy=Math.pow,ra=Math.log,NL=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new Ul,r._interval=0,r}return t.prototype.getTicks=function(r){var i=this._originalScale,n=this._extent,a=i.getExtent(),o=bv.getTicks.call(this,r);return ce(o,function(s){var l=s.value,u=Qt(jy(this.base,l));return u=l===n[0]&&this._fixMin?Wy(u,a[0]):u,u=l===n[1]&&this._fixMax?Wy(u,a[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,i){var n=ra(this.base);r=ra(Math.max(0,r))/n,i=ra(Math.max(0,i))/n,bv.setExtent.call(this,r,i)},t.prototype.getExtent=function(){var r=this.base,i=eB.getExtent.call(this);i[0]=jy(r,i[0]),i[1]=jy(r,i[1]);var n=this._originalScale,a=n.getExtent();return this._fixMin&&(i[0]=Wy(i[0],a[0])),this._fixMax&&(i[1]=Wy(i[1],a[1])),i},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var i=this.base;r[0]=ra(r[0])/ra(i),r[1]=ra(r[1])/ra(i),eB.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,i){this.unionExtent(r.getApproximateExtent(i))},t.prototype.calcNiceTicks=function(r){r=r||10;var i=this._extent,n=i[1]-i[0];if(!(n===1/0||n<=0)){var a=H1e(n),o=r/n*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[Qt(nMe(i[0]/a)*a),Qt(iMe(i[1]/a)*a)];this._interval=a,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){bv.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=ra(r)/ra(this.base),ub(r,this._extent)},t.prototype.normalize=function(r){return r=ra(r)/ra(this.base),hb(r,this._extent)},t.prototype.scale=function(r){return r=cb(r,this._extent),jy(this.base,r)},t.type="log",t}(Ps),p7=NL.prototype;p7.getMinorTicks=bv.getMinorTicks;p7.getLabel=bv.getLabel;function Wy(e,t){return rMe(e,uo(t))}Ps.registerClass(NL);const aMe=NL;var oMe=function(){function e(t,r,i){this._prepareParams(t,r,i)}return e.prototype._prepareParams=function(t,r,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var n=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var a=this._modelMinRaw=r.get("min",!0);Ae(a)?this._modelMinNum=$y(t,a({min:i[0],max:i[1]})):a!=="dataMin"&&(this._modelMinNum=$y(t,a));var o=this._modelMaxRaw=r.get("max",!0);if(Ae(o)?this._modelMaxNum=$y(t,o({min:i[0],max:i[1]})):o!=="dataMax"&&(this._modelMaxNum=$y(t,o)),n)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),l=ue(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Aa(l[0],1),Aa(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,i=this._dataMax,n=this._axisDataLen,a=this._boundaryGapInner,o=t?null:i-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?i:this._modelMaxNum,u=s!=null,h=l!=null;s==null&&(s=t?n?0:NaN:r-a[0]*o),l==null&&(l=t?n?n-1:NaN:i+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var c=Yv(s)||Yv(l)||t&&!n;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!h&&(l=0));var d=this._determinedMin,f=this._determinedMax;return d!=null&&(s=d,u=!0),f!=null&&(l=f,h=!0),{min:s,max:l,minFixed:u,maxFixed:h,isBlank:c}},e.prototype.modifyDataMinMax=function(t,r){this[lMe[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var i=sMe[t];this[i]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),sMe={min:"_determinedMin",max:"_determinedMax"},lMe={min:"_dataMin",max:"_dataMax"};function v7(e,t,r){var i=e.rawExtentInfo;return i||(i=new oMe(e,t,r),e.rawExtentInfo=i,i)}function $y(e,t){return t==null?null:Yv(t)?NaN:e.parse(t)}function g7(e,t){var r=e.type,i=v7(e,t,e.getExtent()).calculate();e.setBlank(i.isBlank);var n=i.min,a=i.max,o=t.ecModel;if(o&&r==="time"){var s=a7("bar",o),l=!1;if(I(s,function(c){l=l||c.getBaseAxis()===t.axis}),l){var u=o7(s),h=uMe(n,a,t,u);n=h.min,a=h.max}}return{extent:[n,a],fixMin:i.minFixed,fixMax:i.maxFixed}}function uMe(e,t,r,i){var n=r.axis.getExtent(),a=n[1]-n[0],o=$2e(i,r.axis);if(o===void 0)return{min:e,max:t};var s=1/0;I(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;I(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,h=t-e,c=1-(s+l)/a,d=h/c-h;return t+=d*(l/u),e-=d*(s/u),{min:e,max:t}}function Bd(e,t){var r=t,i=g7(e,r),n=i.extent,a=r.get("splitNumber");e instanceof aMe&&(e.base=r.get("logBase"));var o=e.type,s=r.get("interval"),l=o==="interval"||o==="time";e.setExtent(n[0],n[1]),e.calcNiceExtent({splitNumber:a,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function db(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new OL({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new f7({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Ps.getClass(t)||Ul)}}function hMe(e){var t=e.scale.getExtent(),r=t[0],i=t[1];return!(r>0&&i>0||r<0&&i<0)}function Xg(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(i){return function(n,a){return e.scale.getFormattedLabel(n,a,i)}}(t):ge(t)?function(i){return function(n){var a=e.scale.getLabel(n),o=i.replace("{value}",a??"");return o}}(t):Ae(t)?function(i){return function(n,a){return r!=null&&(a=n.value-r),i(kL(e,n),a,n.level!=null?{level:n.level}:null)}}(t):function(i){return e.scale.getLabel(i)}}function kL(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function cMe(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var i,n,a=r.getExtent();r instanceof OL?n=r.count():(i=r.getTicks(),n=i.length);var o=e.getLabelModel(),s=Xg(e),l,u=1;n>40&&(u=Math.ceil(n/40));for(var h=0;h<n;h+=u){var c=i?i[h]:{value:a[0]+h},d=s(c,h),f=o.getTextRect(d),p=dMe(f,o.get("rotate")||0);l?l.union(p):l=p}return l}}function dMe(e,t){var r=t*Math.PI/180,i=e.width,n=e.height,a=i*Math.abs(Math.cos(r))+Math.abs(n*Math.sin(r)),o=i*Math.abs(Math.sin(r))+Math.abs(n*Math.cos(r)),s=new Ge(e.x,e.y,a,o);return s}function BL(e){var t=e.get("interval");return t??"auto"}function m7(e){return e.type==="category"&&BL(e.getLabelModel())===0}function D_(e,t){var r={};return I(e.mapDimensionsAll(t),function(i){r[Q9(e,i)]=!0}),Ze(r)}function fMe(e,t,r){t&&I(D_(t,r),function(i){var n=t.getApproximateExtent(i);n[0]<e[0]&&(e[0]=n[0]),n[1]>e[1]&&(e[1]=n[1])})}var Yg=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),pMe=1e-8;function tB(e,t){return Math.abs(e-t)<pMe}function qu(e,t,r){var i=0,n=e[0];if(!n)return!1;for(var a=1;a<e.length;a++){var o=e[a];i+=Zo(n[0],n[1],o[0],o[1],t,r),n=o}var s=e[0];return(!tB(n[0],s[0])||!tB(n[1],s[1]))&&(i+=Zo(n[0],n[1],s[0],s[1],t,r)),i!==0}var vMe=[];function s2(e,t){for(var r=0;r<e.length;r++)Gr(e[r],e[r],t)}function rB(e,t,r,i){for(var n=0;n<e.length;n++){var a=e[n];i&&(a=i.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(vl(t,t,a),gl(r,r,a))}}function gMe(e){for(var t=0,r=0,i=0,n=e.length,a=e[n-1][0],o=e[n-1][1],s=0;s<n;s++){var l=e[s][0],u=e[s][1],h=a*u-l*o;t+=h,r+=(a+l)*h,i+=(o+u)*h,a=l,o=u}return t?[r/t/3,i/t/3,t]:[e[0][0]||0,e[0][1]||0]}var y7=function(){function e(t){this.name=t}return e.prototype.setCenter=function(t){this._center=t},e.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},e}(),iB=function(){function e(t,r){this.type="polygon",this.exterior=t,this.interiors=r}return e}(),nB=function(){function e(t){this.type="linestring",this.points=t}return e}(),_7=function(e){Y(t,e);function t(r,i,n){var a=e.call(this,r)||this;return a.type="geoJSON",a.geometries=i,a._center=n&&[n[0],n[1]],a}return t.prototype.calcCenter=function(){for(var r=this.geometries,i,n=0,a=0;a<r.length;a++){var o=r[a],s=o.exterior,l=s&&s.length;l>n&&(i=o,n=l)}if(i)return gMe(i.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(r){var i=this._rect;if(i&&!r)return i;var n=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return I(o,function(s){s.type==="polygon"?rB(s.exterior,n,a,r):I(s.points,function(l){rB(l,n,a,r)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(a[0])&&isFinite(a[1])||(n[0]=n[1]=a[0]=a[1]=0),i=new Ge(n[0],n[1],a[0]-n[0],a[1]-n[1]),r||(this._rect=i),i},t.prototype.contain=function(r){var i=this.getBoundingRect(),n=this.geometries;if(!i.contain(r[0],r[1]))return!1;e:for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(qu(l,r[0],r[1])){for(var h=0;h<(u?u.length:0);h++)if(qu(u[h],r[0],r[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(r,i,n,a){var o=this.getBoundingRect(),s=o.width/o.height;n?a||(a=n/s):n=s*a;for(var l=new Ge(r,i,n,a),u=o.calculateTransform(l),h=this.geometries,c=0;c<h.length;c++){var d=h[c];d.type==="polygon"?(s2(d.exterior,u),I(d.interiors,function(f){s2(f,u)})):I(d.points,function(f){s2(f,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(r){r==null&&(r=this.name);var i=new t(r,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},t}(y7),mMe=function(e){Y(t,e);function t(r,i){var n=e.call(this,r)||this;return n.type="geoSVG",n._elOnlyForCalculate=i,n}return t.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,i=r.getBoundingRect(),n=[i.x+i.width/2,i.y+i.height/2],a=Fx(vMe),o=r;o&&!o.isGeoSVGGraphicRoot;)us(a,o.getLocalTransform(),a),o=o.parent;return lf(a,a),Gr(n,n,a),n},t}(y7);function yMe(e){if(!e.UTF8Encoding)return e;var t=e,r=t.UTF8Scale;r==null&&(r=1024);var i=t.features;return I(i,function(n){var a=n.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=x7(s,o,r);break;case"Polygon":l2(s,o,r);break;case"MultiLineString":l2(s,o,r);break;case"MultiPolygon":I(s,function(l,u){return l2(l,o[u],r)})}}),t.UTF8Encoding=!1,t}function l2(e,t,r){for(var i=0;i<e.length;i++)e[i]=x7(e[i],t[i],r)}function x7(e,t,r){for(var i=[],n=t[0],a=t[1],o=0;o<e.length;o+=2){var s=e.charCodeAt(o)-64,l=e.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=n,l+=a,n=s,a=l,i.push([s/r,l/r])}return i}function _Me(e,t){return e=yMe(e),ce(xt(e.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var i=r.properties,n=r.geometry,a=[];switch(n.type){case"Polygon":var o=n.coordinates;a.push(new iB(o[0],o.slice(1)));break;case"MultiPolygon":I(n.coordinates,function(l){l[0]&&a.push(new iB(l[0],l.slice(1)))});break;case"LineString":a.push(new nB([n.coordinates]));break;case"MultiLineString":a.push(new nB(n.coordinates))}var s=new _7(i[t||"name"],a,i.cp);return s.properties=i,s})}var cg=it();function xMe(e){return e.type==="category"?wMe(e):MMe(e)}function bMe(e,t){return e.type==="category"?SMe(e,t):{ticks:ce(e.scale.getTicks(),function(r){return r.value})}}function wMe(e){var t=e.getLabelModel(),r=b7(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function b7(e,t){var r=w7(e,"labels"),i=BL(t),n=S7(r,i);if(n)return n;var a,o;return Ae(i)?a=A7(e,i):(o=i==="auto"?TMe(e):i,a=T7(e,o)),M7(r,i,{labels:a,labelCategoryInterval:o})}function SMe(e,t){var r=w7(e,"ticks"),i=BL(t),n=S7(r,i);if(n)return n;var a,o;if((!t.get("show")||e.scale.isBlank())&&(a=[]),Ae(i))a=A7(e,i,!0);else if(i==="auto"){var s=b7(e,e.getLabelModel());o=s.labelCategoryInterval,a=ce(s.labels,function(l){return l.tickValue})}else o=i,a=T7(e,o,!0);return M7(r,i,{ticks:a,tickCategoryInterval:o})}function MMe(e){var t=e.scale.getTicks(),r=Xg(e);return{labels:ce(t,function(i,n){return{level:i.level,formattedLabel:r(i,n),rawLabel:e.scale.getLabel(i),tickValue:i.value}})}}function w7(e,t){return cg(e)[t]||(cg(e)[t]=[])}function S7(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function M7(e,t,r){return e.push({key:t,value:r}),r}function TMe(e){var t=cg(e).autoInterval;return t??(cg(e).autoInterval=e.calculateCategoryInterval())}function AMe(e){var t=CMe(e),r=Xg(e),i=(t.axisRotate-t.labelRotate)/180*Math.PI,n=e.scale,a=n.getExtent(),o=n.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),h=Math.abs(u*Math.cos(i)),c=Math.abs(u*Math.sin(i)),d=0,f=0;l<=a[1];l+=s){var p=0,v=0,g=Bg(r({value:l}),t.font,"center","top");p=g.width*1.3,v=g.height*1.3,d=Math.max(d,p,7),f=Math.max(f,v,7)}var m=d/h,y=f/c;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(m,y))),x=cg(e.model),w=e.getExtent(),b=x.lastAutoInterval,S=x.lastTickCount;return b!=null&&S!=null&&Math.abs(b-_)<=1&&Math.abs(S-o)<=1&&b>_&&x.axisExtent0===w[0]&&x.axisExtent1===w[1]?_=b:(x.lastTickCount=o,x.lastAutoInterval=_,x.axisExtent0=w[0],x.axisExtent1=w[1]),_}function CMe(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function T7(e,t,r){var i=Xg(e),n=e.scale,a=n.getExtent(),o=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=a[0],h=n.count();u!==0&&l>1&&h/l>2&&(u=Math.round(Math.ceil(u/l)*l));var c=m7(e),d=o.get("showMinLabel")||c,f=o.get("showMaxLabel")||c;d&&u!==a[0]&&v(a[0]);for(var p=u;p<=a[1];p+=l)v(p);f&&p-l!==a[1]&&v(a[1]);function v(g){var m={value:g};s.push(r?g:{formattedLabel:i(m),rawLabel:n.getLabel(m),tickValue:g})}return s}function A7(e,t,r){var i=e.scale,n=Xg(e),a=[];return I(i.getTicks(),function(o){var s=i.getLabel(o),l=o.value;t(o.value,s)&&a.push(r?l:{formattedLabel:n(o),rawLabel:s,tickValue:l})}),a}var aB=[0,1],DMe=function(){function e(t,r,i){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=i||[0,0]}return e.prototype.contain=function(t){var r=this._extent,i=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return t>=i&&t<=n},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return sW(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;i[0]=t,i[1]=r},e.prototype.dataToCoord=function(t,r){var i=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&n.type==="ordinal"&&(i=i.slice(),oB(i,n.count())),mt(t,aB,i,r)},e.prototype.coordToData=function(t,r){var i=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(i=i.slice(),oB(i,n.count()));var a=mt(t,i,aB,r);return this.scale.scale(a)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),i=bMe(this,r),n=i.ticks,a=ce(n,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=r.get("alignWithLabel");return PMe(this,a,o,t.clamp),a},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var i=this.scale.getMinorTicks(r),n=ce(i,function(a){return ce(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},e.prototype.getViewLabels=function(){return xMe(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),i=r[1]-r[0]+(this.onBand?1:0);i===0&&(i=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/i},e.prototype.calculateCategoryInterval=function(){return AMe(this)},e}();function oB(e,t){var r=e[1]-e[0],i=t,n=r/i/2;e[0]+=n,e[1]-=n}function PMe(e,t,r,i){var n=t.length;if(!e.onBand||r||!n)return;var a=e.getExtent(),o,s;if(n===1)t[0].coord=a[0],o=t[1]={coord:a[0]};else{var l=t[n-1].tickValue-t[0].tickValue,u=(t[n-1].coord-t[0].coord)/l;I(t,function(f){f.coord-=u/2});var h=e.scale.getExtent();s=1+h[1]-t[n-1].tickValue,o={coord:t[n-1].coord+u*s},t.push(o)}var c=a[0]>a[1];d(t[0].coord,a[0])&&(i?t[0].coord=a[0]:t.shift()),i&&d(a[0],t[0].coord)&&t.unshift({coord:a[0]}),d(a[1],o.coord)&&(i?o.coord=a[1]:t.pop()),i&&d(o.coord,a[1])&&t.push({coord:a[1]});function d(f,p){return f=Qt(f),p=Qt(p),c?f>p:f<p}}const Ea=DMe;var pp=Math.PI*2,Au=Mo.CMD,LMe=["top","right","bottom","left"];function EMe(e,t,r,i,n){var a=r.width,o=r.height;switch(e){case"top":i.set(r.x+a/2,r.y-t),n.set(0,-1);break;case"bottom":i.set(r.x+a/2,r.y+o+t),n.set(0,1);break;case"left":i.set(r.x-t,r.y+o/2),n.set(-1,0);break;case"right":i.set(r.x+a+t,r.y+o/2),n.set(1,0);break}}function IMe(e,t,r,i,n,a,o,s,l){o-=e,s-=t;var u=Math.sqrt(o*o+s*s);o/=u,s/=u;var h=o*r+e,c=s*r+t;if(Math.abs(i-n)%pp<1e-4)return l[0]=h,l[1]=c,u-r;if(a){var d=i;i=ts(n),n=ts(d)}else i=ts(i),n=ts(n);i>n&&(n+=pp);var f=Math.atan2(s,o);if(f<0&&(f+=pp),f>=i&&f<=n||f+pp>=i&&f+pp<=n)return l[0]=h,l[1]=c,u-r;var p=r*Math.cos(i)+e,v=r*Math.sin(i)+t,g=r*Math.cos(n)+e,m=r*Math.sin(n)+t,y=(p-o)*(p-o)+(v-s)*(v-s),_=(g-o)*(g-o)+(m-s)*(m-s);return y<_?(l[0]=p,l[1]=v,Math.sqrt(y)):(l[0]=g,l[1]=m,Math.sqrt(_))}function P_(e,t,r,i,n,a,o,s){var l=n-e,u=a-t,h=r-e,c=i-t,d=Math.sqrt(h*h+c*c);h/=d,c/=d;var f=l*h+u*c,p=f/d;s&&(p=Math.min(Math.max(p,0),1)),p*=d;var v=o[0]=e+p*h,g=o[1]=t+p*c;return Math.sqrt((v-n)*(v-n)+(g-a)*(g-a))}function C7(e,t,r,i,n,a,o){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i);var s=e+r,l=t+i,u=o[0]=Math.min(Math.max(n,e),s),h=o[1]=Math.min(Math.max(a,t),l);return Math.sqrt((u-n)*(u-n)+(h-a)*(h-a))}var sa=[];function OMe(e,t,r){var i=C7(t.x,t.y,t.width,t.height,e.x,e.y,sa);return r.set(sa[0],sa[1]),i}function RMe(e,t,r){for(var i=0,n=0,a=0,o=0,s,l,u=1/0,h=t.data,c=e.x,d=e.y,f=0;f<h.length;){var p=h[f++];f===1&&(i=h[f],n=h[f+1],a=i,o=n);var v=u;switch(p){case Au.M:a=h[f++],o=h[f++],i=a,n=o;break;case Au.L:v=P_(i,n,h[f],h[f+1],c,d,sa,!0),i=h[f++],n=h[f++];break;case Au.C:v=Uj(i,n,h[f++],h[f++],h[f++],h[f++],h[f],h[f+1],c,d,sa),i=h[f++],n=h[f++];break;case Au.Q:v=Hj(i,n,h[f++],h[f++],h[f],h[f+1],c,d,sa),i=h[f++],n=h[f++];break;case Au.A:var g=h[f++],m=h[f++],y=h[f++],_=h[f++],x=h[f++],w=h[f++];f+=1;var b=!!(1-h[f++]);s=Math.cos(x)*y+g,l=Math.sin(x)*_+m,f<=1&&(a=s,o=l);var S=(c-g)*_/y+g;v=IMe(g,m,_,x,x+w,b,S,d,sa),i=Math.cos(x+w)*y+g,n=Math.sin(x+w)*_+m;break;case Au.R:a=i=h[f++],o=n=h[f++];var M=h[f++],A=h[f++];v=C7(a,o,M,A,c,d,sa);break;case Au.Z:v=P_(i,n,a,o,c,d,sa,!0),i=a,n=o;break}v<u&&(u=v,r.set(sa[0],sa[1]))}return u}var ga=new Fe,Ot=new Fe,rr=new Fe,fo=new Fe,no=new Fe;function sB(e,t){if(e){var r=e.getTextGuideLine(),i=e.getTextContent();if(i&&r){var n=e.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=n.candidates||LMe,s=i.getBoundingRect().clone();s.applyTransform(i.getComputedTransform());var l=1/0,u=n.anchor,h=e.getComputedTransform(),c=h&&lf([],h),d=t.get("length2")||0;u&&rr.copy(u);for(var f=0;f<o.length;f++){var p=o[f];EMe(p,0,s,ga,fo),Fe.scaleAndAdd(Ot,ga,fo,d),Ot.transform(c);var v=e.getBoundingRect(),g=u?u.distance(Ot):e instanceof qe?RMe(Ot,e.path,rr):OMe(Ot,v,rr);g<l&&(l=g,Ot.transform(h),rr.transform(h),rr.toArray(a[0]),Ot.toArray(a[1]),ga.toArray(a[2]))}D7(a,t.get("minTurnAngle")),r.setShape({points:a})}}}var L_=[],gi=new Fe;function D7(e,t){if(t<=180&&t>0){t=t/180*Math.PI,ga.fromArray(e[0]),Ot.fromArray(e[1]),rr.fromArray(e[2]),Fe.sub(fo,ga,Ot),Fe.sub(no,rr,Ot);var r=fo.len(),i=no.len();if(!(r<.001||i<.001)){fo.scale(1/r),no.scale(1/i);var n=fo.dot(no),a=Math.cos(t);if(a<n){var o=P_(Ot.x,Ot.y,rr.x,rr.y,ga.x,ga.y,L_,!1);gi.fromArray(L_),gi.scaleAndAdd(no,o/Math.tan(Math.PI-t));var s=rr.x!==Ot.x?(gi.x-Ot.x)/(rr.x-Ot.x):(gi.y-Ot.y)/(rr.y-Ot.y);if(isNaN(s))return;s<0?Fe.copy(gi,Ot):s>1&&Fe.copy(gi,rr),gi.toArray(e[1])}}}}function zMe(e,t,r){if(r<=180&&r>0){r=r/180*Math.PI,ga.fromArray(e[0]),Ot.fromArray(e[1]),rr.fromArray(e[2]),Fe.sub(fo,Ot,ga),Fe.sub(no,rr,Ot);var i=fo.len(),n=no.len();if(!(i<.001||n<.001)){fo.scale(1/i),no.scale(1/n);var a=fo.dot(t),o=Math.cos(r);if(a<o){var s=P_(Ot.x,Ot.y,rr.x,rr.y,ga.x,ga.y,L_,!1);gi.fromArray(L_);var l=Math.PI/2,u=Math.acos(no.dot(t)),h=l+u-r;if(h>=l)Fe.copy(gi,rr);else{gi.scaleAndAdd(no,s/Math.tan(Math.PI/2-h));var c=rr.x!==Ot.x?(gi.x-Ot.x)/(rr.x-Ot.x):(gi.y-Ot.y)/(rr.y-Ot.y);if(isNaN(c))return;c<0?Fe.copy(gi,Ot):c>1&&Fe.copy(gi,rr)}gi.toArray(e[1])}}}}function lB(e,t,r,i){var n=r==="normal",a=n?e:e.ensureState(r);a.ignore=t;var o=i.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=i.getModel("lineStyle").getLineStyle();n?e.useStyle(s):a.style=s}function NMe(e,t){var r=t.smooth,i=t.points;if(i)if(e.moveTo(i[0][0],i[0][1]),r>0&&i.length>=3){var n=pl(i[0],i[1]),a=pl(i[1],i[2]);if(!n||!a){e.lineTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]);return}var o=Math.min(n,a)*r,s=V0([],i[1],i[0],o/n),l=V0([],i[1],i[2],o/a),u=V0([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var h=1;h<i.length;h++)e.lineTo(i[h][0],i[h][1])}function FL(e,t,r){var i=e.getTextGuideLine(),n=e.getTextContent();if(!n){i&&e.removeTextGuideLine();return}for(var a=t.normal,o=a.get("show"),s=n.ignore,l=0;l<tg.length;l++){var u=tg[l],h=t[u],c=u==="normal";if(h){var d=h.get("show"),f=c?s:Ve(n.states[u]&&n.states[u].ignore,s);if(f||!Ve(d,o)){var p=c?i:i&&i.states[u];p&&(p.ignore=!0);continue}i||(i=new Yi,e.setTextGuideLine(i),!c&&(s||!o)&&lB(i,!0,"normal",t.normal),e.stateProxy&&(i.stateProxy=e.stateProxy)),lB(i,!1,u,h)}}if(i){De(i.style,r),i.style.fill=null;var v=a.get("showAbove"),g=e.textGuideLineConfig=e.textGuideLineConfig||{};g.showAbove=v||!1,i.buildPath=NMe}}function VL(e,t){t=t||"labelLine";for(var r={normal:e.getModel(t)},i=0;i<Si.length;i++){var n=Si[i];r[n]=e.getModel([n,t])}return r}function P7(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(!i.defaultAttr.ignore){var n=i.label,a=n.getComputedTransform(),o=n.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=n.style.margin||0,u=o.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=s?new p_(o,a):null;t.push({label:n,labelLine:i.labelLine,rect:u,localRect:o,obb:h,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:s,transform:a})}}return t}function L7(e,t,r,i,n,a){var o=e.length;if(o<2)return;e.sort(function(M,A){return M.rect[t]-A.rect[t]});for(var s=0,l,u=!1,h=0,c=0;c<o;c++){var d=e[c],f=d.rect;l=f[t]-s,l<0&&(f[t]-=l,d.label[t]-=l,u=!0);var p=Math.max(-l,0);h+=p,s=f[t]+f[r]}h>0&&a&&w(-h/o,0,o);var v=e[0],g=e[o-1],m,y;_(),m<0&&b(-m,.8),y<0&&b(y,.8),_(),x(m,y,1),x(y,m,-1),_(),m<0&&S(-m),y<0&&S(y);function _(){m=v.rect[t]-i,y=n-g.rect[t]-g.rect[r]}function x(M,A,T){if(M<0){var C=Math.min(A,-M);if(C>0){w(C*T,0,o);var D=C+M;D<0&&b(-D*T,1)}else b(-M*T,1)}}function w(M,A,T){M!==0&&(u=!0);for(var C=A;C<T;C++){var D=e[C],P=D.rect;P[t]+=M,D.label[t]+=M}}function b(M,A){for(var T=[],C=0,D=1;D<o;D++){var P=e[D-1].rect,E=Math.max(e[D].rect[t]-P[t]-P[r],0);T.push(E),C+=E}if(C){var O=Math.min(Math.abs(M)/C,A);if(M>0)for(var D=0;D<o-1;D++){var z=T[D]*O;w(z,0,D+1)}else for(var D=o-1;D>0;D--){var z=T[D-1]*O;w(-z,D,o)}}}function S(M){var A=M<0?-1:1;M=Math.abs(M);for(var T=Math.ceil(M/(o-1)),C=0;C<o-1;C++)if(A>0?w(T,0,C+1):w(-T,o-C-1,o),M-=T,M<=0)return}return u}function kMe(e,t,r,i){return L7(e,"x","width",t,r,i)}function E7(e,t,r,i){return L7(e,"y","height",t,r,i)}function I7(e){var t=[];e.sort(function(v,g){return g.priority-v.priority});var r=new Ge(0,0,0,0);function i(v){if(!v.ignore){var g=v.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}v.ignore=!0}for(var n=0;n<e.length;n++){var a=e[n],o=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,h=a.labelLine;r.copy(a.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var c=a.obb,d=!1,f=0;f<t.length;f++){var p=t[f];if(r.intersect(p.rect)){if(o&&p.axisAligned){d=!0;break}if(p.obb||(p.obb=new p_(p.localRect,p.transform)),c||(c=new p_(s,l)),c.intersect(p.obb)){d=!0;break}}}d?(i(u),h&&i(h)):(u.attr("ignore",a.defaultAttr.ignore),h&&h.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}function BMe(e){if(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].slice());return t}}function FMe(e,t){var r=e.label,i=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:BMe(i&&i.shape.points)}}var uB=["align","verticalAlign","width","height","fontSize"],Qi=new es,u2=it(),VMe=it();function qy(e,t,r){for(var i=0;i<r.length;i++){var n=r[i];t[n]!=null&&(e[n]=t[n])}}var Xy=["x","y","rotation"],UMe=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(t,r,i,n,a){var o=n.style,s=n.__hostTarget,l=s.textConfig||{},u=n.getComputedTransform(),h=n.getBoundingRect().plain();Ge.applyTransform(h,h,u),u?Qi.setLocalTransform(u):(Qi.x=Qi.y=Qi.rotation=Qi.originX=Qi.originY=0,Qi.scaleX=Qi.scaleY=1);var c=n.__hostTarget,d;if(c){d=c.getBoundingRect().plain();var f=c.getComputedTransform();Ge.applyTransform(d,d,f)}var p=d&&c.getTextGuideLine();this._labelList.push({label:n,labelLine:p,seriesModel:i,dataIndex:t,dataType:r,layoutOption:a,computedLayoutOption:null,rect:h,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:p&&p.ignore,x:Qi.x,y:Qi.y,scaleX:Qi.scaleX,scaleY:Qi.scaleY,rotation:Qi.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:n.cursor,attachedPos:l.position,attachedRot:l.rotation}})},e.prototype.addLabelsOfSeries=function(t){var r=this;this._chartViewList.push(t);var i=t.__model,n=i.get("labelLayout");(Ae(n)||Ze(n).length)&&t.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=Re(a);o&&!o.disableLabelLayout&&r._addLabel(s.dataIndex,s.dataType,i,o,n)})},e.prototype.updateLayoutConfig=function(t){var r=t.getWidth(),i=t.getHeight();function n(_,x){return function(){sB(_,x)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,u=o.defaultAttr,h=void 0;Ae(o.layoutOption)?h=o.layoutOption(FMe(o,l)):h=o.layoutOption,h=h||{},o.computedLayoutOption=h;var c=Math.PI/180;l&&l.setTextConfig({local:!1,position:h.x!=null||h.y!=null?null:u.attachedPos,rotation:h.rotate!=null?h.rotate*c:u.attachedRot,offset:[h.dx||0,h.dy||0]});var d=!1;if(h.x!=null?(s.x=ve(h.x,r),s.setStyle("x",0),d=!0):(s.x=u.x,s.setStyle("x",u.style.x)),h.y!=null?(s.y=ve(h.y,i),s.setStyle("y",0),d=!0):(s.y=u.y,s.setStyle("y",u.style.y)),h.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:h.labelLinePoints}),d=!1)}var p=u2(s);p.needsUpdateLabelLine=d,s.rotation=h.rotate!=null?h.rotate*c:u.rotation,s.scaleX=u.scaleX,s.scaleY=u.scaleY;for(var v=0;v<uB.length;v++){var g=uB[v];s.setStyle(g,h[g]!=null?h[g]:u.style[g])}if(h.draggable){if(s.draggable=!0,s.cursor="move",l){var m=o.seriesModel;if(o.dataIndex!=null){var y=o.seriesModel.getData(o.dataType);m=y.getItemModel(o.dataIndex)}s.on("drag",n(l,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=u.cursor}},e.prototype.layout=function(t){var r=t.getWidth(),i=t.getHeight(),n=P7(this._labelList),a=xt(n,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=xt(n,function(l){return l.layoutOption.moveOverlap==="shiftY"});kMe(a,0,r),E7(o,0,i);var s=xt(n,function(l){return l.layoutOption.hideOverlap});I7(s)},e.prototype.processLabelsOverall=function(){var t=this;I(this._chartViewList,function(r){var i=r.__model,n=r.ignoreLabelLineUpdate,a=i.isAnimationEnabled();r.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!n,l=o.getTextContent();!s&&l&&(s=u2(l).needsUpdateLabelLine),s&&t._updateLabelLine(o,i),a&&t._animateLabels(o,i)})})},e.prototype._updateLabelLine=function(t,r){var i=t.getTextContent(),n=Re(t),a=n.dataIndex;if(i&&a!=null){var o=r.getData(n.dataType),s=o.getItemModel(a),l={},u=o.getItemVisual(a,"style"),h=o.getVisual("drawType");l.stroke=u[h];var c=s.getModel("labelLine");FL(t,VL(s),l),sB(t,c)}},e.prototype._animateLabels=function(t,r){var i=t.getTextContent(),n=t.getTextGuideLine();if(i&&(t.forceLabelAnimation||!i.ignore&&!i.invisible&&!t.disableLabelAnimation&&!md(t))){var a=u2(i),o=a.oldLayout,s=Re(t),l=s.dataIndex,u={x:i.x,y:i.y,rotation:i.rotation},h=r.getData(s.dataType);if(o){i.attr(o);var d=t.prevStates;d&&(We(d,"select")>=0&&i.attr(a.oldLayoutSelect),We(d,"emphasis")>=0&&i.attr(a.oldLayoutEmphasis)),ut(i,u,r,l)}else if(i.attr(u),!ff(i).valueAnimation){var c=Ve(i.style.opacity,1);i.style.opacity=0,Ut(i,{style:{opacity:c}},r,l)}if(a.oldLayout=u,i.states.select){var f=a.oldLayoutSelect={};qy(f,u,Xy),qy(f,i.states.select,Xy)}if(i.states.emphasis){var p=a.oldLayoutEmphasis={};qy(p,u,Xy),qy(p,i.states.emphasis,Xy)}m8(i,l,h,r,r)}if(n&&!n.ignore&&!n.invisible){var a=VMe(n),o=a.oldLayout,v={points:n.shape.points};o?(n.attr({shape:o}),ut(n,{shape:v},r)):(n.setShape(v),n.style.strokePercent=0,Ut(n,{style:{strokePercent:1}},r)),a.oldLayout=v}},e}();const GMe=UMe;var h2=it();function HMe(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,r,i){var n=h2(r).labelManager;n||(n=h2(r).labelManager=new GMe),n.clearLabels()}),e.registerUpdateLifecycle("series:layoutlabels",function(t,r,i){var n=h2(r).labelManager;i.updatedSeries.forEach(function(a){n.addLabelsOfSeries(r.getViewOfSeriesModel(a))}),n.updateLayoutConfig(r),n.layout(r),n.processLabelsOverall()})}var c2=Math.sin,d2=Math.cos,O7=Math.PI,Cu=Math.PI*2,jMe=180/O7,WMe=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,r){this._add("M",t,r)},e.prototype.lineTo=function(t,r){this._add("L",t,r)},e.prototype.bezierCurveTo=function(t,r,i,n,a,o){this._add("C",t,r,i,n,a,o)},e.prototype.quadraticCurveTo=function(t,r,i,n){this._add("Q",t,r,i,n)},e.prototype.arc=function(t,r,i,n,a,o){this.ellipse(t,r,i,i,0,n,a,o)},e.prototype.ellipse=function(t,r,i,n,a,o,s,l){var u=s-o,h=!l,c=Math.abs(u),d=_l(c-Cu)||(h?u>=Cu:-u>=Cu),f=u>0?u%Cu:u%Cu+Cu,p=!1;d?p=!0:_l(c)?p=!1:p=f>=O7==!!h;var v=t+i*d2(o),g=r+n*c2(o);this._start&&this._add("M",v,g);var m=Math.round(a*jMe);if(d){var y=1/this._p,_=(h?1:-1)*(Cu-y);this._add("A",i,n,m,1,+h,t+i*d2(o+_),r+n*c2(o+_)),y>.01&&this._add("A",i,n,m,0,+h,v,g)}else{var x=t+i*d2(s),w=r+n*c2(s);this._add("A",i,n,m,+p,+h,x,w)}},e.prototype.rect=function(t,r,i,n){this._add("M",t,r),this._add("l",i,0),this._add("l",0,n),this._add("l",-i,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,r,i,n,a,o,s,l,u){for(var h=[],c=this._p,d=1;d<arguments.length;d++){var f=arguments[d];if(isNaN(f)){this._invalid=!0;return}h.push(Math.round(f*c)/c)}this._d.push(t+h.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}();const R7=WMe;var wv="none",$Me=Math.round;function qMe(e){var t=e.fill;return t!=null&&t!==wv}function XMe(e){var t=e.stroke;return t!=null&&t!==wv}var JA=["lineCap","miterLimit","lineJoin"],YMe=ce(JA,function(e){return"stroke-"+e.toLowerCase()});function ZMe(e,t,r,i){var n=t.opacity==null?1:t.opacity;if(r instanceof $r){e("opacity",n);return}if(qMe(t)){var a=Jv(t.fill);e("fill",a.color);var o=t.fillOpacity!=null?t.fillOpacity*a.opacity*n:a.opacity*n;(i||o<1)&&e("fill-opacity",o)}else e("fill",wv);if(XMe(t)){var s=Jv(t.stroke);e("stroke",s.color);var l=t.strokeNoScale?r.getLineScale():1,u=l?(t.lineWidth||0)/l:0,h=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*n:s.opacity*n,c=t.strokeFirst;if((i||u!==1)&&e("stroke-width",u),(i||c)&&e("paint-order",c?"stroke":"fill"),(i||h<1)&&e("stroke-opacity",h),t.lineDash){var d=CL(r),f=d[0],p=d[1];f&&(p=$Me(p||0),e("stroke-dasharray",f.join(",")),(p||i)&&e("stroke-dashoffset",p))}else i&&e("stroke-dasharray",wv);for(var v=0;v<JA.length;v++){var g=JA[v];if(i||t[g]!==d_[g]){var m=t[g]||d_[g];m&&e(YMe[v],m)}}}else i&&e("stroke",wv)}var z7="http://www.w3.org/2000/svg",N7="http://www.w3.org/1999/xlink",KMe="http://www.w3.org/2000/xmlns/",JMe="http://www.w3.org/XML/1998/namespace";function k7(e){return document.createElementNS(z7,e)}function Ar(e,t,r,i,n){return{tag:e,attrs:r||{},children:i,text:n,key:t}}function QMe(e,t){var r=[];if(t)for(var i in t){var n=t[i],a=i;n!==!1&&(n!==!0&&n!=null&&(a+='="'+n+'"'),r.push(a))}return"<"+e+" "+r.join(" ")+">"}function eTe(e){return"</"+e+">"}function UL(e,t){t=t||{};var r=t.newline?`
`:"";function i(n){var a=n.children,o=n.tag,s=n.attrs,l=n.text;return QMe(o,s)+(o!=="style"?Ii(l):l||"")+(a?""+r+ce(a,function(u){return i(u)}).join(r)+r:"")+eTe(o)}return i(e)}function tTe(e,t,r){r=r||{};var i=r.newline?`
`:"",n=" {"+i,a=i+"}",o=ce(Ze(e),function(l){return l+n+ce(Ze(e[l]),function(u){return u+":"+e[l][u]+";"}).join(i)+a}).join(i),s=ce(Ze(t),function(l){return"@keyframes "+l+n+ce(Ze(t[l]),function(u){return u+n+ce(Ze(t[l][u]),function(h){var c=t[l][u][h];return h==="d"&&(c='path("'+c+'")'),h+":"+c+";"}).join(i)+a}).join(i)+a}).join(i);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(i)}function QA(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function hB(e,t,r,i){return Ar("svg","root",{width:e,height:t,xmlns:z7,"xmlns:xlink":N7,version:"1.1",baseProfile:"full",viewBox:i?"0 0 "+e+" "+t:!1},r)}var cB={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},zu="transform-origin";function rTe(e,t,r){var i=ae({},e.shape);ae(i,t),e.buildPath(r,i);var n=new R7;return n.reset(Zj(e)),r.rebuildPath(n,1),n.generateStr(),n.getStr()}function iTe(e,t){var r=t.originX,i=t.originY;(r||i)&&(e[zu]=r+"px "+i+"px")}var nTe={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function B7(e,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=e,r}function aTe(e,t,r){var i=e.shape.paths,n={},a,o;if(I(i,function(l){var u=QA(r.zrId);u.animation=!0,fb(l,{},u,!0);var h=u.cssAnims,c=u.cssNodes,d=Ze(h),f=d.length;if(f){o=d[f-1];var p=h[o];for(var v in p){var g=p[v];n[v]=n[v]||{d:""},n[v].d+=g.d||""}for(var m in c){var y=c[m].animation;y.indexOf(o)>=0&&(a=y)}}}),!!a){t.d=!1;var s=B7(n,r);return a.replace(o,s)}}function dB(e){return ge(e)?cB[e]?"cubic-bezier("+cB[e]+")":HP(e)?e:"":""}function fb(e,t,r,i){var n=e.animators,a=n.length,o=[];if(e instanceof oL){var s=aTe(e,t,r);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var h=n[u],c=[h.getMaxTime()/1e3+"s"],d=dB(h.getClip().easing),f=h.getDelay();d?c.push(d):c.push("linear"),f&&c.push(f/1e3+"s"),h.getLoop()&&c.push("infinite");var p=c.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(h)}function v(y){var _=y[1],x=_.length,w={},b={},S={},M="animation-timing-function";function A(W,j,K){for(var ee=W.getTracks(),R=W.getMaxTime(),k=0;k<ee.length;k++){var V=ee[k];if(V.needsAnimate()){var q=V.keyframes,Q=V.propName;if(K&&(Q=K(Q)),Q)for(var J=0;J<q.length;J++){var oe=q[J],le=Math.round(oe.time/R*100)+"%",pe=dB(oe.easing),he=oe.rawValue;(ge(he)||st(he))&&(j[le]=j[le]||{},j[le][Q]=oe.rawValue,pe&&(j[le][M]=pe))}}}}for(var T=0;T<x;T++){var C=_[T],D=C.targetName;D?D==="shape"&&A(C,b):!i&&A(C,w)}for(var P in w){var E={};tW(E,e),ae(E,w[P]);var O=Kj(E),z=w[P][M];S[P]=O?{transform:O}:{},iTe(S[P],E),z&&(S[P][M]=z)}var B,N=!0;for(var P in b){S[P]=S[P]||{};var F=!B,z=b[P][M];F&&(B=new Mo);var G=B.len();B.reset(),S[P].d=rTe(e,b[P],B);var H=B.len();if(!F&&G!==H){N=!1;break}z&&(S[P][M]=z)}if(!N)for(var P in S)delete S[P].d;if(!i)for(var T=0;T<x;T++){var C=_[T],D=C.targetName;D==="style"&&A(C,S,function(ee){return nTe[ee]})}for(var $=Ze(S),Z=!0,X,T=1;T<$.length;T++){var ne=$[T-1],te=$[T];if(S[ne][zu]!==S[te][zu]){Z=!1;break}X=S[ne][zu]}if(Z&&X){for(var P in S)S[P][zu]&&delete S[P][zu];t[zu]=X}if(xt($,function(W){return Ze(S[W]).length>0}).length){var U=B7(S,r);return U+" "+y[0]+" both"}}for(var g in l){var s=v(l[g]);s&&o.push(s)}if(o.length){var m=r.zrId+"-cls-"+r.cssClassIdx++;r.cssNodes["."+m]={animation:o.join(",")},t.class=m}}var dg=Math.round;function F7(e){return e&&ge(e.src)}function V7(e){return e&&Ae(e.toDataURL)}function GL(e,t,r,i){ZMe(function(n,a){var o=n==="fill"||n==="stroke";o&&Yj(a)?G7(t,e,n,i):o&&jP(a)?H7(r,e,n,i):e[n]=a},t,r,!1),dTe(r,e,i)}function fB(e){return _l(e[0]-1)&&_l(e[1])&&_l(e[2])&&_l(e[3]-1)}function oTe(e){return _l(e[4])&&_l(e[5])}function HL(e,t,r){if(t&&!(oTe(t)&&fB(t))){var i=r?10:1e4;e.transform=fB(t)?"translate("+dg(t[4]*i)/i+" "+dg(t[5]*i)/i+")":n1e(t)}}function pB(e,t,r){for(var i=e.points,n=[],a=0;a<i.length;a++)n.push(dg(i[a][0]*r)/r),n.push(dg(i[a][1]*r)/r);t.points=n.join(" ")}function vB(e){return!e.smooth}function sTe(e){var t=ce(e,function(r){return typeof r=="string"?[r,r]:r});return function(r,i,n){for(var a=0;a<t.length;a++){var o=t[a],s=r[o[0]];s!=null&&(i[o[1]]=dg(s*n)/n)}}}var lTe={circle:[sTe(["cx","cy","r"])],polyline:[pB,vB],polygon:[pB,vB]};function uTe(e){for(var t=e.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function U7(e,t){var r=e.style,i=e.shape,n=lTe[e.type],a={},o=t.animation,s="path",l=e.style.strokePercent,u=t.compress&&Zj(e)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](i))&&!(o&&uTe(e))&&!(l<1)){s=e.type;var h=Math.pow(10,u);n[0](i,a,h)}else{var c=!e.path||e.shapeChanged();e.path||e.createPathProxy();var d=e.path;c&&(d.beginPath(),e.buildPath(d,e.shape),e.pathUpdated());var f=d.getVersion(),p=e,v=p.__svgPathBuilder;(p.__svgPathVersion!==f||!v||l!==p.__svgPathStrokePercent)&&(v||(v=p.__svgPathBuilder=new R7),v.reset(u),d.rebuildPath(v,l),v.generateStr(),p.__svgPathVersion=f,p.__svgPathStrokePercent=l),a.d=v.getStr()}return HL(a,e.transform),GL(a,r,e,t),t.animation&&fb(e,a,t),Ar(s,e.id+"",a)}function hTe(e,t){var r=e.style,i=r.image;if(i&&!ge(i)&&(F7(i)?i=i.src:V7(i)&&(i=i.toDataURL())),!!i){var n=r.x||0,a=r.y||0,o=r.width,s=r.height,l={href:i,width:o,height:s};return n&&(l.x=n),a&&(l.y=a),HL(l,e.transform),GL(l,r,e,t),t.animation&&fb(e,l,t),Ar("image",e.id+"",l)}}function cTe(e,t){var r=e.style,i=r.text;if(i!=null&&(i+=""),!(!i||isNaN(r.x)||isNaN(r.y))){var n=r.font||zl,a=r.x||0,o=o1e(r.y||0,Ux(n),r.textBaseline),s=a1e[r.textAlign]||r.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(RW(r)){var u="",h=r.fontStyle,c=OW(r.fontSize);if(!parseFloat(c))return;var d=r.fontFamily||Mj,f=r.fontWeight;u+="font-size:"+c+";font-family:"+d+";",h&&h!=="normal"&&(u+="font-style:"+h+";"),f&&f!=="normal"&&(u+="font-weight:"+f+";"),l.style=u}else l.style="font: "+n;return i.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),HL(l,e.transform),GL(l,r,e,t),t.animation&&fb(e,l,t),Ar("text",e.id+"",l,void 0,i)}}function gB(e,t){if(e instanceof qe)return U7(e,t);if(e instanceof $r)return hTe(e,t);if(e instanceof eg)return cTe(e,t)}function dTe(e,t,r){var i=e.style;if(s1e(i)){var n=l1e(e),a=r.shadowCache,o=a[n];if(!o){var s=e.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var h=i.shadowOffsetX||0,c=i.shadowOffsetY||0,d=i.shadowBlur,f=Jv(i.shadowColor),p=f.opacity,v=f.color,g=d/2/l,m=d/2/u,y=g+" "+m;o=r.zrId+"-s"+r.shadowIdx++,r.defs[o]=Ar("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Ar("feDropShadow","",{dx:h/l,dy:c/u,stdDeviation:y,"flood-color":v,"flood-opacity":p})]),a[n]=o}t.filter=Vx(o)}}function G7(e,t,r,i){var n=e[r],a,o={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(qj(n))a="linearGradient",o.x1=n.x,o.y1=n.y,o.x2=n.x2,o.y2=n.y2;else if(Xj(n))a="radialGradient",o.cx=Ve(n.x,.5),o.cy=Ve(n.y,.5),o.r=Ve(n.r,.5);else return;for(var s=n.colorStops,l=[],u=0,h=s.length;u<h;++u){var c=fA(s[u].offset)*100+"%",d=s[u].color,f=Jv(d),p=f.color,v=f.opacity,g={offset:c};g["stop-color"]=p,v<1&&(g["stop-opacity"]=v),l.push(Ar("stop",u+"",g))}var m=Ar(a,"",o,l),y=UL(m),_=i.gradientCache,x=_[y];x||(x=i.zrId+"-g"+i.gradientIdx++,_[y]=x,o.id=x,i.defs[x]=Ar(a,x,o,l)),t[r]=Vx(x)}function H7(e,t,r,i){var n=e.style[r],a=e.getBoundingRect(),o={},s=n.repeat,l=s==="no-repeat",u=s==="repeat-x",h=s==="repeat-y",c;if($j(n)){var d=n.imageWidth,f=n.imageHeight,p=void 0,v=n.image;if(ge(v)?p=v:F7(v)?p=v.src:V7(v)&&(p=v.toDataURL()),typeof Image>"u"){var g="Image width/height must been given explictly in svg-ssr renderer.";wi(d,g),wi(f,g)}else if(d==null||f==null){var m=function(T,C){if(T){var D=T.elm,P=d||C.width,E=f||C.height;T.tag==="pattern"&&(u?(E=1,P/=a.width):h&&(P=1,E/=a.height)),T.attrs.width=P,T.attrs.height=E,D&&(D.setAttribute("width",P),D.setAttribute("height",E))}},y=KP(p,null,e,function(T){l||m(b,T),m(c,T)});y&&y.width&&y.height&&(d=d||y.width,f=f||y.height)}c=Ar("image","img",{href:p,width:d,height:f}),o.width=d,o.height=f}else n.svgElement&&(c=Ee(n.svgElement),o.width=n.svgWidth,o.height=n.svgHeight);if(c){var _,x;l?_=x=1:u?(x=1,_=o.width/a.width):h?(_=1,x=o.height/a.height):o.patternUnits="userSpaceOnUse",_!=null&&!isNaN(_)&&(o.width=_),x!=null&&!isNaN(x)&&(o.height=x);var w=Kj(n);w&&(o.patternTransform=w);var b=Ar("pattern","",o,[c]),S=UL(b),M=i.patternCache,A=M[S];A||(A=i.zrId+"-p"+i.patternIdx++,M[S]=A,o.id=A,b=i.defs[A]=Ar("pattern",A,o,[c])),t[r]=Vx(A)}}function fTe(e,t,r){var i=r.clipPathCache,n=r.defs,a=i[e.id];if(!a){a=r.zrId+"-c"+r.clipPathIdx++;var o={id:a};i[e.id]=a,n[a]=Ar("clipPath",a,o,[U7(e,r)])}t["clip-path"]=Vx(a)}function mB(e){return document.createTextNode(e)}function Xu(e,t,r){e.insertBefore(t,r)}function yB(e,t){e.removeChild(t)}function _B(e,t){e.appendChild(t)}function j7(e){return e.parentNode}function W7(e){return e.nextSibling}function f2(e,t){e.textContent=t}var xB=58,pTe=120,vTe=Ar("","");function eC(e){return e===void 0}function Za(e){return e!==void 0}function gTe(e,t,r){for(var i={},n=t;n<=r;++n){var a=e[n].key;a!==void 0&&(i[a]=n)}return i}function Vp(e,t){var r=e.key===t.key,i=e.tag===t.tag;return i&&r}function fg(e){var t,r=e.children,i=e.tag;if(Za(i)){var n=e.elm=k7(i);if(jL(vTe,e),ue(r))for(t=0;t<r.length;++t){var a=r[t];a!=null&&_B(n,fg(a))}else Za(e.text)&&!Pe(e.text)&&_B(n,mB(e.text))}else e.elm=mB(e.text);return e.elm}function $7(e,t,r,i,n){for(;i<=n;++i){var a=r[i];a!=null&&Xu(e,fg(a),t)}}function E_(e,t,r,i){for(;r<=i;++r){var n=t[r];if(n!=null)if(Za(n.tag)){var a=j7(n.elm);yB(a,n.elm)}else yB(e,n.elm)}}function jL(e,t){var r,i=t.elm,n=e&&e.attrs||{},a=t.attrs||{};if(n!==a){for(r in a){var o=a[r],s=n[r];s!==o&&(o===!0?i.setAttribute(r,""):o===!1?i.removeAttribute(r):r.charCodeAt(0)!==pTe?i.setAttribute(r,o):r==="xmlns:xlink"||r==="xmlns"?i.setAttributeNS(KMe,r,o):r.charCodeAt(3)===xB?i.setAttributeNS(JMe,r,o):r.charCodeAt(5)===xB?i.setAttributeNS(N7,r,o):i.setAttribute(r,o))}for(r in n)r in a||i.removeAttribute(r)}}function mTe(e,t,r){for(var i=0,n=0,a=t.length-1,o=t[0],s=t[a],l=r.length-1,u=r[0],h=r[l],c,d,f,p;i<=a&&n<=l;)o==null?o=t[++i]:s==null?s=t[--a]:u==null?u=r[++n]:h==null?h=r[--l]:Vp(o,u)?(jc(o,u),o=t[++i],u=r[++n]):Vp(s,h)?(jc(s,h),s=t[--a],h=r[--l]):Vp(o,h)?(jc(o,h),Xu(e,o.elm,W7(s.elm)),o=t[++i],h=r[--l]):Vp(s,u)?(jc(s,u),Xu(e,s.elm,o.elm),s=t[--a],u=r[++n]):(eC(c)&&(c=gTe(t,i,a)),d=c[u.key],eC(d)?Xu(e,fg(u),o.elm):(f=t[d],f.tag!==u.tag?Xu(e,fg(u),o.elm):(jc(f,u),t[d]=void 0,Xu(e,f.elm,o.elm))),u=r[++n]);(i<=a||n<=l)&&(i>a?(p=r[l+1]==null?null:r[l+1].elm,$7(e,p,r,n,l)):E_(e,t,i,a))}function jc(e,t){var r=t.elm=e.elm,i=e.children,n=t.children;e!==t&&(jL(e,t),eC(t.text)?Za(i)&&Za(n)?i!==n&&mTe(r,i,n):Za(n)?(Za(e.text)&&f2(r,""),$7(r,null,n,0,n.length-1)):Za(i)?E_(r,i,0,i.length-1):Za(e.text)&&f2(r,""):e.text!==t.text&&(Za(i)&&E_(r,i,0,i.length-1),f2(r,t.text)))}function yTe(e,t){if(Vp(e,t))jc(e,t);else{var r=e.elm,i=j7(r);fg(t),i!==null&&(Xu(i,t.elm,W7(r)),E_(i,[e],0,0))}return t}var _Te=0,xTe=function(){function e(t,r,i){if(this.type="svg",this.refreshHover=bB(),this.configLayer=bB(),this.storage=r,this._opts=i=ae({},i),this.root=t,this._id="zr"+_Te++,this._oldVNode=hB(i.width,i.height),t&&!i.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=k7("svg");jL(null,this._oldVNode),n.appendChild(a),t.appendChild(n)}this.resize(i.width,i.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",yTe(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return gB(t,QA(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),i=this._width,n=this._height,a=QA(this._id);a.animation=t.animation,a.willUpdate=t.willUpdate,a.compress=t.compress;var o=[],s=this._bgVNode=bTe(i,n,this._backgroundColor,a);s&&o.push(s);var l=t.compress?null:this._mainVNode=Ar("g","main",{},[]);this._paintList(r,a,l?l.children:o),l&&o.push(l);var u=ce(Ze(a.defs),function(d){return a.defs[d]});if(u.length&&o.push(Ar("defs","defs",{},u)),t.animation){var h=tTe(a.cssNodes,a.cssAnims,{newline:!0});if(h){var c=Ar("style","stl",{},[],h);o.push(c)}}return hB(i,n,o,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},UL(this.renderToVNode({animation:Ve(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:Ve(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,r,i){for(var n=t.length,a=[],o=0,s,l,u=0,h=0;h<n;h++){var c=t[h];if(!c.invisible){var d=c.__clipPaths,f=d&&d.length||0,p=l&&l.length||0,v=void 0;for(v=Math.max(f-1,p-1);v>=0&&!(d&&l&&d[v]===l[v]);v--);for(var g=p-1;g>v;g--)o--,s=a[o-1];for(var m=v+1;m<f;m++){var y={};fTe(d[m],y,r);var _=Ar("g","clip-g-"+u++,y,[]);(s?s.children:i).push(_),a[o++]=_,s=_}l=d;var x=gB(c,r);x&&(s?s.children:i).push(x)}}},e.prototype.resize=function(t,r){var i=this._opts,n=this.root,a=this._viewport;if(t!=null&&(i.width=t),r!=null&&(i.height=r),n&&a&&(a.style.display="none",t=id(n,0,i),r=id(n,1,i),a.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,a){var o=a.style;o.width=t+"px",o.height=r+"px"}if(jP(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",r));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",r))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var r=this.renderToString(),i="data:image/svg+xml;";return t?(r=h1e(r),r&&i+"base64,"+r):i+"charset=UTF-8,"+encodeURIComponent(r)},e}();function bB(e){return function(){}}function bTe(e,t,r,i){var n;if(r&&r!=="none")if(n=Ar("rect","bg",{width:e,height:t,x:"0",y:"0",id:"0"}),Yj(r))G7({fill:r},n.attrs,"fill",i);else if(jP(r))H7({style:{fill:r},dirty:sr,getBoundingRect:function(){return{width:e,height:t}}},n.attrs,"fill",i);else{var a=Jv(r),o=a.color,s=a.opacity;n.attrs.fill=o,s<1&&(n.attrs["fill-opacity"]=s)}return n}const wTe=xTe;function STe(e){e.registerPainter("svg",wTe)}function wB(e,t,r){var i=Nl.createCanvas(),n=t.getWidth(),a=t.getHeight(),o=i.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=n+"px",o.height=a+"px",i.setAttribute("data-zr-dom-id",e)),i.width=n*r,i.height=a*r,i}var MTe=function(e){Y(t,e);function t(r,i,n){var a=e.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;n=n||u_,typeof r=="string"?o=wB(r,i,n):Pe(r)&&(o=r,r=o.id),a.id=r,a.dom=o;var s=o.style;return s&&(Lj(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=i,a.dpr=n,a}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=wB("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,i,n,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new Ge(0,0,0,0);function h(y){if(!(!y.isFinite()||y.isZero()))if(o.length===0){var _=new Ge(0,0,0,0);_.copy(y),o.push(_)}else{for(var x=!1,w=1/0,b=0,S=0;S<o.length;++S){var M=o[S];if(M.intersect(y)){var A=new Ge(0,0,0,0);A.copy(M),A.union(y),o[S]=A,x=!0;break}else if(l){u.copy(y),u.union(M);var T=y.width*y.height,C=M.width*M.height,D=u.width*u.height,P=D-T-C;P<w&&(w=P,b=S)}}if(l&&(o[b].union(y),x=!0),!x){var _=new Ge(0,0,0,0);_.copy(y),o.push(_)}l||(l=o.length>=s)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var d=r[c];if(d){var f=d.shouldBePainted(n,a,!0,!0),p=d.__isRendered&&(d.__dirty&rn||!f)?d.getPrevPaintRect():null;p&&h(p);var v=f&&(d.__dirty&rn||!d.__isRendered)?d.getPaintRect():null;v&&h(v)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var d=i[c],f=d.shouldBePainted(n,a,!0,!0);if(d&&(!f||!d.__zr)&&d.__isRendered){var p=d.getPrevPaintRect();p&&h(p)}}var g;do{g=!1;for(var c=0;c<o.length;){if(o[c].isZero()){o.splice(c,1);continue}for(var m=c+1;m<o.length;)o[c].intersect(o[m])?(g=!0,o[c].union(o[m]),o.splice(m,1)):m++;c++}}while(g);return this._paintRects=o,o},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,i){var n=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=r+"px",o.height=i+"px"),a.width=r*n,a.height=i*n,s&&(s.width=r*n,s.height=i*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(r,i,n){var a=this.dom,o=this.ctx,s=a.width,l=a.height;i=i||this.clearColor;var u=this.motionBlur&&!r,h=this.lastFrameAlpha,c=this.dpr,d=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/c,l/c));var f=this.domBack;function p(v,g,m,y){if(o.clearRect(v,g,m,y),i&&i!=="transparent"){var _=void 0;if(kx(i)){var x=i.global||i.__width===m&&i.__height===y;_=x&&i.__canvasGradient||jA(o,i,{x:0,y:0,width:m,height:y}),i.__canvasGradient=_,i.__width=m,i.__height=y}else h0e(i)&&(i.scaleX=i.scaleX||c,i.scaleY=i.scaleY||c,_=WA(o,i,{dirty:function(){d.setUnpainted(),d.__painter.refresh()}}));o.save(),o.fillStyle=_||i,o.fillRect(v,g,m,y),o.restore()}u&&(o.save(),o.globalAlpha=h,o.drawImage(f,v,g,m,y),o.restore())}!n||u?p(0,0,s,l):n.length&&I(n,function(v){p(v.x*c,v.y*c,v.width*c,v.height*c)})},t}(jn);const p2=MTe;var SB=1e5,Du=314159,Yy=.01,TTe=.001;function ATe(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function CTe(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var DTe=function(){function e(t,r,i,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=i=ae({},i||{}),this.dpr=i.devicePixelRatio||u_,this._singleCanvas=a,this.root=t;var o=t.style;o&&(Lj(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var h=t,c=h.width,d=h.height;i.width!=null&&(c=i.width),i.height!=null&&(d=i.height),this.dpr=i.devicePixelRatio||1,h.width=c*this.dpr,h.height=d*this.dpr,this._width=c,this._height=d;var f=new p2(h,this,this.dpr);f.__builtin__=!0,f.initContext(),l[Du]=f,f.zlevel=Du,s.push(Du),this._domRoot=t}else{this._width=id(t,0,i),this._height=id(t,1,i);var u=this._domRoot=CTe(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),i=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,i,t,this._redrawId);for(var a=0;a<n.length;a++){var o=n[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,i=this._hoverlayer;if(i&&i.clear(),!!r){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<r;o++){var s=t[o];s.__inHover&&(i||(i=this._hoverlayer=this.getLayer(SB)),a||(a=i.ctx,a.save()),nh(a,s,n,o===r-1))}a&&a.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(SB)},e.prototype.paintOne=function(t,r){C9(t,r)},e.prototype._paintList=function(t,r,i,n){if(this._redrawId===n){i=i||!1,this._updateLayerStatus(t);var a=this._doPaintList(t,r,i),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;lA(function(){l._paintList(t,r,i,n)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(Du).ctx,r=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,r,i),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,r,i)})},e.prototype._doPaintList=function(t,r,i){for(var n=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||i)&&a.push(u)}for(var h=!0,c=!1,d=function(v){var g=a[v],m=g.ctx,y=o&&g.createRepaintRects(t,r,f._width,f._height),_=i?g.__startIndex:g.__drawIndex,x=!i&&g.incremental&&Date.now,w=x&&Date.now(),b=g.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,b,y);else if(_===g.__startIndex){var S=t[_];(!S.incremental||!S.notClear||i)&&g.clear(!1,b,y)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=g.__startIndex);var M,A=function(P){var E={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(M=_;M<g.__endIndex;M++){var O=t[M];if(O.__inHover&&(c=!0),n._doPaintEl(O,g,o,P,E,M===g.__endIndex-1),x){var z=Date.now()-w;if(z>15)break}}E.prevElClipPaths&&m.restore()};if(y)if(y.length===0)M=g.__endIndex;else for(var T=f.dpr,C=0;C<y.length;++C){var D=y[C];m.save(),m.beginPath(),m.rect(D.x*T,D.y*T,D.width*T,D.height*T),m.clip(),A(D),m.restore()}else m.save(),A(),m.restore();g.__drawIndex=M,g.__drawIndex<g.__endIndex&&(h=!1)},f=this,p=0;p<a.length;p++)d(p);return at.wxa&&I(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:h,needsRefreshHover:c}},e.prototype._doPaintEl=function(t,r,i,n,a,o){var s=r.ctx;if(i){var l=t.getPaintRect();(!n||l&&l.intersect(n))&&(nh(s,t,a,o),t.setPrevPaintRect(l))}else nh(s,t,a,o)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Du);var i=this._layers[t];return i||(i=new p2("zr_"+t,this,this.dpr),i.zlevel=t,i.__builtin__=!0,this._layerConfig[t]?Ue(i,this._layerConfig[t],!0):this._layerConfig[t-Yy]&&Ue(i,this._layerConfig[t-Yy],!0),r&&(i.virtual=r),this.insertLayer(t,i),i.initContext()),i},e.prototype.insertLayer=function(t,r){var i=this._layers,n=this._zlevelList,a=n.length,o=this._domRoot,s=null,l=-1;if(!i[t]&&ATe(r)){if(a>0&&t>n[0]){for(l=0;l<a-1&&!(n[l]<t&&n[l+1]>t);l++);s=i[n[l]]}if(n.splice(l+1,0,t),i[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(r.dom,u.nextSibling):o.appendChild(r.dom)}else o.firstChild?o.insertBefore(r.dom,o.firstChild):o.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n];t.call(r,this._layers[a],a)}},e.prototype.eachBuiltinLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n],o=this._layers[a];o.__builtin__&&t.call(r,o,a)}},e.prototype.eachOtherLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n],o=this._layers[a];o.__builtin__||t.call(r,o,a)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(c,d){c.__dirty=c.__used=!1});function r(c){a&&(a.__endIndex!==c&&(a.__dirty=!0),a.__endIndex=c)}if(this._singleCanvas)for(var i=1;i<t.length;i++){var n=t[i];if(n.zlevel!==t[i-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<t.length;l++){var n=t[l],u=n.zlevel,h=void 0;s!==u&&(s=u,o=0),n.incremental?(h=this.getLayer(u+TTe,this._needsManuallyCompositing),h.incremental=!0,o=1):h=this.getLayer(u+(o>0?Yy:0),this._needsManuallyCompositing),h.__builtin__||NP("ZLevel "+u+" has been used by unkown layer "+h.id),h!==a&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,r(l),a=h),n.__dirty&rn&&!n.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(c,d){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,I(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var i=this._layerConfig;i[t]?Ue(i[t],r,!0):i[t]=r;for(var n=0;n<this._zlevelList.length;n++){var a=this._zlevelList[n];if(a===t||a===t+Yy){var o=this._layers[a];Ue(o,i[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,i=this._zlevelList,n=r[t];n&&(n.dom.parentNode.removeChild(n.dom),delete r[t],i.splice(We(i,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts,a=this.root;if(t!=null&&(n.width=t),r!=null&&(n.height=r),t=id(a,0,n),r=id(a,1,n),i.style.display="",this._width!==t||r!==this._height){i.style.width=t+"px",i.style.height=r+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(Du).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Du].dom;var r=new p2("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var i=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=r.dom.width,a=r.dom.height;this.eachLayer(function(c){c.__builtin__?i.drawImage(c.dom,0,0,n,a):c.renderToCanvas&&(i.save(),c.renderToCanvas(i),i.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var h=s[l];nh(i,h,o,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const PTe=DTe;function LTe(e){e.registerPainter("canvas",PTe)}var ETe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return Ds(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var i=new Ie,n=vr("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);i.add(n),n.setStyle(r.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=r.itemHeight*.8,u=vr(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);i.add(u),u.setStyle(r.itemStyle);var h=r.iconRotate==="inherit"?o:r.iconRotate||0;return u.rotation=h*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),i},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}($t);const ITe=ETe;function Fd(e,t){var r=e.mapDimensionsAll("defaultedLabel"),i=r.length;if(i===1){var n=Nd(e,t,r[0]);return n!=null?n+"":null}else if(i){for(var a=[],o=0;o<r.length;o++)a.push(Nd(e,t,r[o]));return a.join(" ")}}function q7(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!ue(t))return t+"";for(var i=[],n=0;n<r.length;n++){var a=e.getDimensionIndex(r[n]);a>=0&&i.push(t[a])}return i.join(" ")}var OTe=function(e){Y(t,e);function t(r,i,n,a){var o=e.call(this)||this;return o.updateData(r,i,n,a),o}return t.prototype._createSymbol=function(r,i,n,a,o){this.removeAll();var s=vr(r,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=RTe,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){xs(this.childAt(0))},t.prototype.downplay=function(){bs(this.childAt(0))},t.prototype.setZ=function(r,i){var n=this.childAt(0);n.zlevel=r,n.z=i},t.prototype.setDraggable=function(r,i){var n=this.childAt(0);n.draggable=r,n.cursor=!i&&r?"move":n.cursor},t.prototype.updateData=function(r,i,n,a){this.silent=!1;var o=r.getItemVisual(i,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,i),u=o!==this._symbolType,h=a&&a.disableAnimation;if(u){var c=r.getItemVisual(i,"symbolKeepAspect");this._createSymbol(o,r,i,l,c)}else{var d=this.childAt(0);d.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};h?d.attr(f):ut(d,f,s,i),Ca(d)}if(this._updateCommon(r,i,l,n,a),u){var d=this.childAt(0);if(!h){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:d.style.opacity}};d.scaleX=d.scaleY=0,d.style.opacity=0,Ut(d,f,s,i)}}h&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,i,n,a,o){var s=this.childAt(0),l=r.hostModel,u,h,c,d,f,p,v,g,m;if(a&&(u=a.emphasisItemStyle,h=a.blurItemStyle,c=a.selectItemStyle,d=a.focus,f=a.blurScope,v=a.labelStatesModels,g=a.hoverScale,m=a.cursorStyle,p=a.emphasisDisabled),!a||r.hasItemOption){var y=a&&a.itemModel?a.itemModel:r.getItemModel(i),_=y.getModel("emphasis");u=_.getModel("itemStyle").getItemStyle(),c=y.getModel(["select","itemStyle"]).getItemStyle(),h=y.getModel(["blur","itemStyle"]).getItemStyle(),d=_.get("focus"),f=_.get("blurScope"),p=_.get("disabled"),v=Pr(y),g=_.getShallow("scale"),m=y.getShallow("cursor")}var x=r.getItemVisual(i,"symbolRotate");s.attr("rotation",(x||0)*Math.PI/180||0);var w=bf(r.getItemVisual(i,"symbolOffset"),n);w&&(s.x=w[0],s.y=w[1]),m&&s.attr("cursor",m);var b=r.getItemVisual(i,"style"),S=b.fill;if(s instanceof $r){var M=s.style;s.useStyle(ae({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},b))}else s.__isEmptyBrush?s.useStyle(ae({},b)):s.useStyle(b),s.style.decal=null,s.setColor(S,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var A=r.getItemVisual(i,"liftZ"),T=this._z2;A!=null?T==null&&(this._z2=s.z2,s.z2+=A):T!=null&&(s.z2=T,this._z2=null);var C=o&&o.useNameLabel;Wr(s,v,{labelFetcher:l,labelDataIndex:i,defaultText:D,inheritColor:S,defaultOpacity:b.opacity});function D(O){return C?r.getName(O):Fd(r,O)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var P=s.ensureState("emphasis");P.style=u,s.ensureState("select").style=c,s.ensureState("blur").style=h;var E=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;P.scaleX=this._sizeX*E,P.scaleY=this._sizeY*E,this.setSymbolScale(1),Zt(this,d,f,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,i,n){var a=this.childAt(0),o=Re(this).dataIndex,s=n&&n.animation;if(this.silent=a.silent=!0,n&&n.fadeLabel){var l=a.getTextContent();l&&Bl(l,{style:{opacity:0}},i,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();Bl(a,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:o,cb:r,removeOpt:s})},t.getSymbolSize=function(r,i){return $g(r.getItemVisual(i,"symbolSize"))},t}(Ie);function RTe(e,t){this.parent.drift(e,t)}const Zg=OTe;function v2(e,t,r,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(r))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function MB(e){return e!=null&&!Pe(e)&&(e={isIgnore:e}),e||{}}function TB(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:Pr(t),cursorStyle:t.get("cursor")}}var zTe=function(){function e(t){this.group=new Ie,this._SymbolCtor=t||Zg}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=MB(r);var i=this.group,n=t.hostModel,a=this._data,o=this._SymbolCtor,s=r.disableAnimation,l=TB(t),u={disableAnimation:s},h=r.getSymbolPoint||function(c){return t.getItemLayout(c)};a||i.removeAll(),t.diff(a).add(function(c){var d=h(c);if(v2(t,d,c,r)){var f=new o(t,c,l,u);f.setPosition(d),t.setItemGraphicEl(c,f),i.add(f)}}).update(function(c,d){var f=a.getItemGraphicEl(d),p=h(c);if(!v2(t,p,c,r)){i.remove(f);return}var v=t.getItemVisual(c,"symbol")||"circle",g=f&&f.getSymbolType&&f.getSymbolType();if(!f||g&&g!==v)i.remove(f),f=new o(t,c,l,u),f.setPosition(p);else{f.updateData(t,c,l,u);var m={x:p[0],y:p[1]};s?f.attr(m):ut(f,m,n)}i.add(f),t.setItemGraphicEl(c,f)}).remove(function(c){var d=a.getItemGraphicEl(c);d&&d.fadeOut(function(){i.remove(d)},n)}).execute(),this._getSymbolPoint=h,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(i,n){var a=t._getSymbolPoint(n);i.setPosition(a),i.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=TB(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,i){this._progressiveEls=[],i=MB(i);function n(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var o=r.getItemLayout(a);if(v2(r,o,a,i)){var s=new this._SymbolCtor(r,a,this._seriesScope);s.traverse(n),s.setPosition(o),this.group.add(s),r.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){Xl(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(n){n.fadeOut(function(){r.remove(n)},i.hostModel)}):r.removeAll()},e}();const Kg=zTe;function X7(e,t,r){var i=e.getBaseAxis(),n=e.getOtherAxis(i),a=NTe(n,r),o=i.dim,s=n.dim,l=t.mapDimension(s),u=t.mapDimension(o),h=s==="x"||s==="radius"?1:0,c=ce(e.dimensions,function(p){return t.mapDimension(p)}),d=!1,f=t.getCalculationInfo("stackResultDimension");return Vl(t,c[0])&&(d=!0,c[0]=f),Vl(t,c[1])&&(d=!0,c[1]=f),{dataDimsForPoint:c,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!d,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function NTe(e,t){var r=0,i=e.scale.getExtent();return t==="start"?r=i[0]:t==="end"?r=i[1]:st(t)&&!isNaN(t)?r=t:i[0]>0?r=i[0]:i[1]<0&&(r=i[1]),r}function Y7(e,t,r,i){var n=NaN;e.stacked&&(n=r.get(r.getCalculationInfo("stackedOverDimension"),i)),isNaN(n)&&(n=e.valueStart);var a=e.baseDataOffset,o=[];return o[a]=r.get(e.baseDim,i),o[1-a]=n,t.dataToPoint(o)}function kTe(e,t){var r=[];return t.diff(e).add(function(i){r.push({cmd:"+",idx:i})}).update(function(i,n){r.push({cmd:"=",idx:n,idx1:i})}).remove(function(i){r.push({cmd:"-",idx:i})}).execute(),r}function BTe(e,t,r,i,n,a,o,s){for(var l=kTe(e,t),u=[],h=[],c=[],d=[],f=[],p=[],v=[],g=X7(n,t,o),m=e.getLayout("points")||[],y=t.getLayout("points")||[],_=0;_<l.length;_++){var x=l[_],w=!0,b=void 0,S=void 0;switch(x.cmd){case"=":b=x.idx*2,S=x.idx1*2;var M=m[b],A=m[b+1],T=y[S],C=y[S+1];(isNaN(M)||isNaN(A))&&(M=T,A=C),u.push(M,A),h.push(T,C),c.push(r[b],r[b+1]),d.push(i[S],i[S+1]),v.push(t.getRawIndex(x.idx1));break;case"+":var D=x.idx,P=g.dataDimsForPoint,E=n.dataToPoint([t.get(P[0],D),t.get(P[1],D)]);S=D*2,u.push(E[0],E[1]),h.push(y[S],y[S+1]);var O=Y7(g,n,t,D);c.push(O[0],O[1]),d.push(i[S],i[S+1]),v.push(t.getRawIndex(D));break;case"-":w=!1}w&&(f.push(x),p.push(p.length))}p.sort(function(ne,te){return v[ne]-v[te]});for(var z=u.length,B=co(z),N=co(z),F=co(z),G=co(z),H=[],_=0;_<p.length;_++){var $=p[_],Z=_*2,X=$*2;B[Z]=u[X],B[Z+1]=u[X+1],N[Z]=h[X],N[Z+1]=h[X+1],F[Z]=c[X],F[Z+1]=c[X+1],G[Z]=d[X],G[Z+1]=d[X+1],H[_]=f[$]}return{current:B,next:N,stackedOnCurrent:F,stackedOnNext:G,status:H}}var $s=Math.min,qs=Math.max;function bh(e,t){return isNaN(e)||isNaN(t)}function tC(e,t,r,i,n,a,o,s,l){for(var u,h,c,d,f,p,v=r,g=0;g<i;g++){var m=t[v*2],y=t[v*2+1];if(v>=n||v<0)break;if(bh(m,y)){if(l){v+=a;continue}break}if(v===r)e[a>0?"moveTo":"lineTo"](m,y),c=m,d=y;else{var _=m-u,x=y-h;if(_*_+x*x<.5){v+=a;continue}if(o>0){for(var w=v+a,b=t[w*2],S=t[w*2+1];b===m&&S===y&&g<i;)g++,w+=a,v+=a,b=t[w*2],S=t[w*2+1],m=t[v*2],y=t[v*2+1],_=m-u,x=y-h;var M=g+1;if(l)for(;bh(b,S)&&M<i;)M++,w+=a,b=t[w*2],S=t[w*2+1];var A=.5,T=0,C=0,D=void 0,P=void 0;if(M>=i||bh(b,S))f=m,p=y;else{T=b-u,C=S-h;var E=m-u,O=b-m,z=y-h,B=S-y,N=void 0,F=void 0;if(s==="x"){N=Math.abs(E),F=Math.abs(O);var G=T>0?1:-1;f=m-G*N*o,p=y,D=m+G*F*o,P=y}else if(s==="y"){N=Math.abs(z),F=Math.abs(B);var H=C>0?1:-1;f=m,p=y-H*N*o,D=m,P=y+H*F*o}else N=Math.sqrt(E*E+z*z),F=Math.sqrt(O*O+B*B),A=F/(F+N),f=m-T*o*(1-A),p=y-C*o*(1-A),D=m+T*o*A,P=y+C*o*A,D=$s(D,qs(b,m)),P=$s(P,qs(S,y)),D=qs(D,$s(b,m)),P=qs(P,$s(S,y)),T=D-m,C=P-y,f=m-T*N/F,p=y-C*N/F,f=$s(f,qs(u,m)),p=$s(p,qs(h,y)),f=qs(f,$s(u,m)),p=qs(p,$s(h,y)),T=m-f,C=y-p,D=m+T*F/N,P=y+C*F/N}e.bezierCurveTo(c,d,f,p,m,y),c=D,d=P}else e.lineTo(m,y)}u=m,h=y,v+=a}return g}var Z7=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),FTe=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-polyline",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Z7},t.prototype.buildPath=function(r,i){var n=i.points,a=0,o=n.length/2;if(i.connectNulls){for(;o>0&&bh(n[o*2-2],n[o*2-1]);o--);for(;a<o&&bh(n[a*2],n[a*2+1]);a++);}for(;a<o;)a+=tC(r,n,a,o,o,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},t.prototype.getPointOn=function(r,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,a=n.data,o=Mo.CMD,s,l,u=i==="x",h=[],c=0;c<a.length;){var d=a[c++],f=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,_=void 0;switch(d){case o.M:s=a[c++],l=a[c++];break;case o.L:if(f=a[c++],p=a[c++],_=u?(r-s)/(f-s):(r-l)/(p-l),_<=1&&_>=0){var x=u?(p-l)*_+l:(f-s)*_+s;return u?[r,x]:[x,r]}s=f,l=p;break;case o.C:f=a[c++],p=a[c++],v=a[c++],g=a[c++],m=a[c++],y=a[c++];var w=u?a_(s,f,v,m,r,h):a_(l,p,g,y,r,h);if(w>0)for(var b=0;b<w;b++){var S=h[b];if(S<=1&&S>=0){var x=u?Tr(l,p,g,y,S):Tr(s,f,v,m,S);return u?[r,x]:[x,r]}}s=m,l=y;break}}},t}(qe),VTe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Z7),K7=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-polygon",i}return t.prototype.getDefaultShape=function(){return new VTe},t.prototype.buildPath=function(r,i){var n=i.points,a=i.stackedOnPoints,o=0,s=n.length/2,l=i.smoothMonotone;if(i.connectNulls){for(;s>0&&bh(n[s*2-2],n[s*2-1]);s--);for(;o<s&&bh(n[o*2],n[o*2+1]);o++);}for(;o<s;){var u=tC(r,n,o,s,s,1,i.smooth,l,i.connectNulls);tC(r,a,o+u-1,u,s,-1,i.stackedOnSmooth,l,i.connectNulls),o+=u+1,r.closePath()}},t}(qe);function J7(e,t,r,i,n){var a=e.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,h=r.get(["lineStyle","width"])||2;o-=h/2,s-=h/2,l+=h,u+=h,o=Math.floor(o),l=Math.round(l);var c=new rt({shape:{x:o,y:s,width:l,height:u}});if(t){var d=e.getBaseAxis(),f=d.isHorizontal(),p=d.inverse;f?(p&&(c.shape.x+=l),c.shape.width=0):(p||(c.shape.y+=u),c.shape.height=0);var v=Ae(n)?function(g){n(g,c)}:null;Ut(c,{shape:{width:l,height:u,x:o,y:s}},r,null,i,v)}return c}function Q7(e,t,r){var i=e.getArea(),n=Qt(i.r0,1),a=Qt(i.r,1),o=new $i({shape:{cx:Qt(e.cx,1),cy:Qt(e.cy,1),r0:n,r:a,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?o.shape.endAngle=i.startAngle:o.shape.r=n,Ut(o,{shape:{endAngle:i.endAngle,r:a}},r)}return o}function pb(e,t,r,i,n){if(e){if(e.type==="polar")return Q7(e,t,r);if(e.type==="cartesian2d")return J7(e,t,r,i,n)}else return null;return null}function Xh(e,t){return e.type===t}function AB(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function CB(e){for(var t=1/0,r=1/0,i=-1/0,n=-1/0,a=0;a<e.length;){var o=e[a++],s=e[a++];isNaN(o)||(t=Math.min(o,t),i=Math.max(o,i)),isNaN(s)||(r=Math.min(s,r),n=Math.max(s,n))}return[[t,r],[i,n]]}function DB(e,t){var r=CB(e),i=r[0],n=r[1],a=CB(t),o=a[0],s=a[1];return Math.max(Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]),Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]))}function PB(e){return st(e)?e:e?.5:0}function UTe(e,t,r){if(!r.valueDim)return[];for(var i=t.count(),n=co(i*2),a=0;a<i;a++){var o=Y7(r,e,t,a);n[a*2]=o[0],n[a*2+1]=o[1]}return n}function Xs(e,t,r,i){var n=t.getBaseAxis(),a=n.dim==="x"||n.dim==="radius"?0:1,o=[],s=0,l=[],u=[],h=[],c=[];if(i){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&c.push(e[s],e[s+1]);e=c}for(s=0;s<e.length-2;s+=2)switch(h[0]=e[s+2],h[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],o.push(u[0],u[1]),r){case"end":l[a]=h[a],l[1-a]=u[1-a],o.push(l[0],l[1]);break;case"middle":var d=(u[a]+h[a])/2,f=[];l[a]=f[a]=d,l[1-a]=u[1-a],f[1-a]=h[1-a],o.push(l[0],l[1]),o.push(f[0],f[1]);break;default:l[a]=u[a],l[1-a]=h[1-a],o.push(l[0],l[1])}return o.push(e[s++],e[s++]),o}function GTe(e,t){var r=[],i=e.length,n,a;function o(h,c,d){var f=h.coord,p=(d-f)/(c.coord-f),v=i1e(p,[h.color,c.color]);return{coord:d,color:v}}for(var s=0;s<i;s++){var l=e[s],u=l.coord;if(u<0)n=l;else if(u>t){a?r.push(o(a,l,t)):n&&r.push(o(n,l,0),o(n,l,t));break}else n&&(r.push(o(n,l,0)),n=null),r.push(l),a=l}return r}function HTe(e,t,r){var i=e.getVisual("visualMeta");if(!(!i||!i.length||!e.count())&&t.type==="cartesian2d"){for(var n,a,o=i.length-1;o>=0;o--){var s=e.getDimensionInfo(i[o].dimension);if(n=s&&s.coordDim,n==="x"||n==="y"){a=i[o];break}}if(a){var l=t.getAxis(n),u=ce(a.stops,function(_){return{coord:l.toGlobalCoord(l.dataToCoord(_.value)),color:_.color}}),h=u.length,c=a.outerColors.slice();h&&u[0].coord>u[h-1].coord&&(u.reverse(),c.reverse());var d=GTe(u,n==="x"?r.getWidth():r.getHeight()),f=d.length;if(!f&&h)return u[0].coord<0?c[1]?c[1]:u[h-1].color:c[0]?c[0]:u[0].color;var p=10,v=d[0].coord-p,g=d[f-1].coord+p,m=g-v;if(m<.001)return"transparent";I(d,function(_){_.offset=(_.coord-v)/m}),d.push({offset:f?d[f-1].offset:.5,color:c[1]||"transparent"}),d.unshift({offset:f?d[0].offset:.5,color:c[0]||"transparent"});var y=new Rh(0,0,0,0,d,!0);return y[n]=v,y[n+"2"]=g,y}}}function jTe(e,t,r){var i=e.get("showAllSymbol"),n=i==="auto";if(!(i&&!n)){var a=r.getAxesByScale("ordinal")[0];if(a&&!(n&&WTe(a,t))){var o=t.mapDimension(a.dim),s={};return I(a.getViewLabels(),function(l){var u=a.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(o,l))}}}}function WTe(e,t){var r=e.getExtent(),i=Math.abs(r[1]-r[0])/e.scale.count();isNaN(i)&&(i=0);for(var n=t.count(),a=Math.max(1,Math.round(n/5)),o=0;o<n;o+=a)if(Zg.getSymbolSize(t,o)[e.isHorizontal()?1:0]*1.5>i)return!1;return!0}function $Te(e,t){return isNaN(e)||isNaN(t)}function qTe(e){for(var t=e.length/2;t>0&&$Te(e[t*2-2],e[t*2-1]);t--);return t-1}function LB(e,t){return[e[t*2],e[t*2+1]]}function XTe(e,t,r){for(var i=e.length/2,n=r==="x"?0:1,a,o,s=0,l=-1,u=0;u<i;u++)if(o=e[u*2+n],!(isNaN(o)||isNaN(e[u*2+1-n]))){if(u===0){a=o;continue}if(a<=t&&o>=t||a>=t&&o<=t){l=u;break}s=u,a=o}return{range:[s,l],t:(t-a)/(o-a)}}function e$(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<Si.length;t++)if(e.get([Si[t],"endLabel","show"]))return!0;return!1}function g2(e,t,r,i){if(Xh(t,"cartesian2d")){var n=i.getModel("endLabel"),a=n.get("valueAnimation"),o=i.getData(),s={lastFrameIndex:0},l=e$(i)?function(f,p){e._endLabelOnDuring(f,p,o,s,a,n,t)}:null,u=t.getBaseAxis().isHorizontal(),h=J7(t,r,i,function(){var f=e._endLabel;f&&r&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!i.get("clip",!0)){var c=h.shape,d=Math.max(c.width,c.height);u?(c.y-=d,c.height+=d*2):(c.x-=d,c.width+=d*2)}return l&&l(1,h),h}else return Q7(t,r,i)}function YTe(e,t){var r=t.getBaseAxis(),i=r.isHorizontal(),n=r.inverse,a=i?n?"right":"left":"center",o=i?"middle":n?"top":"bottom";return{normal:{align:e.get("align")||a,verticalAlign:e.get("verticalAlign")||o}}}var ZTe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Ie,i=new Kg;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=r},t.prototype.render=function(r,i,n){var a=this,o=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),h=r.getModel("areaStyle"),c=l.getLayout("points")||[],d=o.type==="polar",f=this._coordSys,p=this._symbolDraw,v=this._polyline,g=this._polygon,m=this._lineGroup,y=!i.ssr&&r.isAnimationEnabled(),_=!h.isEmpty(),x=h.get("origin"),w=X7(o,l,x),b=_&&UTe(o,l,w),S=r.get("showSymbol"),M=r.get("connectNulls"),A=S&&!d&&jTe(r,l,o),T=this._data;T&&T.eachItemGraphicEl(function(te,U){te.__temp&&(s.remove(te),T.setItemGraphicEl(U,null))}),S||p.remove(),s.add(m);var C=d?!1:r.get("step"),D;o&&o.getArea&&r.get("clip",!0)&&(D=o.getArea(),D.width!=null?(D.x-=.1,D.y-=.1,D.width+=.2,D.height+=.2):D.r0&&(D.r0-=.5,D.r+=.5)),this._clipShapeForSymbol=D;var P=HTe(l,o,n)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&f.type===o.type&&C===this._step))S&&p.updateData(l,{isIgnore:A,clipShape:D,disableAnimation:!0,getSymbolPoint:function(te){return[c[te*2],c[te*2+1]]}}),y&&this._initSymbolLabelAnimation(l,o,D),C&&(c=Xs(c,o,C,M),b&&(b=Xs(b,o,C,M))),v=this._newPolyline(c),_?g=this._newPolygon(c,b):g&&(m.remove(g),g=this._polygon=null),d||this._initOrUpdateEndLabel(r,o,zh(P)),m.setClipPath(g2(this,o,!0,r));else{_&&!g?g=this._newPolygon(c,b):g&&!_&&(m.remove(g),g=this._polygon=null),d||this._initOrUpdateEndLabel(r,o,zh(P));var E=m.getClipPath();if(E){var O=g2(this,o,!1,r);Ut(E,{shape:O.shape},r)}else m.setClipPath(g2(this,o,!0,r));S&&p.updateData(l,{isIgnore:A,clipShape:D,disableAnimation:!0,getSymbolPoint:function(te){return[c[te*2],c[te*2+1]]}}),(!AB(this._stackedOnPoints,b)||!AB(this._points,c))&&(y?this._doUpdateAnimation(l,b,o,n,C,x,M):(C&&(c=Xs(c,o,C,M),b&&(b=Xs(b,o,C,M))),v.setShape({points:c}),g&&g.setShape({points:c,stackedOnPoints:b})))}var z=r.getModel("emphasis"),B=z.get("focus"),N=z.get("blurScope"),F=z.get("disabled");if(v.useStyle(De(u.getLineStyle(),{fill:"none",stroke:P,lineJoin:"bevel"})),jr(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var G=v.getState("emphasis").style;G.lineWidth=+v.style.lineWidth+1}Re(v).seriesIndex=r.seriesIndex,Zt(v,B,N,F);var H=PB(r.get("smooth")),$=r.get("smoothMonotone");if(v.setShape({smooth:H,smoothMonotone:$,connectNulls:M}),g){var Z=l.getCalculationInfo("stackedOnSeries"),X=0;g.useStyle(De(h.getAreaStyle(),{fill:P,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),Z&&(X=PB(Z.get("smooth"))),g.setShape({smooth:H,stackedOnSmooth:X,smoothMonotone:$,connectNulls:M}),jr(g,r,"areaStyle"),Re(g).seriesIndex=r.seriesIndex,Zt(g,B,N,F)}var ne=function(te){a._changePolyState(te)};l.eachItemGraphicEl(function(te){te&&(te.onHoverStateChange=ne)}),this._polyline.onHoverStateChange=ne,this._data=l,this._coordSys=o,this._stackedOnPoints=b,this._points=c,this._step=C,this._valueOrigin=x,r.get("triggerLineEvent")&&(this.packEventData(r,v),g&&this.packEventData(r,g))},t.prototype.packEventData=function(r,i){Re(i).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,i,n,a){var o=r.getData(),s=Eh(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),u=o.getItemGraphicEl(s);if(!u){var h=l[s*2],c=l[s*2+1];if(isNaN(h)||isNaN(c)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(h,c))return;var d=r.get("zlevel")||0,f=r.get("z")||0;u=new Zg(o,s),u.x=h,u.y=c,u.setZ(d,f);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=d,p.z=f,p.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else kt.prototype.highlight.call(this,r,i,n,a)},t.prototype.downplay=function(r,i,n,a){var o=r.getData(),s=Eh(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else kt.prototype.downplay.call(this,r,i,n,a)},t.prototype._changePolyState=function(r){var i=this._polygon;f_(this._polyline,r),i&&f_(i,r)},t.prototype._newPolyline=function(r){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new FTe({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},t.prototype._newPolygon=function(r,i){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new K7({shape:{points:r,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(r,i,n){var a,o,s=i.getBaseAxis(),l=s.inverse;i.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):i.type==="polar"&&(a=s.dim==="angle",o=!0);var u=r.hostModel,h=u.get("animationDuration");Ae(h)&&(h=h(null));var c=u.get("animationDelay")||0,d=Ae(c)?c(null):c;r.eachItemGraphicEl(function(f,p){var v=f;if(v){var g=[f.x,f.y],m=void 0,y=void 0,_=void 0;if(n)if(o){var x=n,w=i.pointToCoord(g);a?(m=x.startAngle,y=x.endAngle,_=-w[1]/180*Math.PI):(m=x.r0,y=x.r,_=w[0])}else{var b=n;a?(m=b.x,y=b.x+b.width,_=f.x):(m=b.y+b.height,y=b.y,_=f.y)}var S=y===m?0:(_-m)/(y-m);l&&(S=1-S);var M=Ae(c)?c(p):h*S+d,A=v.getSymbolPath(),T=A.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),T&&T.animateFrom({style:{opacity:0}},{duration:300,delay:M}),A.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,i,n){var a=r.getModel("endLabel");if(e$(r)){var o=r.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new ot({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var h=qTe(l);h>=0&&(Wr(s,Pr(r,"endLabel"),{inheritColor:n,labelFetcher:r,labelDataIndex:h,defaultText:function(c,d,f){return f!=null?q7(o,f):Fd(o,c)},enableTextSetter:!0},YTe(a,i)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,i,n,a,o,s,l){var u=this._endLabel,h=this._polyline;if(u){r<1&&a.originalX==null&&(a.originalX=u.x,a.originalY=u.y);var c=n.getLayout("points"),d=n.hostModel,f=d.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,g=l.getBaseAxis(),m=g.isHorizontal(),y=g.inverse,_=i.shape,x=y?m?_.x:_.y+_.height:m?_.x+_.width:_.y,w=(m?v:0)*(y?-1:1),b=(m?0:-v)*(y?-1:1),S=m?"x":"y",M=XTe(c,x,S),A=M.range,T=A[1]-A[0],C=void 0;if(T>=1){if(T>1&&!f){var D=LB(c,A[0]);u.attr({x:D[0]+w,y:D[1]+b}),o&&(C=d.getRawValue(A[0]))}else{var D=h.getPointOn(x,S);D&&u.attr({x:D[0]+w,y:D[1]+b});var P=d.getRawValue(A[0]),E=d.getRawValue(A[1]);o&&(C=yW(n,p,P,E,M.t))}a.lastFrameIndex=A[0]}else{var O=r===1||a.lastFrameIndex>0?A[0]:0,D=LB(c,O);o&&(C=d.getRawValue(O)),u.attr({x:D[0]+w,y:D[1]+b})}o&&ff(u).setLabelText(C)}},t.prototype._doUpdateAnimation=function(r,i,n,a,o,s,l){var u=this._polyline,h=this._polygon,c=r.hostModel,d=BTe(this._data,r,this._stackedOnPoints,i,this._coordSys,n,this._valueOrigin),f=d.current,p=d.stackedOnCurrent,v=d.next,g=d.stackedOnNext;if(o&&(f=Xs(d.current,n,o,l),p=Xs(d.stackedOnCurrent,n,o,l),v=Xs(d.next,n,o,l),g=Xs(d.stackedOnNext,n,o,l)),DB(f,v)>3e3||h&&DB(p,g)>3e3){u.stopAnimation(),u.setShape({points:v}),h&&(h.stopAnimation(),h.setShape({points:v,stackedOnPoints:g}));return}u.shape.__points=d.current,u.shape.points=f;var m={shape:{points:v}};d.current!==f&&(m.shape.__points=d.next),u.stopAnimation(),ut(u,m,c),h&&(h.setShape({points:f,stackedOnPoints:p}),h.stopAnimation(),ut(h,{shape:{stackedOnPoints:g}},c),u.shape.points!==h.shape.points&&(h.shape.points=u.shape.points));for(var y=[],_=d.status,x=0;x<_.length;x++){var w=_[x].cmd;if(w==="="){var b=r.getItemGraphicEl(_[x].idx1);b&&y.push({el:b,ptIdx:x})}}u.animators&&u.animators.length&&u.animators[0].during(function(){h&&h.dirtyShape();for(var S=u.shape.__points,M=0;M<y.length;M++){var A=y[M].el,T=y[M].ptIdx*2;A.x=S[T],A.y=S[T+1],A.markRedraw()}})},t.prototype.remove=function(r){var i=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(a,o){a.__temp&&(i.remove(a),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(kt);const KTe=ZTe;function Jg(e,t){return{seriesType:e,plan:_f(),reset:function(r){var i=r.getData(),n=r.coordinateSystem,a=r.pipelineContext,o=t||a.large;if(n){var s=ce(n.dimensions,function(f){return i.mapDimension(f)}).slice(0,2),l=s.length,u=i.getCalculationInfo("stackResultDimension");Vl(i,s[0])&&(s[0]=u),Vl(i,s[1])&&(s[1]=u);var h=i.getStore(),c=i.getDimensionIndex(s[0]),d=i.getDimensionIndex(s[1]);return l&&{progress:function(f,p){for(var v=f.end-f.start,g=o&&co(v*l),m=[],y=[],_=f.start,x=0;_<f.end;_++){var w=void 0;if(l===1){var b=h.get(c,_);w=n.dataToPoint(b,null,y)}else m[0]=h.get(c,_),m[1]=h.get(d,_),w=n.dataToPoint(m,null,y);o?(g[x++]=w[0],g[x++]=w[1]):p.setItemLayout(_,w.slice())}o&&p.setLayout("points",g)}}}}}}var JTe={average:function(e){for(var t=0,r=0,i=0;i<e.length;i++)isNaN(e[i])||(t+=e[i],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},QTe=function(e){return Math.round(e.length/2)};function t$(e){return{seriesType:e,reset:function(t,r,i){var n=t.getData(),a=t.get("sampling"),o=t.coordinateSystem,s=n.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),u=o.getOtherAxis(l),h=l.getExtent(),c=i.getDevicePixelRatio(),d=Math.abs(h[1]-h[0])*(c||1),f=Math.round(s/d);if(isFinite(f)&&f>1){a==="lttb"&&t.setData(n.lttbDownSample(n.mapDimension(u.dim),1/f));var p=void 0;ge(a)?p=JTe[a]:Ae(a)&&(p=a),p&&t.setData(n.downSample(n.mapDimension(u.dim),1/f,p,QTe))}}}}}function eAe(e){e.registerChartView(KTe),e.registerSeriesModel(ITe),e.registerLayout(Jg("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),i=t.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",i)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,t$("line"))}var r$=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){return Ds(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r,i,n){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(r),s=a.dataToPoint(o);if(n)I(a.getAxes(),function(d,f){if(d.type==="category"&&i!=null){var p=d.getTicksCoords(),v=o[f],g=i[f]==="x1"||i[f]==="y1";if(g&&(v+=1),p.length<2)return;if(p.length===2){s[f]=d.toGlobalCoord(d.getExtent()[g?1:0]);return}for(var m=void 0,y=void 0,_=1,x=0;x<p.length;x++){var w=p[x].coord,b=x===p.length-1?p[x-1].tickValue+_:p[x].tickValue;if(b===v){y=w;break}else if(b<v)m=w;else if(m!=null&&b>v){y=(w+m)/2;break}x===1&&(_=b-p[0].tickValue)}y==null&&(m?m&&(y=p[p.length-1].coord):y=p[0].coord),s[f]=d.toGlobalCoord(y)}});else{var l=this.getData(),u=l.getLayout("offset"),h=l.getLayout("size"),c=a.getBaseAxis().isHorizontal()?0:1;s[c]+=u+h/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}($t);$t.registerClass(r$);const I_=r$;var tAe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return Ds(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>r&&(r=i),r},t.prototype.brushSelector=function(r,i,n){return n.rect(i.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Yl(I_.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(I_);const rAe=tAe;var iAe=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),nAe=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="sausage",i}return t.prototype.getDefaultShape=function(){return new iAe},t.prototype.buildPath=function(r,i){var n=i.cx,a=i.cy,o=Math.max(i.r0||0,0),s=Math.max(i.r,0),l=(s-o)*.5,u=o+l,h=i.startAngle,c=i.endAngle,d=i.clockwise,f=Math.PI*2,p=d?c-h<f:h-c<f;p||(h=c-(d?f:-f));var v=Math.cos(h),g=Math.sin(h),m=Math.cos(c),y=Math.sin(c);p?(r.moveTo(v*o+n,g*o+a),r.arc(v*u+n,g*u+a,l,-Math.PI+h,h,!d)):r.moveTo(v*s+n,g*s+a),r.arc(n,a,s,h,c,!d),r.arc(m*u+n,y*u+a,l,c-Math.PI*2,c-Math.PI,!d),o!==0&&r.arc(n,a,o,c,h,d)},t}(qe);const O_=nAe;function aAe(e,t){t=t||{};var r=t.isRoundCap;return function(i,n,a){var o=n.position;if(!o||o instanceof Array)return h_(i,n,a);var s=e(o),l=n.distance!=null?n.distance:5,u=this.shape,h=u.cx,c=u.cy,d=u.r,f=u.r0,p=(d+f)/2,v=u.startAngle,g=u.endAngle,m=(v+g)/2,y=r?Math.abs(d-f)/2:0,_=Math.cos,x=Math.sin,w=h+d*_(v),b=c+d*x(v),S="left",M="top";switch(s){case"startArc":w=h+(f-l)*_(m),b=c+(f-l)*x(m),S="center",M="top";break;case"insideStartArc":w=h+(f+l)*_(m),b=c+(f+l)*x(m),S="center",M="bottom";break;case"startAngle":w=h+p*_(v)+Zy(v,l+y,!1),b=c+p*x(v)+Ky(v,l+y,!1),S="right",M="middle";break;case"insideStartAngle":w=h+p*_(v)+Zy(v,-l+y,!1),b=c+p*x(v)+Ky(v,-l+y,!1),S="left",M="middle";break;case"middle":w=h+p*_(m),b=c+p*x(m),S="center",M="middle";break;case"endArc":w=h+(d+l)*_(m),b=c+(d+l)*x(m),S="center",M="bottom";break;case"insideEndArc":w=h+(d-l)*_(m),b=c+(d-l)*x(m),S="center",M="top";break;case"endAngle":w=h+p*_(g)+Zy(g,l+y,!0),b=c+p*x(g)+Ky(g,l+y,!0),S="left",M="middle";break;case"insideEndAngle":w=h+p*_(g)+Zy(g,-l+y,!0),b=c+p*x(g)+Ky(g,-l+y,!0),S="right",M="middle";break;default:return h_(i,n,a)}return i=i||{},i.x=w,i.y=b,i.align=S,i.verticalAlign=M,i}}function oAe(e,t,r,i){if(st(i)){e.setTextConfig({rotation:i});return}else if(ue(t)){e.setTextConfig({rotation:0});return}var n=e.shape,a=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,s=(a+o)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:e.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),e.setTextConfig({rotation:h})}function Zy(e,t,r){return t*Math.sin(e)*(r?-1:1)}function Ky(e,t,r){return t*Math.cos(e)*(r?1:-1)}function ah(e,t,r){var i=e.get("borderRadius");if(i==null)return r?{cornerRadius:0}:null;ue(i)||(i=[i,i,i,i]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:ce(i,function(a){return Aa(a,n)})}}var m2=Math.max,y2=Math.min;function sAe(e,t){var r=e.getArea&&e.getArea();if(Xh(e,"cartesian2d")){var i=e.getBaseAxis();if(i.type!=="category"||!i.onBand){var n=t.getLayout("bandWidth");i.isHorizontal()?(r.x-=n,r.width+=n*2):(r.y-=n,r.height+=n*2)}}return r}var lAe=function(e){Y(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,i,n,a){this._model=r,this._removeOnRenderedListener(n),this._updateDrawMode(r);var o=r.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,i,n):this._renderNormal(r,i,n,a))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,i){this._progressiveEls=[],this._incrementalRenderLarge(r,i)},t.prototype.eachRendered=function(r){Xl(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var i=r.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(r,i,n,a){var o=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,h=u.getBaseAxis(),c;u.type==="cartesian2d"?c=h.isHorizontal():u.type==="polar"&&(c=h.dim==="angle");var d=r.isAnimationEnabled()?r:null,f=uAe(r,u);f&&this._enableRealtimeSort(f,s,n);var p=r.get("clip",!0)||f,v=sAe(u,s);o.removeClipPath();var g=r.get("roundCap",!0),m=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),_=y.get("borderRadius")||0,x=[],w=this._backgroundEls,b=a&&a.isInitSort,S=a&&a.type==="changeAxisOrder";function M(C){var D=Jy[u.type](s,C),P=gAe(u,c,D);return P.useStyle(y.getItemStyle()),u.type==="cartesian2d"?P.setShape("r",_):P.setShape("cornerRadius",_),x[C]=P,P}s.diff(l).add(function(C){var D=s.getItemModel(C),P=Jy[u.type](s,C,D);if(m&&M(C),!(!s.hasValue(C)||!zB[u.type](P))){var E=!1;p&&(E=EB[u.type](v,P));var O=IB[u.type](r,s,C,P,c,d,h.model,!1,g);f&&(O.forceLabelAnimation=!0),NB(O,s,C,D,P,r,c,u.type==="polar"),b?O.attr({shape:P}):f?OB(f,d,O,P,C,c,!1,!1):Ut(O,{shape:P},r,C),s.setItemGraphicEl(C,O),o.add(O),O.ignore=E}}).update(function(C,D){var P=s.getItemModel(C),E=Jy[u.type](s,C,P);if(m){var O=void 0;w.length===0?O=M(D):(O=w[D],O.useStyle(y.getItemStyle()),u.type==="cartesian2d"?O.setShape("r",_):O.setShape("cornerRadius",_),x[C]=O);var z=Jy[u.type](s,C),B=n$(c,z,u);ut(O,{shape:B},d,C)}var N=l.getItemGraphicEl(D);if(!s.hasValue(C)||!zB[u.type](E)){o.remove(N);return}var F=!1;if(p&&(F=EB[u.type](v,E),F&&o.remove(N)),N?Ca(N):N=IB[u.type](r,s,C,E,c,d,h.model,!!N,g),f&&(N.forceLabelAnimation=!0),S){var G=N.getTextContent();if(G){var H=ff(G);H.prevValue!=null&&(H.prevValue=H.value)}}else NB(N,s,C,P,E,r,c,u.type==="polar");b?N.attr({shape:E}):f?OB(f,d,N,E,C,c,!0,S):ut(N,{shape:E},r,C,null),s.setItemGraphicEl(C,N),N.ignore=F,o.add(N)}).remove(function(C){var D=l.getItemGraphicEl(C);D&&ig(D,r,C)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new Ie);A.removeAll();for(var T=0;T<x.length;++T)A.add(x[T]);o.add(A),this._backgroundEls=x,this._data=s},t.prototype._renderLarge=function(r,i,n){this._clear(),BB(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,i){this._removeBackground(),BB(i,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var i=r.get("clip",!0)&&pb(r.coordinateSystem,!1,r),n=this.group;i?n.setClipPath(i):n.removeClipPath()},t.prototype._enableRealtimeSort=function(r,i,n){var a=this;if(i.count()){var o=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,r,n),this._isFirstFrame=!1;else{var s=function(l){var u=i.getItemGraphicEl(l),h=u&&u.shape;return h&&Math.abs(o.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){a._updateSortWithinSameData(i,s,o,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,i,n){var a=[];return r.each(r.mapDimension(i.dim),function(o,s){var l=n(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:ce(a,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,i,n){for(var a=n.scale,o=r.mapDimension(n.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var h=r.rawIndexOf(o,a.getRawOrdinalNumber(l)),c=h<0?Number.MIN_VALUE:i(r.indexOfRawIndex(h));if(c>s)return!0;s=c}return!1},t.prototype._isOrderDifferentInView=function(r,i){for(var n=i.scale,a=n.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],n.getOrdinalMeta().categories.length-1);o<=s;++o)if(r.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(r,i,n,a){if(this._isOrderChangedWithinSameData(r,i,n)){var o=this._dataSort(r,n,i);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(r,i,n){var a=i.baseAxis,o=this._dataSort(r,a,function(s){return r.get(r.mapDimension(i.otherAxis.dim),s)});n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},t.prototype.remove=function(r,i){this._clear(this._model),this._removeOnRenderedListener(i)},t.prototype.dispose=function(r,i){this._removeOnRenderedListener(i)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var i=this.group,n=this._data;r&&r.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(a){ig(a,r,Re(a).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(kt),EB={cartesian2d:function(e,t){var r=t.width<0?-1:1,i=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,a=e.y+e.height,o=m2(t.x,e.x),s=y2(t.x+t.width,n),l=m2(t.y,e.y),u=y2(t.y+t.height,a),h=s<o,c=u<l;return t.x=h&&o>n?s:o,t.y=c&&l>a?u:l,t.width=h?0:s-o,t.height=c?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),h||c},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var i=t.r;t.r=t.r0,t.r0=i}var n=y2(t.r,e.r),a=m2(t.r0,e.r0);t.r=n,t.r0=a;var o=n-a<0;if(r<0){var i=t.r;t.r=t.r0,t.r0=i}return o}},IB={cartesian2d:function(e,t,r,i,n,a,o,s,l){var u=new rt({shape:ae({},i),z2:1});if(u.__dataIndex=r,u.name="item",a){var h=u.shape,c=n?"height":"width";h[c]=0}return u},polar:function(e,t,r,i,n,a,o,s,l){var u=!n&&l?O_:$i,h=new u({shape:i,z2:1});h.name="item";var c=i$(n);if(h.calculateTextPosition=aAe(c,{isRoundCap:u===O_}),a){var d=h.shape,f=n?"r":"endAngle",p={};d[f]=n?i.r0:i.startAngle,p[f]=i[f],(s?ut:Ut)(h,{shape:p},a)}return h}};function uAe(e,t){var r=e.get("realtimeSort",!0),i=t.getBaseAxis();if(r&&i.type==="category"&&t.type==="cartesian2d")return{baseAxis:i,otherAxis:t.getOtherAxis(i)}}function OB(e,t,r,i,n,a,o,s){var l,u;a?(u={x:i.x,width:i.width},l={y:i.y,height:i.height}):(u={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(o?ut:Ut)(r,{shape:l},t,n,null);var h=t?e.baseAxis.model:null;(o?ut:Ut)(r,{shape:u},h,n)}function RB(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var hAe=["x","y","width","height"],cAe=["cx","cy","r","startAngle","endAngle"],zB={cartesian2d:function(e){return!RB(e,hAe)},polar:function(e){return!RB(e,cAe)}},Jy={cartesian2d:function(e,t,r){var i=e.getItemLayout(t),n=r?fAe(r,i):0,a=i.width>0?1:-1,o=i.height>0?1:-1;return{x:i.x+a*n/2,y:i.y+o*n/2,width:i.width-a*n,height:i.height-o*n}},polar:function(e,t,r){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function dAe(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function i$(e){return function(t){var r=t?"Arc":"Angle";return function(i){switch(i){case"start":case"insideStart":case"end":case"insideEnd":return i+r;default:return i}}}(e)}function NB(e,t,r,i,n,a,o,s){var l=t.getItemVisual(r,"style");if(s){if(!a.get("roundCap")){var h=e.shape,c=ah(i.getModel("itemStyle"),h,!0);ae(h,c),e.setShape(h)}}else{var u=i.get(["itemStyle","borderRadius"])||0;e.setShape("r",u)}e.useStyle(l);var d=i.getShallow("cursor");d&&e.attr("cursor",d);var f=s?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",p=Pr(i);Wr(e,p,{labelFetcher:a,labelDataIndex:r,defaultText:Fd(a.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var v=e.getTextContent();if(s&&v){var g=i.get(["label","position"]);e.textConfig.inside=g==="middle"?!0:null,oAe(e,g==="outside"?f:g,i$(o),i.get(["label","rotate"]))}g8(v,p,a.getRawValue(r),function(y){return q7(t,y)});var m=i.getModel(["emphasis"]);Zt(e,m.get("focus"),m.get("blurScope"),m.get("disabled")),jr(e,i),dAe(n)&&(e.style.fill="none",e.style.stroke="none",I(e.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function fAe(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var i=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),a=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,n,a)}var pAe=function(){function e(){}return e}(),kB=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="largeBar",i}return t.prototype.getDefaultShape=function(){return new pAe},t.prototype.buildPath=function(r,i){for(var n=i.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,h=0;h<n.length;h+=3)l[a]=u,l[o]=n[h+2],s[a]=n[h+a],s[o]=n[h+o],r.rect(s[0],s[1],l[0],l[1])},t}(qe);function BB(e,t,r,i){var n=e.getData(),a=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=e.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var h=new kB({shape:{points:u},incremental:!!i,silent:!0,z2:0});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,h.useStyle(l.getItemStyle()),t.add(h),r&&r.push(h)}var c=new kB({shape:{points:n.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,t.add(c),c.useStyle(n.getVisual("style")),Re(c).seriesIndex=e.seriesIndex,e.get("silent")||(c.on("mousedown",FB),c.on("mousemove",FB)),r&&r.push(c)}var FB=TL(function(e){var t=this,r=vAe(t,e.offsetX,e.offsetY);Re(t).dataIndex=r>=0?r:null},30,!1);function vAe(e,t,r){for(var i=e.baseDimIdx,n=1-i,a=e.shape.points,o=e.largeDataIndices,s=[],l=[],u=e.barWidth,h=0,c=a.length/3;h<c;h++){var d=h*3;if(l[i]=u,l[n]=a[d+2],s[i]=a[d+i],s[n]=a[d+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return o[h]}return-1}function n$(e,t,r){if(Xh(r,"cartesian2d")){var i=t,n=r.getArea();return{x:e?i.x:n.x,y:e?n.y:i.y,width:e?i.width:n.width,height:e?n.height:i.height}}else{var n=r.getArea(),a=t;return{cx:n.cx,cy:n.cy,r0:e?n.r0:a.r0,r:e?n.r:a.r,startAngle:e?a.startAngle:0,endAngle:e?a.endAngle:Math.PI*2}}}function gAe(e,t,r){var i=e.type==="polar"?$i:rt;return new i({shape:n$(t,r,e),silent:!0,z2:0})}const mAe=lAe;function yAe(e){e.registerChartView(mAe),e.registerSeriesModel(rAe),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,Ne(l7,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,u7("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,t$("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var i=t.componentType||"series";r.eachComponent({mainType:i,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var Qy=Math.PI*2,VB=Math.PI/180;function a$(e,t){return br(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function o$(e,t){var r=a$(e,t),i=e.get("center"),n=e.get("radius");ue(n)||(n=[0,n]);var a=ve(r.width,t.getWidth()),o=ve(r.height,t.getHeight()),s=Math.min(a,o),l=ve(n[0],s/2),u=ve(n[1],s/2),h,c,d=e.coordinateSystem;if(d){var f=d.dataToPoint(i);h=f[0]||0,c=f[1]||0}else ue(i)||(i=[i,i]),h=ve(i[0],a)+r.x,c=ve(i[1],o)+r.y;return{cx:h,cy:c,r0:l,r:u}}function _Ae(e,t,r){t.eachSeriesByType(e,function(i){var n=i.getData(),a=n.mapDimension("value"),o=a$(i,r),s=o$(i,r),l=s.cx,u=s.cy,h=s.r,c=s.r0,d=-i.get("startAngle")*VB,f=i.get("minAngle")*VB,p=0;n.each(a,function(T){!isNaN(T)&&p++});var v=n.getSum(a),g=Math.PI/(v||p)*2,m=i.get("clockwise"),y=i.get("roseType"),_=i.get("stillShowZeroSum"),x=n.getDataExtent(a);x[0]=0;var w=Qy,b=0,S=d,M=m?1:-1;if(n.setLayout({viewRect:o,r:h}),n.each(a,function(T,C){var D;if(isNaN(T)){n.setItemLayout(C,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:m,cx:l,cy:u,r0:c,r:y?NaN:h});return}y!=="area"?D=v===0&&_?g:T*g:D=Qy/p,D<f?(D=f,w-=f):b+=T;var P=S+M*D;n.setItemLayout(C,{angle:D,startAngle:S,endAngle:P,clockwise:m,cx:l,cy:u,r0:c,r:y?mt(T,x,[c,h]):h}),S=P}),w<Qy&&p)if(w<=.001){var A=Qy/p;n.each(a,function(T,C){if(!isNaN(T)){var D=n.getItemLayout(C);D.angle=A,D.startAngle=d+M*C*A,D.endAngle=d+M*(C+1)*A}})}else g=w/b,S=d,n.each(a,function(T,C){if(!isNaN(T)){var D=n.getItemLayout(C),P=D.angle===f?f:T*g;D.startAngle=S,D.endAngle=S+M*P,S+=M*P}})})}function Qg(e){return{seriesType:e,reset:function(t,r){var i=r.findComponents({mainType:"legend"});if(!(!i||!i.length)){var n=t.getData();n.filterSelf(function(a){for(var o=n.getName(a),s=0;s<i.length;s++)if(!i[s].isSelected(o))return!1;return!0})}}}}var xAe=Math.PI/180;function UB(e,t,r,i,n,a,o,s,l,u){if(e.length<2)return;function h(v){for(var g=v.rB,m=g*g,y=0;y<v.list.length;y++){var _=v.list[y],x=Math.abs(_.label.y-r),w=i+_.len,b=w*w,S=Math.sqrt((1-Math.abs(x*x/m))*b),M=t+(S+_.len2)*n,A=M-_.label.x,T=_.targetTextWidth-A*n;s$(_,T,!0),_.label.x=M}}function c(v){for(var g={list:[],maxY:0},m={list:[],maxY:0},y=0;y<v.length;y++)if(v[y].labelAlignTo==="none"){var _=v[y],x=_.label.y>r?m:g,w=Math.abs(_.label.y-r);if(w>=x.maxY){var b=_.label.x-t-_.len2*n,S=i+_.len,M=Math.abs(b)<S?Math.sqrt(w*w/(1-b*b/S/S)):S;x.rB=M,x.maxY=w}x.list.push(_)}h(g),h(m)}for(var d=e.length,f=0;f<d;f++)if(e[f].position==="outer"&&e[f].labelAlignTo==="labelLine"){var p=e[f].label.x-u;e[f].linePoints[1][0]+=p,e[f].label.x=u}E7(e,l,l+o)&&c(e)}function bAe(e,t,r,i,n,a,o,s){for(var l=[],u=[],h=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=0;d<e.length;d++){var f=e[d].label;_2(e[d])||(f.x<t?(h=Math.min(h,f.x),l.push(e[d])):(c=Math.max(c,f.x),u.push(e[d])))}for(var d=0;d<e.length;d++){var p=e[d];if(!_2(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var f=p.label,v=p.linePoints,g=void 0;p.labelAlignTo==="edge"?f.x<t?g=v[2][0]-p.labelDistance-o-p.edgeDistance:g=o+n-p.edgeDistance-v[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?f.x<t?g=h-o-p.bleedMargin:g=o+n-c-p.bleedMargin:f.x<t?g=f.x-o-p.bleedMargin:g=o+n-f.x-p.bleedMargin,p.targetTextWidth=g,s$(p,g)}}UB(u,t,r,i,1,n,a,o,s,c),UB(l,t,r,i,-1,n,a,o,s,h);for(var d=0;d<e.length;d++){var p=e[d];if(!_2(p)&&p.linePoints){var f=p.label,v=p.linePoints,m=p.labelAlignTo==="edge",y=f.style.padding,_=y?y[1]+y[3]:0,x=f.style.backgroundColor?0:_,w=p.rect.width+x,b=v[1][0]-v[2][0];m?f.x<t?v[2][0]=o+p.edgeDistance+w+p.labelDistance:v[2][0]=o+n-p.edgeDistance-w-p.labelDistance:(f.x<t?v[2][0]=f.x+p.labelDistance:v[2][0]=f.x-p.labelDistance,v[1][0]=v[2][0]+b),v[1][1]=v[2][1]=f.y}}}function s$(e,t,r){if(r===void 0&&(r=!1),e.labelStyleWidth==null){var i=e.label,n=i.style,a=e.rect,o=n.backgroundColor,s=n.padding,l=s?s[1]+s[3]:0,u=n.overflow,h=a.width+(o?0:l);if(t<h||r){var c=a.height;if(u&&u.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",t-l);var d=i.getBoundingRect();i.setStyle("width",Math.ceil(d.width)),i.setStyle("backgroundColor",o)}else{var f=t-l,p=t<h?f:r?f>e.unconstrainedWidth?null:f:null;i.setStyle("width",p)}var v=i.getBoundingRect();a.width=v.width;var g=(i.style.margin||0)+2.1;a.height=v.height+g,a.y-=(a.height-c)/2}}}function _2(e){return e.position==="center"}function wAe(e){var t=e.getData(),r=[],i,n,a=!1,o=(e.get("minShowLabelAngle")||0)*xAe,s=t.getLayout("viewRect"),l=t.getLayout("r"),u=s.width,h=s.x,c=s.y,d=s.height;function f(b){b.ignore=!0}function p(b){if(!b.ignore)return!0;for(var S in b.states)if(b.states[S].ignore===!1)return!0;return!1}t.each(function(b){var S=t.getItemGraphicEl(b),M=S.shape,A=S.getTextContent(),T=S.getTextGuideLine(),C=t.getItemModel(b),D=C.getModel("label"),P=D.get("position")||C.get(["emphasis","label","position"]),E=D.get("distanceToLabelLine"),O=D.get("alignTo"),z=ve(D.get("edgeDistance"),u),B=D.get("bleedMargin"),N=C.getModel("labelLine"),F=N.get("length");F=ve(F,u);var G=N.get("length2");if(G=ve(G,u),Math.abs(M.endAngle-M.startAngle)<o){I(A.states,f),A.ignore=!0,T&&(I(T.states,f),T.ignore=!0);return}if(p(A)){var H=(M.startAngle+M.endAngle)/2,$=Math.cos(H),Z=Math.sin(H),X,ne,te,U;i=M.cx,n=M.cy;var W=P==="inside"||P==="inner";if(P==="center")X=M.cx,ne=M.cy,U="center";else{var j=(W?(M.r+M.r0)/2*$:M.r*$)+i,K=(W?(M.r+M.r0)/2*Z:M.r*Z)+n;if(X=j+$*3,ne=K+Z*3,!W){var ee=j+$*(F+l-M.r),R=K+Z*(F+l-M.r),k=ee+($<0?-1:1)*G,V=R;O==="edge"?X=$<0?h+z:h+u-z:X=k+($<0?-E:E),ne=V,te=[[j,K],[ee,R],[k,V]]}U=W?"center":O==="edge"?$>0?"right":"left":$>0?"left":"right"}var q=Math.PI,Q=0,J=D.get("rotate");if(st(J))Q=J*(q/180);else if(P==="center")Q=0;else if(J==="radial"||J===!0){var oe=$<0?-H+q:-H;Q=oe}else if(J==="tangential"&&P!=="outside"&&P!=="outer"){var le=Math.atan2($,Z);le<0&&(le=q*2+le);var pe=Z>0;pe&&(le=q+le),Q=le-q}if(a=!!Q,A.x=X,A.y=ne,A.rotation=Q,A.setStyle({verticalAlign:"middle"}),W){A.setStyle({align:U});var Se=A.states.select;Se&&(Se.x+=A.x,Se.y+=A.y)}else{var he=A.getBoundingRect().clone();he.applyTransform(A.getComputedTransform());var xe=(A.style.margin||0)+2.1;he.y-=xe/2,he.height+=xe,r.push({label:A,labelLine:T,position:P,len:F,len2:G,minTurnAngle:N.get("minTurnAngle"),maxSurfaceAngle:N.get("maxSurfaceAngle"),surfaceNormal:new Fe($,Z),linePoints:te,textAlign:U,labelDistance:E,labelAlignTo:O,edgeDistance:z,bleedMargin:B,rect:he,unconstrainedWidth:he.width,labelStyleWidth:A.style.width})}S.setTextConfig({inside:W})}}),!a&&e.get("avoidLabelOverlap")&&bAe(r,i,n,l,u,d,h,c);for(var v=0;v<r.length;v++){var g=r[v],m=g.label,y=g.labelLine,_=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:g.textAlign}),_&&(I(m.states,f),m.ignore=!0);var x=m.states.select;x&&(x.x+=m.x,x.y+=m.y)}if(y){var w=g.linePoints;_||!w?(I(y.states,f),y.ignore=!0):(D7(w,g.minTurnAngle),zMe(w,g.surfaceNormal,g.maxSurfaceAngle),y.setShape({points:w}),m.__hostTarget.textGuideLineConfig={anchor:new Fe(w[0][0],w[0][1])})}}}var SAe=function(e){Y(t,e);function t(r,i,n){var a=e.call(this)||this;a.z2=2;var o=new ot;return a.setTextContent(o),a.updateData(r,i,n,!0),a}return t.prototype.updateData=function(r,i,n,a){var o=this,s=r.hostModel,l=r.getItemModel(i),u=l.getModel("emphasis"),h=r.getItemLayout(i),c=ae(ah(l.getModel("itemStyle"),h,!0),h);if(isNaN(c.startAngle)){o.setShape(c);return}if(a){o.setShape(c);var d=s.getShallow("animationType");s.ecModel.ssr?(Ut(o,{scaleX:0,scaleY:0},s,{dataIndex:i,isFrom:!0}),o.originX=c.cx,o.originY=c.cy):d==="scale"?(o.shape.r=h.r0,Ut(o,{shape:{r:h.r}},s,i)):n!=null?(o.setShape({startAngle:n,endAngle:n}),Ut(o,{shape:{startAngle:h.startAngle,endAngle:h.endAngle}},s,i)):(o.shape.endAngle=h.startAngle,ut(o,{shape:{endAngle:h.endAngle}},s,i))}else Ca(o),ut(o,{shape:c},s,i);o.useStyle(r.getItemVisual(i,"style")),jr(o,l);var f=(h.startAngle+h.endAngle)/2,p=s.get("selectedOffset"),v=Math.cos(f)*p,g=Math.sin(f)*p,m=l.getShallow("cursor");m&&o.attr("cursor",m),this._updateLabel(s,r,i),o.ensureState("emphasis").shape=ae({r:h.r+(u.get("scale")&&u.get("scaleSize")||0)},ah(u.getModel("itemStyle"),h)),ae(o.ensureState("select"),{x:v,y:g,shape:ah(l.getModel(["select","itemStyle"]),h)}),ae(o.ensureState("blur"),{shape:ah(l.getModel(["blur","itemStyle"]),h)});var y=o.getTextGuideLine(),_=o.getTextContent();y&&ae(y.ensureState("select"),{x:v,y:g}),ae(_.ensureState("select"),{x:v,y:g}),Zt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(r,i,n){var a=this,o=i.getItemModel(n),s=o.getModel("labelLine"),l=i.getItemVisual(n,"style"),u=l&&l.fill,h=l&&l.opacity;Wr(a,Pr(o),{labelFetcher:i.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:h,defaultText:r.getFormattedLabel(n,"normal")||i.getName(n)});var c=a.getTextContent();a.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var d=r.get(["label","position"]);if(d!=="outside"&&d!=="outer")a.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new Yi,this.setTextGuideLine(f)),FL(this,VL(o),{stroke:u,opacity:ss(s.get(["lineStyle","opacity"]),h,1)})}},t}($i),MAe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,i,n,a){var o=r.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var h=o.getItemLayout(0),c=1;isNaN(h&&h.startAngle)&&c<o.count();++c)h=o.getItemLayout(c);h&&(u=h.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&r.get("showEmptyCircle")){var d=new $i({shape:o$(r,n)});d.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,l.add(d)}o.diff(s).add(function(f){var p=new SAe(o,f,u);o.setItemGraphicEl(f,p),l.add(p)}).update(function(f,p){var v=s.getItemGraphicEl(p);v.updateData(o,f,u),v.off("click"),l.add(v),o.setItemGraphicEl(f,v)}).remove(function(f){var p=s.getItemGraphicEl(f);ig(p,r,f)}).execute(),wAe(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(r,i){var n=i.getData(),a=n.getItemLayout(0);if(a){var o=r[0]-a.cx,s=r[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="pie",t}(kt);const TAe=MAe;function wf(e,t,r){t=ue(t)&&{coordDimensions:t}||ae({encodeDefine:e.getEncode()},t);var i=e.getSource(),n=qg(i,t).dimensions,a=new xi(n,e);return a.initData(i,r),a}var AAe=function(){function e(t,r){this._getDataWithEncodedVisual=t,this._getRawData=r}return e.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},e.prototype.containName=function(t){var r=this._getRawData();return r.indexOfName(t)>=0},e.prototype.indexOfName=function(t){var r=this._getDataWithEncodedVisual();return r.indexOfName(t)},e.prototype.getItemVisual=function(t,r){var i=this._getDataWithEncodedVisual();return i.getItemVisual(t,r)},e}();const em=AAe;var CAe=it(),DAe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new em(me(this.getData,this),me(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return wf(this,{coordDimensions:["value"],encodeDefaulter:Ne(vL,this)})},t.prototype.getDataParams=function(r){var i=this.getData(),n=CAe(i),a=n.seats;if(!a){var o=[];i.each(i.mapDimension("value"),function(l){o.push(l)}),a=n.seats=V1e(o,i.hostModel.get("percentPrecision"))}var s=e.prototype.getDataParams.call(this,r);return s.percent=a[r]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(r){Lh(r,"labelLine",["show"]);var i=r.labelLine,n=r.emphasis.labelLine;i.show=i.show&&r.label.show,n.show=n.show&&r.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}($t);const PAe=DAe;function LAe(e){return{seriesType:e,reset:function(t,r){var i=t.getData();i.filterSelf(function(n){var a=i.mapDimension("value"),o=i.get(a,n);return!(st(o)&&!isNaN(o)&&o<0)})}}}function EAe(e){e.registerChartView(TAe),e.registerSeriesModel(PAe),M9("pie",e.registerAction),e.registerLayout(Ne(_Ae,"pie")),e.registerProcessor(Qg("pie")),e.registerProcessor(LAe("pie"))}var IAe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,i){return Ds(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,i,n){return n.point(i.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}($t);const OAe=IAe;var l$=4,RAe=function(){function e(){}return e}(),zAe=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.getDefaultShape=function(){return new RAe},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,i){var n=i.points,a=i.size,o=this.symbolProxy,s=o.shape,l=r.getContext?r.getContext():r,u=l&&a[0]<l$,h=this.softClipShape,c;if(u){this._ctx=l;return}for(this._ctx=null,c=this._off;c<n.length;){var d=n[c++],f=n[c++];isNaN(d)||isNaN(f)||h&&!h.contain(d,f)||(s.x=d-a[0]/2,s.y=f-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(r,s,!0))}this.incremental&&(this._off=c,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,i=r.points,n=r.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<i.length;){var l=i[s++],u=i[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||a.fillRect(l-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,i){for(var n=this.shape,a=n.points,o=n.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=a.length/2-1;u>=0;u--){var h=u*2,c=a[h]-s/2,d=a[h+1]-l/2;if(r>=c&&i>=d&&r<=c+s&&i<=d+l)return u}return-1},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(r=n[0],i=n[1],a.contain(r,i)){var o=this.hoverDataIdx=this.findDataIndex(r,i);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var i=this.shape,n=i.points,a=i.size,o=a[0],s=a[1],l=1/0,u=1/0,h=-1/0,c=-1/0,d=0;d<n.length;){var f=n[d++],p=n[d++];l=Math.min(f,l),h=Math.max(f,h),u=Math.min(p,u),c=Math.max(p,c)}r=this._rect=new Ge(l-o/2,u-s/2,h-l+o,c-u+s)}return r},t}(qe),NAe=function(){function e(){this.group=new Ie}return e.prototype.updateData=function(t,r){this._clear();var i=this._create();i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(i){if(i.startIndex!=null){var n=(i.endIndex-i.startIndex)*2,a=i.startIndex*4*2;r=new Float32Array(r.buffer,a,n)}i.setShape("points",r),i.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,i){var n=this._newAdded[0],a=r.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),n.endIndex=t.end,n.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,r,i)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new zAe({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,i){var n=r.hostModel;i=i||{};var a=r.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=i.clipShape||null,t.symbolProxy=vr(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<l$;t.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=Re(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(h){u.dataIndex=null;var c=t.hoverDataIdx;c>=0&&(u.dataIndex=c+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const kAe=NAe;var BAe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this._updateSymbolDraw(a,r);o.updateData(a,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,i,n){var a=r.getData(),o=this._updateSymbolDraw(a,r);o.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(r,i,n){this._symbolDraw.incrementalUpdate(r,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=r.end===i.getData().count()},t.prototype.updateTransform=function(r,i,n){var a=r.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=Jg("").reset(r,i,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var i=r.coordinateSystem,n=i&&i.getArea&&i.getArea();return r.get("clip",!0)?n:null},t.prototype._updateSymbolDraw=function(r,i){var n=this._symbolDraw,a=i.pipelineContext,o=a.large;return(!n||o!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=o?new kAe:new Kg,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(r,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(kt);const FAe=BAe;var VAe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(nt);const UAe=VAe;var rC=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",dr).models[0]},t.type="cartesian2dAxis",t}(nt);gr(rC,Yg);var u$={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},GAe=Ue({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},u$),WL=Ue({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},u$),HAe=Ue({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},WL),jAe=De({logBase:10},WL);const h$={category:GAe,value:WL,time:HAe,log:jAe};var WAe={value:1,category:1,time:1,log:1};function Vd(e,t,r,i){I(WAe,function(n,a){var o=Ue(Ue({},h$[a],!0),i,!0),s=function(l){Y(u,l);function u(){var h=l!==null&&l.apply(this,arguments)||this;return h.type=t+"Axis."+a,h}return u.prototype.mergeDefaultAndTheme=function(h,c){var d=og(this),f=d?gf(h):{},p=c.getTheme();Ue(h,p.get(a+"Axis")),Ue(h,this.getDefaultOption()),h.type=GB(h),d&&Fl(h,f,d)},u.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=YA.createByAxisModel(this))},u.prototype.getCategories=function(h){var c=this.option;if(c.type==="category")return h?c.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+a,u.defaultOption=o,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",GB)}function GB(e){return e.type||(e.data?"category":"value")}var $Ae=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return ce(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),xt(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const qAe=$Ae;var iC=["x","y"];function HB(e){return e.type==="interval"||e.type==="time"}var XAe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=iC,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!HB(r)||!HB(i))){var n=r.getExtent(),a=i.getExtent(),o=this.dataToPoint([n[0],a[0]]),s=this.dataToPoint([n[1],a[1]]),l=n[1]-n[0],u=a[1]-a[0];if(!(!l||!u)){var h=(s[0]-o[0])/l,c=(s[1]-o[1])/u,d=o[0]-n[0]*h,f=o[1]-a[0]*c,p=this._transform=[h,0,0,c,d,f];this._invTransform=lf([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var i=this.getAxis("x"),n=this.getAxis("y");return i.contain(i.toLocalCoord(r[0]))&&n.contain(n.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,i){var n=this.dataToPoint(r),a=this.dataToPoint(i),o=this.getArea(),s=new Ge(n[0],n[1],a[0]-n[0],a[1]-n[1]);return o.intersect(s)},t.prototype.dataToPoint=function(r,i,n){n=n||[];var a=r[0],o=r[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Gr(n,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return n[0]=s.toGlobalCoord(s.dataToCoord(a,i)),n[1]=l.toGlobalCoord(l.dataToCoord(o,i)),n},t.prototype.clampData=function(r,i){var n=this.getAxis("x").scale,a=this.getAxis("y").scale,o=n.getExtent(),s=a.getExtent(),l=n.parse(r[0]),u=a.parse(r[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),i[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),i},t.prototype.pointToData=function(r,i){var n=[];if(this._invTransform)return Gr(n,r,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return n[0]=a.coordToData(a.toLocalCoord(r[0]),i),n[1]=o.coordToData(o.toLocalCoord(r[1]),i),n},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),n=Math.min(r[0],r[1]),a=Math.min(i[0],i[1]),o=Math.max(r[0],r[1])-n,s=Math.max(i[0],i[1])-a;return new Ge(n,a,o,s)},t}(qAe),YAe=function(e){Y(t,e);function t(r,i,n,a,o){var s=e.call(this,r,i,n)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),r&&i[0]>i[1]&&i.reverse(),i},t.prototype.pointToData=function(r,i){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),i)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Ea);const ZAe=YAe;function nC(e,t,r){r=r||{};var i=e.coordinateSystem,n=t.axis,a={},o=n.getAxesOnZeroOf()[0],s=n.position,l=o?"onZero":s,u=n.dim,h=i.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],d={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,p=u==="x"?[c[2]-f,c[3]+f]:[c[0]-f,c[1]+f];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));p[d.onZero]=Math.max(Math.min(v,p[1]),p[0])}a.position=[u==="y"?p[d[l]]:c[0],u==="x"?p[d[l]]:c[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=g[s],a.labelOffset=o?p[d[s]]-p[d.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),zr(r.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var m=t.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-m:m,a.z2=1,a}function jB(e){return e.get("coordinateSystem")==="cartesian2d"}function WB(e){var t={xAxisModel:null,yAxisModel:null};return I(t,function(r,i){var n=i.replace(/Model$/,""),a=e.getReferringComponents(n,dr).models[0];t[i]=a}),t}var x2=Math.log;function c$(e,t,r){var i=Ul.prototype,n=i.getTicks.call(r),a=i.getTicks.call(r,!0),o=n.length-1,s=i.getInterval.call(r),l=g7(e,t),u=l.extent,h=l.fixMin,c=l.fixMax;if(e.type==="log"){var d=x2(e.base);u=[x2(u[0])/d,x2(u[1])/d]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:o,fixMin:h,fixMax:c});var f=i.getExtent.call(e);h&&(u[0]=f[0]),c&&(u[1]=f[1]);var p=i.getInterval.call(e),v=u[0],g=u[1];if(h&&c)p=(g-v)/o;else if(h)for(g=u[0]+p*o;g<u[1]&&isFinite(g)&&isFinite(u[1]);)p=o2(p),g=u[0]+p*o;else if(c)for(v=u[1]-p*o;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=o2(p),v=u[1]-p*o;else{var m=e.getTicks().length-1;m>o&&(p=o2(p));var y=p*o;g=Math.ceil(u[1]/p)*p,v=Qt(g-y),v<0&&u[0]>=0?(v=0,g=Qt(y)):g>0&&u[1]<=0&&(g=0,v=-Qt(y))}var _=(n[0].value-a[0].value)/s,x=(n[o].value-a[o].value)/s;i.setExtent.call(e,v+p*_,g+p*x),i.setInterval.call(e,p),(_||x)&&i.setNiceExtent.call(e,v+p,g-p)}var KAe=function(){function e(t,r,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=iC,this._initCartesian(t,r,i),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var i=this._axesMap;this._updateScale(t,this.model);function n(o){var s,l=Ze(o),u=l.length;if(u){for(var h=[],c=u-1;c>=0;c--){var d=+l[c],f=o[d],p=f.model,v=f.scale;ZA(v)&&p.get("alignTicks")&&p.get("interval")==null?h.push(f):(Bd(v,p),ZA(v)&&(s=f))}h.length&&(s||(s=h.pop(),Bd(s.scale,s.model)),I(h,function(g){c$(g.scale,g.model,s.scale)}))}}n(i.x),n(i.y);var a={};I(i.x,function(o){$B(i,"y",o,a)}),I(i.y,function(o){$B(i,"x",o,a)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,i){var n=t.getBoxLayoutParams(),a=!i&&t.get("containLabel"),o=br(n,{width:r.getWidth(),height:r.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(I(s,function(u){if(!u.model.get(["axisLabel","inside"])){var h=cMe(u);if(h){var c=u.isHorizontal()?"height":"width",d=u.model.get(["axisLabel","margin"]);o[c]-=h[c]+d,u.position==="top"?o.y+=h.height+d:u.position==="left"&&(o.x+=h.width+d)}}}),l()),I(this._coordsList,function(u){u.calcAffineTransform()});function l(){I(s,function(u){var h=u.isHorizontal(),c=h?[0,o.width]:[0,o.height],d=u.inverse?1:0;u.setExtent(c[d],c[1-d]),JAe(u,h?o.x:o.y)})}},e.prototype.getAxis=function(t,r){var i=this._axesMap[t];if(i!=null)return i[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var i="x"+t+"y"+r;return this._coordsMap[i]}Pe(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,a=this._coordsList;n<a.length;n++)if(a[n].getAxis("x").index===t||a[n].getAxis("y").index===r)return a[n]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,i){var n=this._findConvertTarget(r);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},e.prototype.convertFromPixel=function(t,r,i){var n=this._findConvertTarget(r);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,i=t.xAxisModel||r&&r.getReferringComponents("xAxis",dr).models[0],n=t.yAxisModel||r&&r.getReferringComponents("yAxis",dr).models[0],a=t.gridModel,o=this._coordsList,s,l;if(r)s=r.coordinateSystem,We(o,s)<0&&(s=null);else if(i&&n)s=this.getCartesian(i.componentIndex,n.componentIndex);else if(i)l=this.getAxis("x",i.componentIndex);else if(n)l=this.getAxis("y",n.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,i){var n=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,I(s.x,function(h,c){I(s.y,function(d,f){var p="x"+c+"y"+f,v=new XAe(p);v.master=n,v.model=t,n._coordsMap[p]=v,n._coordsList.push(v),v.addAxis(h),v.addAxis(d)})});function u(h){return function(c,d){if(b2(c,t)){var f=c.get("position");h==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var p=new ZAe(h,db(c),[0,0],c.get("type"),f),v=p.type==="category";p.onBand=v&&c.get("boundaryGap"),p.inverse=c.get("inverse"),c.axis=p,p.model=c,p.grid=a,p.index=d,a._axesList.push(p),s[h][d]=p,l[h]++}}}},e.prototype._updateScale=function(t,r){I(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var a=n.model.get("categorySortInfo");n.scale.setSortInfo(a)}}),t.eachSeries(function(n){if(jB(n)){var a=WB(n),o=a.xAxisModel,s=a.yAxisModel;if(!b2(o,r)||!b2(s,r))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=n.getData(),h=l.getAxis("x"),c=l.getAxis("y");i(u,h),i(u,c)}},this);function i(n,a){I(D_(n,a.dim),function(o){a.scale.unionExtentFromData(n,o)})}},e.prototype.getTooltipAxes=function(t){var r=[],i=[];return I(this.getCartesians(),function(n){var a=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),o=n.getOtherAxis(a);We(r,a)<0&&r.push(a),We(i,o)<0&&i.push(o)}),{baseAxes:r,otherAxes:i}},e.create=function(t,r){var i=[];return t.eachComponent("grid",function(n,a){var o=new e(n,t,r);o.name="grid_"+a,o.resize(n,r,!0),n.coordinateSystem=o,i.push(o)}),t.eachSeries(function(n){if(jB(n)){var a=WB(n),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;n.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),i},e.dimensions=iC,e}();function b2(e,t){return e.getCoordSysModel()===t}function $B(e,t,r,i){r.getAxesOnZeroOf=function(){return a?[a]:[]};var n=e[t],a,o=r.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)qB(n[l])&&(a=n[l]);else for(var u in n)if(n.hasOwnProperty(u)&&qB(n[u])&&!i[h(n[u])]){a=n[u];break}a&&(i[h(a)]=!0);function h(c){return c.dim+"_"+c.index}}function qB(e){return e&&e.type!=="category"&&e.type!=="time"&&hMe(e)}function JAe(e,t){var r=e.getExtent(),i=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(n){return n+t}:function(n){return i-n+t},e.toLocalCoord=e.dim==="x"?function(n){return n-t}:function(n){return i-n+t}}const QAe=KAe;var xl=Math.PI,wh=function(){function e(t,r){this.group=new Ie,this.opt=r,this.axisModel=t,De(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Ie({x:r.position[0],y:r.position[1],rotation:r.rotation});i.updateTransform(),this._transformGroup=i}return e.prototype.hasBuilder=function(t){return!!XB[t]},e.prototype.add=function(t){XB[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,i){var n=lW(r-t),a,o;return c_(n)?(o=i>0?"top":"bottom",a="center"):c_(n-xl)?(o=i>0?"bottom":"top",a="center"):(o="middle",n>0&&n<xl?a=i>0?"right":"left":a=i>0?"left":"right"),{rotation:n,textAlign:a,textVerticalAlign:o}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),XB={axisLine:function(e,t,r,i){var n=t.get(["axisLine","show"]);if(n==="auto"&&e.handleAutoShown&&(n=e.handleAutoShown("axisLine")),!!n){var a=t.axis.getExtent(),o=i.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(Gr(s,s,o),Gr(l,l,o));var h=ae({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new Nr({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});zd(c.shape,c.style.lineWidth),c.anid="line",r.add(c);var d=t.get(["axisLine","symbol"]);if(d!=null){var f=t.get(["axisLine","symbolSize"]);ge(d)&&(d=[d,d]),(ge(f)||st(f))&&(f=[f,f]);var p=bf(t.get(["axisLine","symbolOffset"])||0,f),v=f[0],g=f[1];I([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,y){if(d[y]!=="none"&&d[y]!=null){var _=vr(d[y],-v/2,-g/2,v,g,h.stroke,!0),x=m.r+m.offset,w=u?l:s;_.attr({rotation:m.rotate,x:w[0]+x*Math.cos(e.rotation),y:w[1]-x*Math.sin(e.rotation),silent:!0,z2:11}),r.add(_)}})}}},axisTickLabel:function(e,t,r,i){var n=rCe(r,i,t,e),a=nCe(r,i,t,e);if(tCe(t,a,n),iCe(r,i,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=P7(ce(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));I7(o)}},axisName:function(e,t,r,i){var n=zr(e.axisName,t.get("name"));if(n){var a=t.get("nameLocation"),o=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),h=u[0]>u[1]?-1:1,c=[a==="start"?u[0]-h*l:a==="end"?u[1]+h*l:(u[0]+u[1])/2,ZB(a)?e.labelOffset+o*l:0],d,f=t.get("nameRotate");f!=null&&(f=f*xl/180);var p;ZB(a)?d=wh.innerTextLayout(e.rotation,f??e.rotation,o):(d=eCe(e.rotation,a,f||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(d.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),g=t.get("nameTruncate",!0)||{},m=g.ellipsis,y=zr(e.nameTruncateMaxWidth,g.maxWidth,p),_=new ot({x:c[0],y:c[1],rotation:d.rotation,silent:wh.isLabelSilent(t),style:zt(s,{text:n,font:v,overflow:"truncate",width:y,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||d.textAlign,verticalAlign:s.get("verticalAlign")||d.textVerticalAlign}),z2:1});if(df({el:_,componentModel:t,itemName:n}),_.__fullText=n,_.anid="name",t.get("triggerEvent")){var x=wh.makeAxisEventDataBase(t);x.targetType="axisName",x.name=n,Re(_).eventData=x}i.add(_),_.updateTransform(),r.add(_),_.decomposeTransform()}}};function eCe(e,t,r,i){var n=lW(r-e),a,o,s=i[0]>i[1],l=t==="start"&&!s||t!=="start"&&s;return c_(n-xl/2)?(o=l?"bottom":"top",a="center"):c_(n-xl*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",n<xl*1.5&&n>xl/2?a=l?"left":"right":a=l?"right":"left"),{rotation:n,textAlign:a,textVerticalAlign:o}}function tCe(e,t,r){if(!m7(e.axis)){var i=e.get(["axisLabel","showMinLabel"]),n=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var a=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],h=r[1],c=r[r.length-1],d=r[r.length-2];i===!1?(mn(a),mn(u)):YB(a,o)&&(i?(mn(o),mn(h)):(mn(a),mn(u))),n===!1?(mn(s),mn(c)):YB(l,s)&&(n?(mn(l),mn(d)):(mn(s),mn(c)))}}function mn(e){e&&(e.ignore=!0)}function YB(e,t){var r=e&&e.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(!(!r||!i)){var n=Fx([]);return Wh(n,n,-e.rotation),r.applyTransform(us([],n,e.getLocalTransform())),i.applyTransform(us([],n,t.getLocalTransform())),r.intersect(i)}}function ZB(e){return e==="middle"||e==="center"}function d$(e,t,r,i,n){for(var a=[],o=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=r,t&&(Gr(o,o,t),Gr(s,s,t));var h=new Nr({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:i,z2:2,autoBatch:!0,silent:!0});zd(h.shape,h.style.lineWidth),h.anid=n+"_"+e[l].tickValue,a.push(h)}return a}function rCe(e,t,r,i){var n=r.axis,a=r.getModel("axisTick"),o=a.get("show");if(o==="auto"&&i.handleAutoShown&&(o=i.handleAutoShown("axisTick")),!(!o||n.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=i.tickDirection*a.get("length"),u=n.getTicksCoords(),h=d$(u,t.transform,l,De(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<h.length;c++)e.add(h[c]);return h}}function iCe(e,t,r,i){var n=r.axis,a=r.getModel("minorTick");if(!(!a.get("show")||n.scale.isBlank())){var o=n.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=i*a.get("length"),u=De(s.getLineStyle(),De(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var c=d$(o[h],t.transform,l,u,"minorticks_"+h),d=0;d<c.length;d++)e.add(c[d])}}function nCe(e,t,r,i){var n=r.axis,a=zr(i.axisLabelShow,r.get(["axisLabel","show"]));if(!(!a||n.scale.isBlank())){var o=r.getModel("axisLabel"),s=o.get("margin"),l=n.getViewLabels(),u=(zr(i.labelRotate,o.get("rotate"))||0)*xl/180,h=wh.innerTextLayout(i.rotation,u,i.labelDirection),c=r.getCategories&&r.getCategories(!0),d=[],f=wh.isLabelSilent(r),p=r.get("triggerEvent");return I(l,function(v,g){var m=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,_=v.rawLabel,x=o;if(c&&c[m]){var w=c[m];Pe(w)&&w.textStyle&&(x=new Nt(w.textStyle,o,r.ecModel))}var b=x.getTextColor()||r.get(["axisLine","lineStyle","color"]),S=n.dataToCoord(m),M=new ot({x:S,y:i.labelOffset+i.labelDirection*s,rotation:h.rotation,silent:f,z2:10+(v.level||0),style:zt(x,{text:y,align:x.getShallow("align",!0)||h.textAlign,verticalAlign:x.getShallow("verticalAlign",!0)||x.getShallow("baseline",!0)||h.textVerticalAlign,fill:Ae(b)?b(n.type==="category"?_:n.type==="value"?m+"":m,g):b})});if(M.anid="label_"+m,p){var A=wh.makeAxisEventDataBase(r);A.targetType="axisLabel",A.value=_,A.tickIndex=g,n.type==="category"&&(A.dataIndex=m),Re(M).eventData=A}t.add(M),M.updateTransform(),d.push(M),e.add(M),M.decomposeTransform()}),d}}const Ss=wh;function aCe(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return oCe(r,e,t),r.seriesInvolved&&lCe(r,e),r}function oCe(e,t,r){var i=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),a=n.get("link",!0)||[],o=[];I(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=pg(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var h=s.model,c=h.getModel("tooltip",i);if(I(s.getAxes(),Ne(v,!1,null)),s.getTooltipAxes&&i&&c.get("show")){var d=c.get("trigger")==="axis",f=c.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(c.get(["axisPointer","axis"]));(d||f)&&I(p.baseAxes,Ne(v,f?"cross":!0,d)),f&&I(p.otherAxes,Ne(v,"cross",!1))}function v(g,m,y){var _=y.model.getModel("axisPointer",n),x=_.get("show");if(!(!x||x==="auto"&&!g&&!aC(_))){m==null&&(m=_.get("triggerTooltip")),_=g?sCe(y,c,n,t,g,m):_;var w=_.get("snap"),b=pg(y.model),S=m||w||y.type==="category",M=e.axesInfo[b]={key:b,axis:y,coordSys:s,axisPointerModel:_,triggerTooltip:m,involveSeries:S,snap:w,useHandle:aC(_),seriesModels:[],linkGroup:null};u[b]=M,e.seriesInvolved=e.seriesInvolved||S;var A=uCe(a,y);if(A!=null){var T=o[A]||(o[A]={axesInfo:{}});T.axesInfo[b]=M,T.mapper=a[A].mapper,M.linkGroup=T}}}})}function sCe(e,t,r,i,n,a){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};I(s,function(d){l[d]=Ee(o.get(d))}),l.snap=e.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),n==="cross"){var h=o.get(["label","show"]);if(u.show=h??!0,!a){var c=l.lineStyle=o.get("crossStyle");c&&De(u,c.textStyle)}}return e.model.getModel("axisPointer",new Nt(l,r,i))}function lCe(e,t){t.eachSeries(function(r){var i=r.coordinateSystem,n=r.get(["tooltip","trigger"],!0),a=r.get(["tooltip","show"],!0);!i||n==="none"||n===!1||n==="item"||a===!1||r.get(["axisPointer","show"],!0)===!1||I(e.coordSysAxesInfo[pg(i.model)],function(o){var s=o.axis;i.getAxis(s.dim)===s&&(o.seriesModels.push(r),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=r.getData().count())})})}function uCe(e,t){for(var r=t.model,i=t.dim,n=0;n<e.length;n++){var a=e[n]||{};if(w2(a[i+"AxisId"],r.id)||w2(a[i+"AxisIndex"],r.componentIndex)||w2(a[i+"AxisName"],r.name))return n}}function w2(e,t){return e==="all"||ue(e)&&We(e,t)>=0||e===t}function hCe(e){var t=$L(e);if(t){var r=t.axisPointerModel,i=t.axis.scale,n=r.option,a=r.get("status"),o=r.get("value");o!=null&&(o=i.parse(o));var s=aC(r);a==null&&(n.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),n.value=o,s&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function $L(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[pg(e)]}function cCe(e){var t=$L(e);return t&&t.axisPointerModel}function aC(e){return!!e.get(["handle","show"])}function pg(e){return e.type+"||"+e.id}var KB={},dCe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){this.axisPointerClass&&hCe(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,n,!0)},t.prototype.updateAxisPointer=function(r,i,n,a){this._doUpdateAxisPointerClass(r,n,!1)},t.prototype.remove=function(r,i){var n=this._axisPointer;n&&n.remove(i)},t.prototype.dispose=function(r,i){this._disposeAxisPointer(i),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,i,n){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var o=cCe(r);o?(this._axisPointer||(this._axisPointer=new a)).render(r,o,i,n):this._disposeAxisPointer(i)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,i){KB[r]=i},t.getAxisPointerClass=function(r){return r&&KB[r]},t.type="axis",t}(Kt);const Yh=dCe;var oC=it();function f$(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=i.coordinateSystem.getRect(),u=n.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var h=s.length,c=oC(e).splitAreaColors,d=Me(),f=0;if(c)for(var p=0;p<u.length;p++){var v=c.get(u[p].tickValue);if(v!=null){f=(v+(h-1)*p)%h;break}}var g=n.toGlobalCoord(u[0].coord),m=o.getAreaStyle();s=ue(s)?s:[s];for(var p=1;p<u.length;p++){var y=n.toGlobalCoord(u[p].coord),_=void 0,x=void 0,w=void 0,b=void 0;n.isHorizontal()?(_=g,x=l.y,w=y-_,b=l.height,g=_+w):(_=l.x,x=g,w=l.width,b=y-x,g=x+b);var S=u[p-1].tickValue;S!=null&&d.set(S,f),t.add(new rt({anid:S!=null?"area_"+S:null,shape:{x:_,y:x,width:w,height:b},style:De({fill:s[f]},m),autoBatch:!0,silent:!0})),f=(f+1)%h}oC(e).splitAreaColors=d}}}function p$(e){oC(e).splitAreaColors=null}var fCe=["axisLine","axisTickLabel","axisName"],pCe=["splitArea","splitLine","minorSplitLine"],v$=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,i,n,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Ie,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=nC(s,r),u=new Ss(r,ae({handleAutoShown:function(c){for(var d=s.coordinateSystem.getCartesians(),f=0;f<d.length;f++)if(ZA(d[f].getOtherAxis(r.axis).scale))return!0;return!1}},l));I(fCe,u.add,u),this._axisGroup.add(u.getGroup()),I(pCe,function(c){r.get([c,"show"])&&vCe[c](this,this._axisGroup,r,s)},this);var h=a&&a.type==="changeAxisOrder"&&a.isInitSort;h||Ug(o,this._axisGroup,r),e.prototype.render.call(this,r,i,n,a)}},t.prototype.remove=function(){p$(this)},t.type="cartesianAxis",t}(Yh),vCe={splitLine:function(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=ue(s)?s:[s];for(var l=i.coordinateSystem.getRect(),u=n.isHorizontal(),h=0,c=n.getTicksCoords({tickModel:a}),d=[],f=[],p=o.getLineStyle(),v=0;v<c.length;v++){var g=n.toGlobalCoord(c[v].coord);u?(d[0]=g,d[1]=l.y,f[0]=g,f[1]=l.y+l.height):(d[0]=l.x,d[1]=g,f[0]=l.x+l.width,f[1]=g);var m=h++%s.length,y=c[v].tickValue,_=new Nr({anid:y!=null?"line_"+c[v].tickValue:null,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:f[0],y2:f[1]},style:De({stroke:s[m]},p),silent:!0});zd(_.shape,p.lineWidth),t.add(_)}}},minorSplitLine:function(e,t,r,i){var n=r.axis,a=r.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=i.coordinateSystem.getRect(),l=n.isHorizontal(),u=n.getMinorTicksCoords();if(u.length)for(var h=[],c=[],d=o.getLineStyle(),f=0;f<u.length;f++)for(var p=0;p<u[f].length;p++){var v=n.toGlobalCoord(u[f][p].coord);l?(h[0]=v,h[1]=s.y,c[0]=v,c[1]=s.y+s.height):(h[0]=s.x,h[1]=v,c[0]=s.x+s.width,c[1]=v);var g=new Nr({anid:"minor_line_"+u[f][p].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:d,silent:!0});zd(g.shape,d.lineWidth),t.add(g)}},splitArea:function(e,t,r,i){f$(e,t,r,i)}},g$=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(v$),gCe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=g$.type,r}return t.type="yAxis",t}(v$),mCe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,i){this.group.removeAll(),r.get("show")&&this.group.add(new rt({shape:r.coordinateSystem.getRect(),style:De({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Kt),JB={offset:0};function m$(e){e.registerComponentView(mCe),e.registerComponentModel(UAe),e.registerCoordinateSystem("cartesian2d",QAe),Vd(e,"x",rC,JB),Vd(e,"y",rC,JB),e.registerComponentView(g$),e.registerComponentView(gCe),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function yCe(e){$e(m$),e.registerSeriesModel(OAe),e.registerChartView(FAe),e.registerLayout(Jg("scatter"))}function _Ce(e){e.eachSeriesByType("radar",function(t){var r=t.getData(),i=[],n=t.coordinateSystem;if(n){var a=n.getIndicatorAxes();I(a,function(o,s){r.each(r.mapDimension(a[s].dim),function(l,u){i[u]=i[u]||[];var h=n.dataToPoint(l,s);i[u][s]=QB(h)?h:e5(n)})}),r.each(function(o){var s=l0e(i[o],function(l){return QB(l)})||e5(n);i[o].push(s.slice()),r.setItemLayout(o,i[o])})}})}function QB(e){return!isNaN(e[0])&&!isNaN(e[1])}function e5(e){return[e.cx,e.cy]}function xCe(e){var t=e.polar;if(t){ue(t)||(t=[t]);var r=[];I(t,function(i,n){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),e.radar=e.radar||[],ue(e.radar)||(e.radar=[e.radar]),e.radar.push(i)):r.push(i)}),e.polar=r}I(e.series,function(i){i&&i.type==="radar"&&i.polarIndex&&(i.radarIndex=i.polarIndex)})}var bCe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.coordinateSystem,o=this.group,s=r.getData(),l=this._data;function u(d,f){var p=d.getItemVisual(f,"symbol")||"circle";if(p!=="none"){var v=$g(d.getItemVisual(f,"symbolSize")),g=vr(p,-1,-1,2,2),m=d.getItemVisual(f,"symbolRotate")||0;return g.attr({style:{strokeNoScale:!0},z2:100,scaleX:v[0]/2,scaleY:v[1]/2,rotation:m*Math.PI/180||0}),g}}function h(d,f,p,v,g,m){p.removeAll();for(var y=0;y<f.length-1;y++){var _=u(v,g);_&&(_.__dimIdx=y,d[y]?(_.setPosition(d[y]),Hg[m?"initProps":"updateProps"](_,{x:f[y][0],y:f[y][1]},r,g)):_.setPosition(f[y]),p.add(_))}}function c(d){return ce(d,function(f){return[a.cx,a.cy]})}s.diff(l).add(function(d){var f=s.getItemLayout(d);if(f){var p=new qi,v=new Yi,g={shape:{points:f}};p.shape.points=c(f),v.shape.points=c(f),Ut(p,g,r,d),Ut(v,g,r,d);var m=new Ie,y=new Ie;m.add(v),m.add(p),m.add(y),h(v.shape.points,f,y,s,d,!0),s.setItemGraphicEl(d,m)}}).update(function(d,f){var p=l.getItemGraphicEl(f),v=p.childAt(0),g=p.childAt(1),m=p.childAt(2),y={shape:{points:s.getItemLayout(d)}};y.shape.points&&(h(v.shape.points,y.shape.points,m,s,d,!1),Ca(g),Ca(v),ut(v,y,r),ut(g,y,r),s.setItemGraphicEl(d,p))}).remove(function(d){o.remove(l.getItemGraphicEl(d))}).execute(),s.eachItemGraphicEl(function(d,f){var p=s.getItemModel(f),v=d.childAt(0),g=d.childAt(1),m=d.childAt(2),y=s.getItemVisual(f,"style"),_=y.fill;o.add(d),v.useStyle(De(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:_})),jr(v,p,"lineStyle"),jr(g,p,"areaStyle");var x=p.getModel("areaStyle"),w=x.isEmpty()&&x.parentModel.isEmpty();g.ignore=w,I(["emphasis","select","blur"],function(M){var A=p.getModel([M,"areaStyle"]),T=A.isEmpty()&&A.parentModel.isEmpty();g.ensureState(M).ignore=T&&w}),g.useStyle(De(x.getAreaStyle(),{fill:_,opacity:.7,decal:y.decal}));var b=p.getModel("emphasis"),S=b.getModel("itemStyle").getItemStyle();m.eachChild(function(M){if(M instanceof $r){var A=M.style;M.useStyle(ae({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},y))}else M.useStyle(y),M.setColor(_),M.style.strokeNoScale=!0;var T=M.ensureState("emphasis");T.style=Ee(S);var C=s.getStore().get(s.getDimensionIndex(M.__dimIdx),f);(C==null||isNaN(C))&&(C=""),Wr(M,Pr(p),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:M.__dimIdx,defaultText:C,inheritColor:_,defaultOpacity:y.opacity})}),Zt(d,b.get("focus"),b.get("blurScope"),b.get("disabled"))}),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(kt);const wCe=bCe;var SCe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new em(me(this.getData,this),me(this.getRawData,this))},t.prototype.getInitialData=function(r,i){return wf(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(r),u=l===""?this.name:l,h=d9(this,r);return Lr("section",{header:u,sortBlocks:!0,blocks:ce(s,function(c){var d=a.get(a.mapDimension(c.dim),r);return Lr("nameValue",{markerType:"subItem",markerColor:h,name:c.name,value:d,sortParam:d})})})},t.prototype.getTooltipPosition=function(r){if(r!=null){for(var i=this.getData(),n=this.coordinateSystem,a=i.getValues(ce(n.dimensions,function(u){return i.mapDimension(u)}),r),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=n.getIndicatorAxes();return n.coordToPoint(l[o].dataToCoord(a[o]),o)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}($t);const MCe=SCe;var vp=h$.value;function e0(e,t){return De({show:t},e)}var TCe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),i=this.get("splitNumber"),n=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),h=this.get(["axisName","formatter"]),c=this.get("axisNameGap"),d=this.get("triggerEvent"),f=ce(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var v=l;p.color!=null&&(v=De({color:p.color},l));var g=Ue(Ee(p),{boundaryGap:r,splitNumber:i,scale:n,axisLine:a,axisTick:o,axisLabel:s,name:p.text,showName:u,nameLocation:"end",nameGap:c,nameTextStyle:v,triggerEvent:d},!1);if(ge(h)){var m=g.name;g.name=h.replace("{value}",m??"")}else Ae(h)&&(g.name=h(g.name,g));var y=new Nt(g,null,this.ecModel);return gr(y,Yg.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=f},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Ue({lineStyle:{color:"#bbb"}},vp.axisLine),axisLabel:e0(vp.axisLabel,!1),axisTick:e0(vp.axisTick,!1),splitLine:e0(vp.splitLine,!0),splitArea:e0(vp.splitArea,!0),indicator:[]},t}(nt);const ACe=TCe;var CCe=["axisLine","axisTickLabel","axisName"],DCe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=this.group;a.removeAll(),this._buildAxes(r),this._buildSplitLineAndArea(r)},t.prototype._buildAxes=function(r){var i=r.coordinateSystem,n=i.getIndicatorAxes(),a=ce(n,function(o){var s=o.model.get("showName")?o.name:"",l=new Ss(o.model,{axisName:s,position:[i.cx,i.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});I(a,function(o){I(CCe,o.add,o),this.group.add(o.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(r){var i=r.coordinateSystem,n=i.getIndicatorAxes();if(!n.length)return;var a=r.get("shape"),o=r.getModel("splitLine"),s=r.getModel("splitArea"),l=o.getModel("lineStyle"),u=s.getModel("areaStyle"),h=o.get("show"),c=s.get("show"),d=l.get("color"),f=u.get("color"),p=ue(d)?d:[d],v=ue(f)?f:[f],g=[],m=[];function y(O,z,B){var N=B%z.length;return O[N]=O[N]||[],N}if(a==="circle")for(var _=n[0].getTicksCoords(),x=i.cx,w=i.cy,b=0;b<_.length;b++){if(h){var S=y(g,p,b);g[S].push(new To({shape:{cx:x,cy:w,r:_[b].coord}}))}if(c&&b<_.length-1){var S=y(m,v,b);m[S].push(new Xx({shape:{cx:x,cy:w,r0:_[b].coord,r:_[b+1].coord}}))}}else for(var M,A=ce(n,function(O,z){var B=O.getTicksCoords();return M=M==null?B.length-1:Math.min(B.length-1,M),ce(B,function(N){return i.coordToPoint(N.coord,z)})}),T=[],b=0;b<=M;b++){for(var C=[],D=0;D<n.length;D++)C.push(A[D][b]);if(C[0]&&C.push(C[0].slice()),h){var S=y(g,p,b);g[S].push(new Yi({shape:{points:C}}))}if(c&&T){var S=y(m,v,b-1);m[S].push(new qi({shape:{points:C.concat(T)}}))}T=C.slice().reverse()}var P=l.getLineStyle(),E=u.getAreaStyle();I(m,function(O,z){this.group.add(In(O,{style:De({stroke:"none",fill:v[z%v.length]},E),silent:!0}))},this),I(g,function(O,z){this.group.add(In(O,{style:De({fill:"none",stroke:p[z%p.length]},P),silent:!0}))},this)},t.type="radar",t}(Kt);const PCe=DCe;var LCe=function(e){Y(t,e);function t(r,i,n){var a=e.call(this,r,i,n)||this;return a.type="value",a.angle=0,a.name="",a}return t}(Ea);const ECe=LCe;var ICe=function(){function e(t,r,i){this.dimensions=[],this._model=t,this._indicatorAxes=ce(t.getIndicatorModels(),function(n,a){var o="indicator_"+a,s=new ECe(o,new Ul);return s.name=n.get("name"),s.model=n,n.axis=s,this.dimensions.push(o),s},this),this.resize(t,i)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(t,r){var i=this._indicatorAxes[r];return this.coordToPoint(i.dataToCoord(t),r)},e.prototype.coordToPoint=function(t,r){var i=this._indicatorAxes[r],n=i.angle,a=this.cx+t*Math.cos(n),o=this.cy-t*Math.sin(n);return[a,o]},e.prototype.pointToData=function(t){var r=t[0]-this.cx,i=t[1]-this.cy,n=Math.sqrt(r*r+i*i);r/=n,i/=n;for(var a=Math.atan2(-i,r),o=1/0,s,l=-1,u=0;u<this._indicatorAxes.length;u++){var h=this._indicatorAxes[u],c=Math.abs(a-h.angle);c<o&&(s=h,l=u,o=c)}return[l,+(s&&s.coordToData(n))]},e.prototype.resize=function(t,r){var i=t.get("center"),n=r.getWidth(),a=r.getHeight(),o=Math.min(n,a)/2;this.cx=ve(i[0],n),this.cy=ve(i[1],a),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");(ge(s)||st(s))&&(s=[0,s]),this.r0=ve(s[0],o),this.r=ve(s[1],o),I(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var h=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;h=Math.atan2(Math.sin(h),Math.cos(h)),l.angle=h},this)},e.prototype.update=function(t,r){var i=this._indicatorAxes,n=this._model;I(i,function(s){s.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||t.getComponent("radar",s.get("radarIndex"))!==n)){var u=s.getData();I(i,function(h){h.scale.unionExtentFromData(u,u.mapDimension(h.dim))})}},this);var a=n.get("splitNumber"),o=new Ul;o.setExtent(0,a),o.setInterval(1),I(i,function(s,l){c$(s.scale,s.model,o)})},e.prototype.convertToPixel=function(t,r,i){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(t,r,i){return console.warn("Not implemented."),null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.create=function(t,r){var i=[];return t.eachComponent("radar",function(n){var a=new e(n,t,r);i.push(a),n.coordinateSystem=a}),t.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=i[n.get("radarIndex")||0])}),i},e.dimensions=[],e}();const OCe=ICe;function RCe(e){e.registerCoordinateSystem("radar",OCe),e.registerComponentModel(ACe),e.registerComponentView(PCe),e.registerVisual({seriesType:"radar",reset:function(t){var r=t.getData();r.each(function(i){r.setItemVisual(i,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}function zCe(e){$e(RCe),e.registerChartView(wCe),e.registerSeriesModel(MCe),e.registerLayout(_Ce),e.registerProcessor(Qg("radar")),e.registerPreprocessor(xCe)}var t5="\0_ec_interaction_mutex";function NCe(e,t,r){var i=qL(e);i[t]=r}function kCe(e,t,r){var i=qL(e),n=i[t];n===r&&(i[t]=null)}function r5(e,t){return!!qL(e)[t]}function qL(e){return e[t5]||(e[t5]={})}Po({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},sr);var BCe=function(e){Y(t,e);function t(r){var i=e.call(this)||this;i._zr=r;var n=me(i._mousedownHandler,i),a=me(i._mousemoveHandler,i),o=me(i._mouseupHandler,i),s=me(i._mousewheelHandler,i),l=me(i._pinchHandler,i);return i.enable=function(u,h){this.disable(),this._opt=De(Ee(h)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",n),r.on("mousemove",a),r.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},i.disable=function(){r.off("mousedown",n),r.off("mousemove",a),r.off("mouseup",o),r.off("mousewheel",s),r.off("pinch",l)},i}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!Dz(r)){for(var i=r.target;i;){if(i.draggable)return;i=i.__hostTarget||i.parent}var n=r.offsetX,a=r.offsetY;this.pointerChecker&&this.pointerChecker(r,n,a)&&(this._x=n,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!e1("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||r5(this._zr,"globalPan"))){var i=r.offsetX,n=r.offsetY,a=this._x,o=this._y,s=i-a,l=n-o;this._x=i,this._y=n,this._opt.preventDefaultMouseMove&&ys(r.event),y$(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:a,oldY:o,newX:i,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){Dz(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var i=e1("zoomOnMouseWheel",r,this._opt),n=e1("moveOnMouseWheel",r,this._opt),a=r.wheelDelta,o=Math.abs(a),s=r.offsetX,l=r.offsetY;if(!(a===0||!i&&!n)){if(i){var u=o>3?1.4:o>1?1.2:1.1,h=a>0?u:1/u;S2(this,"zoom","zoomOnMouseWheel",r,{scale:h,originX:s,originY:l,isAvailableBehavior:null})}if(n){var c=Math.abs(a),d=(a>0?1:-1)*(c>3?.4:c>1?.15:.05);S2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:d,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!r5(this._zr,"globalPan")){var i=r.pinchScale>1?1.1:1/1.1;S2(this,"zoom",null,r,{scale:i,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(jn);function S2(e,t,r,i,n){e.pointerChecker&&e.pointerChecker(i,n.originX,n.originY)&&(ys(i.event),y$(e,t,r,i,n))}function y$(e,t,r,i,n){n.isAvailableBehavior=me(e1,null,r,i),e.trigger(t,n)}function e1(e,t,r){var i=r[e];return!e||i&&(!ge(i)||t.event[i+"Key"])}const tm=BCe;function XL(e,t,r){var i=e.target;i.x+=t,i.y+=r,i.dirty()}function YL(e,t,r,i){var n=e.target,a=e.zoomLimit,o=e.zoom=e.zoom||1;if(o*=t,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/e.zoom;e.zoom=o,n.x-=(r-n.x)*(u-1),n.y-=(i-n.y)*(u-1),n.scaleX*=u,n.scaleY*=u,n.dirty()}var FCe={axisPointer:1,tooltip:1,brush:1};function vb(e,t,r){var i=t.getComponentByElement(e.topTarget),n=i&&i.coordinateSystem;return i&&i!==r&&!FCe.hasOwnProperty(i.mainType)&&n&&n.model!==r}function _$(e){if(ge(e)){var t=new DOMParser;e=t.parseFromString(e,"text/xml")}var r=e;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var M2,R_={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},i5=Ze(R_),z_={"alignment-baseline":"textBaseline","stop-color":"stopColor"},n5=Ze(z_),VCe=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(t,r){r=r||{};var i=_$(t);this._defsUsePending=[];var n=new Ie;this._root=n;var a=[],o=i.getAttribute("viewBox")||"",s=parseFloat(i.getAttribute("width")||r.width),l=parseFloat(i.getAttribute("height")||r.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),en(i,n,null,!0,!1);for(var u=i.firstChild;u;)this._parseNode(u,n,a,null,!1,!1),u=u.nextSibling;HCe(this._defs,this._defsUsePending),this._defsUsePending=[];var h,c;if(o){var d=gb(o);d.length>=4&&(h={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(h&&s!=null&&l!=null&&(c=b$(h,{x:0,y:0,width:s,height:l}),!r.ignoreViewBox)){var f=n;n=new Ie,n.add(f),f.scaleX=f.scaleY=c.scale,f.x=c.x,f.y=c.y}return!r.ignoreRootClip&&s!=null&&l!=null&&n.setClipPath(new rt({shape:{x:0,y:0,width:s,height:l}})),{root:n,width:s,height:l,viewBoxRect:h,viewBoxTransform:c,named:a}},e.prototype._parseNode=function(t,r,i,n,a,o){var s=t.nodeName.toLowerCase(),l,u=n;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=r;else{if(!a){var h=M2[s];if(h&&_e(M2,s)){l=h.call(this,t,r);var c=t.getAttribute("name");if(c){var d={name:c,namedFrom:null,svgNodeTagLower:s,el:l};i.push(d),s==="g"&&(u=d)}else n&&i.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:l});r.add(l)}}var f=a5[s];if(f&&_e(a5,s)){var p=f.call(this,t),v=t.getAttribute("id");v&&(this._defs[v]=p)}}if(l&&l.isGroup)for(var g=t.firstChild;g;)g.nodeType===1?this._parseNode(g,l,i,u,a,o):g.nodeType===3&&o&&this._parseText(g,l),g=g.nextSibling},e.prototype._parseText=function(t,r){var i=new eg({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});yn(r,i),en(t,i,this._defsUsePending,!1,!1),UCe(i,r);var n=i.style,a=n.fontSize;a&&a<9&&(n.fontSize=9,i.scaleX*=a/9,i.scaleY*=a/9);var o=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=o;var s=i.getBoundingRect();return this._textX+=s.width,r.add(i),i},e.internalField=function(){M2={g:function(t,r){var i=new Ie;return yn(r,i),en(t,i,this._defsUsePending,!1,!1),i},rect:function(t,r){var i=new rt;return yn(r,i),en(t,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(t,r){var i=new To;return yn(r,i),en(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),i.silent=!0,i},line:function(t,r){var i=new Nr;return yn(r,i),en(t,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(t,r){var i=new nL;return yn(r,i),en(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(t,r){var i=t.getAttribute("points"),n;i&&(n=l5(i));var a=new qi({shape:{points:n||[]},silent:!0});return yn(r,a),en(t,a,this._defsUsePending,!1,!1),a},polyline:function(t,r){var i=t.getAttribute("points"),n;i&&(n=l5(i));var a=new Yi({shape:{points:n||[]},silent:!0});return yn(r,a),en(t,a,this._defsUsePending,!1,!1),a},image:function(t,r){var i=new $r;return yn(r,i),en(t,i,this._defsUsePending,!1,!1),i.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),i.silent=!0,i},text:function(t,r){var i=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(a),this._textY=parseFloat(n)+parseFloat(o);var s=new Ie;return yn(r,s),en(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,r){var i=t.getAttribute("x"),n=t.getAttribute("y");i!=null&&(this._textX=parseFloat(i)),n!=null&&(this._textY=parseFloat(n));var a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",s=new Ie;return yn(r,s),en(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(t,r){var i=t.getAttribute("d")||"",n=XW(i);return yn(r,n),en(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),e}(),a5={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),r=parseInt(e.getAttribute("y1")||"0",10),i=parseInt(e.getAttribute("x2")||"10",10),n=parseInt(e.getAttribute("y2")||"0",10),a=new Rh(t,r,i,n);return o5(e,a),s5(e,a),a},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),r=parseInt(e.getAttribute("cy")||"0",10),i=parseInt(e.getAttribute("r")||"0",10),n=new s8(t,r,i);return o5(e,n),s5(e,n),n}};function o5(e,t){var r=e.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(t.global=!0)}function s5(e,t){for(var r=e.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var i=r.getAttribute("offset"),n=void 0;i&&i.indexOf("%")>0?n=parseInt(i,10)/100:i?n=parseFloat(i):n=0;var a={};x$(r,a,a);var o=a.stopColor||r.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:n,color:o})}r=r.nextSibling}}function yn(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),De(t.__inheritedStyle,e.__inheritedStyle))}function l5(e){for(var t=gb(e),r=[],i=0;i<t.length;i+=2){var n=parseFloat(t[i]),a=parseFloat(t[i+1]);r.push([n,a])}return r}function en(e,t,r,i,n){var a=t,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};e.nodeType===1&&($Ce(e,t),x$(e,o,s),i||qCe(e,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=u5(a,"fill",o.fill,r)),o.stroke!=null&&(a.style.stroke=u5(a,"stroke",o.stroke,r)),I(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),I(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),n&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=ce(gb(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function UCe(e,t){var r=t.__selfStyle;if(r){var i=r.textBaseline,n=i;!i||i==="auto"||i==="baseline"?n="alphabetic":i==="before-edge"||i==="text-before-edge"?n="top":i==="after-edge"||i==="text-after-edge"?n="bottom":(i==="central"||i==="mathematical")&&(n="middle"),e.style.textBaseline=n}var a=t.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),e.style.textAlign=s)}}var GCe=/^url\(\s*#(.*?)\)/;function u5(e,t,r,i){var n=r&&r.match(GCe);if(n){var a=va(n[1]);i.push([e,t,a]);return}return r==="none"&&(r=null),r}function HCe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i[0].style[i[1]]=e[i[2]]}}var jCe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function gb(e){return e.match(jCe)||[]}var WCe=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,T2=Math.PI/180;function $Ce(e,t){var r=e.getAttribute("transform");if(r){r=r.replace(/,/g," ");var i=[],n=null;r.replace(WCe,function(c,d,f){return i.push(d,f),""});for(var a=i.length-1;a>0;a-=2){var o=i[a],s=i[a-1],l=gb(o);switch(n=n||Gn(),s){case"translate":bo(n,n,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":GP(n,n,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Wh(n,n,-parseFloat(l[0])*T2);break;case"skewX":var u=Math.tan(parseFloat(l[0])*T2);us(n,[1,0,u,1,0,0],n);break;case"skewY":var h=Math.tan(parseFloat(l[0])*T2);us(n,[1,h,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(l[0]),n[1]=parseFloat(l[1]),n[2]=parseFloat(l[2]),n[3]=parseFloat(l[3]),n[4]=parseFloat(l[4]),n[5]=parseFloat(l[5]);break}}t.setLocalTransform(n)}}var h5=/([^\s:;]+)\s*:\s*([^:;]+)/g;function x$(e,t,r){var i=e.getAttribute("style");if(i){h5.lastIndex=0;for(var n;(n=h5.exec(i))!=null;){var a=n[1],o=_e(R_,a)?R_[a]:null;o&&(t[o]=n[2]);var s=_e(z_,a)?z_[a]:null;s&&(r[s]=n[2])}}}function qCe(e,t,r){for(var i=0;i<i5.length;i++){var n=i5[i],a=e.getAttribute(n);a!=null&&(t[R_[n]]=a)}for(var i=0;i<n5.length;i++){var n=n5[i],a=e.getAttribute(n);a!=null&&(r[z_[n]]=a)}}function b$(e,t){var r=t.width/e.width,i=t.height/e.height,n=Math.min(r,i);return{scale:n,x:-(e.x+e.width/2)*n+(t.x+t.width/2),y:-(e.y+e.height/2)*n+(t.y+t.height/2)}}function XCe(e,t){var r=new VCe;return r.parse(e,t)}var YCe=Me(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),ZCe=function(){function e(t,r){this.type="geoSVG",this._usedGraphicMap=Me(),this._freedGraphics=[],this._mapName=t,this._parsedXML=_$(r)}return e.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=JCe(t.named),i=r.regions,n=r.regionsMap;this._regions=i,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(t){var r,i;try{r=t&&XCe(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},i=r.root,wi(i!=null)}catch(g){throw new Error(`Invalid svg format
`+g.message)}var n=new Ie;n.add(i),n.isGeoSVGGraphicRoot=!0;var a=r.width,o=r.height,s=r.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,h=void 0,c=void 0,d=void 0;if(a!=null?(u=0,c=a):s&&(u=s.x,c=s.width),o!=null?(h=0,d=o):s&&(h=s.y,d=s.height),u==null||h==null){var f=i.getBoundingRect();u==null&&(u=f.x,c=f.width),h==null&&(h=f.y,d=f.height)}l=this._boundingRect=new Ge(u,h,c,d)}if(s){var p=b$(s,l);i.scaleX=i.scaleY=p.scale,i.x=p.x,i.y=p.y}n.setClipPath(new rt({shape:l.plain()}));var v=[];return I(r.named,function(g){YCe.get(g.svgNodeTagLower)!=null&&(v.push(g),KCe(g.el))}),{root:n,boundingRect:l,named:v}},e.prototype.useGraphic=function(t){var r=this._usedGraphicMap,i=r.get(t);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(t,i),i)},e.prototype.freeGraphic=function(t){var r=this._usedGraphicMap,i=r.get(t);i&&(r.removeKey(t),this._freedGraphics.push(i))},e}();function KCe(e){e.silent=!1,e.isGroup&&e.traverse(function(t){t.silent=!1})}function JCe(e){var t=[],r=Me();return I(e,function(i){if(i.namedFrom==null){var n=new mMe(i.name,i.el);t.push(n),r.set(i.name,n)}}),{regions:t,regionsMap:r}}var sC=[126,25],c5="南海诸岛",Nu=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Pu=0;Pu<Nu.length;Pu++)for(var Pc=0;Pc<Nu[Pu].length;Pc++)Nu[Pu][Pc][0]/=10.5,Nu[Pu][Pc][1]/=-10.5/.75,Nu[Pu][Pc][0]+=sC[0],Nu[Pu][Pc][1]+=sC[1];function QCe(e,t){if(e==="china"){for(var r=0;r<t.length;r++)if(t[r].name===c5)return;t.push(new _7(c5,ce(Nu,function(i){return{type:"polygon",exterior:i}}),sC))}}var eDe={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function tDe(e,t){if(e==="china"){var r=eDe[t.name];if(r){var i=t.getCenter();i[0]+=r[0]/10.5,i[1]+=-r[1]/(10.5/.75),t.setCenter(i)}}}var rDe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function iDe(e,t){e==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:rDe[0]})}var nDe="name",aDe=function(){function e(t,r,i){this.type="geoJSON",this._parsedMap=Me(),this._mapName=t,this._specialAreas=i,this._geoJSON=sDe(r)}return e.prototype.load=function(t,r){r=r||nDe;var i=this._parsedMap.get(r);if(!i){var n=this._parseToRegions(r);i=this._parsedMap.set(r,{regions:n,boundingRect:oDe(n)})}var a=Me(),o=[];return I(i.regions,function(s){var l=s.name;t&&_e(t,l)&&(s=s.cloneShallow(l=t[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:i.boundingRect||new Ge(0,0,0,0),regionsMap:a}},e.prototype._parseToRegions=function(t){var r=this._mapName,i=this._geoJSON,n;try{n=i?_Me(i,t):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return QCe(r,n),I(n,function(a){var o=a.name;tDe(r,a),iDe(r,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),n},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function oDe(e){for(var t,r=0;r<e.length;r++){var i=e[r].getBoundingRect();t=t||i.clone(),t.union(i)}return t}function sDe(e){return ge(e)?typeof JSON<"u"&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e}var gp=Me();const Ms={registerMap:function(e,t,r){if(t.svg){var i=new ZCe(e,t.svg);gp.set(e,i)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?r=t.specialAreas:n=t;var i=new aDe(e,n,r);gp.set(e,i)}},getGeoResource:function(e){return gp.get(e)},getMapForUser:function(e){var t=gp.get(e);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(e,t,r){var i=gp.get(e);if(i)return i.load(t,r)}};var ZL=["rect","circle","line","ellipse","polygon","polyline","path"],lDe=Me(ZL),uDe=Me(ZL.concat(["g"])),hDe=Me(ZL.concat(["g"])),w$=it();function t0(e){var t=e.getItemStyle(),r=e.get("areaColor");return r!=null&&(t.fill=r),t}function d5(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var cDe=function(){function e(t){var r=new Ie;this.uid=pf("ec_map_draw"),this._controller=new tm(t.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new Ie),r.add(this._svgGroup=new Ie)}return e.prototype.draw=function(t,r,i,n,a){var o=t.mainType==="geo",s=t.getData&&t.getData();o&&r.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===t&&(s=m.getData())});var l=t.coordinateSystem,u=this._regionsGroup,h=this.group,c=l.getTransformInfo(),d=c.raw,f=c.roam,p=!u.childAt(0)||a;p?(h.x=f.x,h.y=f.y,h.scaleX=f.scaleX,h.scaleY=f.scaleY,h.dirty()):ut(h,f,t);var v=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,g={api:i,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:v,isGeo:o,transformInfoRaw:d};l.resourceType==="geoJSON"?this._buildGeoJSON(g):l.resourceType==="geoSVG"&&this._buildSVG(g),this._updateController(t,r,i),this._updateMapSelectHandler(t,u,i,n)},e.prototype._buildGeoJSON=function(t){var r=this._regionsGroupByName=Me(),i=Me(),n=this._regionsGroup,a=t.transformInfoRaw,o=t.mapOrGeoModel,s=t.data,l=t.geo.projection,u=l&&l.stream;function h(f,p){return p&&(f=p(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function c(f){for(var p=[],v=!u&&l&&l.project,g=0;g<f.length;++g){var m=h(f[g],v);m&&p.push(m)}return p}function d(f){return{shape:{points:c(f)}}}n.removeAll(),I(t.geo.regions,function(f){var p=f.name,v=r.get(p),g=i.get(p)||{},m=g.dataIdx,y=g.regionModel;v||(v=r.set(p,new Ie),n.add(v),m=s?s.indexOfName(p):null,y=t.isGeo?o.getRegionModel(p):s?s.getItemModel(m):null,i.set(p,{dataIdx:m,regionModel:y}));var _=[],x=[];I(f.geometries,function(S){if(S.type==="polygon"){var M=[S.exterior].concat(S.interiors||[]);u&&(M=y5(M,u)),I(M,function(T){_.push(new qi(d(T)))})}else{var A=S.points;u&&(A=y5(A,u,!0)),I(A,function(T){x.push(new Yi(d(T)))})}});var w=h(f.getCenter(),l&&l.project);function b(S,M){if(S.length){var A=new oL({culling:!0,segmentIgnoreThreshold:1,shape:{paths:S}});v.add(A),f5(t,A,m,y),p5(t,A,p,y,o,m,w),M&&(d5(A),I(A.states,d5))}}b(_),b(x,!0)}),r.each(function(f,p){var v=i.get(p),g=v.dataIdx,m=v.regionModel;v5(t,f,p,m,o,g),g5(t,f,p,m,o),m5(t,f,p,m,o)},this)},e.prototype._buildSVG=function(t){var r=t.geo.map,i=t.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var n=this._svgDispatcherMap=Me(),a=!1;I(this._svgGraphicRecord.named,function(o){var s=o.name,l=t.mapOrGeoModel,u=t.data,h=o.svgNodeTagLower,c=o.el,d=u?u.indexOfName(s):null,f=l.getRegionModel(s);if(lDe.get(h)!=null&&c instanceof Hn&&f5(t,c,d,f),c instanceof Hn&&(c.culling=!0),c.z2EmphasisLift=0,!o.namedFrom&&(hDe.get(h)!=null&&p5(t,c,s,f,l,d,null),v5(t,c,s,f,l,d),g5(t,c,s,f,l),uDe.get(h)!=null)){var p=m5(t,c,s,f,l);p==="self"&&(a=!0);var v=n.get(s)||n.set(s,[]);v.push(c)}},this),this._enableBlurEntireSVG(a,t)},e.prototype._enableBlurEntireSVG=function(t,r){if(t&&r.isGeo){var i=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=i.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Oh(a);var o=a.ensureState("blur").style||{};o.opacity==null&&n!=null&&(o.opacity=n),a.ensureState("emphasis")}})}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(t,r){if(t==null)return[];var i=r.coordinateSystem;if(i.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var a=n.get(t);return a?[a]:[]}}else if(i.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},e.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},e.prototype._useSVG=function(t){var r=Ms.getGeoResource(t);if(r&&r.type==="geoSVG"){var i=r.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=t}},e.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var r=Ms.getGeoResource(t);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(t,r,i){var n=t.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=n.getZoom(),a.enable(t.get("roam")||!1);var s=t.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=t.id,u}a.off("pan").on("pan",function(u){this._mouseDownFlag=!1,XL(o,u.dx,u.dy),i.dispatchAction(ae(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,YL(o,u.scale,u.originX,u.originY),i.dispatchAction(ae(l(),{zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(u,h,c){return n.containPoint([h,c])&&!vb(u,i,t)})},e.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var r=t.getTextContent();r&&(r.ignore=w$(r).ignore)})},e.prototype._updateMapSelectHandler=function(t,r,i,n){var a=this;r.off("mousedown"),r.off("click"),t.get("selectedMode")&&(r.on("mousedown",function(){a._mouseDownFlag=!0}),r.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},e}();function f5(e,t,r,i){var n=i.getModel("itemStyle"),a=i.getModel(["emphasis","itemStyle"]),o=i.getModel(["blur","itemStyle"]),s=i.getModel(["select","itemStyle"]),l=t0(n),u=t0(a),h=t0(s),c=t0(o),d=e.data;if(d){var f=d.getItemVisual(r,"style"),p=d.getItemVisual(r,"decal");e.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),p&&(l.decal=kd(p,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=h,t.ensureState("blur").style=c,Oh(t)}function p5(e,t,r,i,n,a,o){var s=e.data,l=e.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),h=s&&s.getItemLayout(a);if(l||u||h&&h.showLabel){var c=l?r:a,d=void 0;(!s||a>=0)&&(d=n);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Wr(t,Pr(i),{labelFetcher:d,labelDataIndex:c,defaultText:r},f);var p=t.getTextContent();if(p&&(w$(p).ignore=p.ignore,t.textConfig&&o)){var v=t.getBoundingRect().clone();t.textConfig.layoutRect=v,t.textConfig.position=[(o[0]-v.x)/v.width*100+"%",(o[1]-v.y)/v.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function v5(e,t,r,i,n,a){e.data?e.data.setItemGraphicEl(a,t):Re(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:r,region:i&&i.option||{}}}function g5(e,t,r,i,n){e.data||df({el:t,componentModel:n,itemName:r,itemTooltipOption:i.get("tooltip")})}function m5(e,t,r,i,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var a=i.getModel("emphasis"),o=a.get("focus");return Zt(t,o,a.get("blurScope"),a.get("disabled")),e.isGeo&&vxe(t,n,r),o}function y5(e,t,r){var i=[],n;function a(){n=[]}function o(){n.length&&(i.push(n),n=[])}var s=t({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&n.push([l,u])},sphere:function(){}});return!r&&s.polygonStart(),I(e,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!r&&s.polygonEnd(),i}const S$=cDe;var dDe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===r.id){var s=this._mapDraw;s&&o.add(s.group)}else if(r.needsDrawMap){var s=this._mapDraw||new S$(n);o.add(s.group),s.draw(r,i,n,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(r,i,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(r,i,n){var a=r.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=a.getItemLayout(l);if(!(!u||!u.point)){var h=u.point,c=u.offset,d=new To({style:{fill:r.getData().getVisual("style").fill},shape:{cx:h[0]+c*9,cy:h[1],r:3},silent:!0,z2:8+(c?0:hf+1)});if(!c){var f=r.mainSeries.getData(),p=a.getName(l),v=f.indexOfName(p),g=a.getItemModel(l),m=g.getModel("label"),y=f.getItemGraphicEl(v);Wr(d,Pr(g),{labelFetcher:{getFormattedLabel:function(_,x){return r.getFormattedLabel(v,x)}},defaultText:p}),d.disableLabelAnimation=!0,m.get("position")||d.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(_){f_(d,_)}}o.add(d)}}})},t.type="map",t}(kt);const fDe=dDe;var pDe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(i){if(i!=null){var n=this.getData().getName(i),a=this.coordinateSystem,o=a.getRegion(n);return o&&a.dataToPoint(o.getCenter())}},r}return t.prototype.getInitialData=function(r){for(var i=wf(this,{coordDimensions:["value"],encodeDefaulter:Ne(vL,this)}),n=Me(),a=[],o=0,s=i.count();o<s;o++){var l=i.getName(o);n.set(l,!0)}var u=Ms.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return I(u.regions,function(h){var c=h.name;n.get(c)||a.push(c)}),i.appendValues([],a),i},t.prototype.getHostGeoModel=function(){var r=this.option.geoIndex;return r!=null?this.ecModel.getComponent("geo",r):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(r){var i=this.getData();return i.get(i.mapDimension("value"),r)},t.prototype.getRegionModel=function(r){var i=this.getData();return i.getItemModel(i.indexOfName(r))},t.prototype.formatTooltip=function(r,i,n){for(var a=this.getData(),o=this.getRawValue(r),s=a.getName(r),l=this.seriesGroup,u=[],h=0;h<l.length;h++){var c=l[h].originalData.indexOfName(s),d=a.mapDimension("value");isNaN(l[h].originalData.get(d,c))||u.push(l[h].name)}return Lr("section",{header:u.join(", "),noHeader:!u.length,blocks:[Lr("nameValue",{name:s,value:o})]})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.getLegendIcon=function(r){var i=r.icon||"roundRect",n=vr(i,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return n.setStyle(r.itemStyle),n.style.stroke="none",i.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}($t);const vDe=pDe;function gDe(e,t){var r={};return I(e,function(i){i.each(i.mapDimension("value"),function(n,a){var o="ec-"+i.getName(a);r[o]=r[o]||[],isNaN(n)||r[o].push(n)})}),e[0].map(e[0].mapDimension("value"),function(i,n){for(var a="ec-"+e[0].getName(n),o=0,s=1/0,l=-1/0,u=r[a].length,h=0;h<u;h++)s=Math.min(s,r[a][h]),l=Math.max(l,r[a][h]),o+=r[a][h];var c;return t==="min"?c=s:t==="max"?c=l:t==="average"?c=o/u:c=o,u===0?NaN:c})}function mDe(e){var t={};e.eachSeriesByType("map",function(r){var i=r.getHostGeoModel(),n=i?"o"+i.id:"i"+r.getMapType();(t[n]=t[n]||[]).push(r)}),I(t,function(r,i){for(var n=gDe(ce(r,function(o){return o.getData()}),r[0].get("mapValueCalculation")),a=0;a<r.length;a++)r[a].originalData=r[a].getData();for(var a=0;a<r.length;a++)r[a].seriesGroup=r,r[a].needsDrawMap=a===0&&!r[a].getHostGeoModel(),r[a].setData(n.cloneShallow()),r[a].mainSeries=r[0]})}function yDe(e){var t={};e.eachSeriesByType("map",function(r){var i=r.getMapType();if(!(r.getHostGeoModel()||t[i])){var n={};I(r.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&e.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,h){var c=l.getName(h),d=s.getRegion(c);if(!(!d||isNaN(u))){var f=n[c]||0,p=s.dataToPoint(d.getCenter());n[c]=f+1,l.setItemLayout(h,{point:p,offset:f})}})});var a=r.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!n[s],a.setItemLayout(o,l)}),t[i]=!0}})}var _5=Gr,_De=function(e){Y(t,e);function t(r){var i=e.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new es,i._rawTransformable=new es,i.name=r,i}return t.prototype.setBoundingRect=function(r,i,n,a){return this._rect=new Ge(r,i,n,a),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,i,n,a){this._transformTo(r,i,n,a),this._viewRect=new Ge(r,i,n,a)},t.prototype._transformTo=function(r,i,n,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new Ge(r,i,n,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,i){r&&(this._center=[ve(r[0],i.getWidth()),ve(r[1],i.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var i=this.zoomLimit;i&&(i.max!=null&&(r=Math.min(i.max,r)),i.min!=null&&(r=Math.max(i.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),i=r.x+r.width/2,n=r.y+r.height/2;return[i,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,n=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=Gr([],a,r),n=Gr([],n,r),i.originX=a[0],i.originY=a[1],i.x=n[0]-a[0],i.y=n[1]-a[1],i.scaleX=i.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,i=this._rawTransformable;i.parent=r,r.updateTransform(),i.updateTransform(),UP(this.transform||(this.transform=[]),i.transform||Gn()),this._rawTransform=i.getLocalTransform(),this.invTransform=this.invTransform||[],lf(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,i=this._roamTransformable,n=new es;return n.transform=i.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,i,n){var a=i?this._rawTransform:this.transform;return n=n||[],a?_5(n,r,a):pi(n,r)},t.prototype.pointToData=function(r){var i=this.invTransform;return i?_5([],r,i):[r[0],r[1]]},t.prototype.convertToPixel=function(r,i,n){var a=x5(i);return a===this?a.dataToPoint(n):null},t.prototype.convertFromPixel=function(r,i,n){var a=x5(i);return a===this?a.pointToData(n):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(es);function x5(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const rm=_De;var xDe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},M$=["lng","lat"],T$=function(e){Y(t,e);function t(r,i,n){var a=e.call(this,r)||this;a.dimensions=M$,a.type="geo",a._nameCoordMap=Me(),a.map=i;var o=n.projection,s=Ms.load(i,n.nameMap,n.nameProperty),l=Ms.getGeoResource(i);a.resourceType=l?l.type:null;var u=a.regions=s.regions,h=xDe[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var c;if(o)for(var d=0;d<u.length;d++){var f=u[d].getBoundingRect(o);c=c||f.clone(),c.union(f)}else c=s.boundingRect;return a.setBoundingRect(c.x,c.y,c.width,c.height),a.aspectScale=o?1:Ve(n.aspectScale,h.aspectScale),a._invertLongitute=o?!1:h.invertLongitute,a}return t.prototype._transformTo=function(r,i,n,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new Ge(r,i,n,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(r){return this._regionsMap.get(r)},t.prototype.getRegionByCoord=function(r){for(var i=this.regions,n=0;n<i.length;n++){var a=i[n];if(a.type==="geoJSON"&&a.contain(r))return i[n]}},t.prototype.addGeoCoord=function(r,i){this._nameCoordMap.set(r,i)},t.prototype.getGeoCoord=function(r){var i=this._regionsMap.get(r);return this._nameCoordMap.get(r)||i&&i.getCenter()},t.prototype.dataToPoint=function(r,i,n){if(ge(r)&&(r=this.getGeoCoord(r)),r){var a=this.projection;return a&&(r=a.project(r)),r&&this.projectedToPoint(r,i,n)}},t.prototype.pointToData=function(r){var i=this.projection;return i&&(r=i.unproject(r)),r&&this.pointToProjected(r)},t.prototype.pointToProjected=function(r){return e.prototype.pointToData.call(this,r)},t.prototype.projectedToPoint=function(r,i,n){return e.prototype.dataToPoint.call(this,r,i,n)},t.prototype.convertToPixel=function(r,i,n){var a=b5(i);return a===this?a.dataToPoint(n):null},t.prototype.convertFromPixel=function(r,i,n){var a=b5(i);return a===this?a.pointToData(n):null},t}(rm);gr(T$,rm);function b5(e){var t=e.geoModel,r=e.seriesModel;return t?t.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",dr).models[0]||{}).coordinateSystem:null}const w5=T$;function S5(e,t){var r=e.get("boundingCoords");if(r!=null){var i=r[0],n=r[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(n[0])&&isFinite(n[1])){var a=this.projection;if(a){var o=i[0],s=i[1],l=n[0],u=n[1];i=[1/0,1/0],n=[-1/0,-1/0];var h=function(b,S,M,A){for(var T=M-b,C=A-S,D=0;D<=100;D++){var P=D/100,E=a.project([b+T*P,S+C*P]);vl(i,i,E),gl(n,n,E)}};h(o,s,l,s),h(l,s,l,u),h(l,u,o,u),h(o,u,l,s)}this.setBoundingRect(i[0],i[1],n[0]-i[0],n[1]-i[1])}}var c=this.getBoundingRect(),d=e.get("layoutCenter"),f=e.get("layoutSize"),p=t.getWidth(),v=t.getHeight(),g=c.width/c.height*this.aspectScale,m=!1,y,_;d&&f&&(y=[ve(d[0],p),ve(d[1],v)],_=ve(f,Math.min(p,v)),!isNaN(y[0])&&!isNaN(y[1])&&!isNaN(_)&&(m=!0));var x;if(m)x={},g>1?(x.width=_,x.height=_/g):(x.height=_,x.width=_*g),x.y=y[1]-x.height/2,x.x=y[0]-x.width/2;else{var w=e.getBoxLayoutParams();w.aspect=g,x=br(w,{width:p,height:v})}this.setViewRect(x.x,x.y,x.width,x.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}function bDe(e,t){I(t.get("geoCoord"),function(r,i){e.addGeoCoord(i,r)})}var wDe=function(){function e(){this.dimensions=M$}return e.prototype.create=function(t,r){var i=[];function n(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}t.eachComponent("geo",function(o,s){var l=o.get("map"),u=new w5(l+s,l,ae({nameMap:o.get("nameMap")},n(o)));u.zoomLimit=o.get("scaleLimit"),i.push(u),o.coordinateSystem=u,u.model=o,u.resize=S5,u.resize(o,r)}),t.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=i[l]}});var a={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),I(a,function(o,s){var l=ce(o,function(h){return h.get("nameMap")}),u=new w5(s,s,ae({nameMap:kP(l)},n(o[0])));u.zoomLimit=zr.apply(null,ce(o,function(h){return h.get("scaleLimit")})),i.push(u),u.resize=S5,u.resize(o[0],r),I(o,function(h){h.coordinateSystem=u,bDe(u,h)})}),i},e.prototype.getFilledRegions=function(t,r,i,n){for(var a=(t||[]).slice(),o=Me(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=Ms.load(r,i,n);return I(l.regions,function(u){var h=u.name;!o.get(h)&&a.push({name:h})}),a},e}(),SDe=new wDe;const A$=SDe;var MDe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i,n){var a=Ms.getGeoResource(r.map);if(a&&a.type==="geoJSON"){var o=r.itemStyle=r.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(r,n),Lh(r,"label",["show"])},t.prototype.optionUpdated=function(){var r=this,i=this.option;i.regions=A$.getFilledRegions(i.regions,i.map,i.nameMap,i.nameProperty);var n={};this._optionModelMap=xo(i.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new Nt(o,r,r.ecModel)),o.selected&&(n[s]=!0)),a},Me()),i.selectedMap||(i.selectedMap=n)},t.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Nt(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(r,i){var n=this.getRegionModel(r),a=i==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:r};if(Ae(a))return o.status=i,a(o);if(ge(a))return a.replace("{a}",r??"")},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.select=function(r){var i=this.option,n=i.selectedMode;if(n){n!=="multiple"&&(i.selectedMap=null);var a=i.selectedMap||(i.selectedMap={});a[r]=!0}},t.prototype.unSelect=function(r){var i=this.option.selectedMap;i&&(i[r]=!1)},t.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},t.prototype.isSelected=function(r){var i=this.option.selectedMap;return!!(i&&i[r])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(nt);const TDe=MDe;function M5(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function KL(e,t,r,i){var n=e.getZoom(),a=e.getCenter(),o=t.zoom,s=e.projectedToPoint?e.projectedToPoint(a):e.dataToPoint(a);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(M5(e,s),i)),o!=null){if(r){var l=r.min||0,u=r.max||1/0;o=Math.max(Math.min(n*o,u),l)/n}e.scaleX*=o,e.scaleY*=o;var h=(t.originX-e.x)*(o-1),c=(t.originY-e.y)*(o-1);e.x-=h,e.y-=c,e.updateTransform(),e.setCenter(M5(e,s),i),e.setZoom(o*n)}return{center:e.getCenter(),zoom:e.getZoom()}}var ADe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.focusBlurEnabled=!0,r}return t.prototype.init=function(r,i){this._api=i},t.prototype.render=function(r,i,n,a){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new S$(n));var o=this._mapDraw;o.draw(r,i,n,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=r.get("silent"),this.group.add(o.group),this.updateSelectStatus(r,i,n)},t.prototype._handleRegionClick=function(r){var i;rh(r.target,function(n){return(i=Re(n).eventData)!=null},!0),i&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:i.name})},t.prototype.updateSelectStatus=function(r,i,n){var a=this;this._mapDraw.group.traverse(function(o){var s=Re(o).eventData;if(s)return a._model.isSelected(s.name)?n.enterSelect(o):n.leaveSelect(o),!0})},t.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(Kt);const CDe=ADe;function DDe(e,t,r){Ms.registerMap(e,t,r)}function C$(e){e.registerCoordinateSystem("geo",A$),e.registerComponentModel(TDe),e.registerComponentView(CDe),e.registerImpl("registerMap",DDe),e.registerImpl("getMap",function(r){return Ms.getMapForUser(r)});function t(r,i){i.update="geo:updateSelectStatus",e.registerAction(i,function(n,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:n},function(l){l[r](n.name);var u=l.coordinateSystem;I(u.regions,function(c){o[c.name]=l.isSelected(c.name)||!1});var h=[];I(o,function(c,d){o[d]&&h.push(d)}),s.push({geoIndex:l.componentIndex,name:h})}),{selected:o,allSelected:s,name:n.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,i,n){var a=r.componentType||"series";i.eachComponent({mainType:a,query:r},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=KL(s,r,o.get("scaleLimit"),n);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&I(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function PDe(e){$e(C$),e.registerChartView(fDe),e.registerSeriesModel(vDe),e.registerLayout(yDe),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,mDe),M9("map",e.registerAction)}function LDe(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],i,n;i=r.pop();)if(n=i.children,i.isExpand&&n.length)for(var a=n.length,o=a-1;o>=0;o--){var s=n[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},r.push(s)}}function EDe(e,t){var r=e.isExpand?e.children:[],i=e.parentNode.children,n=e.hierNode.i?i[e.hierNode.i-1]:null;if(r.length){RDe(e);var a=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;n?(e.hierNode.prelim=n.hierNode.prelim+t(e,n),e.hierNode.modifier=e.hierNode.prelim-a):e.hierNode.prelim=a}else n&&(e.hierNode.prelim=n.hierNode.prelim+t(e,n));e.parentNode.hierNode.defaultAncestor=zDe(e,n,e.parentNode.hierNode.defaultAncestor||i[0],t)}function IDe(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function T5(e){return arguments.length?e:BDe}function Up(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function ODe(e,t){return br(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function RDe(e){for(var t=e.children,r=t.length,i=0,n=0;--r>=0;){var a=t[r];a.hierNode.prelim+=i,a.hierNode.modifier+=i,n+=a.hierNode.change,i+=a.hierNode.shift+n}}function zDe(e,t,r,i){if(t){for(var n=e,a=e,o=a.parentNode.children[0],s=t,l=n.hierNode.modifier,u=a.hierNode.modifier,h=o.hierNode.modifier,c=s.hierNode.modifier;s=A2(s),a=C2(a),s&&a;){n=A2(n),o=C2(o),n.hierNode.ancestor=e;var d=s.hierNode.prelim+c-a.hierNode.prelim-u+i(s,a);d>0&&(kDe(NDe(s,e,r),e,d),u+=d,l+=d),c+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=n.hierNode.modifier,h+=o.hierNode.modifier}s&&!A2(n)&&(n.hierNode.thread=s,n.hierNode.modifier+=c-l),a&&!C2(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-h,r=e)}return r}function A2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function C2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function NDe(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function kDe(e,t,r){var i=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=i}function BDe(e,t){return e.parentNode===t.parentNode?1:2}var FDe=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),VDe=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new FDe},t.prototype.buildPath=function(r,i){var n=i.childPoints,a=n.length,o=i.parentPoint,s=n[0],l=n[a-1];if(a===1){r.moveTo(o[0],o[1]),r.lineTo(s[0],s[1]);return}var u=i.orient,h=u==="TB"||u==="BT"?0:1,c=1-h,d=ve(i.forkPosition,1),f=[];f[h]=o[h],f[c]=o[c]+(l[c]-o[c])*d,r.moveTo(o[0],o[1]),r.lineTo(f[0],f[1]),r.moveTo(s[0],s[1]),f[h]=s[h],r.lineTo(f[0],f[1]),f[h]=l[h],r.lineTo(f[0],f[1]),r.lineTo(l[0],l[1]);for(var p=1;p<a-1;p++){var v=n[p];r.moveTo(v[0],v[1]),f[h]=v[h],r.lineTo(f[0],f[1])}},t}(qe),UDe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Ie,r}return t.prototype.init=function(r,i){this._controller=new tm(i.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,i,n){var a=r.getData(),o=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(r,n),this._updateController(r,i,n);var u=this._data;a.diff(u).add(function(h){A5(a,h)&&C5(a,h,null,s,r)}).update(function(h,c){var d=u.getItemGraphicEl(c);if(!A5(a,h)){d&&P5(u,c,d,s,r);return}C5(a,h,d,s,r)}).remove(function(h){var c=u.getItemGraphicEl(h);c&&P5(u,h,c,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(h,c){h.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:c})})}),this._data=a},t.prototype._updateViewCoordSys=function(r,i){var n=r.getData(),a=[];n.each(function(c){var d=n.getItemLayout(c);d&&!isNaN(d.x)&&!isNaN(d.y)&&a.push([+d.x,+d.y])});var o=[],s=[];Wx(a,o,s);var l=this._min,u=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=u?u[1]:s[1]+1);var h=r.coordinateSystem=new rm;h.zoomLimit=r.get("scaleLimit"),h.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),h.setCenter(r.get("center"),i),h.setZoom(r.get("zoom")),this.group.attr({x:h.x,y:h.y,scaleX:h.scaleX,scaleY:h.scaleY}),this._min=o,this._max=s},t.prototype._updateController=function(r,i,n){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(u,h,c){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(h,c)&&!vb(u,n,r)}),o.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){XL(s,u.dx,u.dy),n.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){YL(s,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(r),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var i=r.getData(),n=this._getNodeGlobalScale(r);i.eachItemGraphicEl(function(a,o){a.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(r){var i=r.coordinateSystem;if(i.type!=="view")return 1;var n=this._nodeScaleRatio,a=i.scaleX||1,o=i.getZoom(),s=(o-1)*n+1;return s/a},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(kt);function A5(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function C5(e,t,r,i,n){var a=!r,o=e.tree.getNodeByDataIndex(t),s=o.getModel(),l=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?l:"#fff",h=e.tree.root,c=o.parentNode===h?o:o.parentNode||o,d=e.getItemGraphicEl(c.dataIndex),f=c.getLayout(),p=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:f,v=o.getLayout();a?(r=new Zg(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,i.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,ut(r,{x:v.x,y:v.y},n);var g=r.getSymbolPath();if(n.get("layout")==="radial"){var m=h.children[0],y=m.getLayout(),_=m.children.length,x=void 0,w=void 0;if(v.x===y.x&&o.isExpand===!0&&m.children.length){var b={x:(m.children[0].getLayout().x+m.children[_-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[_-1].getLayout().y)/2};x=Math.atan2(b.y-y.y,b.x-y.x),x<0&&(x=Math.PI*2+x),w=b.x<y.x,w&&(x=x-Math.PI)}else x=Math.atan2(v.y-y.y,v.x-y.x),x<0&&(x=Math.PI*2+x),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(w=v.x<y.x,w&&(x=x-Math.PI)):(w=v.x>y.x,w||(x=x-Math.PI));var S=w?"left":"right",M=s.getModel("label"),A=M.get("rotate"),T=A*(Math.PI/180),C=g.getTextContent();C&&(g.setTextConfig({position:M.get("position")||S,rotation:A==null?-x:T,origin:"center"}),C.setStyle("verticalAlign","middle"))}var D=s.get(["emphasis","focus"]),P=D==="relative"?i_(o.getAncestorsIndices(),o.getDescendantIndices()):D==="ancestor"?o.getAncestorsIndices():D==="descendant"?o.getDescendantIndices():null;P&&(Re(r).focus=P),GDe(n,o,h,r,p,f,v,i),r.__edge&&(r.onHoverStateChange=function(E){if(E!=="blur"){var O=o.parentNode&&e.getItemGraphicEl(o.parentNode.dataIndex);O&&O.hoverState===Vg||f_(r.__edge,E)}})}function GDe(e,t,r,i,n,a,o,s){var l=t.getModel(),u=e.get("edgeShape"),h=e.get("layout"),c=e.getOrient(),d=e.get(["lineStyle","curveness"]),f=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=i.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=i.__edge=new Yx({shape:lC(h,c,d,n,n)})),ut(v,{shape:lC(h,c,d,a,o)},e));else if(u==="polyline"&&h==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var g=t.children,m=[],y=0;y<g.length;y++){var _=g[y].getLayout();m.push([_.x,_.y])}v||(v=i.__edge=new VDe({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:c,forkPosition:f}})),ut(v,{shape:{parentPoint:[o.x,o.y],childPoints:m}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(De({strokeNoScale:!0,fill:null},p)),jr(v,l,"lineStyle"),Oh(v),s.add(v))}function D5(e,t,r,i,n){var a=t.tree.root,o=D$(a,e),s=o.source,l=o.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(u){var h=t.getItemGraphicEl(s.dataIndex),c=h.__edge,d=u.__edge||(s.isExpand===!1||s.children.length===1?c:void 0),f=i.get("edgeShape"),p=i.get("layout"),v=i.get("orient"),g=i.get(["lineStyle","curveness"]);d&&(f==="curve"?Bl(d,{shape:lC(p,v,g,l,l),style:{opacity:0}},i,{cb:function(){r.remove(d)},removeOpt:n}):f==="polyline"&&i.get("layout")==="orthogonal"&&Bl(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},i,{cb:function(){r.remove(d)},removeOpt:n}))}}function D$(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,i;i=r.getLayout(),i==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:i}}function P5(e,t,r,i,n){var a=e.tree.getNodeByDataIndex(t),o=e.tree.root,s=D$(o,a).sourceLayout,l={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};Bl(r,{x:s.x+1,y:s.y+1},n,{cb:function(){i.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(u){D5(u,e,i,n,l)}),D5(a,e,i,n,l)}function lC(e,t,r,i,n){var a,o,s,l,u,h,c,d;if(e==="radial"){u=i.rawX,c=i.rawY,h=n.rawX,d=n.rawY;var f=Up(u,c),p=Up(u,c+(d-c)*r),v=Up(h,d+(c-d)*r),g=Up(h,d);return{x1:f.x||0,y1:f.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=i.x,c=i.y,h=n.x,d=n.y,(t==="LR"||t==="RL")&&(a=u+(h-u)*r,o=c,s=h+(u-h)*r,l=d),(t==="TB"||t==="BT")&&(a=u,o=c+(d-c)*r,s=h,l=d+(c-d)*r);return{x1:u,y1:c,x2:h,y2:d,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}const HDe=UDe;var Fn=it();function P$(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,L$(t,r,e),I(r,function(i){I(t.TRANSFERABLE_METHODS,function(n){i.wrapMethod(n,Ne(jDe,e))})}),t.wrapMethod("cloneShallow",Ne($De,e)),I(t.CHANGABLE_METHODS,function(i){t.wrapMethod(i,Ne(WDe,e))}),wi(r[t.dataType]===t)}function jDe(e,t){if(YDe(this)){var r=ae({},Fn(this).datas);r[this.dataType]=t,L$(t,r,e)}else JL(t,this.dataType,Fn(this).mainData,e);return t}function WDe(e,t){return e.struct&&e.struct.update(),t}function $De(e,t){return I(Fn(t).datas,function(r,i){r!==t&&JL(r.cloneShallow(),i,t,e)}),t}function qDe(e){var t=Fn(this).mainData;return e==null||t==null?t:Fn(t).datas[e]}function XDe(){var e=Fn(this).mainData;return e==null?[{data:e}]:ce(Ze(Fn(e).datas),function(t){return{type:t,data:Fn(e).datas[t]}})}function YDe(e){return Fn(e).mainData===e}function L$(e,t,r){Fn(e).datas={},I(t,function(i,n){JL(i,n,e,r)})}function JL(e,t,r,i){Fn(r).datas[t]=e,Fn(e).mainData=r,e.dataType=t,i.struct&&(e[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=e),e.getLinkedData=qDe,e.getLinkedDataAll=XDe}var ZDe=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,i){Ae(t)&&(i=r,r=t,t=null),t=t||{},ge(t)&&(t={order:t});var n=t.order||"preorder",a=this[t.attr||"children"],o;n==="preorder"&&(o=r.call(i,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(t,r,i);n==="postorder"&&r.call(i,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var i=0;i<this.children.length;i++){var n=this.children[i];n.updateDepthAndHeight(t+1),n.height>r&&(r=n.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,i=this.children,n=i.length;r<n;r++){var a=i[r].getNodeById(t);if(a)return a}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,i=this.children,n=i.length;r<n;r++){var a=i[r].contains(t);if(a)return a}},e.prototype.getAncestors=function(t){for(var r=[],i=t?this:this.parentNode;i;)r.push(i),i=i.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,i=r.data.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),KDe=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,i){this.root.eachNode(t,r,i)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,i=0,n=r.length;i<n;i++)r[i].dataIndex=-1;for(var i=0,n=t.count();i<n;i++)r[t.getRawIndex(i)].dataIndex=i},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,i){var n=new e(r),a=[],o=1;s(t);function s(h,c){var d=h.value;o=Math.max(o,ue(d)?d.length:1),a.push(h);var f=new ZDe(xr(h.name,""),n);c?JDe(f,c):n.root=f,n._nodes.push(f);var p=h.children;if(p)for(var v=0;v<p.length;v++)s(p[v],f)}n.root.updateDepthAndHeight(0);var l=qg(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new xi(l,r);return u.initData(a),i&&i(u),P$({mainData:u,struct:n,structAttr:"tree"}),n.update(),n},e}();function JDe(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const QL=KDe;function vg(e,t,r){if(e&&We(t,e.type)>=0){var i=r.getData().tree.root,n=e.targetNode;if(ge(n)&&(n=i.getNodeById(n)),n&&i.contains(n))return{node:n};var a=e.targetNodeId;if(a!=null&&(n=i.getNodeById(a)))return{node:n}}}function E$(e){for(var t=[];e;)e=e.parentNode,e&&t.push(e);return t.reverse()}function eE(e,t){var r=E$(e);return We(r,t)>=0}function mb(e,t){for(var r=[];e;){var i=e.dataIndex;r.push({name:e.name,dataIndex:i,value:t.getRawValue(i)}),e=e.parentNode}return r.reverse(),r}var QDe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var i={name:r.name,children:r.data},n=r.leaves||{},a=new Nt(n,this,this.ecModel),o=QL.createTree(i,this,s);function s(c){c.wrapMethod("getItemModel",function(d,f){var p=o.getNodeByDataIndex(f);return p&&p.children.length&&p.isExpand||(d.parentModel=a),d})}var l=0;o.eachNode("preorder",function(c){c.depth>l&&(l=c.depth)});var u=r.expandAndCollapse,h=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return o.root.eachNode("preorder",function(c){var d=c.hostTree.data.getRawDataItem(c.dataIndex);c.isExpand=d&&d.collapsed!=null?!d.collapsed:c.depth<=h}),o.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,i,n){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==o;)u=s.parentNode.name+"."+u,s=s.parentNode;return Lr("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treeAncestors=mb(n,this),i.collapsed=!n.isExpand,i},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}($t);const ePe=QDe;function tPe(e,t,r){for(var i=[e],n=[],a;a=i.pop();)if(n.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)i.push(o[s])}for(;a=n.pop();)t(a,r)}function mp(e,t){for(var r=[e],i;i=r.pop();)if(t(i),i.isExpand){var n=i.children;if(n.length)for(var a=n.length-1;a>=0;a--)r.push(n[a])}}function rPe(e,t){e.eachSeriesByType("tree",function(r){iPe(r,t)})}function iPe(e,t){var r=ODe(e,t);e.layoutInfo=r;var i=e.get("layout"),n=0,a=0,o=null;i==="radial"?(n=2*Math.PI,a=Math.min(r.height,r.width)/2,o=T5(function(_,x){return(_.parentNode===x.parentNode?1:2)/_.depth})):(n=r.width,a=r.height,o=T5());var s=e.getData().tree.root,l=s.children[0];if(l){LDe(s),tPe(l,EDe,o),s.hierNode.modifier=-l.hierNode.prelim,mp(l,IDe);var u=l,h=l,c=l;mp(l,function(_){var x=_.getLayout().x;x<u.getLayout().x&&(u=_),x>h.getLayout().x&&(h=_),_.depth>c.depth&&(c=_)});var d=u===h?1:o(u,h)/2,f=d-u.getLayout().x,p=0,v=0,g=0,m=0;if(i==="radial")p=n/(h.getLayout().x+d+f),v=a/(c.depth-1||1),mp(l,function(_){g=(_.getLayout().x+f)*p,m=(_.depth-1)*v;var x=Up(g,m);_.setLayout({x:x.x,y:x.y,rawX:g,rawY:m},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(v=a/(h.getLayout().x+d+f),p=n/(c.depth-1||1),mp(l,function(_){m=(_.getLayout().x+f)*v,g=y==="LR"?(_.depth-1)*p:n-(_.depth-1)*p,_.setLayout({x:g,y:m},!0)})):(y==="TB"||y==="BT")&&(p=n/(h.getLayout().x+d+f),v=a/(c.depth-1||1),mp(l,function(_){g=(_.getLayout().x+f)*p,m=y==="TB"?(_.depth-1)*v:a-(_.depth-1)*v,_.setLayout({x:g,y:m},!0)}))}}}function nPe(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),i=r.tree;i.eachNode(function(n){var a=n.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(n.dataIndex,"style");ae(s,o)})})}function aPe(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var n=t.dataIndex,a=i.getData().tree,o=a.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,i){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var a=n.coordinateSystem,o=KL(a,t,void 0,i);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}function oPe(e){e.registerChartView(HDe),e.registerSeriesModel(ePe),e.registerLayout(rPe),e.registerVisual(nPe),aPe(e)}var L5=["treemapZoomToNode","treemapRender","treemapMove"];function sPe(e){for(var t=0;t<L5.length;t++)e.registerAction({type:L5[t],update:"updateView"},sr);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,i){i.eachComponent({mainType:"series",subType:"treemap",query:r},n);function n(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=vg(r,s,a);if(l){var u=a.getViewRoot();u&&(r.direction=eE(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function I$(e){var t=e.getData(),r=t.tree,i={};r.eachNode(function(n){for(var a=n;a&&a.depth>1;)a=a.parentNode;var o=kA(e.ecModel,a.name||a.dataIndex+"",i);n.setVisual("decal",o)})}var lPe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.preventUsingHoverLayer=!0,r}return t.prototype.getInitialData=function(r,i){var n={name:r.name,children:r.data};O$(n);var a=r.levels||[],o=this.designatedVisualItemStyle={},s=new Nt({itemStyle:o},this,i);a=r.levels=uPe(a,i);var l=ce(a||[],function(c){return new Nt(c,s,i)},this),u=QL.createTree(n,this,h);function h(c){c.wrapMethod("getItemModel",function(d,f){var p=u.getNodeByDataIndex(f),v=p?l[p.depth]:null;return d.parentModel=v||s,d})}return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=this.getRawValue(r),s=a.getName(r);return Lr("nameValue",{name:s,value:o})},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treeAncestors=mb(n,this),i.treePathInfo=i.treeAncestors,i},t.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},ae(this.layoutInfo,r)},t.prototype.mapIdToIndex=function(r){var i=this._idIndexMap;i||(i=this._idIndexMap=Me(),this._idIndexMapCount=0);var n=i.get(r);return n==null&&i.set(r,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var i=this.getRawData().tree.root;(!r||r!==i&&!i.contains(r))&&(this._viewRoot=i)},t.prototype.enableAriaDecal=function(){I$(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}($t);function O$(e){var t=0;I(e.children,function(i){O$(i);var n=i.value;ue(n)&&(n=n[0]),t+=n});var r=e.value;ue(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),ue(e.value)?e.value[0]=r:e.value=r}function uPe(e,t){var r=Mt(t.get("color")),i=Mt(t.get(["aria","decal","decals"]));if(r){e=e||[];var n,a;I(e,function(s){var l=new Nt(s),u=l.get("color"),h=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(n=!0),(l.get(["itemStyle","decal"])||h&&h!=="none")&&(a=!0)});var o=e[0]||(e[0]={});return n||(o.color=r.slice()),!a&&i&&(o.decal=i.slice()),e}}const hPe=lPe;var cPe=8,E5=8,D2=5,dPe=function(){function e(t){this.group=new Ie,t.add(this.group)}return e.prototype.render=function(t,r,i,n){var a=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!i)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),u=s.getModel("textStyle"),h=l.getModel(["itemStyle","textStyle"]),c={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,c,u),this._renderContent(t,c,s,l,u,h,n),nb(o,c.pos,c.box)}},e.prototype._prepare=function(t,r,i){for(var n=t;n;n=n.parentNode){var a=xr(n.getModel().get("name"),""),o=i.getTextRect(a),s=Math.max(o.width+cPe*2,r.emptyItemWidth);r.totalWidth+=s+E5,r.renderList.push({node:n,text:a,width:s})}},e.prototype._renderContent=function(t,r,i,n,a,o,s){for(var l=0,u=r.emptyItemWidth,h=t.get(["breadcrumb","height"]),c=Mbe(r.pos,r.box),d=r.totalWidth,f=r.renderList,p=n.getModel("itemStyle").getItemStyle(),v=f.length-1;v>=0;v--){var g=f[v],m=g.node,y=g.width,_=g.text;d>c.width&&(d-=y-u,y=u,_=null);var x=new qi({shape:{points:fPe(l,0,y,h,v===f.length-1,v===0)},style:De(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new ot({style:zt(a,{text:_})}),textConfig:{position:"inside"},z2:hf*1e4,onclick:Ne(s,m)});x.disableLabelAnimation=!0,x.getTextContent().ensureState("emphasis").style=zt(o,{text:_}),x.ensureState("emphasis").style=p,Zt(x,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(x),pPe(x,t,m),l+=y+E5}},e.prototype.remove=function(){this.group.removeAll()},e}();function fPe(e,t,r,i,n,a){var o=[[n?e:e-D2,t],[e+r,t],[e+r,t+i],[n?e:e-D2,t+i]];return!a&&o.splice(2,0,[e+r+D2,t+i/2]),!n&&o.push([e,t+i/2]),o}function pPe(e,t,r){Re(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&mb(r,t)}}const vPe=dPe;var gPe=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(t,r,i,n,a){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:r,duration:i,delay:n,easing:a}),!0)},e.prototype.finished=function(t){return this._finishedCallback=t,this},e.prototype.start=function(){for(var t=this,r=this._storage.length,i=function(){r--,r<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,a=this._storage.length;n<a;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:i,aborted:i})}return this},e}();function mPe(){return new gPe}var uC=Ie,I5=rt,O5=3,R5="label",z5="upperLabel",yPe=hf*10,_Pe=hf*2,xPe=hf*3,ku=Ih([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),N5=function(e){var t=ku(e);return t.stroke=t.fill=t.lineWidth=null,t},N_=it(),bPe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._state="ready",r._storage=yp(),r}return t.prototype.render=function(r,i,n,a){var o=i.findComponents({mainType:"series",subType:"treemap",query:a});if(!(We(o,r)<0)){this.seriesModel=r,this.api=n,this.ecModel=i;var s=["treemapZoomToNode","treemapRootToNode"],l=vg(a,s,r),u=a&&a.type,h=r.layoutInfo,c=!this._oldTree,d=this._storage,f=u==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,p=this._giveContainerGroup(h),v=r.get("animation"),g=this._doRender(p,r,f);v&&!c&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(p,g,r,f):g.renderFinally(),this._resetController(n),this._renderBreadcrumb(r,n,l)}},t.prototype._giveContainerGroup=function(r){var i=this._containerGroup;return i||(i=this._containerGroup=new uC,this._initEvents(i),this.group.add(i)),i.x=r.x,i.y=r.y,i},t.prototype._doRender=function(r,i,n){var a=i.getData().tree,o=this._oldTree,s=yp(),l=yp(),u=this._storage,h=[];function c(g,m,y,_){return wPe(i,l,u,n,s,h,g,m,y,_)}f(a.root?[a.root]:[],o&&o.root?[o.root]:[],r,a===o||!o,0);var d=p(u);return this._oldTree=a,this._storage=l,{lastsForAnimation:s,willDeleteEls:d,renderFinally:v};function f(g,m,y,_,x){_?(m=g,I(g,function(S,M){!S.isRemoved()&&b(M,M)})):new ws(m,g,w,w).add(b).update(b).remove(Ne(b,null)).execute();function w(S){return S.getId()}function b(S,M){var A=S!=null?g[S]:null,T=M!=null?m[M]:null,C=c(A,T,y,x);C&&f(A&&A.viewChildren||[],T&&T.viewChildren||[],C,_,x+1)}}function p(g){var m=yp();return g&&I(g,function(y,_){var x=m[_];I(y,function(w){w&&(x.push(w),N_(w).willDelete=!0)})}),m}function v(){I(d,function(g){I(g,function(m){m.parent&&m.parent.remove(m)})}),I(h,function(g){g.invisible=!0,g.dirty()})}},t.prototype._doAnimation=function(r,i,n,a){var o=n.get("animationDurationUpdate"),s=n.get("animationEasing"),l=(Ae(o)?0:o)||0,u=(Ae(s)?null:s)||"cubicOut",h=mPe();I(i.willDeleteEls,function(c,d){I(c,function(f,p){if(!f.invisible){var v=f.parent,g,m=N_(v);if(a&&a.direction==="drillDown")g=v===a.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,_=0;m.willDelete||(y=m.nodeWidth/2,_=m.nodeHeight/2),g=d==="nodeGroup"?{x:y,y:_,style:{opacity:0}}:{shape:{x:y,y:_,width:0,height:0},style:{opacity:0}}}g&&h.add(f,g,l,0,u)}})}),I(this._storage,function(c,d){I(c,function(f,p){var v=i.lastsForAnimation[d][p],g={};v&&(f instanceof Ie?v.oldX!=null&&(g.x=f.x,g.y=f.y,f.x=v.oldX,f.y=v.oldY):(v.oldShape&&(g.shape=ae({},f.shape),f.setShape(v.oldShape)),v.fadein?(f.setStyle("opacity",0),g.style={opacity:1}):f.style.opacity!==1&&(g.style={opacity:1})),h.add(f,g,l,0,u))})},this),this._state="animating",h.finished(me(function(){this._state="ready",i.renderFinally()},this)).start()},t.prototype._resetController=function(r){var i=this._controller;i||(i=this._controller=new tm(r.getZr()),i.enable(this.seriesModel.get("roam")),i.on("pan",me(this._onPan,this)),i.on("zoom",me(this._onZoom,this)));var n=new Ge(0,0,r.getWidth(),r.getHeight());i.setPointerChecker(function(a,o,s){return n.contain(o,s)})},t.prototype._clearController=function(){var r=this._controller;r&&(r.dispose(),r=null)},t.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>O5||Math.abs(r.dy)>O5)){var i=this.seriesModel.getData().tree.root;if(!i)return;var n=i.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+r.dx,y:n.y+r.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(r){var i=r.originX,n=r.originY;if(this._state!=="animating"){var a=this.seriesModel.getData().tree.root;if(!a)return;var o=a.getLayout();if(!o)return;var s=new Ge(o.x,o.y,o.width,o.height),l=this.seriesModel.layoutInfo;i-=l.x,n-=l.y;var u=Gn();bo(u,u,[-i,-n]),GP(u,u,[r.scale,r.scale]),bo(u,u,[i,n]),s.applyTransform(u),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},t.prototype._initEvents=function(r){var i=this;r.on("click",function(n){if(i._state==="ready"){var a=i.seriesModel.get("nodeClick",!0);if(a){var o=i.findTarget(n.offsetX,n.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)i._rootToNode(o);else if(a==="zoomToNode")i._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),h=l.get("target",!0)||"blank";u&&__(u,h)}}}}},this)},t.prototype._renderBreadcrumb=function(r,i,n){var a=this;n||(n=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(i.getWidth()/2,i.getHeight()/2),n||(n={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new vPe(this.group))).render(r,i,n.node,function(o){a._state!=="animating"&&(eE(r.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=yp(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype.findTarget=function(r,i){var n,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(r,i),u=s.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)n={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),n},t.type="treemap",t}(kt);function yp(){return{nodeGroup:[],background:[],content:[]}}function wPe(e,t,r,i,n,a,o,s,l,u){if(!o)return;var h=o.getLayout(),c=e.getData(),d=o.getModel();if(c.setItemGraphicEl(o.dataIndex,null),!h||!h.isInView)return;var f=h.width,p=h.height,v=h.borderWidth,g=h.invisible,m=o.getRawIndex(),y=s&&s.getRawIndex(),_=o.viewChildren,x=h.upperHeight,w=_&&_.length,b=d.getModel("itemStyle"),S=d.getModel(["emphasis","itemStyle"]),M=d.getModel(["blur","itemStyle"]),A=d.getModel(["select","itemStyle"]),T=b.get("borderRadius")||0,C=X("nodeGroup",uC);if(!C)return;if(l.add(C),C.x=h.x||0,C.y=h.y||0,C.markRedraw(),N_(C).nodeWidth=f,N_(C).nodeHeight=p,h.isAboveViewRoot)return C;var D=X("background",I5,u,_Pe);D&&F(C,D,w&&h.upperLabelHeight);var P=d.getModel("emphasis"),E=P.get("focus"),O=P.get("blurScope"),z=P.get("disabled"),B=E==="ancestor"?o.getAncestorsIndices():E==="descendant"?o.getDescendantIndices():E;if(w)rg(C)&&eh(C,!1),D&&(eh(D,!z),c.setItemGraphicEl(o.dataIndex,D),PA(D,B,O));else{var N=X("content",I5,u,xPe);N&&G(C,N),D.disableMorphing=!0,D&&rg(D)&&eh(D,!1),eh(C,!z),c.setItemGraphicEl(o.dataIndex,C),PA(C,B,O)}return C;function F(U,W,j){var K=Re(W);if(K.dataIndex=o.dataIndex,K.seriesIndex=e.seriesIndex,W.setShape({x:0,y:0,width:f,height:p,r:T}),g)H(W);else{W.invisible=!1;var ee=o.getVisual("style"),R=ee.stroke,k=N5(b);k.fill=R;var V=ku(S);V.fill=S.get("borderColor");var q=ku(M);q.fill=M.get("borderColor");var Q=ku(A);if(Q.fill=A.get("borderColor"),j){var J=f-2*v;$(W,R,ee.opacity,{x:v,y:0,width:J,height:x})}else W.removeTextContent();W.setStyle(k),W.ensureState("emphasis").style=V,W.ensureState("blur").style=q,W.ensureState("select").style=Q,Oh(W)}U.add(W)}function G(U,W){var j=Re(W);j.dataIndex=o.dataIndex,j.seriesIndex=e.seriesIndex;var K=Math.max(f-2*v,0),ee=Math.max(p-2*v,0);if(W.culling=!0,W.setShape({x:v,y:v,width:K,height:ee,r:T}),g)H(W);else{W.invisible=!1;var R=o.getVisual("style"),k=R.fill,V=N5(b);V.fill=k,V.decal=R.decal;var q=ku(S),Q=ku(M),J=ku(A);$(W,k,R.opacity,null),W.setStyle(V),W.ensureState("emphasis").style=q,W.ensureState("blur").style=Q,W.ensureState("select").style=J,Oh(W)}U.add(W)}function H(U){!U.invisible&&a.push(U)}function $(U,W,j,K){var ee=d.getModel(K?z5:R5),R=xr(d.get("name"),null),k=ee.getShallow("show");Wr(U,Pr(d,K?z5:R5),{defaultText:k?R:null,inheritColor:W,defaultOpacity:j,labelFetcher:e,labelDataIndex:o.dataIndex});var V=U.getTextContent();if(V){var q=V.style,Q=FP(q.padding||0);K&&(U.setTextConfig({layoutRect:K}),V.disableLabelLayout=!0),V.beforeUpdate=function(){var oe=Math.max((K?K.width:U.shape.width)-Q[1]-Q[3],0),le=Math.max((K?K.height:U.shape.height)-Q[0]-Q[2],0);(q.width!==oe||q.height!==le)&&V.setStyle({width:oe,height:le})},q.truncateMinChar=2,q.lineOverflow="truncate",Z(q,K,h);var J=V.getState("emphasis");Z(J?J.style:null,K,h)}}function Z(U,W,j){var K=U?U.text:null;if(!W&&j.isLeafRoot&&K!=null){var ee=e.get("drillDownIcon",!0);U.text=ee?ee+" "+K:K}}function X(U,W,j,K){var ee=y!=null&&r[U][y],R=n[U];return ee?(r[U][y]=null,ne(R,ee)):g||(ee=new W,ee instanceof Hn&&(ee.z2=SPe(j,K)),te(R,ee)),t[U][m]=ee}function ne(U,W){var j=U[m]={};W instanceof uC?(j.oldX=W.x,j.oldY=W.y):j.oldShape=ae({},W.shape)}function te(U,W){var j=U[m]={},K=o.parentNode,ee=W instanceof Ie;if(K&&(!i||i.direction==="drillDown")){var R=0,k=0,V=n.background[K.getRawIndex()];!i&&V&&V.oldShape&&(R=V.oldShape.width,k=V.oldShape.height),ee?(j.oldX=0,j.oldY=k):j.oldShape={x:R,y:k,width:0,height:0}}j.fadein=!ee}}function SPe(e,t){return e*yPe+t}const MPe=bPe;var gg=I,TPe=Pe,k_=-1,tE=function(){function e(t){var r=t.mappingMethod,i=t.type,n=this.option=Ee(t);this.type=i,this.mappingMethod=r,this._normalizeData=DPe[r];var a=e.visualHandlers[i];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[r],r==="piecewise"?(P2(n),APe(n)):r==="category"?n.categories?CPe(n):P2(n,!0):(wi(r!=="linear"||n.dataExtent),P2(n))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return me(this._normalizeData,this)},e.listVisualTypes=function(){return Ze(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,i){Pe(t)?I(t,r,i):r.call(i,t)},e.mapVisual=function(t,r,i){var n,a=ue(t)?[]:Pe(t)?{}:(n=!0,null);return e.eachVisual(t,function(o,s){var l=r.call(i,o,s);n?a=l:a[s]=l}),a},e.retrieveVisuals=function(t){var r={},i;return t&&gg(e.visualHandlers,function(n,a){t.hasOwnProperty(a)&&(r[a]=t[a],i=!0)}),i?r:null},e.prepareVisualTypes=function(t){if(ue(t))t=t.slice();else if(TPe(t)){var r=[];gg(t,function(i,n){r.push(n)}),t=r}else return[];return t.sort(function(i,n){return n==="color"&&i!=="color"&&i.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,i){for(var n,a=1/0,o=0,s=r.length;o<s;o++){var l=r[o].value;if(l!=null){if(l===t||ge(l)&&l===t+"")return o;i&&d(l,o)}}for(var o=0,s=r.length;o<s;o++){var u=r[o],h=u.interval,c=u.close;if(h){if(h[0]===-1/0){if(i0(c[1],t,h[1]))return o}else if(h[1]===1/0){if(i0(c[0],h[0],t))return o}else if(i0(c[0],h[0],t)&&i0(c[1],t,h[1]))return o;i&&d(h[0],o),i&&d(h[1],o)}}if(i)return t===1/0?r.length-1:t===-1/0?0:n;function d(f,p){var v=Math.abs(f-t);v<a&&(a=v,n=p)}},e.visualHandlers={color:{applyVisual:_p("color"),getColorMapper:function(){var t=this.option;return me(t.mappingMethod==="category"?function(r,i){return!i&&(r=this._normalizeData(r)),Gp.call(this,r)}:function(r,i,n){var a=!!n;return!i&&(r=this._normalizeData(r)),n=hS(r,t.parsedVisual,n),a?n:hs(n,"rgba")},this)},_normalizedToVisual:{linear:function(t){return hs(hS(t,this.option.parsedVisual),"rgba")},category:Gp,piecewise:function(t,r){var i=cC.call(this,r);return i==null&&(i=hs(hS(t,this.option.parsedVisual),"rgba")),i},fixed:Bu}},colorHue:r0(function(t,r){return hv(t,r)}),colorSaturation:r0(function(t,r){return hv(t,null,r)}),colorLightness:r0(function(t,r){return hv(t,null,null,r)}),colorAlpha:r0(function(t,r){return o_(t,r)}),decal:{applyVisual:_p("decal"),_normalizedToVisual:{linear:null,category:Gp,piecewise:null,fixed:null}},opacity:{applyVisual:_p("opacity"),_normalizedToVisual:hC([0,1])},liftZ:{applyVisual:_p("liftZ"),_normalizedToVisual:{linear:Bu,category:Bu,piecewise:Bu,fixed:Bu}},symbol:{applyVisual:function(t,r,i){var n=this.mapValueToVisual(t);i("symbol",n)},_normalizedToVisual:{linear:k5,category:Gp,piecewise:function(t,r){var i=cC.call(this,r);return i==null&&(i=k5.call(this,t)),i},fixed:Bu}},symbolSize:{applyVisual:_p("symbolSize"),_normalizedToVisual:hC([0,1])}},e}();function APe(e){var t=e.pieceList;e.hasSpecialVisual=!1,I(t,function(r,i){r.originIndex=i,r.visual!=null&&(e.hasSpecialVisual=!0)})}function CPe(e){var t=e.categories,r=e.categoryMap={},i=e.visual;if(gg(t,function(o,s){r[o]=s}),!ue(i)){var n=[];Pe(i)?gg(i,function(o,s){var l=r[s];n[l??k_]=o}):n[k_]=i,i=R$(e,n)}for(var a=t.length-1;a>=0;a--)i[a]==null&&(delete r[t[a]],t.pop())}function P2(e,t){var r=e.visual,i=[];Pe(r)?gg(r,function(a){i.push(a)}):r!=null&&i.push(r);var n={color:1,symbol:1};!t&&i.length===1&&!n.hasOwnProperty(e.type)&&(i[1]=i[0]),R$(e,i)}function r0(e){return{applyVisual:function(t,r,i){var n=this.mapValueToVisual(t);i("color",e(r("color"),n))},_normalizedToVisual:hC([0,1])}}function k5(e){var t=this.option.visual;return t[Math.round(mt(e,[0,1],[0,t.length-1],!0))]||{}}function _p(e){return function(t,r,i){i(e,this.mapValueToVisual(t))}}function Gp(e){var t=this.option.visual;return t[this.option.loop&&e!==k_?e%t.length:e]}function Bu(){return this.option.visual[0]}function hC(e){return{linear:function(t){return mt(t,e,this.option.visual,!0)},category:Gp,piecewise:function(t,r){var i=cC.call(this,r);return i==null&&(i=mt(t,e,this.option.visual,!0)),i},fixed:Bu}}function cC(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var i=tE.findPieceIndex(e,r),n=r[i];if(n&&n.visual)return n.visual[this.type]}}function R$(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=ce(t,function(r){var i=ln(r);return i||[0,0,0,1]})),t}var DPe={linear:function(e){return mt(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=tE.findPieceIndex(e,t,!0);if(r!=null)return mt(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t??k_},fixed:sr};function i0(e,t,r){return e?t<=r:t<r}const Hr=tE;var PPe="itemStyle",z$=it();const LPe={seriesType:"treemap",reset:function(e){var t=e.getData().tree,r=t.root;r.isRemoved()||N$(r,{},e.getViewRoot().getAncestors(),e)}};function N$(e,t,r,i){var n=e.getModel(),a=e.getLayout(),o=e.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=n.getModel(PPe),l=EPe(s,t,i),u=o.ensureUniqueItemVisual(e.dataIndex,"style"),h=s.get("borderColor"),c=s.get("borderColorSaturation"),d;c!=null&&(d=B5(l),h=IPe(c,d)),u.stroke=h;var f=e.viewChildren;if(!f||!f.length)d=B5(l),u.fill=d;else{var p=OPe(e,n,a,s,l,f);I(f,function(v,g){if(v.depth>=r.length||v===r[v.depth]){var m=RPe(n,l,v,g,p,i);N$(v,m,r,i)}})}}}function EPe(e,t,r){var i=ae({},t),n=r.designatedVisualItemStyle;return I(["color","colorAlpha","colorSaturation"],function(a){n[a]=t[a];var o=e.get(a);n[a]=null,o!=null&&(i[a]=o)}),i}function B5(e){var t=L2(e,"color");if(t){var r=L2(e,"colorAlpha"),i=L2(e,"colorSaturation");return i&&(t=hv(t,null,null,i)),r&&(t=o_(t,r)),t}}function IPe(e,t){return t!=null?hv(t,null,null,e):null}function L2(e,t){var r=e[t];if(r!=null&&r!=="none")return r}function OPe(e,t,r,i,n,a){if(!(!a||!a.length)){var o=E2(t,"color")||n.color!=null&&n.color!=="none"&&(E2(t,"colorAlpha")||E2(t,"colorSaturation"));if(o){var s=t.get("visualMin"),l=t.get("visualMax"),u=r.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s),l!=null&&l>u[1]&&(u[1]=l);var h=t.get("colorMappingBy"),c={type:o.name,dataExtent:u,visual:o.range};c.type==="color"&&(h==="index"||h==="id")?(c.mappingMethod="category",c.loop=!0):c.mappingMethod="linear";var d=new Hr(c);return z$(d).drColorMappingBy=h,d}}}function E2(e,t){var r=e.get(t);return ue(r)&&r.length?{name:t,range:r}:null}function RPe(e,t,r,i,n,a){var o=ae({},t);if(n){var s=n.type,l=s==="color"&&z$(n).drColorMappingBy,u=l==="index"?i:l==="id"?a.mapIdToIndex(r.getId()):r.getValue(e.get("visualDimension"));o[s]=n.mapValueToVisual(u)}return o}var mg=Math.max,B_=Math.min,F5=zr,rE=I,k$=["itemStyle","borderWidth"],zPe=["itemStyle","gapWidth"],NPe=["upperLabel","show"],kPe=["upperLabel","height"];const BPe={seriesType:"treemap",reset:function(e,t,r,i){var n=r.getWidth(),a=r.getHeight(),o=e.option,s=br(e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),l=o.size||[],u=ve(F5(s.width,l[0]),n),h=ve(F5(s.height,l[1]),a),c=i&&i.type,d=["treemapZoomToNode","treemapRootToNode"],f=vg(i,d,e),p=c==="treemapRender"||c==="treemapMove"?i.rootRect:null,v=e.getViewRoot(),g=E$(v);if(c!=="treemapMove"){var m=c==="treemapZoomToNode"?jPe(e,f,v,u,h):p?[p.width,p.height]:[u,h],y=o.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var _={squareRatio:o.squareRatio,sort:y,leafDepth:o.leafDepth};v.hostTree.clearLayouts();var x={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};v.setLayout(x),B$(v,_,!1,0),x=v.getLayout(),rE(g,function(b,S){var M=(g[S+1]||v).getValue();b.setLayout(ae({dataExtent:[M,M],borderWidth:0,upperHeight:0},x))})}var w=e.getData().tree.root;w.setLayout(WPe(s,p,f),!0),e.setLayoutInfo(s),F$(w,new Ge(-s.x,-s.y,n,a),g,v,0)}};function B$(e,t,r,i){var n,a;if(!e.isRemoved()){var o=e.getLayout();n=o.width,a=o.height;var s=e.getModel(),l=s.get(k$),u=s.get(zPe)/2,h=V$(s),c=Math.max(l,h),d=l-u,f=c-u;e.setLayout({borderWidth:l,upperHeight:c,upperLabelHeight:h},!0),n=mg(n-2*d,0),a=mg(a-d-f,0);var p=n*a,v=FPe(e,s,p,t,r,i);if(v.length){var g={x:d,y:f,width:n,height:a},m=B_(n,a),y=1/0,_=[];_.area=0;for(var x=0,w=v.length;x<w;){var b=v[x];_.push(b),_.area+=b.getLayout().area;var S=HPe(_,m,t.squareRatio);S<=y?(x++,y=S):(_.area-=_.pop().getLayout().area,V5(_,m,g,u,!1),m=B_(g.width,g.height),_.length=_.area=0,y=1/0)}if(_.length&&V5(_,m,g,u,!0),!r){var M=s.get("childrenVisibleMin");M!=null&&p<M&&(r=!0)}for(var x=0,w=v.length;x<w;x++)B$(v[x],t,r,i+1)}}}function FPe(e,t,r,i,n,a){var o=e.children||[],s=i.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=i.leafDepth!=null&&i.leafDepth<=a;if(n&&!l)return e.viewChildren=[];o=xt(o,function(f){return!f.isRemoved()}),UPe(o,s);var u=GPe(t,o,s);if(u.sum===0)return e.viewChildren=[];if(u.sum=VPe(t,r,u.sum,s,o),u.sum===0)return e.viewChildren=[];for(var h=0,c=o.length;h<c;h++){var d=o[h].getValue()/u.sum*r;o[h].setLayout({area:d})}return l&&(o.length&&e.setLayout({isLeafRoot:!0},!0),o.length=0),e.viewChildren=o,e.setLayout({dataExtent:u.dataExtent},!0),o}function VPe(e,t,r,i,n){if(!i)return r;for(var a=e.get("visibleMin"),o=n.length,s=o,l=o-1;l>=0;l--){var u=n[i==="asc"?o-l-1:l].getValue();u/r*t<a&&(s=l,r-=u)}return i==="asc"?n.splice(0,o-s):n.splice(s,o-s),r}function UPe(e,t){return t&&e.sort(function(r,i){var n=t==="asc"?r.getValue()-i.getValue():i.getValue()-r.getValue();return n===0?t==="asc"?r.dataIndex-i.dataIndex:i.dataIndex-r.dataIndex:n}),e}function GPe(e,t,r){for(var i=0,n=0,a=t.length;n<a;n++)i+=t[n].getValue();var o=e.get("visualDimension"),s;return!t||!t.length?s=[NaN,NaN]:o==="value"&&r?(s=[t[t.length-1].getValue(),t[0].getValue()],r==="asc"&&s.reverse()):(s=[1/0,-1/0],rE(t,function(l){var u=l.getValue(o);u<s[0]&&(s[0]=u),u>s[1]&&(s[1]=u)})),{sum:i,dataExtent:s}}function HPe(e,t,r){for(var i=0,n=1/0,a=0,o=void 0,s=e.length;a<s;a++)o=e[a].getLayout().area,o&&(o<n&&(n=o),o>i&&(i=o));var l=e.area*e.area,u=t*t*r;return l?mg(u*i/l,l/(u*n)):1/0}function V5(e,t,r,i,n){var a=t===r.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=r[s[a]],h=t?e.area/t:0;(n||h>r[l[o]])&&(h=r[l[o]]);for(var c=0,d=e.length;c<d;c++){var f=e[c],p={},v=h?f.getLayout().area/h:0,g=p[l[o]]=mg(h-2*i,0),m=r[s[a]]+r[l[a]]-u,y=c===d-1||m<v?m:v,_=p[l[a]]=mg(y-2*i,0);p[s[o]]=r[s[o]]+B_(i,g/2),p[s[a]]=u+B_(i,_/2),u+=y,f.setLayout(p,!0)}r[s[o]]+=h,r[l[o]]-=h}function jPe(e,t,r,i,n){var a=(t||{}).node,o=[i,n];if(!a||a===r)return o;for(var s,l=i*n,u=l*e.option.zoomToNodeRatio;s=a.parentNode;){for(var h=0,c=s.children,d=0,f=c.length;d<f;d++)h+=c[d].getValue();var p=a.getValue();if(p===0)return o;u*=h/p;var v=s.getModel(),g=v.get(k$),m=Math.max(g,V$(v));u+=4*g*g+(3*g+m)*Math.pow(u,.5),u>Kz&&(u=Kz),a=s}u<l&&(u=l);var y=Math.pow(u/l,.5);return[i*y,n*y]}function WPe(e,t,r){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!r)return i;var n=r.node,a=n.getLayout();if(!a)return i;for(var o=[a.width/2,a.height/2],s=n;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:e.width/2-o[0],y:e.height/2-o[1]}}function F$(e,t,r,i,n){var a=e.getLayout(),o=r[n],s=o&&o===e;if(!(o&&!s||n===r.length&&e!==i)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(a),isAboveViewRoot:s},!0);var l=new Ge(t.x-a.x,t.y-a.y,t.width,t.height);rE(e.viewChildren||[],function(u){F$(u,l,r,i,n+1)})}}function V$(e){return e.get(NPe)?e.get(kPe):0}function $Pe(e){e.registerSeriesModel(hPe),e.registerChartView(MPe),e.registerVisual(LPe),e.registerLayout(BPe),sPe(e)}function qPe(e){var t=e.findComponents({mainType:"legend"});!t||!t.length||e.eachSeriesByType("graph",function(r){var i=r.getCategoriesData(),n=r.getGraph(),a=n.data,o=i.mapArray(i.getName);a.filterSelf(function(s){var l=a.getItemModel(s),u=l.getShallow("category");if(u!=null){st(u)&&(u=o[u]);for(var h=0;h<t.length;h++)if(!t[h].isSelected(u))return!1}return!0})})}function XPe(e){var t={};e.eachSeriesByType("graph",function(r){var i=r.getCategoriesData(),n=r.getData(),a={};i.each(function(o){var s=i.getName(o);a["ec-"+s]=o;var l=i.getItemModel(o),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=r.getColorFromPalette(s,t)),i.setItemVisual(o,"style",u);for(var h=["symbol","symbolSize","symbolKeepAspect"],c=0;c<h.length;c++){var d=l.getShallow(h[c],!0);d!=null&&i.setItemVisual(o,h[c],d)}}),i.count()&&n.each(function(o){var s=n.getItemModel(o),l=s.getShallow("category");if(l!=null){ge(l)&&(l=a["ec-"+l]);var u=i.getItemVisual(l,"style"),h=n.ensureUniqueItemVisual(o,"style");ae(h,u);for(var c=["symbol","symbolSize","symbolKeepAspect"],d=0;d<c.length;d++)n.setItemVisual(o,c[d],i.getItemVisual(l,c[d]))}})})}function n0(e){return e instanceof Array||(e=[e,e]),e}function YPe(e){e.eachSeriesByType("graph",function(t){var r=t.getGraph(),i=t.getEdgeData(),n=n0(t.get("edgeSymbol")),a=n0(t.get("edgeSymbolSize"));i.setVisual("fromSymbol",n&&n[0]),i.setVisual("toSymbol",n&&n[1]),i.setVisual("fromSymbolSize",a&&a[0]),i.setVisual("toSymbolSize",a&&a[1]),i.setVisual("style",t.getModel("lineStyle").getLineStyle()),i.each(function(o){var s=i.getItemModel(o),l=r.getEdgeByIndex(o),u=n0(s.getShallow("symbol",!0)),h=n0(s.getShallow("symbolSize",!0)),c=s.getModel("lineStyle").getLineStyle(),d=i.ensureUniqueItemVisual(o,"style");switch(ae(d,c),d.stroke){case"source":{var f=l.node1.getVisual("style");d.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");d.stroke=f&&f.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),h[0]&&l.setVisual("fromSymbolSize",h[0]),h[1]&&l.setVisual("toSymbolSize",h[1])})})}var dC="-->",yb=function(e){return e.get("autoCurveness")||null},U$=function(e,t){var r=yb(e),i=20,n=[];if(st(r))i=r;else if(ue(r)){e.__curvenessList=r;return}t>i&&(i=t);var a=i%2?i+2:i+3;n=[];for(var o=0;o<a;o++)n.push((o%2?o+1:o)/10*(o%2?-1:1));e.__curvenessList=n},yg=function(e,t,r){var i=[e.id,e.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[r.uid,i,n].join(dC)},G$=function(e){var t=e.split(dC);return[t[0],t[2],t[1]].join(dC)},ZPe=function(e,t){var r=yg(e.node1,e.node2,t);return t.__edgeMap[r]},KPe=function(e,t){var r=fC(yg(e.node1,e.node2,t),t),i=fC(yg(e.node2,e.node1,t),t);return r+i},fC=function(e,t){var r=t.__edgeMap;return r[e]?r[e].length:0};function JPe(e){yb(e)&&(e.__curvenessList=[],e.__edgeMap={},U$(e))}function QPe(e,t,r,i){if(yb(r)){var n=yg(e,t,r),a=r.__edgeMap,o=a[G$(n)];a[n]&&!o?a[n].isForward=!0:o&&a[n]&&(o.isForward=!0,a[n].isForward=!1),a[n]=a[n]||[],a[n].push(i)}}function iE(e,t,r,i){var n=yb(t),a=ue(n);if(!n)return null;var o=ZPe(e,t);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===r){s=l;break}var u=KPe(e,t);U$(t,u),e.lineStyle=e.lineStyle||{};var h=yg(e.node1,e.node2,t),c=t.__curvenessList,d=a||u%2?0:1;if(o.isForward)return c[d+s];var f=G$(h),p=fC(f,t),v=c[s+p+d];return i?a?n&&n[0]===0?(p+d)%2?v:-v:((p%2?0:1)+d)%2?v:-v:(p+d)%2?v:-v:c[s+p+d]}function H$(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view")){var r=e.getGraph();r.eachNode(function(i){var n=i.getModel();i.setLayout([+n.get("x"),+n.get("y")])}),nE(r,e)}}function nE(e,t){e.eachEdge(function(r,i){var n=ss(r.getModel().get(["lineStyle","curveness"]),-iE(r,t,i,!0),0),a=ls(r.node1.getLayout()),o=ls(r.node2.getLayout()),s=[a,o];+n&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*n,(a[1]+o[1])/2-(o[0]-a[0])*n]),r.setLayout(s)})}function eLe(e,t){e.eachSeriesByType("graph",function(r){var i=r.get("layout"),n=r.coordinateSystem;if(n&&n.type!=="view"){var a=r.getData(),o=[];I(n.dimensions,function(d){o=o.concat(a.mapDimensionsAll(d))});for(var s=0;s<a.count();s++){for(var l=[],u=!1,h=0;h<o.length;h++){var c=a.get(o[h],s);isNaN(c)||(u=!0),l.push(c)}u?a.setItemLayout(s,n.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}nE(a.graph,r)}else(!i||i==="none")&&H$(r)})}function Hp(e){var t=e.coordinateSystem;if(t.type!=="view")return 1;var r=e.option.nodeScaleRatio,i=t.scaleX,n=t.getZoom(),a=(n-1)*r+1;return a/i}function jp(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var U5=Math.PI,I2=[];function aE(e,t,r,i){var n=e.coordinateSystem;if(!(n&&n.type!=="view")){var a=n.getBoundingRect(),o=e.getData(),s=o.graph,l=a.width/2+a.x,u=a.height/2+a.y,h=Math.min(a.width,a.height)/2,c=o.count();if(o.setLayout({cx:l,cy:u}),!!c){if(r){var d=n.pointToData(i),f=d[0],p=d[1],v=[f-l,p-u];sf(v,v),F0(v,v,h),r.setLayout([l+v[0],u+v[1]],!0);var g=e.get(["circular","rotateLabel"]);j$(r,g,l,u)}tLe[t](e,s,o,h,l,u,c),s.eachEdge(function(m,y){var _=ss(m.getModel().get(["lineStyle","curveness"]),iE(m,e,y),0),x=ls(m.node1.getLayout()),w=ls(m.node2.getLayout()),b,S=(x[0]+w[0])/2,M=(x[1]+w[1])/2;+_&&(_*=3,b=[l*_+S*(1-_),u*_+M*(1-_)]),m.setLayout([x,w,b])})}}}var tLe={value:function(e,t,r,i,n,a,o){var s=0,l=r.getSum("value"),u=Math.PI*2/(l||o);t.eachNode(function(h){var c=h.getValue("value"),d=u*(l?c:1)/2;s+=d,h.setLayout([i*Math.cos(s)+n,i*Math.sin(s)+a]),s+=d})},symbolSize:function(e,t,r,i,n,a,o){var s=0;I2.length=o;var l=Hp(e);t.eachNode(function(c){var d=jp(c);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var f=Math.asin(d/2/i);isNaN(f)&&(f=U5/2),I2[c.dataIndex]=f,s+=f*2});var u=(2*U5-s)/o/2,h=0;t.eachNode(function(c){var d=u+I2[c.dataIndex];h+=d,(!c.getLayout()||!c.getLayout().fixed)&&c.setLayout([i*Math.cos(h)+n,i*Math.sin(h)+a]),h+=d})}};function j$(e,t,r,i){var n=e.getGraphicEl();if(n){var a=e.getModel(),o=a.get(["label","rotate"])||0,s=n.getSymbolPath();if(t){var l=e.getLayout(),u=Math.atan2(l[1]-i,l[0]-r);u<0&&(u=Math.PI*2+u);var h=l[0]<r;h&&(u=u-Math.PI);var c=h?"left":"right";s.setTextConfig({rotation:-u,position:c,origin:"center"});var d=s.ensureState("emphasis");ae(d.textConfig||(d.textConfig={}),{position:c})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function rLe(e){e.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&aE(t,"symbolSize")})}var Lc=tA;function iLe(e,t,r){for(var i=e,n=t,a=r.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],u=r.gravity==null?.1:r.gravity,h=0;h<i.length;h++){var c=i[h];c.p||(c.p=jh(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),c.pp=ls(c.p),c.edges=null}var d=r.friction==null?.6:r.friction,f=d,p,v;return{warmUp:function(){f=d*.8},setFixed:function(g){i[g].fixed=!0},setUnfixed:function(g){i[g].fixed=!1},beforeStep:function(g){p=g},afterStep:function(g){v=g},step:function(g){p&&p(i,n);for(var m=[],y=i.length,_=0;_<n.length;_++){var x=n[_];if(!x.ignoreForceLayout){var w=x.n1,b=x.n2;Ju(m,b.p,w.p);var S=rA(m)-x.d,M=b.w/(w.w+b.w);isNaN(M)&&(M=0),sf(m,m),!w.fixed&&Lc(w.p,w.p,m,M*S*f),!b.fixed&&Lc(b.p,b.p,m,-(1-M)*S*f)}}for(var _=0;_<y;_++){var A=i[_];A.fixed||(Ju(m,l,A.p),Lc(A.p,A.p,m,u*f))}for(var _=0;_<y;_++)for(var w=i[_],T=_+1;T<y;T++){var b=i[T];Ju(m,b.p,w.p);var S=rA(m);S===0&&(v0e(m,Math.random()-.5,Math.random()-.5),S=1);var C=(w.rep+b.rep)/S/S;!w.fixed&&Lc(w.pp,w.pp,m,C),!b.fixed&&Lc(b.pp,b.pp,m,-C)}for(var D=[],_=0;_<y;_++){var A=i[_];A.fixed||(Ju(D,A.p,A.pp),Lc(A.p,A.p,D,f),pi(A.pp,A.p))}f=f*.992;var P=f<.01;v&&v(i,n,P),g&&g(P)}}}function nLe(e){e.eachSeriesByType("graph",function(t){var r=t.coordinateSystem;if(!(r&&r.type!=="view"))if(t.get("layout")==="force"){var i=t.preservedPoints||{},n=t.getGraph(),a=n.data,o=n.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?a.each(function(_){var x=a.getId(_);a.setItemLayout(_,i[x]||[NaN,NaN])}):!l||l==="none"?H$(t):l==="circular"&&aE(t,"value");var u=a.getDataExtent("value"),h=o.getDataExtent("value"),c=s.get("repulsion"),d=s.get("edgeLength"),f=ue(c)?c:[c,c],p=ue(d)?d:[d,d];p=[p[1],p[0]];var v=a.mapArray("value",function(_,x){var w=a.getItemLayout(x),b=mt(_,u,f);return isNaN(b)&&(b=(f[0]+f[1])/2),{w:b,rep:b,fixed:a.getItemModel(x).get("fixed"),p:!w||isNaN(w[0])||isNaN(w[1])?null:w}}),g=o.mapArray("value",function(_,x){var w=n.getEdgeByIndex(x),b=mt(_,h,p);isNaN(b)&&(b=(p[0]+p[1])/2);var S=w.getModel(),M=ss(w.getModel().get(["lineStyle","curveness"]),-iE(w,t,x,!0),0);return{n1:v[w.node1.dataIndex],n2:v[w.node2.dataIndex],d:b,curveness:M,ignoreForceLayout:S.get("ignoreForceLayout")}}),m=r.getBoundingRect(),y=iLe(v,g,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});y.beforeStep(function(_,x){for(var w=0,b=_.length;w<b;w++)_[w].fixed&&pi(_[w].p,n.getNodeByIndex(w).getLayout())}),y.afterStep(function(_,x,w){for(var b=0,S=_.length;b<S;b++)_[b].fixed||n.getNodeByIndex(b).setLayout(_[b].p),i[a.getId(b)]=_[b].p;for(var b=0,S=x.length;b<S;b++){var M=x[b],A=n.getEdgeByIndex(b),T=M.n1.p,C=M.n2.p,D=A.getLayout();D=D?D.slice():[],D[0]=D[0]||[],D[1]=D[1]||[],pi(D[0],T),pi(D[1],C),+M.curveness&&(D[2]=[(T[0]+C[0])/2-(T[1]-C[1])*M.curveness,(T[1]+C[1])/2-(C[0]-T[0])*M.curveness]),A.setLayout(D)}}),t.forceLayout=y,t.preservedPoints=i,y.step()}else t.forceLayout=null})}function aLe(e,t,r){var i=ae(e.getBoxLayoutParams(),{aspect:r});return br(i,{width:t.getWidth(),height:t.getHeight()})}function oLe(e,t){var r=[];return e.eachSeriesByType("graph",function(i){var n=i.get("coordinateSystem");if(!n||n==="view"){var a=i.getData(),o=a.mapArray(function(g){var m=a.getItemModel(g);return[+m.get("x"),+m.get("y")]}),s=[],l=[];Wx(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),h=aLe(i,t,u);isNaN(u)&&(s=[h.x,h.y],l=[h.x+h.width,h.y+h.height]);var c=l[0]-s[0],d=l[1]-s[1],f=h.width,p=h.height,v=i.coordinateSystem=new rm;v.zoomLimit=i.get("scaleLimit"),v.setBoundingRect(s[0],s[1],c,d),v.setViewRect(h.x,h.y,f,p),v.setCenter(i.get("center"),t),v.setZoom(i.get("zoom")),r.push(v)}}),r}var G5=Nr.prototype,O2=Yx.prototype,W$=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(W$);function R2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var sLe=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-line",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new W$},t.prototype.buildPath=function(r,i){R2(i)?G5.buildPath.call(this,r,i):O2.buildPath.call(this,r,i)},t.prototype.pointAt=function(r){return R2(this.shape)?G5.pointAt.call(this,r):O2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var i=this.shape,n=R2(i)?[i.x2-i.x1,i.y2-i.y1]:O2.tangentAt.call(this,r);return sf(n,n)},t}(qe);const lLe=sLe;var z2=["fromSymbol","toSymbol"];function H5(e){return"_"+e+"Type"}function j5(e,t,r){var i=t.getItemVisual(r,e);if(!(!i||i==="none")){var n=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),o=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=$g(n),u=bf(o||0,l),h=vr(i,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return h.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,h.name=e,h}}function uLe(e){var t=new lLe({name:"line",subPixelOptimize:!0});return pC(t.shape,e),t}function pC(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var hLe=function(e){Y(t,e);function t(r,i,n){var a=e.call(this)||this;return a._createLine(r,i,n),a}return t.prototype._createLine=function(r,i,n){var a=r.hostModel,o=r.getItemLayout(i),s=uLe(o);s.shape.percent=0,Ut(s,{shape:{percent:1}},a,i),this.add(s),I(z2,function(l){var u=j5(l,r,i);this.add(u),this[H5(l)]=r.getItemVisual(i,l)},this),this._updateCommonStl(r,i,n)},t.prototype.updateData=function(r,i,n){var a=r.hostModel,o=this.childOfName("line"),s=r.getItemLayout(i),l={shape:{}};pC(l.shape,s),ut(o,l,a,i),I(z2,function(u){var h=r.getItemVisual(i,u),c=H5(u);if(this[c]!==h){this.remove(this.childOfName(u));var d=j5(u,r,i);this.add(d)}this[c]=h},this),this._updateCommonStl(r,i,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,i,n){var a=r.hostModel,o=this.childOfName("line"),s=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,u=n&&n.selectLineStyle,h=n&&n.labelStatesModels,c=n&&n.emphasisDisabled,d=n&&n.focus,f=n&&n.blurScope;if(!n||r.hasItemOption){var p=r.getItemModel(i),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),c=v.get("disabled"),d=v.get("focus"),f=v.get("blurScope"),h=Pr(p)}var g=r.getItemVisual(i,"style"),m=g.stroke;o.useStyle(g),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,I(z2,function(b){var S=this.childOfName(b);if(S){S.setColor(m),S.style.opacity=g.opacity;for(var M=0;M<Si.length;M++){var A=Si[M],T=o.getState(A);if(T){var C=T.style||{},D=S.ensureState(A),P=D.style||(D.style={});C.stroke!=null&&(P[S.__isEmptyBrush?"stroke":"fill"]=C.stroke),C.opacity!=null&&(P.opacity=C.opacity)}}S.markRedraw()}},this);var y=a.getRawValue(i);Wr(this,h,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(b,S){return a.getFormattedLabel(b,S,r.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(y==null?r.getName(i):isFinite(y)?Qt(y):y)+""});var _=this.getTextContent();if(_){var x=h.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=x.get("position")||"middle";var w=x.get("distance");ue(w)||(w=[w,w]),_.__labelDistance=w}this.setTextConfig({position:null,local:!0,inside:!1}),Zt(this,d,f,c)},t.prototype.highlight=function(){xs(this)},t.prototype.downplay=function(){bs(this)},t.prototype.updateLayout=function(r,i){this.setLinePoints(r.getItemLayout(i))},t.prototype.setLinePoints=function(r){var i=this.childOfName("line");pC(i.shape,r),i.dirty()},t.prototype.beforeUpdate=function(){var r=this,i=r.childOfName("fromSymbol"),n=r.childOfName("toSymbol"),a=r.getTextContent();if(!i&&!n&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,h=l.pointAt(0),c=l.pointAt(u),d=Ju([],c,h);sf(d,d);function f(T,C){var D=T.__specifiedRotation;if(D==null){var P=l.tangentAt(C);T.attr("rotation",(C===1?-1:1)*Math.PI/2-Math.atan2(P[1],P[0]))}else T.attr("rotation",D)}if(i&&(i.setPosition(h),f(i,0),i.scaleX=i.scaleY=o*u,i.markRedraw()),n&&(n.setPosition(c),f(n,1),n.scaleX=n.scaleY=o*u,n.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var p=void 0,v=void 0,g=a.__labelDistance,m=g[0]*o,y=g[1]*o,_=u/2,x=l.tangentAt(_),w=[x[1],-x[0]],b=l.pointAt(_);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var S=x[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var M=-Math.atan2(x[1],x[0]);c[0]<h[0]&&(M=Math.PI+M),a.rotation=M}var A=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-y,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=y,v="top";break;default:A=0,v="middle"}switch(a.__position){case"end":a.x=d[0]*m+c[0],a.y=d[1]*y+c[1],p=d[0]>.8?"left":d[0]<-.8?"right":"center",v=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":a.x=-d[0]*m+h[0],a.y=-d[1]*y+h[1],p=d[0]>.8?"right":d[0]<-.8?"left":"center",v=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=m*S+h[0],a.y=h[1]+A,p=x[0]<0?"right":"left",a.originX=-m*S,a.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=b[0],a.y=b[1]+A,p="center",a.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-m*S+c[0],a.y=c[1]+A,p=x[0]>=0?"right":"left",a.originX=m*S,a.originY=-A;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||v,align:a.__align||p})}},t}(Ie);const oE=hLe;var cLe=function(){function e(t){this.group=new Ie,this._LineCtor=t||oE}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var i=this,n=i.group,a=i._lineData;i._lineData=t,a||n.removeAll();var o=W5(t);t.diff(a).add(function(s){r._doAdd(t,s,o)}).update(function(s,l){r._doUpdate(a,t,l,s,o)}).remove(function(s){n.remove(a.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,i){r.updateLayout(t,i)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=W5(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function i(s){!s.isGroup&&!dLe(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var a=r.getItemLayout(n);if(N2(a)){var o=new this._LineCtor(r,n,this._seriesScope);o.traverse(i),this.group.add(o),r.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){Xl(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,i){var n=t.getItemLayout(r);if(N2(n)){var a=new this._LineCtor(t,r,i);t.setItemGraphicEl(r,a),this.group.add(a)}},e.prototype._doUpdate=function(t,r,i,n,a){var o=t.getItemGraphicEl(i);if(!N2(r.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(r,n,a):o=new this._LineCtor(r,n,a),r.setItemGraphicEl(n,o),this.group.add(o)},e}();function dLe(e){return e.animators&&e.animators.length>0}function W5(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:Pr(t)}}function $5(e){return isNaN(e[0])||isNaN(e[1])}function N2(e){return e&&!$5(e[0])&&!$5(e[1])}const sE=cLe;var k2=[],B2=[],F2=[],Ec=Or,V2=ph,q5=Math.abs;function X5(e,t,r){for(var i=e[0],n=e[1],a=e[2],o=1/0,s,l=r*r,u=.1,h=.1;h<=.9;h+=.1){k2[0]=Ec(i[0],n[0],a[0],h),k2[1]=Ec(i[1],n[1],a[1],h);var c=q5(V2(k2,t)-l);c<o&&(o=c,s=h)}for(var d=0;d<32;d++){var f=s+u;B2[0]=Ec(i[0],n[0],a[0],s),B2[1]=Ec(i[1],n[1],a[1],s),F2[0]=Ec(i[0],n[0],a[0],f),F2[1]=Ec(i[1],n[1],a[1],f);var c=V2(B2,t)-l;if(q5(c)<.01)break;var p=V2(F2,t)-l;u/=2,c<0?p>=0?s=s+u:s=s-u:p>=0?s=s-u:s=s+u}return s}function U2(e,t){var r=[],i=Zv,n=[[],[],[]],a=[[],[]],o=[];t/=2,e.eachEdge(function(s,l){var u=s.getLayout(),h=s.getVisual("fromSymbol"),c=s.getVisual("toSymbol");u.__original||(u.__original=[ls(u[0]),ls(u[1])],u[2]&&u.__original.push(ls(u[2])));var d=u.__original;if(u[2]!=null){if(pi(n[0],d[0]),pi(n[1],d[2]),pi(n[2],d[1]),h&&h!=="none"){var f=jp(s.node1),p=X5(n,d[0],f*t);i(n[0][0],n[1][0],n[2][0],p,r),n[0][0]=r[3],n[1][0]=r[4],i(n[0][1],n[1][1],n[2][1],p,r),n[0][1]=r[3],n[1][1]=r[4]}if(c&&c!=="none"){var f=jp(s.node2),p=X5(n,d[1],f*t);i(n[0][0],n[1][0],n[2][0],p,r),n[1][0]=r[1],n[2][0]=r[2],i(n[0][1],n[1][1],n[2][1],p,r),n[1][1]=r[1],n[2][1]=r[2]}pi(u[0],n[0]),pi(u[1],n[2]),pi(u[2],n[1])}else{if(pi(a[0],d[0]),pi(a[1],d[1]),Ju(o,a[1],a[0]),sf(o,o),h&&h!=="none"){var f=jp(s.node1);tA(a[0],a[0],o,f*t)}if(c&&c!=="none"){var f=jp(s.node2);tA(a[1],a[1],o,-f*t)}pi(u[0],a[0]),pi(u[1],a[1])}})}function Y5(e){return e.type==="view"}var fLe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){var n=new Kg,a=new sE,o=this.group;this._controller=new tm(i.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(a.group),this._symbolDraw=n,this._lineDraw=a,this._firstRender=!0},t.prototype.render=function(r,i,n){var a=this,o=r.coordinateSystem;this._model=r;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(Y5(o)){var h={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(h):ut(u,h,r)}U2(r.getGraph(),Hp(r));var c=r.getData();s.updateData(c);var d=r.getEdgeData();l.updateData(d),this._updateNodeAndLinkScale(),this._updateController(r,i,n),clearTimeout(this._layoutTimeout);var f=r.forceLayout,p=r.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,p);var v=r.get("layout");c.graph.eachNode(function(_){var x=_.dataIndex,w=_.getGraphicEl(),b=_.getModel();if(w){w.off("drag").off("dragend");var S=b.get("draggable");S&&w.on("drag",function(A){switch(v){case"force":f.warmUp(),!a._layouting&&a._startForceLayoutIteration(f,p),f.setFixed(x),c.setItemLayout(x,[w.x,w.y]);break;case"circular":c.setItemLayout(x,[w.x,w.y]),_.setLayout({fixed:!0},!0),aE(r,"symbolSize",_,[A.offsetX,A.offsetY]),a.updateLayout(r);break;case"none":default:c.setItemLayout(x,[w.x,w.y]),nE(r.getGraph(),r),a.updateLayout(r);break}}).on("dragend",function(){f&&f.setUnfixed(x)}),w.setDraggable(S,!!b.get("cursor"));var M=b.get(["emphasis","focus"]);M==="adjacency"&&(Re(w).focus=_.getAdjacentDataIndices())}}),c.graph.eachEdge(function(_){var x=_.getGraphicEl(),w=_.getModel().get(["emphasis","focus"]);x&&w==="adjacency"&&(Re(x).focus={edge:[_.dataIndex],node:[_.node1.dataIndex,_.node2.dataIndex]})});var g=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),m=c.getLayout("cx"),y=c.getLayout("cy");c.graph.eachNode(function(_){j$(_,g,m,y)}),this._firstRender=!1},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(r,i){var n=this;(function a(){r.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(i?n._layoutTimeout=setTimeout(a,16):a())})})()},t.prototype._updateController=function(r,i,n){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(u,h,c){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(h,c)&&!vb(u,n,r)}),!Y5(r.coordinateSystem)){o.disable();return}o.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){XL(s,u.dx,u.dy),n.dispatchAction({seriesId:r.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){YL(s,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(),U2(r.getGraph(),Hp(r)),a._lineDraw.updateLayout(),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var r=this._model,i=r.getData(),n=Hp(r);i.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(n)})},t.prototype.updateLayout=function(r){U2(r.getGraph(),Hp(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(r,i){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(kt);const pLe=fLe;function Ic(e){return"_EC_"+e}var vLe=function(){function e(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(t,r){t=t==null?""+r:""+t;var i=this._nodesMap;if(!i[Ic(t)]){var n=new Fu(t,r);return n.hostGraph=this,this.nodes.push(n),i[Ic(t)]=n,n}},e.prototype.getNodeByIndex=function(t){var r=this.data.getRawIndex(t);return this.nodes[r]},e.prototype.getNodeById=function(t){return this._nodesMap[Ic(t)]},e.prototype.addEdge=function(t,r,i){var n=this._nodesMap,a=this._edgesMap;if(st(t)&&(t=this.nodes[t]),st(r)&&(r=this.nodes[r]),t instanceof Fu||(t=n[Ic(t)]),r instanceof Fu||(r=n[Ic(r)]),!(!t||!r)){var o=t.id+"-"+r.id,s=new $$(t,r,i);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),r.inEdges.push(s)),t.edges.push(s),t!==r&&r.edges.push(s),this.edges.push(s),a[o]=s,s}},e.prototype.getEdgeByIndex=function(t){var r=this.edgeData.getRawIndex(t);return this.edges[r]},e.prototype.getEdge=function(t,r){t instanceof Fu&&(t=t.id),r instanceof Fu&&(r=r.id);var i=this._edgesMap;return this._directed?i[t+"-"+r]:i[t+"-"+r]||i[r+"-"+t]},e.prototype.eachNode=function(t,r){for(var i=this.nodes,n=i.length,a=0;a<n;a++)i[a].dataIndex>=0&&t.call(r,i[a],a)},e.prototype.eachEdge=function(t,r){for(var i=this.edges,n=i.length,a=0;a<n;a++)i[a].dataIndex>=0&&i[a].node1.dataIndex>=0&&i[a].node2.dataIndex>=0&&t.call(r,i[a],a)},e.prototype.breadthFirstTraverse=function(t,r,i,n){if(r instanceof Fu||(r=this._nodesMap[Ic(r)]),!!r){for(var a=i==="out"?"outEdges":i==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(n,r,null))for(var s=[r];s.length;)for(var l=s.shift(),u=l[a],o=0;o<u.length;o++){var h=u[o],c=h.node1===l?h.node2:h.node1;if(!c.__visited){if(t.call(n,c,l))return;s.push(c),c.__visited=!0}}}},e.prototype.update=function(){for(var t=this.data,r=this.edgeData,i=this.nodes,n=this.edges,a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)i[t.getRawIndex(a)].dataIndex=a;r.filterSelf(function(s){var l=n[r.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=n.length;a<o;a++)n[a].dataIndex=-1;for(var a=0,o=r.count();a<o;a++)n[r.getRawIndex(a)].dataIndex=a},e.prototype.clone=function(){for(var t=new e(this._directed),r=this.nodes,i=this.edges,n=0;n<r.length;n++)t.addNode(r[n].id,r[n].dataIndex);for(var n=0;n<i.length;n++){var a=i[n];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t},e}(),Fu=function(){function e(t,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=r??-1}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,i=r.data.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},r=0;r<this.edges.length;r++){var i=this.edges[r];i.dataIndex<0||(t.edge.push(i.dataIndex),t.node.push(i.node1.dataIndex,i.node2.dataIndex))}return t},e}(),$$=function(){function e(t,r,i){this.dataIndex=-1,this.node1=t,this.node2=r,this.dataIndex=i??-1}return e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,i=r.edgeData.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e}();function q$(e,t){return{getValue:function(r){var i=this[e][t];return i.getStore().get(i.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,i){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,r,i)},getVisual:function(r){return this[e][t].getItemVisual(this.dataIndex,r)},setLayout:function(r,i){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,r,i)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}gr(Fu,q$("hostGraph","data"));gr($$,q$("hostGraph","edgeData"));const gLe=vLe;function X$(e,t,r,i,n){for(var a=new gLe(i),o=0;o<e.length;o++)a.addNode(zr(e[o].id,e[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<t.length;o++){var h=t[o],c=h.source,d=h.target;a.addEdge(c,d,u)&&(l.push(h),s.push(zr(xr(h.id,null),c+" > "+d)),u++)}var f=r.get("coordinateSystem"),p;if(f==="cartesian2d"||f==="polar")p=Ds(e,r);else{var v=jg.get(f),g=v?v.dimensions||[]:[];We(g,"value")<0&&g.concat(["value"]);var m=qg(e,{coordDimensions:g,encodeDefine:r.getEncode()}).dimensions;p=new xi(m,r),p.initData(e)}var y=new xi(["value"],r);return y.initData(l,s),n&&n(p,y),P$({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var mLe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments);var i=this;function n(){return i._categoriesData}this.legendVisualProvider=new em(n,n),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(r){e.prototype.mergeDefaultAndTheme.apply(this,arguments),Lh(r,"edgeLabel",["show"])},t.prototype.getInitialData=function(r,i){var n=r.edges||r.links||[],a=r.data||r.nodes||[],o=this;if(a&&n){JPe(this);var s=X$(a,n,this,!0,l);return I(s.edges,function(u){QPe(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,h){u.wrapMethod("getItemModel",function(p){var v=o._categoriesModels,g=p.getShallow("category"),m=v[g];return m&&(m.parentModel=p.parentModel,p.parentModel=m),p});var c=Nt.prototype.getModel;function d(p,v){var g=c.call(this,p,v);return g.resolveParentPath=f,g}h.wrapMethod("getItemModel",function(p){return p.resolveParentPath=f,p.getModel=d,p});function f(p){if(p&&(p[0]==="label"||p[1]==="label")){var v=p.slice();return p[0]==="label"?v[0]="edgeLabel":p[1]==="label"&&(v[1]="edgeLabel"),v}return p}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(r,i,n){if(n==="edge"){var a=this.getData(),o=this.getDataParams(r,n),s=a.graph.getEdgeByIndex(r),l=a.getName(s.node1.dataIndex),u=a.getName(s.node2.dataIndex),h=[];return l!=null&&h.push(l),u!=null&&h.push(u),Lr("nameValue",{name:h.join(" > "),value:o.value,noValue:o.value==null})}var c=p9({series:this,dataIndex:r,multipleSeries:i});return c},t.prototype._updateCategoriesData=function(){var r=ce(this.option.categories||[],function(n){return n.value!=null?n:ae({value:0},n)}),i=new xi(["value"],this);i.initData(r),this._categoriesData=i,this._categoriesModels=i.mapArray(function(n){return i.getItemModel(n)})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}($t);const yLe=mLe;var _Le={type:"graphRoam",event:"graphRoam",update:"none"};function xLe(e){e.registerChartView(pLe),e.registerSeriesModel(yLe),e.registerProcessor(qPe),e.registerVisual(XPe),e.registerVisual(YPe),e.registerLayout(eLe),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,rLe),e.registerLayout(nLe),e.registerCoordinateSystem("graphView",{dimensions:rm.dimensions,create:oLe}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},sr),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},sr),e.registerAction(_Le,function(t,r,i){r.eachComponent({mainType:"series",query:t},function(n){var a=n.coordinateSystem,o=KL(a,t,void 0,i);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var bLe=function(){function e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return e}(),wLe=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="pointer",i}return t.prototype.getDefaultShape=function(){return new bLe},t.prototype.buildPath=function(r,i){var n=Math.cos,a=Math.sin,o=i.r,s=i.width,l=i.angle,u=i.x-n(l)*s*(s>=o/3?1:2),h=i.y-a(l)*s*(s>=o/3?1:2);l=i.angle-Math.PI/2,r.moveTo(u,h),r.lineTo(i.x+n(l)*s,i.y+a(l)*s),r.lineTo(i.x+n(i.angle)*o,i.y+a(i.angle)*o),r.lineTo(i.x-n(l)*s,i.y-a(l)*s),r.lineTo(u,h)},t}(qe);const SLe=wLe;function MLe(e,t){var r=e.get("center"),i=t.getWidth(),n=t.getHeight(),a=Math.min(i,n),o=ve(r[0],t.getWidth()),s=ve(r[1],t.getHeight()),l=ve(e.get("radius"),a/2);return{cx:o,cy:s,r:l}}function a0(e,t){var r=e==null?"":e+"";return t&&(ge(t)?r=t.replace("{value}",r):Ae(t)&&(r=t(e))),r}var TLe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this.group.removeAll();var a=r.get(["axisLine","lineStyle","color"]),o=MLe(r,n);this._renderMain(r,i,n,a,o),this._data=r.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(r,i,n,a,o){var s=this.group,l=r.get("clockwise"),u=-r.get("startAngle")/180*Math.PI,h=-r.get("endAngle")/180*Math.PI,c=r.getModel("axisLine"),d=c.get("roundCap"),f=d?O_:$i,p=c.get("show"),v=c.getModel("lineStyle"),g=v.get("width"),m=[u,h];MW(m,!l),u=m[0],h=m[1];for(var y=h-u,_=u,x=[],w=0;p&&w<a.length;w++){var b=Math.min(Math.max(a[w][0],0),1);h=u+y*b;var S=new f({shape:{startAngle:_,endAngle:h,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-g,r:o.r},silent:!0});S.setStyle({fill:a[w][1]}),S.setStyle(v.getLineStyle(["color","width"])),x.push(S),_=h}x.reverse(),I(x,function(A){return s.add(A)});var M=function(A){if(A<=0)return a[0][1];var T;for(T=0;T<a.length;T++)if(a[T][0]>=A&&(T===0?0:a[T-1][0])<A)return a[T][1];return a[T-1][1]};this._renderTicks(r,i,n,M,o,u,h,l,g),this._renderTitleAndDetail(r,i,n,M,o),this._renderAnchor(r,o),this._renderPointer(r,i,n,M,o,u,h,l,g)},t.prototype._renderTicks=function(r,i,n,a,o,s,l,u,h){for(var c=this.group,d=o.cx,f=o.cy,p=o.r,v=+r.get("min"),g=+r.get("max"),m=r.getModel("splitLine"),y=r.getModel("axisTick"),_=r.getModel("axisLabel"),x=r.get("splitNumber"),w=y.get("splitNumber"),b=ve(m.get("length"),p),S=ve(y.get("length"),p),M=s,A=(l-s)/x,T=A/w,C=m.getModel("lineStyle").getLineStyle(),D=y.getModel("lineStyle").getLineStyle(),P=m.get("distance"),E,O,z=0;z<=x;z++){if(E=Math.cos(M),O=Math.sin(M),m.get("show")){var B=P?P+h:h,N=new Nr({shape:{x1:E*(p-B)+d,y1:O*(p-B)+f,x2:E*(p-b-B)+d,y2:O*(p-b-B)+f},style:C,silent:!0});C.stroke==="auto"&&N.setStyle({stroke:a(z/x)}),c.add(N)}if(_.get("show")){var B=_.get("distance")+P,F=a0(Qt(z/x*(g-v)+v),_.get("formatter")),G=a(z/x),H=E*(p-b-B)+d,$=O*(p-b-B)+f,Z=_.get("rotate"),X=0;Z==="radial"?(X=-M+2*Math.PI,X>Math.PI/2&&(X+=Math.PI)):Z==="tangential"?X=-M-Math.PI/2:st(Z)&&(X=Z*Math.PI/180),X===0?c.add(new ot({style:zt(_,{text:F,x:H,y:$,verticalAlign:O<-.8?"top":O>.8?"bottom":"middle",align:E<-.4?"left":E>.4?"right":"center"},{inheritColor:G}),silent:!0})):c.add(new ot({style:zt(_,{text:F,x:H,y:$,verticalAlign:"middle",align:"center"},{inheritColor:G}),silent:!0,originX:H,originY:$,rotation:X}))}if(y.get("show")&&z!==x){var B=y.get("distance");B=B?B+h:h;for(var ne=0;ne<=w;ne++){E=Math.cos(M),O=Math.sin(M);var te=new Nr({shape:{x1:E*(p-B)+d,y1:O*(p-B)+f,x2:E*(p-S-B)+d,y2:O*(p-S-B)+f},silent:!0,style:D});D.stroke==="auto"&&te.setStyle({stroke:a((z+ne/w)/x)}),c.add(te),M+=T}M-=T}else M+=A}},t.prototype._renderPointer=function(r,i,n,a,o,s,l,u,h){var c=this.group,d=this._data,f=this._progressEls,p=[],v=r.get(["pointer","show"]),g=r.getModel("progress"),m=g.get("show"),y=r.getData(),_=y.mapDimension("value"),x=+r.get("min"),w=+r.get("max"),b=[x,w],S=[s,l];function M(T,C){var D=y.getItemModel(T),P=D.getModel("pointer"),E=ve(P.get("width"),o.r),O=ve(P.get("length"),o.r),z=r.get(["pointer","icon"]),B=P.get("offsetCenter"),N=ve(B[0],o.r),F=ve(B[1],o.r),G=P.get("keepAspect"),H;return z?H=vr(z,N-E/2,F-O,E,O,null,G):H=new SLe({shape:{angle:-Math.PI/2,width:E,r:O,x:N,y:F}}),H.rotation=-(C+Math.PI/2),H.x=o.cx,H.y=o.cy,H}function A(T,C){var D=g.get("roundCap"),P=D?O_:$i,E=g.get("overlap"),O=E?g.get("width"):h/y.count(),z=E?o.r-O:o.r-(T+1)*O,B=E?o.r:o.r-T*O,N=new P({shape:{startAngle:s,endAngle:C,cx:o.cx,cy:o.cy,clockwise:u,r0:z,r:B}});return E&&(N.z2=w-y.get(_,T)%w),N}(m||v)&&(y.diff(d).add(function(T){var C=y.get(_,T);if(v){var D=M(T,s);Ut(D,{rotation:-((isNaN(+C)?S[0]:mt(C,b,S,!0))+Math.PI/2)},r),c.add(D),y.setItemGraphicEl(T,D)}if(m){var P=A(T,s),E=g.get("clip");Ut(P,{shape:{endAngle:mt(C,b,S,E)}},r),c.add(P),AA(r.seriesIndex,y.dataType,T,P),p[T]=P}}).update(function(T,C){var D=y.get(_,T);if(v){var P=d.getItemGraphicEl(C),E=P?P.rotation:s,O=M(T,E);O.rotation=E,ut(O,{rotation:-((isNaN(+D)?S[0]:mt(D,b,S,!0))+Math.PI/2)},r),c.add(O),y.setItemGraphicEl(T,O)}if(m){var z=f[C],B=z?z.shape.endAngle:s,N=A(T,B),F=g.get("clip");ut(N,{shape:{endAngle:mt(D,b,S,F)}},r),c.add(N),AA(r.seriesIndex,y.dataType,T,N),p[T]=N}}).execute(),y.each(function(T){var C=y.getItemModel(T),D=C.getModel("emphasis"),P=D.get("focus"),E=D.get("blurScope"),O=D.get("disabled");if(v){var z=y.getItemGraphicEl(T),B=y.getItemVisual(T,"style"),N=B.fill;if(z instanceof $r){var F=z.style;z.useStyle(ae({image:F.image,x:F.x,y:F.y,width:F.width,height:F.height},B))}else z.useStyle(B),z.type!=="pointer"&&z.setColor(N);z.setStyle(C.getModel(["pointer","itemStyle"]).getItemStyle()),z.style.fill==="auto"&&z.setStyle("fill",a(mt(y.get(_,T),b,[0,1],!0))),z.z2EmphasisLift=0,jr(z,C),Zt(z,P,E,O)}if(m){var G=p[T];G.useStyle(y.getItemVisual(T,"style")),G.setStyle(C.getModel(["progress","itemStyle"]).getItemStyle()),G.z2EmphasisLift=0,jr(G,C),Zt(G,P,E,O)}}),this._progressEls=p)},t.prototype._renderAnchor=function(r,i){var n=r.getModel("anchor"),a=n.get("show");if(a){var o=n.get("size"),s=n.get("icon"),l=n.get("offsetCenter"),u=n.get("keepAspect"),h=vr(s,i.cx-o/2+ve(l[0],i.r),i.cy-o/2+ve(l[1],i.r),o,o,null,u);h.z2=n.get("showAbove")?1:0,h.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(h)}},t.prototype._renderTitleAndDetail=function(r,i,n,a,o){var s=this,l=r.getData(),u=l.mapDimension("value"),h=+r.get("min"),c=+r.get("max"),d=new Ie,f=[],p=[],v=r.isAnimationEnabled(),g=r.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){f[m]=new ot({silent:!0}),p[m]=new ot({silent:!0})}).update(function(m,y){f[m]=s._titleEls[y],p[m]=s._detailEls[y]}).execute(),l.each(function(m){var y=l.getItemModel(m),_=l.get(u,m),x=new Ie,w=a(mt(_,[h,c],[0,1],!0)),b=y.getModel("title");if(b.get("show")){var S=b.get("offsetCenter"),M=o.cx+ve(S[0],o.r),A=o.cy+ve(S[1],o.r),T=f[m];T.attr({z2:g?0:2,style:zt(b,{x:M,y:A,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:w})}),x.add(T)}var C=y.getModel("detail");if(C.get("show")){var D=C.get("offsetCenter"),P=o.cx+ve(D[0],o.r),E=o.cy+ve(D[1],o.r),O=ve(C.get("width"),o.r),z=ve(C.get("height"),o.r),B=r.get(["progress","show"])?l.getItemVisual(m,"style").fill:w,T=p[m],N=C.get("formatter");T.attr({z2:g?0:2,style:zt(C,{x:P,y:E,text:a0(_,N),width:isNaN(O)?null:O,height:isNaN(z)?null:z,align:"center",verticalAlign:"middle"},{inheritColor:B})}),g8(T,{normal:C},_,function(G){return a0(G,N)}),v&&m8(T,m,l,r,{getFormattedLabel:function(G,H,$,Z,X,ne){return a0(ne?ne.interpolatedValue:_,N)}}),x.add(T)}d.add(x)}),this.group.add(d),this._titleEls=f,this._detailEls=p},t.type="gauge",t}(kt);const ALe=TLe;var CLe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="itemStyle",r}return t.prototype.getInitialData=function(r,i){return wf(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}($t);const DLe=CLe;function PLe(e){e.registerChartView(ALe),e.registerSeriesModel(DLe)}var LLe=["itemStyle","opacity"],ELe=function(e){Y(t,e);function t(r,i){var n=e.call(this)||this,a=n,o=new Yi,s=new ot;return a.setTextContent(s),n.setTextGuideLine(o),n.updateData(r,i,!0),n}return t.prototype.updateData=function(r,i,n){var a=this,o=r.hostModel,s=r.getItemModel(i),l=r.getItemLayout(i),u=s.getModel("emphasis"),h=s.get(LLe);h=h??1,n||Ca(a),a.useStyle(r.getItemVisual(i,"style")),a.style.lineJoin="round",n?(a.setShape({points:l.points}),a.style.opacity=0,Ut(a,{style:{opacity:h}},o,i)):ut(a,{style:{opacity:h},shape:{points:l.points}},o,i),jr(a,s),this._updateLabel(r,i),Zt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(r,i){var n=this,a=this.getTextGuideLine(),o=n.getTextContent(),s=r.hostModel,l=r.getItemModel(i),u=r.getItemLayout(i),h=u.label,c=r.getItemVisual(i,"style"),d=c.fill;Wr(o,Pr(l),{labelFetcher:r.hostModel,labelDataIndex:i,defaultOpacity:c.opacity,defaultText:r.getName(i)},{normal:{align:h.textAlign,verticalAlign:h.verticalAlign}}),n.setTextConfig({local:!0,inside:!!h.inside,insideStroke:d,outsideFill:d});var f=h.linePoints;a.setShape({points:f}),n.textGuideLineConfig={anchor:f?new Fe(f[0][0],f[0][1]):null},ut(o,{style:{x:h.x,y:h.y}},s,i),o.attr({rotation:h.rotation,originX:h.x,originY:h.y,z2:10}),FL(n,VL(l),{stroke:d})},t}(qi),ILe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var u=new ELe(a,l);a.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var h=o.getItemGraphicEl(u);h.updateData(a,l),s.add(h),a.setItemGraphicEl(l,h)}).remove(function(l){var u=o.getItemGraphicEl(l);ig(u,r,l)}).execute(),this._data=a},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(kt);const OLe=ILe;var RLe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new em(me(this.getData,this),me(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.getInitialData=function(r,i){return wf(this,{coordDimensions:["value"],encodeDefaulter:Ne(vL,this)})},t.prototype._defaultLabelLine=function(r){Lh(r,"labelLine",["show"]);var i=r.labelLine,n=r.emphasis.labelLine;i.show=i.show&&r.label.show,n.show=n.show&&r.emphasis.label.show},t.prototype.getDataParams=function(r){var i=this.getData(),n=e.prototype.getDataParams.call(this,r),a=i.mapDimension("value"),o=i.getSum(a);return n.percent=o?+(i.get(a,r)/o*100).toFixed(2):0,n.$vars.push("percent"),n},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}($t);const zLe=RLe;function NLe(e,t){return br(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function kLe(e,t){for(var r=e.mapDimension("value"),i=e.mapArray(r,function(l){return l}),n=[],a=t==="ascending",o=0,s=e.count();o<s;o++)n[o]=o;return Ae(t)?n.sort(t):t!=="none"&&n.sort(function(l,u){return a?i[l]-i[u]:i[u]-i[l]}),n}function BLe(e){var t=e.hostModel,r=t.get("orient");e.each(function(i){var n=e.getItemModel(i),a=n.getModel("label"),o=a.get("position"),s=n.getModel("labelLine"),l=e.getItemLayout(i),u=l.points,h=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",c,d,f,p;if(h)o==="insideLeft"?(d=(u[0][0]+u[3][0])/2+5,f=(u[0][1]+u[3][1])/2,c="left"):o==="insideRight"?(d=(u[1][0]+u[2][0])/2-5,f=(u[1][1]+u[2][1])/2,c="right"):(d=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,f=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,c="center"),p=[[d,f],[d,f]];else{var v=void 0,g=void 0,m=void 0,y=void 0,_=s.get("length");o==="left"?(v=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,m=v-_,d=m-5,c="right"):o==="right"?(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,m=v+_,d=m+5,c="left"):o==="top"?(v=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,y=g-_,f=y-5,c="center"):o==="bottom"?(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,y=g+_,f=y+5,c="center"):o==="rightTop"?(v=r==="horizontal"?u[3][0]:u[1][0],g=r==="horizontal"?u[3][1]:u[1][1],r==="horizontal"?(y=g-_,f=y-5,c="center"):(m=v+_,d=m+5,c="top")):o==="rightBottom"?(v=u[2][0],g=u[2][1],r==="horizontal"?(y=g+_,f=y+5,c="center"):(m=v+_,d=m+5,c="bottom")):o==="leftTop"?(v=u[0][0],g=r==="horizontal"?u[0][1]:u[1][1],r==="horizontal"?(y=g-_,f=y-5,c="center"):(m=v-_,d=m-5,c="right")):o==="leftBottom"?(v=r==="horizontal"?u[1][0]:u[3][0],g=r==="horizontal"?u[1][1]:u[2][1],r==="horizontal"?(y=g+_,f=y+5,c="center"):(m=v-_,d=m-5,c="right")):(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,r==="horizontal"?(y=g+_,f=y+5,c="center"):(m=v+_,d=m+5,c="left")),r==="horizontal"?(m=v,d=m):(y=g,f=y),p=[[v,g],[m,y]]}l.label={linePoints:p,x:d,y:f,verticalAlign:"middle",textAlign:c,inside:h}})}function FLe(e,t){e.eachSeriesByType("funnel",function(r){var i=r.getData(),n=i.mapDimension("value"),a=r.get("sort"),o=NLe(r,t),s=r.get("orient"),l=o.width,u=o.height,h=kLe(i,a),c=o.x,d=o.y,f=s==="horizontal"?[ve(r.get("minSize"),u),ve(r.get("maxSize"),u)]:[ve(r.get("minSize"),l),ve(r.get("maxSize"),l)],p=i.getDataExtent(n),v=r.get("min"),g=r.get("max");v==null&&(v=Math.min(p[0],0)),g==null&&(g=p[1]);var m=r.get("funnelAlign"),y=r.get("gap"),_=s==="horizontal"?l:u,x=(_-y*(i.count()-1))/i.count(),w=function(E,O){if(s==="horizontal"){var z=i.get(n,E)||0,B=mt(z,[v,g],f,!0),N=void 0;switch(m){case"top":N=d;break;case"center":N=d+(u-B)/2;break;case"bottom":N=d+(u-B);break}return[[O,N],[O,N+B]]}var F=i.get(n,E)||0,G=mt(F,[v,g],f,!0),H;switch(m){case"left":H=c;break;case"center":H=c+(l-G)/2;break;case"right":H=c+l-G;break}return[[H,O],[H+G,O]]};a==="ascending"&&(x=-x,y=-y,s==="horizontal"?c+=l:d+=u,h=h.reverse());for(var b=0;b<h.length;b++){var S=h[b],M=h[b+1],A=i.getItemModel(S);if(s==="horizontal"){var T=A.get(["itemStyle","width"]);T==null?T=x:(T=ve(T,l),a==="ascending"&&(T=-T));var C=w(S,c),D=w(M,c+T);c+=T+y,i.setItemLayout(S,{points:C.concat(D.slice().reverse())})}else{var P=A.get(["itemStyle","height"]);P==null?P=x:(P=ve(P,u),a==="ascending"&&(P=-P));var C=w(S,d),D=w(M,d+P);d+=P+y,i.setItemLayout(S,{points:C.concat(D.slice().reverse())})}}BLe(i)})}function VLe(e){e.registerChartView(OLe),e.registerSeriesModel(zLe),e.registerLayout(FLe),e.registerProcessor(Qg("funnel"))}var ULe=.3,GLe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._dataGroup=new Ie,r._initialized=!1,r}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(r,i,n,a){this._progressiveEls=null;var o=this._dataGroup,s=r.getData(),l=this._data,u=r.coordinateSystem,h=u.dimensions,c=K5(r);s.diff(l).add(d).update(f).remove(p).execute();function d(g){var m=Z5(s,o,g,h,u);G2(m,s,g,c)}function f(g,m){var y=l.getItemGraphicEl(m),_=Y$(s,g,h,u);s.setItemGraphicEl(g,y),ut(y,{shape:{points:_}},r,g),Ca(y),G2(y,s,g,c)}function p(g){var m=l.getItemGraphicEl(g);o.remove(m)}if(!this._initialized){this._initialized=!0;var v=HLe(u,r,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(v)}this._data=s},t.prototype.incrementalPrepareRender=function(r,i,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(r,i,n){for(var a=i.getData(),o=i.coordinateSystem,s=o.dimensions,l=K5(i),u=this._progressiveEls=[],h=r.start;h<r.end;h++){var c=Z5(a,this._dataGroup,h,s,o);c.incremental=!0,G2(c,a,h,l),u.push(c)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(kt);function HLe(e,t,r){var i=e.model,n=e.getRect(),a=new rt({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),o=i.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),Ut(a,{shape:{width:n.width,height:n.height}},t,r),a}function Y$(e,t,r,i){for(var n=[],a=0;a<r.length;a++){var o=r[a],s=e.get(e.mapDimension(o),t);jLe(s,i.getAxis(o).type)||n.push(i.dataToPoint(s,o))}return n}function Z5(e,t,r,i,n){var a=Y$(e,r,i,n),o=new Yi({shape:{points:a},z2:10});return t.add(o),e.setItemGraphicEl(r,o),o}function K5(e){var t=e.get("smooth",!0);return t===!0&&(t=ULe),t=_s(t),Yv(t)&&(t=0),{smooth:t}}function G2(e,t,r,i){e.useStyle(t.getItemVisual(r,"style")),e.style.fill=null,e.setShape("smooth",i.smooth);var n=t.getItemModel(r),a=n.getModel("emphasis");jr(e,n,"lineStyle"),Zt(e,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function jLe(e,t){return t==="category"?e==null:e==null||isNaN(e)}const WLe=GLe;var $Le=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.getInitialData=function(r,i){return Ds(null,this,{useEncodeDefaulter:me(qLe,null,this)})},t.prototype.getRawIndicesByActiveState=function(r){var i=this.coordinateSystem,n=this.getData(),a=[];return i.eachActiveState(n,function(o,s){r===o&&a.push(n.getRawIndex(s))}),a},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}($t);function qLe(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var r={};return I(t.dimensions,function(i){var n=XLe(i);r[i]=n}),r}}function XLe(e){return+e.replace("dim","")}const YLe=$Le;var ZLe=["lineStyle","opacity"],KLe={seriesType:"parallel",reset:function(e,t){var r=e.coordinateSystem,i={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(n,a){r.eachActiveState(a,function(o,s){var l=i[o];if(o==="normal"&&a.hasItemOption){var u=a.getItemModel(s).get(ZLe,!0);u!=null&&(l=u)}var h=a.ensureUniqueItemVisual(s,"style");h.opacity=l},n.start,n.end)}}}};const JLe=KLe;function QLe(e){eEe(e),tEe(e)}function eEe(e){if(!e.parallel){var t=!1;I(e.series,function(r){r&&r.type==="parallel"&&(t=!0)}),t&&(e.parallel=[{}])}}function tEe(e){var t=Mt(e.parallelAxis);I(t,function(r){if(Pe(r)){var i=r.parallelIndex||0,n=Mt(e.parallel)[i];n&&n.parallelAxisDefault&&Ue(r,n.parallelAxisDefault,!1)}})}var rEe=5,iEe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this._model=r,this._api=n,this._handlers||(this._handlers={},I(nEe,function(a,o){n.getZr().on(o,this._handlers[o]=me(a,this))},this)),xf(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(r,i){lg(this,"_throttledDispatchExpand"),I(this._handlers,function(n,a){i.getZr().off(a,n)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},t.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(ae({type:"parallelAxisExpand"},r))},t.type="parallel",t}(Kt),nEe={mousedown:function(e){H2(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(H2(this,"click")&&t){var r=[e.offsetX,e.offsetY],i=Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2);if(i>rEe)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!(this._mouseDownPoint||!H2(this,"mousemove"))){var t=this._model,r=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),i=r.behavior;i==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(i==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:i==="jump"?null:{duration:0}})}}};function H2(e,t){var r=e._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===t}const aEe=iEe;var oEe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(r){var i=this.option;r&&Ue(i,r,!0),this._initDimensions()},t.prototype.contains=function(r,i){var n=r.get("parallelIndex");return n!=null&&i.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(r){I(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(i){r.hasOwnProperty(i)&&(this.option[i]=r[i])},this)},t.prototype._initDimensions=function(){var r=this.dimensions=[],i=this.parallelAxisIndex=[],n=xt(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);I(n,function(a){r.push("dim"+a.get("dim")),i.push(a.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(nt);const sEe=oEe;var lEe=function(e){Y(t,e);function t(r,i,n,a,o){var s=e.call(this,r,i,n)||this;return s.type=a||"value",s.axisIndex=o,s}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(Ea);const uEe=lEe;function Zh(e,t,r,i,n,a){e=e||0;var o=r[1]-r[0];if(n!=null&&(n=Oc(n,[0,o])),a!=null&&(a=Math.max(a,n??0)),i==="all"){var s=Math.abs(t[1]-t[0]);s=Oc(s,[0,o]),n=a=Oc(s,[n,a]),i=0}t[0]=Oc(t[0],r),t[1]=Oc(t[1],r);var l=j2(t,i);t[i]+=e;var u=n||0,h=r.slice();l.sign<0?h[0]+=u:h[1]-=u,t[i]=Oc(t[i],h);var c;return c=j2(t,i),n!=null&&(c.sign!==l.sign||c.span<n)&&(t[1-i]=t[i]+l.sign*n),c=j2(t,i),a!=null&&c.span>a&&(t[1-i]=t[i]+c.sign*a),t}function j2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function Oc(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var W2=I,Z$=Math.min,K$=Math.max,J5=Math.floor,hEe=Math.ceil,Q5=Qt,cEe=Math.PI,dEe=function(){function e(t,r,i){this.type="parallel",this._axesMap=Me(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,r,i)}return e.prototype._init=function(t,r,i){var n=t.dimensions,a=t.parallelAxisIndex;W2(n,function(o,s){var l=a[s],u=r.getComponent("parallelAxis",l),h=this._axesMap.set(o,new uEe(o,db(u),[0,0],u.get("type"),l)),c=h.type==="category";h.onBand=c&&u.get("boundaryGap"),h.inverse=u.get("inverse"),u.axis=h,h.model=u,h.coordinateSystem=u.coordinateSystem=this},this)},e.prototype.update=function(t,r){this._updateAxesFromSeries(this._model,t)},e.prototype.containPoint=function(t){var r=this._makeLayoutInfo(),i=r.axisBase,n=r.layoutBase,a=r.pixelDimIndex,o=t[1-a],s=t[a];return o>=i&&o<=i+r.axisLength&&s>=n&&s<=n+r.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(t,r){r.eachSeries(function(i){if(t.contains(i,r)){var n=i.getData();W2(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(n,n.mapDimension(a)),Bd(o.scale,o.model)},this)}},this)},e.prototype.resize=function(t,r){this._rect=br(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var t=this._model,r=this._rect,i=["x","y"],n=["width","height"],a=t.get("layout"),o=a==="horizontal"?0:1,s=r[n[o]],l=[0,s],u=this.dimensions.length,h=o0(t.get("axisExpandWidth"),l),c=o0(t.get("axisExpandCount")||0,[0,u]),d=t.get("axisExpandable")&&u>3&&u>c&&c>1&&h>0&&s>0,f=t.get("axisExpandWindow"),p;if(f)p=o0(f[1]-f[0],l),f[1]=f[0]+p;else{p=o0(h*(c-1),l);var v=t.get("axisExpandCenter")||J5(u/2);f=[h*v-p/2],f[1]=f[0]+p}var g=(s-p)/(u-c);g<3&&(g=0);var m=[J5(Q5(f[0]/h,1))+1,hEe(Q5(f[1]/h,1))-1],y=g/h*f[0];return{layout:a,pixelDimIndex:o,layoutBase:r[i[o]],layoutLength:s,axisBase:r[i[1-o]],axisLength:r[n[1-o]],axisExpandable:d,axisExpandWidth:h,axisCollapseWidth:g,axisExpandWindow:f,axisCount:u,winInnerIndices:m,axisExpandWindow0Pos:y}},e.prototype._layoutAxes=function(){var t=this._rect,r=this._axesMap,i=this.dimensions,n=this._makeLayoutInfo(),a=n.layout;r.each(function(o){var s=[0,n.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),W2(i,function(o,s){var l=(n.axisExpandable?pEe:fEe)(s,n),u={horizontal:{x:l.position,y:n.axisLength},vertical:{x:0,y:l.position}},h={horizontal:cEe/2,vertical:0},c=[u[a].x+t.x,u[a].y+t.y],d=h[a],f=Gn();Wh(f,f,d),bo(f,f,c),this._axesLayout[o]={position:c,rotation:d,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},e.prototype.getAxis=function(t){return this._axesMap.get(t)},e.prototype.dataToPoint=function(t,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(t),r)},e.prototype.eachActiveState=function(t,r,i,n){i==null&&(i=0),n==null&&(n=t.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];I(o,function(g){s.push(t.mapDimension(g)),l.push(a.get(g).model)});for(var u=this.hasAxisBrushed(),h=i;h<n;h++){var c=void 0;if(!u)c="normal";else{c="active";for(var d=t.getValues(s,h),f=0,p=o.length;f<p;f++){var v=l[f].getActiveState(d[f]);if(v==="inactive"){c="inactive";break}}}r(c,h)}},e.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,r=this._axesMap,i=!1,n=0,a=t.length;n<a;n++)r.get(t[n]).model.getActiveState()!=="normal"&&(i=!0);return i},e.prototype.axisCoordToPoint=function(t,r){var i=this._axesLayout[r];return Sa([t,0],i.transform)},e.prototype.getAxisLayout=function(t){return Ee(this._axesLayout[t])},e.prototype.getSlidedAxisExpandWindow=function(t){var r=this._makeLayoutInfo(),i=r.pixelDimIndex,n=r.axisExpandWindow.slice(),a=n[1]-n[0],o=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:n};var s=t[i]-r.layoutBase-r.axisExpandWindow0Pos,l,u="slide",h=r.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),d=c[0]!=null;if(h)d&&h&&s<a*c[0]?(u="jump",l=s-a*c[2]):d&&h&&s>a*(1-c[0])?(u="jump",l=s-a*(1-c[2])):(l=s-a*c[1])>=0&&(l=s-a*(1-c[1]))<=0&&(l=0),l*=r.axisExpandWidth/h,l?Zh(l,n,o,"all"):u="none";else{var f=n[1]-n[0],p=o[1]*s/f;n=[K$(0,p-f/2)],n[1]=Z$(o[1],n[0]+f),n[0]=n[1]-f}return{axisExpandWindow:n,behavior:u}},e}();function o0(e,t){return Z$(K$(e,t[0]),t[1])}function fEe(e,t){var r=t.layoutLength/(t.axisCount-1);return{position:r*e,axisNameAvailableWidth:r,axisLabelShow:!0}}function pEe(e,t){var r=t.layoutLength,i=t.axisExpandWidth,n=t.axisCount,a=t.axisCollapseWidth,o=t.winInnerIndices,s,l=a,u=!1,h;return e<o[0]?(s=e*a,h=a):e<=o[1]?(s=t.axisExpandWindow0Pos+e*i-t.axisExpandWindow[0],l=i,u=!0):(s=r-(n-1-e)*a,h=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:h}}const vEe=dEe;function gEe(e,t){var r=[];return e.eachComponent("parallel",function(i,n){var a=new vEe(i,e,t);a.name="parallel_"+n,a.resize(i,t),i.coordinateSystem=a,a.model=i,r.push(a)}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="parallel"){var n=i.getReferringComponents("parallel",dr).models[0];i.coordinateSystem=n.coordinateSystem}}),r}var mEe={create:gEe};const yEe=mEe;var J$=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.activeIntervals=[],r}return t.prototype.getAreaSelectStyle=function(){return Ih([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(r){var i=this.activeIntervals=Ee(r);if(i)for(var n=i.length-1;n>=0;n--)zn(i[n])},t.prototype.getActiveState=function(r){var i=this.activeIntervals;if(!i.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(i.length===1){var n=i[0];if(n[0]<=r&&r<=n[1])return"active"}else for(var a=0,o=i.length;a<o;a++)if(i[a][0]<=r&&r<=i[a][1])return"active";return"inactive"},t}(nt);gr(J$,Yg);const eF=J$;var Nh=!0,_g=Math.min,Ud=Math.max,_Ee=Math.pow,xEe=1e4,bEe=6,wEe=6,tF="globalPan",SEe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},MEe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},rF={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},TEe=0,AEe=function(e){Y(t,e);function t(r){var i=e.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=r,i.group=new Ie,i._uid="brushController_"+TEe++,I(OEe,function(n,a){this._handlers[a]=me(n,this)},i),i}return t.prototype.enableBrush=function(r){return this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},t.prototype._doEnableBrush=function(r){var i=this._zr;this._enableGlobalPan||NCe(i,tF,this._uid),I(this._handlers,function(n,a){i.on(a,n)}),this._brushType=r.brushType,this._brushOption=Ue(Ee(rF),r,!0)},t.prototype._doDisableBrush=function(){var r=this._zr;kCe(r,tF,this._uid),I(this._handlers,function(i,n){r.off(n,i)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(r){if(r&&r.length){var i=this._panels={};I(r,function(n){i[n.panelId]=Ee(n)})}else this._panels=null;return this},t.prototype.mount=function(r){r=r||{},this._enableGlobalPan=r.enableGlobalPan;var i=this.group;return this._zr.add(i),i.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=i.getLocalTransform(),this},t.prototype.updateCovers=function(r){r=ce(r,function(d){return Ue(Ee(rF),d,!0)});var i="\0-brush-index-",n=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new ws(n,r,u,l).add(h).update(h).remove(c).execute(),this;function l(d,f){return(d.id!=null?d.id:i+f)+"-"+d.brushType}function u(d,f){return l(d.__brushOption,f)}function h(d,f){var p=r[d];if(f!=null&&n[f]===s)a[d]=n[f];else{var v=a[d]=f!=null?(n[f].__brushOption=p,n[f]):eq(o,Q$(o,p));lE(o,v)}}function c(d){n[d]!==s&&o.group.remove(n[d])}},t.prototype.unmount=function(){return this.enableBrush(!1),vC(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(jn);function Q$(e,t){var r=_b[t.brushType].createCover(e,t);return r.__brushOption=t,rq(r,t),e.group.add(r),r}function eq(e,t){var r=uE(t);return r.endCreating&&(r.endCreating(e,t),rq(t,t.__brushOption)),t}function tq(e,t){var r=t.__brushOption;uE(t).updateCoverShape(e,t,r.range,r)}function rq(e,t){var r=t.z;r==null&&(r=xEe),e.traverse(function(i){i.z=r,i.z2=r})}function lE(e,t){uE(t).updateCommon(e,t),tq(e,t)}function uE(e){return _b[e.__brushOption.brushType]}function hE(e,t,r){var i=e._panels;if(!i)return Nh;var n,a=e._transform;return I(i,function(o){o.isTargetByCursor(t,r,a)&&(n=o)}),n}function iq(e,t){var r=e._panels;if(!r)return Nh;var i=t.__brushOption.panelId;return i!=null?r[i]:Nh}function vC(e){var t=e._covers,r=t.length;return I(t,function(i){e.group.remove(i)},e),t.length=0,!!r}function kh(e,t){var r=ce(e._covers,function(i){var n=i.__brushOption,a=Ee(n.range);return{brushType:n.brushType,panelId:n.panelId,range:a}});e.trigger("brush",{areas:r,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function CEe(e){var t=e._track;if(!t.length)return!1;var r=t[t.length-1],i=t[0],n=r[0]-i[0],a=r[1]-i[1],o=_Ee(n*n+a*a,.5);return o>bEe}function nq(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function aq(e,t,r,i){var n=new Ie;return n.add(new rt({name:"main",style:cE(r),silent:!0,draggable:!0,cursor:"move",drift:Ne(iF,e,t,n,["n","s","w","e"]),ondragend:Ne(kh,t,{isEnd:!0})})),I(i,function(a){n.add(new rt({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Ne(iF,e,t,n,a),ondragend:Ne(kh,t,{isEnd:!0})}))}),n}function oq(e,t,r,i){var n=i.brushStyle.lineWidth||0,a=Ud(n,wEe),o=r[0][0],s=r[1][0],l=o-n/2,u=s-n/2,h=r[0][1],c=r[1][1],d=h-a+n/2,f=c-a+n/2,p=h-o,v=c-s,g=p+n,m=v+n;Go(e,t,"main",o,s,p,v),i.transformable&&(Go(e,t,"w",l,u,a,m),Go(e,t,"e",d,u,a,m),Go(e,t,"n",l,u,g,a),Go(e,t,"s",l,f,g,a),Go(e,t,"nw",l,u,a,a),Go(e,t,"ne",d,u,a,a),Go(e,t,"sw",l,f,a,a),Go(e,t,"se",d,f,a,a))}function gC(e,t){var r=t.__brushOption,i=r.transformable,n=t.childAt(0);n.useStyle(cE(r)),n.attr({silent:!i,cursor:i?"move":"default"}),I([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=t.childOfName(a.join("")),s=a.length===1?mC(e,a[0]):PEe(e,a);o&&o.attr({silent:!i,invisible:!i,cursor:i?MEe[s]+"-resize":null})})}function Go(e,t,r,i,n,a,o){var s=t.childOfName(r);s&&s.setShape(EEe(dE(e,t,[[i,n],[i+a,n+o]])))}function cE(e){return De({strokeNoScale:!0},e.brushStyle)}function sq(e,t,r,i){var n=[_g(e,r),_g(t,i)],a=[Ud(e,r),Ud(t,i)];return[[n[0],a[0]],[n[1],a[1]]]}function DEe(e){return _h(e.group)}function mC(e,t){var r={w:"left",e:"right",n:"top",s:"bottom"},i={left:"w",right:"e",top:"n",bottom:"s"},n=Kx(r[t],DEe(e));return i[n]}function PEe(e,t){var r=[mC(e,t[0]),mC(e,t[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function iF(e,t,r,i,n,a){var o=r.__brushOption,s=e.toRectRange(o.range),l=lq(t,n,a);I(i,function(u){var h=SEe[u];s[h[0]][h[1]]+=l[h[0]]}),o.range=e.fromRectRange(sq(s[0][0],s[1][0],s[0][1],s[1][1])),lE(t,r),kh(t,{isEnd:!1})}function LEe(e,t,r,i){var n=t.__brushOption.range,a=lq(e,r,i);I(n,function(o){o[0]+=a[0],o[1]+=a[1]}),lE(e,t),kh(e,{isEnd:!1})}function lq(e,t,r){var i=e.group,n=i.transformCoordToLocal(t,r),a=i.transformCoordToLocal(0,0);return[n[0]-a[0],n[1]-a[1]]}function dE(e,t,r){var i=iq(e,t);return i&&i!==Nh?i.clipPath(r,e._transform):Ee(r)}function EEe(e){var t=_g(e[0][0],e[1][0]),r=_g(e[0][1],e[1][1]),i=Ud(e[0][0],e[1][0]),n=Ud(e[0][1],e[1][1]);return{x:t,y:r,width:i-t,height:n-r}}function IEe(e,t,r){if(!(!e._brushType||REe(e,t.offsetX,t.offsetY))){var i=e._zr,n=e._covers,a=hE(e,t,r);if(!e._dragging)for(var o=0;o<n.length;o++){var s=n[o].__brushOption;if(a&&(a===Nh||s.panelId===a.panelId)&&_b[s.brushType].contain(n[o],r[0],r[1]))return}a&&i.setCursorStyle("crosshair")}}function yC(e){var t=e.event;t.preventDefault&&t.preventDefault()}function _C(e,t,r){return e.childOfName("main").contain(t,r)}function uq(e,t,r,i){var n=e._creatingCover,a=e._creatingPanel,o=e._brushOption,s;if(e._track.push(r.slice()),CEe(e)||n){if(a&&!n){o.brushMode==="single"&&vC(e);var l=Ee(o);l.brushType=nF(l.brushType,a),l.panelId=a===Nh?null:a.panelId,n=e._creatingCover=Q$(e,l),e._covers.push(n)}if(n){var u=_b[nF(e._brushType,a)],h=n.__brushOption;h.range=u.getCreatingRange(dE(e,n,e._track)),i&&(eq(e,n),u.updateCommon(e,n)),tq(e,n),s={isEnd:i}}}else i&&o.brushMode==="single"&&o.removeOnClick&&hE(e,t,r)&&vC(e)&&(s={isEnd:i,removeOnClick:!0});return s}function nF(e,t){return e==="auto"?t.defaultBrushType:e}var OEe={mousedown:function(e){if(this._dragging)aF(this,e);else if(!e.target||!e.target.draggable){yC(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var r=this._creatingPanel=hE(this,e,t);r&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,r=e.offsetY,i=this.group.transformCoordToLocal(t,r);if(IEe(this,e,i),this._dragging){yC(e);var n=uq(this,e,i,!1);n&&kh(this,n)}},mouseup:function(e){aF(this,e)}};function aF(e,t){if(e._dragging){yC(t);var r=t.offsetX,i=t.offsetY,n=e.group.transformCoordToLocal(r,i),a=uq(e,t,n,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&kh(e,a)}}function REe(e,t,r){var i=e._zr;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}var _b={lineX:oF(0),lineY:oF(1),rect:{createCover:function(e,t){function r(i){return i}return aq({toRectRange:r,fromRectRange:r},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=nq(e);return sq(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,r,i){oq(e,t,r,i)},updateCommon:gC,contain:_C},polygon:{createCover:function(e,t){var r=new Ie;return r.add(new Yi({name:"main",style:cE(t),silent:!0})),r},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new qi({name:"main",draggable:!0,drift:Ne(LEe,e,t),ondragend:Ne(kh,e,{isEnd:!0})}))},updateCoverShape:function(e,t,r,i){t.childAt(0).setShape({points:dE(e,t,r)})},updateCommon:gC,contain:_C}};function oF(e){return{createCover:function(t,r){return aq({toRectRange:function(i){var n=[i,[0,100]];return e&&n.reverse(),n},fromRectRange:function(i){return i[e]}},t,r,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var r=nq(t),i=_g(r[0][e],r[1][e]),n=Ud(r[0][e],r[1][e]);return[i,n]},updateCoverShape:function(t,r,i,n){var a,o=iq(t,r);if(o!==Nh&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(e);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[i,a];e&&l.reverse(),oq(t,r,l,n)},updateCommon:gC,contain:_C}}const fE=AEe;function hq(e){return e=pE(e),function(t){return d8(t,e)}}function cq(e,t){return e=pE(e),function(r){var i=t??r,n=i?e.width:e.height,a=i?e.x:e.y;return[a,a+(n||0)]}}function dq(e,t,r){var i=pE(e);return function(n,a){return i.contain(a[0],a[1])&&!vb(n,t,r)}}function pE(e){return Ge.create(e)}var zEe=["axisLine","axisTickLabel","axisName"],NEe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){e.prototype.init.apply(this,arguments),(this._brushController=new fE(i.getZr())).on("brush",me(this._onBrush,this))},t.prototype.render=function(r,i,n,a){if(!kEe(r,i,a)){this.axisModel=r,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Ie,this.group.add(this._axisGroup),!!r.get("show")){var s=FEe(r,i),l=s.coordinateSystem,u=r.getAreaSelectStyle(),h=u.width,c=r.axis.dim,d=l.getAxisLayout(c),f=ae({strokeContainThreshold:h},d),p=new Ss(r,f);I(zEe,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(f,u,r,s,h,n),Ug(o,this._axisGroup,r)}}},t.prototype._refreshBrushController=function(r,i,n,a,o,s){var l=n.axis.getExtent(),u=l[1]-l[0],h=Math.min(30,Math.abs(u)*.1),c=Ge.create({x:l[0],y:-o/2,width:u,height:o});c.x-=h,c.width+=2*h,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:hq(c),isTargetByCursor:dq(c,s,a),getLinearBrushOtherExtent:cq(c,0)}]).enableBrush({brushType:"lineX",brushStyle:i,removeOnClick:!0}).updateCovers(BEe(n))},t.prototype._onBrush=function(r){var i=r.areas,n=this.axisModel,a=n.axis,o=ce(i,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!n.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(Kt);function kEe(e,t,r){return r&&r.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:r})[0]===e}function BEe(e){var t=e.axis;return ce(e.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(r[0],!0),t.dataToCoord(r[1],!0)]}})}function FEe(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}const VEe=NEe;var UEe={type:"axisAreaSelect",event:"axisAreaSelected"};function GEe(e){e.registerAction(UEe,function(t,r){r.eachComponent({mainType:"parallelAxis",query:t},function(i){i.axis.model.setActiveIntervals(t.intervals)})}),e.registerAction("parallelAxisExpand",function(t,r){r.eachComponent({mainType:"parallel",query:t},function(i){i.setAxisExpand(t)})})}var HEe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function fq(e){e.registerComponentView(aEe),e.registerComponentModel(sEe),e.registerCoordinateSystem("parallel",yEe),e.registerPreprocessor(QLe),e.registerComponentModel(eF),e.registerComponentView(VEe),Vd(e,"parallel",eF,HEe),GEe(e)}function jEe(e){$e(fq),e.registerChartView(WLe),e.registerSeriesModel(YLe),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,JLe)}var WEe=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return e}(),$Ee=function(e){Y(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new WEe},t.prototype.buildPath=function(r,i){var n=i.extent;r.moveTo(i.x1,i.y1),r.bezierCurveTo(i.cpx1,i.cpy1,i.cpx2,i.cpy2,i.x2,i.y2),i.orient==="vertical"?(r.lineTo(i.x2+n,i.y2),r.bezierCurveTo(i.cpx2+n,i.cpy2,i.cpx1+n,i.cpy1,i.x1+n,i.y1)):(r.lineTo(i.x2,i.y2+n),r.bezierCurveTo(i.cpx2,i.cpy2+n,i.cpx1,i.cpy1+n,i.x1,i.y1+n)),r.closePath()},t.prototype.highlight=function(){xs(this)},t.prototype.downplay=function(){bs(this)},t}(qe),qEe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._focusAdjacencyDisabled=!1,r}return t.prototype.render=function(r,i,n){var a=this,o=r.getGraph(),s=this.group,l=r.layoutInfo,u=l.width,h=l.height,c=r.getData(),d=r.getData("edge"),f=r.get("orient");this._model=r,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(p){var v=new $Ee,g=Re(v);g.dataIndex=p.dataIndex,g.seriesIndex=r.seriesIndex,g.dataType="edge";var m=p.getModel(),y=m.getModel("lineStyle"),_=y.get("curveness"),x=p.node1.getLayout(),w=p.node1.getModel(),b=w.get("localX"),S=w.get("localY"),M=p.node2.getLayout(),A=p.node2.getModel(),T=A.get("localX"),C=A.get("localY"),D=p.getLayout(),P,E,O,z,B,N,F,G;switch(v.shape.extent=Math.max(1,D.dy),v.shape.orient=f,f==="vertical"?(P=(b!=null?b*u:x.x)+D.sy,E=(S!=null?S*h:x.y)+x.dy,O=(T!=null?T*u:M.x)+D.ty,z=C!=null?C*h:M.y,B=P,N=E*(1-_)+z*_,F=O,G=E*_+z*(1-_)):(P=(b!=null?b*u:x.x)+x.dx,E=(S!=null?S*h:x.y)+D.sy,O=T!=null?T*u:M.x,z=(C!=null?C*h:M.y)+D.ty,B=P*(1-_)+O*_,N=E,F=P*_+O*(1-_),G=z),v.setShape({x1:P,y1:E,x2:O,y2:z,cpx1:B,cpy1:N,cpx2:F,cpy2:G}),v.useStyle(y.getItemStyle()),v.style.fill){case"source":v.style.fill=p.node1.getVisual("color"),v.style.decal=p.node1.getVisual("style").decal;break;case"target":v.style.fill=p.node2.getVisual("color"),v.style.decal=p.node2.getVisual("style").decal;break;case"gradient":var H=p.node1.getVisual("color"),$=p.node2.getVisual("color");ge(H)&&ge($)&&(v.style.fill=new Rh(0,0,+(f==="horizontal"),+(f==="vertical"),[{color:H,offset:0},{color:$,offset:1}]))}Wr(v,Pr(m,"edgeLabel"),{labelFetcher:r,labelDataIndex:p.dataIndex,defaultText:""+m.get("value")}),v.setTextConfig({position:"inside"});var Z=m.getModel("emphasis");jr(v,m,"lineStyle",function(ne){return ne.getItemStyle()}),s.add(v),d.setItemGraphicEl(p.dataIndex,v);var X=Z.get("focus");Zt(v,X==="adjacency"?p.getAdjacentDataIndices():X,Z.get("blurScope"),Z.get("disabled")),Re(v).dataType="edge"}),o.eachNode(function(p){var v=p.getLayout(),g=p.getModel(),m=g.get("localX"),y=g.get("localY"),_=g.getModel("emphasis"),x=new rt({shape:{x:m!=null?m*u:v.x,y:y!=null?y*h:v.y,width:v.dx,height:v.dy},style:g.getModel("itemStyle").getItemStyle(),z2:10});Wr(x,Pr(g),{labelFetcher:r,labelDataIndex:p.dataIndex,defaultText:p.id}),x.disableLabelAnimation=!0,x.setStyle("fill",p.getVisual("color")),x.setStyle("decal",p.getVisual("style").decal),jr(x,g),s.add(x),c.setItemGraphicEl(p.dataIndex,x),Re(x).dataType="node";var w=_.get("focus");Zt(x,w==="adjacency"?p.getAdjacentDataIndices():w,_.get("blurScope"),_.get("disabled"))}),c.eachItemGraphicEl(function(p,v){var g=c.getItemModel(v);g.get("draggable")&&(p.drift=function(m,y){a._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=y,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:c.getRawIndex(v),localX:this.shape.x/u,localY:this.shape.y/h})},p.ondragend=function(){a._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&r.isAnimationEnabled()&&s.setClipPath(XEe(s.getBoundingRect(),r,function(){s.removeClipPath()})),this._data=r.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(kt);function XEe(e,t,r){var i=new rt({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return Ut(i,{shape:{width:e.width+20}},t,r),i}const YEe=qEe;var ZEe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){var n=r.edges||r.links,a=r.data||r.nodes,o=r.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new Nt(o[l],this,i));if(a&&n){var u=X$(a,n,this,!0,h);return u.data}function h(c,d){c.wrapMethod("getItemModel",function(f,p){var v=f.parentModel,g=v.getData().getItemLayout(p);if(g){var m=g.depth,y=v.levelModels[m];y&&(f.parentModel=y)}return f}),d.wrapMethod("getItemModel",function(f,p){var v=f.parentModel,g=v.getGraph().getEdgeByIndex(p),m=g.node1.getLayout();if(m){var y=m.depth,_=v.levelModels[y];_&&(f.parentModel=_)}return f})}},t.prototype.setNodePosition=function(r,i){var n=this.option.data||this.option.nodes,a=n[r];a.localX=i[0],a.localY=i[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(r,i,n){function a(f){return isNaN(f)||f==null}if(n==="edge"){var o=this.getDataParams(r,n),s=o.data,l=o.value,u=s.source+" -- "+s.target;return Lr("nameValue",{name:u,value:l,noValue:a(l)})}else{var h=this.getGraph().getNodeByIndex(r),c=h.getLayout().value,d=this.getDataParams(r,n).data.name;return Lr("nameValue",{name:d!=null?d+"":null,value:c,noValue:a(c)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(r,i){var n=e.prototype.getDataParams.call(this,r,i);if(n.value==null&&i==="node"){var a=this.getGraph().getNodeByIndex(r),o=a.getLayout().value;n.value=o}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}($t);const KEe=ZEe;function JEe(e,t){e.eachSeriesByType("sankey",function(r){var i=r.get("nodeWidth"),n=r.get("nodeGap"),a=QEe(r,t);r.layoutInfo=a;var o=a.width,s=a.height,l=r.getGraph(),u=l.nodes,h=l.edges;tIe(u);var c=xt(u,function(v){return v.getLayout().value===0}),d=c.length!==0?0:r.get("layoutIterations"),f=r.get("orient"),p=r.get("nodeAlign");eIe(u,h,i,n,o,s,d,f,p)})}function QEe(e,t){return br(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function eIe(e,t,r,i,n,a,o,s,l){rIe(e,t,r,n,a,s,l),oIe(e,t,a,n,i,o,s),vIe(e,s)}function tIe(e){I(e,function(t){var r=El(t.outEdges,F_),i=El(t.inEdges,F_),n=t.getValue()||0,a=Math.max(r,i,n);t.setLayout({value:a},!0)})}function rIe(e,t,r,i,n,a,o){for(var s=[],l=[],u=[],h=[],c=0,d=0;d<t.length;d++)s[d]=1;for(var d=0;d<e.length;d++)l[d]=e[d].inEdges.length,l[d]===0&&u.push(e[d]);for(var f=-1;u.length;){for(var p=0;p<u.length;p++){var v=u[p],g=v.hostGraph.data.getRawDataItem(v.dataIndex),m=g.depth!=null&&g.depth>=0;m&&g.depth>f&&(f=g.depth),v.setLayout({depth:m?g.depth:c},!0),a==="vertical"?v.setLayout({dy:r},!0):v.setLayout({dx:r},!0);for(var y=0;y<v.outEdges.length;y++){var _=v.outEdges[y],x=t.indexOf(_);s[x]=0;var w=_.node2,b=e.indexOf(w);--l[b]===0&&h.indexOf(w)<0&&h.push(w)}}++c,u=h,h=[]}for(var d=0;d<s.length;d++)if(s[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var S=f>c-1?f:c-1;o&&o!=="left"&&iIe(e,o,a,S);var M=a==="vertical"?(n-r)/S:(i-r)/S;aIe(e,M,a)}function pq(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return t.depth!=null&&t.depth>=0}function iIe(e,t,r,i){if(t==="right"){for(var n=[],a=e,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var h=l.inEdges[u];n.indexOf(h.node1)<0&&n.push(h.node1)}}a=n,n=[],++o}I(e,function(c){pq(c)||c.setLayout({depth:Math.max(0,i-c.getLayout().skNodeHeight)},!0)})}else t==="justify"&&nIe(e,i)}function nIe(e,t){I(e,function(r){!pq(r)&&!r.outEdges.length&&r.setLayout({depth:t},!0)})}function aIe(e,t,r){I(e,function(i){var n=i.getLayout().depth*t;r==="vertical"?i.setLayout({y:n},!0):i.setLayout({x:n},!0)})}function oIe(e,t,r,i,n,a,o){var s=sIe(e,o);lIe(s,t,r,i,n,o),$2(s,n,r,i,o);for(var l=1;a>0;a--)l*=.99,uIe(s,l,o),$2(s,n,r,i,o),pIe(s,l,o),$2(s,n,r,i,o)}function sIe(e,t){var r=[],i=t==="vertical"?"y":"x",n=wA(e,function(a){return a.getLayout()[i]});return n.keys.sort(function(a,o){return a-o}),I(n.keys,function(a){r.push(n.buckets.get(a))}),r}function lIe(e,t,r,i,n,a){var o=1/0;I(e,function(s){var l=s.length,u=0;I(s,function(c){u+=c.getLayout().value});var h=a==="vertical"?(i-(l-1)*n)/u:(r-(l-1)*n)/u;h<o&&(o=h)}),I(e,function(s){I(s,function(l,u){var h=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:h},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:h},!0))})}),I(t,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function $2(e,t,r,i,n){var a=n==="vertical"?"x":"y";I(e,function(o){o.sort(function(v,g){return v.getLayout()[a]-g.getLayout()[a]});for(var s,l,u,h=0,c=o.length,d=n==="vertical"?"dx":"dy",f=0;f<c;f++)l=o[f],u=h-l.getLayout()[a],u>0&&(s=l.getLayout()[a]+u,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),h=l.getLayout()[a]+l.getLayout()[d]+t;var p=n==="vertical"?i:r;if(u=h-t-p,u>0){s=l.getLayout()[a]-u,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),h=s;for(var f=c-2;f>=0;--f)l=o[f],u=l.getLayout()[a]+l.getLayout()[d]+t-h,u>0&&(s=l.getLayout()[a]-u,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),h=l.getLayout()[a]}})}function uIe(e,t,r){I(e.slice().reverse(),function(i){I(i,function(n){if(n.outEdges.length){var a=El(n.outEdges,hIe,r)/El(n.outEdges,F_);if(isNaN(a)){var o=n.outEdges.length;a=o?El(n.outEdges,cIe,r)/o:0}if(r==="vertical"){var s=n.getLayout().x+(a-Gl(n,r))*t;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(a-Gl(n,r))*t;n.setLayout({y:l},!0)}}})})}function hIe(e,t){return Gl(e.node2,t)*e.getValue()}function cIe(e,t){return Gl(e.node2,t)}function dIe(e,t){return Gl(e.node1,t)*e.getValue()}function fIe(e,t){return Gl(e.node1,t)}function Gl(e,t){return t==="vertical"?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function F_(e){return e.getValue()}function El(e,t,r){for(var i=0,n=e.length,a=-1;++a<n;){var o=+t(e[a],r);isNaN(o)||(i+=o)}return i}function pIe(e,t,r){I(e,function(i){I(i,function(n){if(n.inEdges.length){var a=El(n.inEdges,dIe,r)/El(n.inEdges,F_);if(isNaN(a)){var o=n.inEdges.length;a=o?El(n.inEdges,fIe,r)/o:0}if(r==="vertical"){var s=n.getLayout().x+(a-Gl(n,r))*t;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(a-Gl(n,r))*t;n.setLayout({y:l},!0)}}})})}function vIe(e,t){var r=t==="vertical"?"x":"y";I(e,function(i){i.outEdges.sort(function(n,a){return n.node2.getLayout()[r]-a.node2.getLayout()[r]}),i.inEdges.sort(function(n,a){return n.node1.getLayout()[r]-a.node1.getLayout()[r]})}),I(e,function(i){var n=0,a=0;I(i.outEdges,function(o){o.setLayout({sy:n},!0),n+=o.getLayout().dy}),I(i.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function gIe(e){e.eachSeriesByType("sankey",function(t){var r=t.getGraph(),i=r.nodes,n=r.edges;if(i.length){var a=1/0,o=-1/0;I(i,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),I(i,function(s){var l=new Hr({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:t.get("color")}),u=l.mapValueToVisual(s.getLayout().value),h=s.getModel().get(["itemStyle","color"]);h!=null?(s.setVisual("color",h),s.setVisual("style",{fill:h})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}n.length&&I(n,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function mIe(e){e.registerChartView(YEe),e.registerSeriesModel(KEe),e.registerLayout(JEe),e.registerVisual(gIe),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"sankey",query:t},function(i){i.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var vq=function(){function e(){}return e.prototype.getInitialData=function(t,r){var i,n=r.getComponent("xAxis",this.get("xAxisIndex")),a=r.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),s=a.get("type"),l;o==="category"?(t.layout="horizontal",i=n.getOrdinalMeta(),l=!0):s==="category"?(t.layout="vertical",i=a.getOrdinalMeta(),l=!0):t.layout=t.layout||"horizontal";var u=["x","y"],h=t.layout==="horizontal"?0:1,c=this._baseAxisDim=u[h],d=u[1-h],f=[n,a],p=f[h].get("type"),v=f[1-h].get("type"),g=t.data;if(g&&l){var m=[];I(g,function(x,w){var b;ue(x)?(b=x.slice(),x.unshift(w)):ue(x.value)?(b=ae({},x),b.value=b.value.slice(),x.value.unshift(w)):b=x,m.push(b)}),t.data=m}var y=this.defaultValueDimensions,_=[{name:c,type:C_(p),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:C_(v),dimsDef:y.slice()}];return wf(this,{coordDimensions:_,dimensionsCount:y.length+1,encodeDefaulter:Ne(F8,_,this)})},e.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},e}(),gq=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}($t);gr(gq,vq,!0);const yIe=gq;var _Ie=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=r.get("layout")==="horizontal"?1:0;a.diff(s).add(function(u){if(a.hasValue(u)){var h=a.getItemLayout(u),c=sF(h,a,u,l,!0);a.setItemGraphicEl(u,c),o.add(c)}}).update(function(u,h){var c=s.getItemGraphicEl(h);if(!a.hasValue(u)){o.remove(c);return}var d=a.getItemLayout(u);c?(Ca(c),mq(d,c,a,u)):c=sF(d,a,u,l),o.add(c),a.setItemGraphicEl(u,c)}).remove(function(u){var h=s.getItemGraphicEl(u);h&&o.remove(h)}).execute(),this._data=a},t.prototype.remove=function(r){var i=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(a){a&&i.remove(a)})},t.type="boxplot",t}(kt),xIe=function(){function e(){}return e}(),bIe=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="boxplotBoxPath",i}return t.prototype.getDefaultShape=function(){return new xIe},t.prototype.buildPath=function(r,i){var n=i.points,a=0;for(r.moveTo(n[a][0],n[a][1]),a++;a<4;a++)r.lineTo(n[a][0],n[a][1]);for(r.closePath();a<n.length;a++)r.moveTo(n[a][0],n[a][1]),a++,r.lineTo(n[a][0],n[a][1])},t}(qe);function sF(e,t,r,i,n){var a=e.ends,o=new bIe({shape:{points:n?wIe(a,i,e):a}});return mq(e,o,t,r,n),o}function mq(e,t,r,i,n){var a=r.hostModel,o=Hg[n?"initProps":"updateProps"];o(t,{shape:{points:e.ends}},a,i),t.useStyle(r.getItemVisual(i,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=r.getItemModel(i),l=s.getModel("emphasis");jr(t,s),Zt(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function wIe(e,t,r){return ce(e,function(i){return i=i.slice(),i[t]=r.initBaseline,i})}const SIe=_Ie;var Sv=I;function MIe(e){var t=TIe(e);Sv(t,function(r){var i=r.seriesModels;i.length&&(AIe(r),Sv(i,function(n,a){CIe(n,r.boxOffsetList[a],r.boxWidthList[a])}))})}function TIe(e){var t=[],r=[];return e.eachSeriesByType("boxplot",function(i){var n=i.getBaseAxis(),a=We(r,n);a<0&&(a=r.length,r[a]=n,t[a]={axis:n,seriesModels:[]}),t[a].seriesModels.push(i)}),t}function AIe(e){var t=e.axis,r=e.seriesModels,i=r.length,n=e.boxWidthList=[],a=e.boxOffsetList=[],o=[],s;if(t.type==="category")s=t.getBandWidth();else{var l=0;Sv(r,function(p){l=Math.max(l,p.getData().count())});var u=t.getExtent();s=Math.abs(u[1]-u[0])/l}Sv(r,function(p){var v=p.get("boxWidth");ue(v)||(v=[v,v]),o.push([ve(v[0],s)||0,ve(v[1],s)||0])});var h=s*.8-2,c=h/i*.3,d=(h-c*(i-1))/i,f=d/2-h/2;Sv(r,function(p,v){a.push(f),f+=c+d,n.push(Math.min(Math.max(d,o[v][0]),o[v][1]))})}function CIe(e,t,r){var i=e.coordinateSystem,n=e.getData(),a=r/2,o=e.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],u=n.mapDimension(l[o]),h=n.mapDimensionsAll(l[s]);if(u==null||h.length<5)return;for(var c=0;c<n.count();c++){var d=n.get(u,c),f=_(d,h[2],c),p=_(d,h[0],c),v=_(d,h[1],c),g=_(d,h[3],c),m=_(d,h[4],c),y=[];x(y,v,!1),x(y,g,!0),y.push(p,v,m,g),w(y,p),w(y,m),w(y,f),n.setItemLayout(c,{initBaseline:f[s],ends:y})}function _(b,S,M){var A=n.get(S,M),T=[];T[o]=b,T[s]=A;var C;return isNaN(b)||isNaN(A)?C=[NaN,NaN]:(C=i.dataToPoint(T),C[o]+=t),C}function x(b,S,M){var A=S.slice(),T=S.slice();A[o]+=a,T[o]-=a,M?b.push(A,T):b.push(T,A)}function w(b,S){var M=S.slice(),A=S.slice();M[o]-=a,A[o]+=a,b.push(M,A)}}function DIe(e,t){t=t||{};for(var r=[],i=[],n=t.boundIQR,a=n==="none"||n===0,o=0;o<e.length;o++){var s=zn(e[o].slice()),l=wS(s,.25),u=wS(s,.5),h=wS(s,.75),c=s[0],d=s[s.length-1],f=(n??1.5)*(h-l),p=a?c:Math.max(c,l-f),v=a?d:Math.min(d,h+f),g=t.itemNameFormatter,m=Ae(g)?g({value:o}):ge(g)?g.replace("{value}",o+""):o+"";r.push([m,p,l,u,h,v]);for(var y=0;y<s.length;y++){var _=s[y];if(_<p||_>v){var x=[m,_];i.push(x)}}}return{boxData:r,outliers:i}}var PIe={type:"echarts:boxplot",transform:function(t){var r=t.upstream;if(r.sourceFormat!==oi){var i="";dt(i)}var n=DIe(r.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function LIe(e){e.registerSeriesModel(yIe),e.registerChartView(SIe),e.registerLayout(MIe),e.registerTransform(PIe)}var EIe=["color","borderColor"],IIe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},t.prototype.incrementalPrepareRender=function(r,i,n){this._clear(),this._updateDrawMode(r)},t.prototype.incrementalRender=function(r,i,n,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,i):this._incrementalRenderNormal(r,i)},t.prototype.eachRendered=function(r){Xl(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var i=r.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(r){var i=r.getData(),n=this._data,a=this.group,o=i.getLayout("isSimpleBox"),s=r.get("clip",!0),l=r.coordinateSystem,u=l.getArea&&l.getArea();this._data||a.removeAll(),i.diff(n).add(function(h){if(i.hasValue(h)){var c=i.getItemLayout(h);if(s&&lF(u,c))return;var d=q2(c,h,!0);Ut(d,{shape:{points:c.ends}},r,h),X2(d,i,h,o),a.add(d),i.setItemGraphicEl(h,d)}}).update(function(h,c){var d=n.getItemGraphicEl(c);if(!i.hasValue(h)){a.remove(d);return}var f=i.getItemLayout(h);if(s&&lF(u,f)){a.remove(d);return}d?(ut(d,{shape:{points:f.ends}},r,h),Ca(d)):d=q2(f),X2(d,i,h,o),a.add(d),i.setItemGraphicEl(h,d)}).remove(function(h){var c=n.getItemGraphicEl(h);c&&a.remove(c)}).execute(),this._data=i},t.prototype._renderLarge=function(r){this._clear(),uF(r,this.group);var i=r.get("clip",!0)?pb(r.coordinateSystem,!1,r):null;i?this.group.setClipPath(i):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(r,i){for(var n=i.getData(),a=n.getLayout("isSimpleBox"),o;(o=r.next())!=null;){var s=n.getItemLayout(o),l=q2(s);X2(l,n,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(r,i){uF(i,this.group,this._progressiveEls,!0)},t.prototype.remove=function(r){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(kt),OIe=function(){function e(){}return e}(),RIe=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="normalCandlestickBox",i}return t.prototype.getDefaultShape=function(){return new OIe},t.prototype.buildPath=function(r,i){var n=i.points;this.__simpleBox?(r.moveTo(n[4][0],n[4][1]),r.lineTo(n[6][0],n[6][1])):(r.moveTo(n[0][0],n[0][1]),r.lineTo(n[1][0],n[1][1]),r.lineTo(n[2][0],n[2][1]),r.lineTo(n[3][0],n[3][1]),r.closePath(),r.moveTo(n[4][0],n[4][1]),r.lineTo(n[5][0],n[5][1]),r.moveTo(n[6][0],n[6][1]),r.lineTo(n[7][0],n[7][1]))},t}(qe);function q2(e,t,r){var i=e.ends;return new RIe({shape:{points:r?zIe(i,e):i},z2:100})}function lF(e,t){for(var r=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){r=!1;break}return r}function X2(e,t,r,i){var n=t.getItemModel(r);e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.__simpleBox=i,jr(e,n)}function zIe(e,t){return ce(e,function(r){return r=r.slice(),r[1]=t.initBaseline,r})}var NIe=function(){function e(){}return e}(),Y2=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i.type="largeCandlestickBox",i}return t.prototype.getDefaultShape=function(){return new NIe},t.prototype.buildPath=function(r,i){for(var n=i.points,a=0;a<n.length;)if(this.__sign===n[a++]){var o=n[a++];r.moveTo(o,n[a++]),r.lineTo(o,n[a++])}else a+=3},t}(qe);function uF(e,t,r,i){var n=e.getData(),a=n.getLayout("largePoints"),o=new Y2({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});t.add(o);var s=new Y2({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new Y2({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});t.add(l),Z2(1,o,e),Z2(-1,s,e),Z2(0,l,e),i&&(o.incremental=!0,s.incremental=!0),r&&r.push(o,s)}function Z2(e,t,r,i){var n=r.get(["itemStyle",e>0?"borderColor":"borderColor0"])||r.get(["itemStyle",e>0?"color":"color0"]);e===0&&(n=r.get(["itemStyle","borderColorDoji"]));var a=r.getModel("itemStyle").getItemStyle(EIe);t.useStyle(a),t.style.fill=null,t.style.stroke=n}const kIe=IIe;var yq=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(r,i,n){var a=i.getItemLayout(r);return a&&n.rect(a.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}($t);gr(yq,vq,!0);const BIe=yq;function FIe(e){!e||!ue(e.series)||I(e.series,function(t){Pe(t)&&t.type==="k"&&(t.type="candlestick")})}var VIe=["itemStyle","borderColor"],UIe=["itemStyle","borderColor0"],GIe=["itemStyle","borderColorDoji"],HIe=["itemStyle","color"],jIe=["itemStyle","color0"],WIe={seriesType:"candlestick",plan:_f(),performRawSeries:!0,reset:function(e,t){function r(a,o){return o.get(a>0?HIe:jIe)}function i(a,o){return o.get(a===0?GIe:a>0?VIe:UIe)}if(!t.isSeriesFiltered(e)){var n=e.pipelineContext.large;return!n&&{progress:function(a,o){for(var s;(s=a.next())!=null;){var l=o.getItemModel(s),u=o.getItemLayout(s).sign,h=l.getItemStyle();h.fill=r(u,l),h.stroke=i(u,l)||h.fill;var c=o.ensureUniqueItemVisual(s,"style");ae(c,h)}}}}}};const $Ie=WIe;var qIe={seriesType:"candlestick",plan:_f(),reset:function(e){var t=e.coordinateSystem,r=e.getData(),i=XIe(e,r),n=0,a=1,o=["x","y"],s=r.getDimensionIndex(r.mapDimension(o[n])),l=ce(r.mapDimensionsAll(o[a]),r.getDimensionIndex,r),u=l[0],h=l[1],c=l[2],d=l[3];if(r.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),s<0||l.length<4)return;return{progress:e.pipelineContext.large?p:f};function f(v,g){for(var m,y=g.getStore();(m=v.next())!=null;){var _=y.get(s,m),x=y.get(u,m),w=y.get(h,m),b=y.get(c,m),S=y.get(d,m),M=Math.min(x,w),A=Math.max(x,w),T=B(M,_),C=B(A,_),D=B(b,_),P=B(S,_),E=[];N(E,C,0),N(E,T,1),E.push(G(P),G(C),G(D),G(T));var O=g.getItemModel(m),z=!!O.get(["itemStyle","borderColorDoji"]);g.setItemLayout(m,{sign:hF(y,m,x,w,h,z),initBaseline:x>w?C[a]:T[a],ends:E,brushRect:F(b,S,_)})}function B(H,$){var Z=[];return Z[n]=$,Z[a]=H,isNaN($)||isNaN(H)?[NaN,NaN]:t.dataToPoint(Z)}function N(H,$,Z){var X=$.slice(),ne=$.slice();X[n]=Y0(X[n]+i/2,1,!1),ne[n]=Y0(ne[n]-i/2,1,!0),Z?H.push(X,ne):H.push(ne,X)}function F(H,$,Z){var X=B(H,Z),ne=B($,Z);return X[n]-=i/2,ne[n]-=i/2,{x:X[0],y:X[1],width:i,height:ne[1]-X[1]}}function G(H){return H[n]=Y0(H[n],1),H}}function p(v,g){for(var m=co(v.count*4),y=0,_,x=[],w=[],b,S=g.getStore(),M=!!e.get(["itemStyle","borderColorDoji"]);(b=v.next())!=null;){var A=S.get(s,b),T=S.get(u,b),C=S.get(h,b),D=S.get(c,b),P=S.get(d,b);if(isNaN(A)||isNaN(D)||isNaN(P)){m[y++]=NaN,y+=3;continue}m[y++]=hF(S,b,T,C,h,M),x[n]=A,x[a]=D,_=t.dataToPoint(x,null,w),m[y++]=_?_[0]:NaN,m[y++]=_?_[1]:NaN,x[a]=P,_=t.dataToPoint(x,null,w),m[y++]=_?_[1]:NaN}g.setLayout("largePoints",m)}}};function hF(e,t,r,i,n,a){var o;return r>i?o=-1:r<i?o=1:o=a?0:t>0?e.get(n,t-1)<=i?1:-1:1,o}function XIe(e,t){var r=e.getBaseAxis(),i,n=r.type==="category"?r.getBandWidth():(i=r.getExtent(),Math.abs(i[1]-i[0])/t.count()),a=ve(Ve(e.get("barMaxWidth"),n),n),o=ve(Ve(e.get("barMinWidth"),1),n),s=e.get("barWidth");return s!=null?ve(s,n):Math.max(Math.min(n/2,a),o)}const YIe=qIe;function ZIe(e){e.registerChartView(kIe),e.registerSeriesModel(BIe),e.registerPreprocessor(FIe),e.registerVisual($Ie),e.registerLayout(YIe)}function cF(e,t){var r=t.rippleEffectColor||t.color;e.eachChild(function(i){i.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?r:null,fill:t.brushType==="fill"?r:null}})})}var KIe=function(e){Y(t,e);function t(r,i){var n=e.call(this)||this,a=new Zg(r,i),o=new Ie;return n.add(a),n.add(o),n.updateData(r,i),n}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(r){for(var i=r.symbolType,n=r.color,a=r.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=vr(i,-1,-1,2,2,n);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/a*r.period+r.effectOffset;l.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(r.period,{opacity:0}).delay(u).start(),o.add(l)}cF(o,r)},t.prototype.updateEffectAnimation=function(r){for(var i=this._effectCfg,n=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(i[s]!==r[s]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}cF(n,r)},t.prototype.highlight=function(){xs(this)},t.prototype.downplay=function(){bs(this)},t.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},t.prototype.updateData=function(r,i){var n=this,a=r.hostModel;this.childAt(0).updateData(r,i);var o=this.childAt(1),s=r.getItemModel(i),l=r.getItemVisual(i,"symbol"),u=$g(r.getItemVisual(i,"symbolSize")),h=r.getItemVisual(i,"style"),c=h&&h.fill,d=s.getModel("emphasis");o.setScale(u),o.traverse(function(g){g.setStyle("fill",c)});var f=bf(r.getItemVisual(i,"symbolOffset"),u);f&&(o.x=f[0],o.y=f[1]);var p=r.getItemVisual(i,"symbolRotate");o.rotation=(p||0)*Math.PI/180||0;var v={};v.showEffectOn=a.get("showEffectOn"),v.rippleScale=s.get(["rippleEffect","scale"]),v.brushType=s.get(["rippleEffect","brushType"]),v.period=s.get(["rippleEffect","period"])*1e3,v.effectOffset=i/r.count(),v.z=a.getShallow("z")||0,v.zlevel=a.getShallow("zlevel")||0,v.symbolType=l,v.color=c,v.rippleEffectColor=s.get(["rippleEffect","color"]),v.rippleNumber=s.get(["rippleEffect","number"]),v.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(v):this.startEffectAnimation(v),this._effectCfg=v):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(g){g==="emphasis"?v.showEffectOn!=="render"&&n.startEffectAnimation(v):g==="normal"&&v.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=v,Zt(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},t.prototype.fadeOut=function(r){r&&r()},t}(Ie);const JIe=KIe;var QIe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._symbolDraw=new Kg(JIe)},t.prototype.render=function(r,i,n){var a=r.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(r)}),this.group.add(o.group)},t.prototype._getClipShape=function(r){var i=r.coordinateSystem,n=i&&i.getArea&&i.getArea();return r.get("clip",!0)?n:null},t.prototype.updateTransform=function(r,i,n){var a=r.getData();this.group.dirty();var o=Jg("").reset(r,i,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(r){var i=r.coordinateSystem;i&&i.getRoamTransform&&(this.group.transform=O0e(i.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(r,i){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(kt);const eOe=QIe;var tOe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,i){return Ds(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(r,i,n){return n.point(i.getItemLayout(r))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}($t);const rOe=tOe;function iOe(e){e.registerChartView(eOe),e.registerSeriesModel(rOe),e.registerLayout(Jg("effectScatter"))}var nOe=function(e){Y(t,e);function t(r,i,n){var a=e.call(this)||this;return a.add(a.createLine(r,i,n)),a._updateEffectSymbol(r,i),a}return t.prototype.createLine=function(r,i,n){return new oE(r,i,n)},t.prototype._updateEffectSymbol=function(r,i){var n=r.getItemModel(i),a=n.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");ue(o)||(o=[o,o]);var l=r.getItemVisual(i,"style"),u=a.get("color")||l&&l.stroke,h=this.childAt(1);this._symbolType!==s&&(this.remove(h),h=vr(s,-.5,-.5,1,1,u),h.z2=100,h.culling=!0,this.add(h)),h&&(h.setStyle("shadowColor",u),h.setStyle(a.getItemStyle(["color"])),h.scaleX=o[0],h.scaleY=o[1],h.setColor(u),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(r,a,i))},t.prototype._updateEffectAnimation=function(r,i,n){var a=this.childAt(1);if(a){var o=r.getItemLayout(n),s=i.get("period")*1e3,l=i.get("loop"),u=i.get("roundTrip"),h=i.get("constantSpeed"),c=zr(i.get("delay"),function(f){return f/r.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),h>0&&(s=this._getLineLength(a)/h*1e3),s!==this._period||l!==this._loop||u!==this._roundTrip){a.stopAnimation();var d=void 0;Ae(c)?d=c(n):d=c,a.__t>0&&(d=-s*a.__t),this._animateSymbol(a,s,d,l,u)}this._period=s,this._loop=l,this._roundTrip=u}},t.prototype._animateSymbol=function(r,i,n,a,o){if(i>0){r.__t=0;var s=this,l=r.animate("",a).when(o?i*2:i,{__t:o?2:1}).delay(n).during(function(){s._updateSymbolPosition(r)});a||l.done(function(){s.remove(r)}),l.start()}},t.prototype._getLineLength=function(r){return pl(r.__p1,r.__cp1)+pl(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,i){r.__p1=i[0],r.__p2=i[1],r.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},t.prototype.updateData=function(r,i,n){this.childAt(0).updateData(r,i,n),this._updateEffectSymbol(r,i)},t.prototype._updateSymbolPosition=function(r){var i=r.__p1,n=r.__p2,a=r.__cp1,o=r.__t<1?r.__t:2-r.__t,s=[r.x,r.y],l=s.slice(),u=Or,h=uA;s[0]=u(i[0],a[0],n[0],o),s[1]=u(i[1],a[1],n[1],o);var c=r.__t<1?h(i[0],a[0],n[0],o):h(n[0],a[0],i[0],1-o),d=r.__t<1?h(i[1],a[1],n[1],o):h(n[1],a[1],i[1],1-o);r.rotation=-Math.atan2(d,c)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=pl(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):r.__lastT===1?r.scaleY=2*pl(i,s):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=s[0],r.y=s[1]},t.prototype.updateLayout=function(r,i){this.childAt(0).updateLayout(r,i);var n=r.getItemModel(i).getModel("effect");this._updateEffectAnimation(r,n,i)},t}(Ie);const _q=nOe;var aOe=function(e){Y(t,e);function t(r,i,n){var a=e.call(this)||this;return a._createPolyline(r,i,n),a}return t.prototype._createPolyline=function(r,i,n){var a=r.getItemLayout(i),o=new Yi({shape:{points:a}});this.add(o),this._updateCommonStl(r,i,n)},t.prototype.updateData=function(r,i,n){var a=r.hostModel,o=this.childAt(0),s={shape:{points:r.getItemLayout(i)}};ut(o,s,a,i),this._updateCommonStl(r,i,n)},t.prototype._updateCommonStl=function(r,i,n){var a=this.childAt(0),o=r.getItemModel(i),s=n&&n.emphasisLineStyle,l=n&&n.focus,u=n&&n.blurScope,h=n&&n.emphasisDisabled;if(!n||r.hasItemOption){var c=o.getModel("emphasis");s=c.getModel("lineStyle").getLineStyle(),h=c.get("disabled"),l=c.get("focus"),u=c.get("blurScope")}a.useStyle(r.getItemVisual(i,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var d=a.ensureState("emphasis");d.style=s,Zt(this,l,u,h)},t.prototype.updateLayout=function(r,i){var n=this.childAt(0);n.setShape("points",r.getItemLayout(i))},t}(Ie);const xq=aOe;var oOe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,i,n){return new xq(r,i,n)},t.prototype._updateAnimationPoints=function(r,i){this._points=i;for(var n=[0],a=0,o=1;o<i.length;o++){var s=i[o-1],l=i[o];a+=pl(s,l),n.push(a)}if(a===0){this._length=0;return}for(var o=0;o<n.length;o++)n[o]/=a;this._offsets=n,this._length=a},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var i=r.__t<1?r.__t:2-r.__t,n=this._points,a=this._offsets,o=n.length;if(a){var s=this._lastFrame,l;if(i<this._lastFramePercent){var u=Math.min(s+1,o-1);for(l=u;l>=0&&!(a[l]<=i);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>i);l++);l=Math.min(l-1,o-2)}var h=(i-a[l])/(a[l+1]-a[l]),c=n[l],d=n[l+1];r.x=c[0]*(1-h)+h*d[0],r.y=c[1]*(1-h)+h*d[1];var f=r.__t<1?d[0]-c[0]:c[0]-d[0],p=r.__t<1?d[1]-c[1]:c[1]-d[1];r.rotation=-Math.atan2(p,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=i,r.ignore=!1}},t}(_q);const sOe=oOe;var lOe=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),uOe=function(e){Y(t,e);function t(r){var i=e.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new lOe},t.prototype.buildPath=function(r,i){var n=i.segs,a=i.curveness,o;if(i.polyline)for(o=this._off;o<n.length;){var s=n[o++];if(s>0){r.moveTo(n[o++],n[o++]);for(var l=1;l<s;l++)r.lineTo(n[o++],n[o++])}}else for(o=this._off;o<n.length;){var u=n[o++],h=n[o++],c=n[o++],d=n[o++];if(r.moveTo(u,h),a>0){var f=(u+c)/2-(h-d)*a,p=(h+d)/2-(c-u)*a;r.quadraticCurveTo(f,p,c,d)}else r.lineTo(c,d)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(r,i){var n=this.shape,a=n.segs,o=n.curveness,s=this.style.lineWidth;if(n.polyline)for(var l=0,u=0;u<a.length;){var h=a[u++];if(h>0)for(var c=a[u++],d=a[u++],f=1;f<h;f++){var p=a[u++],v=a[u++];if(rl(c,d,p,v,s,r,i))return l}l++}else for(var l=0,u=0;u<a.length;){var c=a[u++],d=a[u++],p=a[u++],v=a[u++];if(o>0){var g=(c+p)/2-(d-v)*o,m=(d+v)/2-(p-c)*o;if(TW(c,d,g,m,p,v,s,r,i))return l}else if(rl(c,d,p,v,s,r,i))return l;l++}return-1},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(r=n[0],i=n[1],a.contain(r,i)){var o=this.hoverDataIdx=this.findDataIndex(r,i);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var i=this.shape,n=i.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<n.length;){var h=n[u++],c=n[u++];a=Math.min(h,a),s=Math.max(h,s),o=Math.min(c,o),l=Math.max(c,l)}r=this._rect=new Ge(a,o,s,l)}return r},t}(qe),hOe=function(){function e(){this.group=new Ie}return e.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,r){var i=this._newAdded[0],n=r.getLayout("linesPoints"),a=i&&i.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+n.length);s.set(a),s.set(n,o),i.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:n}),this._setCommon(l,r),l.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new uOe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,r,i){var n=r.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var a=r.getVisual("style");a&&a.stroke&&t.setStyle("stroke",a.stroke),t.setStyle("fill",null);var o=Re(t);o.seriesIndex=n.seriesIndex,t.on("mousemove",function(s){o.dataIndex=null;var l=t.hoverDataIdx;l>0&&(o.dataIndex=l+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const cOe=hOe;var dOe={seriesType:"lines",plan:_f(),reset:function(e){var t=e.coordinateSystem;if(t){var r=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(n,a){var o=[];if(i){var s=void 0,l=n.end-n.start;if(r){for(var u=0,h=n.start;h<n.end;h++)u+=e.getLineCoordsCount(h);s=new Float32Array(l+u*2)}else s=new Float32Array(l*4);for(var c=0,d=[],h=n.start;h<n.end;h++){var f=e.getLineCoords(h,o);r&&(s[c++]=f);for(var p=0;p<f;p++)d=t.dataToPoint(o[p],!1,d),s[c++]=d[0],s[c++]=d[1]}a.setLayout("linesPoints",s)}else for(var h=n.start;h<n.end;h++){var v=a.getItemModel(h),f=e.getLineCoords(h,o),g=[];if(r)for(var m=0;m<f;m++)g.push(t.dataToPoint(o[m]));else{g[0]=t.dataToPoint(o[0]),g[1]=t.dataToPoint(o[1]);var y=v.get(["lineStyle","curveness"]);+y&&(g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*y,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*y])}a.setItemLayout(h,g)}}}}}};const bq=dOe;var fOe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this._updateLineDraw(a,r),s=r.get("zlevel"),l=r.get(["effect","trailLength"]),u=n.getZr(),h=u.painter.getType()==="svg";h||u.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!h&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&l>0&&(h||u.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var c=r.get("clip",!0)&&pb(r.coordinateSystem,!1,r);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,i,n){var a=r.getData(),o=this._updateLineDraw(a,r);o.incrementalPrepareUpdate(a),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(r,i,n){this._lineDraw.incrementalUpdate(r,i.getData()),this._finished=r.end===i.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,i,n){var a=r.getData(),o=r.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=bq.reset(r,i,n);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(r,i){var n=this._lineDraw,a=this._showEffect(i),o=!!i.get("polyline"),s=i.pipelineContext,l=s.large;return(!n||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=l?new cOe:new sE(o?a?sOe:xq:a?_q:oE),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(n.group),n},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var i=r.getZr(),n=i.painter.getType()==="svg";!n&&this._lastZlevel!=null&&i.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},t.prototype.dispose=function(r,i){this.remove(r,i)},t.type="lines",t}(kt);const pOe=fOe;var vOe=typeof Uint32Array>"u"?Array:Uint32Array,gOe=typeof Float64Array>"u"?Array:Float64Array;function dF(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=ce(t,function(r){var i=[r[0].coord,r[1].coord],n={coords:i};return r[0].name&&(n.fromName=r[0].name),r[1].name&&(n.toName=r[1].name),kP([n,r[0],r[1]])}))}var mOe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],dF(r);var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(dF(r),r.data){var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var i=this._processFlatCoordsArray(r.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=i_(this._flatCoords,i.flatCoords),this._flatCoordsOffset=i_(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),r.data=new Float32Array(i.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var i=this.getData().getItemModel(r),n=i.option instanceof Array?i.option:i.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,i){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[r*2],a=this._flatCoordsOffset[r*2+1],o=0;o<a;o++)i[o]=i[o]||[],i[o][0]=this._flatCoords[n+o*2],i[o][1]=this._flatCoords[n+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(r),o=0;o<s.length;o++)i[o]=i[o]||[],i[o][0]=s[o][0],i[o][1]=s[o][1];return s.length}},t.prototype._processFlatCoordsArray=function(r){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),st(r[0])){for(var n=r.length,a=new vOe(n),o=new gOe(n),s=0,l=0,u=0,h=0;h<n;){u++;var c=r[h++];a[l++]=s+i,a[l++]=c;for(var d=0;d<c;d++){var f=r[h++],p=r[h++];o[s++]=f,o[s++]=p}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,i){var n=new xi(["value"],this);return n.hasItemOption=!1,n.initData(r.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;n.hasItemOption=!0;var u=a.value;if(u!=null)return u instanceof Array?u[l]:u}),n},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=a.getItemModel(r),s=o.get("name");if(s)return s;var l=o.get("fromName"),u=o.get("toName"),h=[];return l!=null&&h.push(l),u!=null&&h.push(u),Lr("nameValue",{name:h.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),i=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&i>0?i+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}($t);const yOe=mOe;function s0(e){return e instanceof Array||(e=[e,e]),e}var _Oe={seriesType:"lines",reset:function(e){var t=s0(e.get("symbol")),r=s0(e.get("symbolSize")),i=e.getData();i.setVisual("fromSymbol",t&&t[0]),i.setVisual("toSymbol",t&&t[1]),i.setVisual("fromSymbolSize",r&&r[0]),i.setVisual("toSymbolSize",r&&r[1]);function n(a,o){var s=a.getItemModel(o),l=s0(s.getShallow("symbol",!0)),u=s0(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),u[0]&&a.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&a.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:i.hasItemOption?n:null}}};const xOe=_Oe;function bOe(e){e.registerChartView(pOe),e.registerSeriesModel(yOe),e.registerLayout(bq),e.registerVisual(xOe)}var wOe=256,SOe=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Nl.createCanvas();this.canvas=t}return e.prototype.update=function(t,r,i,n,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),h=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),f=t.length;c.width=r,c.height=i;for(var p=0;p<f;++p){var v=t[p],g=v[0],m=v[1],y=v[2],_=n(y);d.globalAlpha=_,d.drawImage(s,g-h,m-h)}if(!c.width||!c.height)return c;for(var x=d.getImageData(0,0,c.width,c.height),w=x.data,b=0,S=w.length,M=this.minOpacity,A=this.maxOpacity,T=A-M;b<S;){var _=w[b+3]/256,C=Math.floor(_*(wOe-1))*4;if(_>0){var D=o(_)?l:u;_>0&&(_=_*T+M),w[b++]=D[C],w[b++]=D[C+1],w[b++]=D[C+2],w[b++]=D[C+3]*_*256}else b+=4}return d.putImageData(x,0,0),c},e.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Nl.createCanvas()),r=this.pointSize+this.blurSize,i=r*2;t.width=i,t.height=i;var n=t.getContext("2d");return n.clearRect(0,0,i,i),n.shadowOffsetX=i,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-r,r,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),t},e.prototype._getGradient=function(t,r){for(var i=this._gradientPixels,n=i[r]||(i[r]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)t[r](s/255,!0,a),n[o++]=a[0],n[o++]=a[1],n[o++]=a[2],n[o++]=a[3];return n},e}();const MOe=SOe;function TOe(e,t,r){var i=e[1]-e[0];t=ce(t,function(o){return{interval:[(o.interval[0]-e[0])/i,(o.interval[1]-e[0])/i]}});var n=t.length,a=0;return function(o){var s;for(s=a;s<n;s++){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===n)for(s=a-1;s>=0;s--){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<n&&r[s]}}function AOe(e,t){var r=e[1]-e[0];return t=[(t[0]-e[0])/r,(t[1]-e[0])/r],function(i){return i>=t[0]&&i<=t[1]}}function fF(e){var t=e.dimensions;return t[0]==="lng"&&t[1]==="lat"}var COe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a;i.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===r&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=r.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(r,n,0,r.getData().count()):fF(o)&&this._renderOnGeo(o,r,a,n)},t.prototype.incrementalPrepareRender=function(r,i,n){this.group.removeAll()},t.prototype.incrementalRender=function(r,i,n,a){var o=i.coordinateSystem;o&&(fF(o)?this.render(i,n,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(i,a,r.start,r.end,!0)))},t.prototype.eachRendered=function(r){Xl(this._progressiveEls||this.group,r)},t.prototype._renderOnCartesianAndCalendar=function(r,i,n,a,o){var s=r.coordinateSystem,l=Xh(s,"cartesian2d"),u,h,c,d;if(l){var f=s.getAxis("x"),p=s.getAxis("y");u=f.getBandWidth()+.5,h=p.getBandWidth()+.5,c=f.scale.getExtent(),d=p.scale.getExtent()}for(var v=this.group,g=r.getData(),m=r.getModel(["emphasis","itemStyle"]).getItemStyle(),y=r.getModel(["blur","itemStyle"]).getItemStyle(),_=r.getModel(["select","itemStyle"]).getItemStyle(),x=r.get(["itemStyle","borderRadius"]),w=Pr(r),b=r.getModel("emphasis"),S=b.get("focus"),M=b.get("blurScope"),A=b.get("disabled"),T=l?[g.mapDimension("x"),g.mapDimension("y"),g.mapDimension("value")]:[g.mapDimension("time"),g.mapDimension("value")],C=n;C<a;C++){var D=void 0,P=g.getItemVisual(C,"style");if(l){var E=g.get(T[0],C),O=g.get(T[1],C);if(isNaN(g.get(T[2],C))||isNaN(E)||isNaN(O)||E<c[0]||E>c[1]||O<d[0]||O>d[1])continue;var z=s.dataToPoint([E,O]);D=new rt({shape:{x:z[0]-u/2,y:z[1]-h/2,width:u,height:h},style:P})}else{if(isNaN(g.get(T[1],C)))continue;D=new rt({z2:1,shape:s.dataToRect([g.get(T[0],C)]).contentShape,style:P})}if(g.hasItemOption){var B=g.getItemModel(C),N=B.getModel("emphasis");m=N.getModel("itemStyle").getItemStyle(),y=B.getModel(["blur","itemStyle"]).getItemStyle(),_=B.getModel(["select","itemStyle"]).getItemStyle(),x=B.get(["itemStyle","borderRadius"]),S=N.get("focus"),M=N.get("blurScope"),A=N.get("disabled"),w=Pr(B)}D.shape.r=x;var F=r.getRawValue(C),G="-";F&&F[2]!=null&&(G=F[2]+""),Wr(D,w,{labelFetcher:r,labelDataIndex:C,defaultOpacity:P.opacity,defaultText:G}),D.ensureState("emphasis").style=m,D.ensureState("blur").style=y,D.ensureState("select").style=_,Zt(D,S,M,A),D.incremental=o,o&&(D.states.emphasis.hoverLayer=!0),v.add(D),g.setItemGraphicEl(C,D),this._progressiveEls&&this._progressiveEls.push(D)}},t.prototype._renderOnGeo=function(r,i,n,a){var o=n.targetVisuals.inRange,s=n.targetVisuals.outOfRange,l=i.getData(),u=this._hmLayer||this._hmLayer||new MOe;u.blurSize=i.get("blurSize"),u.pointSize=i.get("pointSize"),u.minOpacity=i.get("minOpacity"),u.maxOpacity=i.get("maxOpacity");var h=r.getViewRect().clone(),c=r.getRoamTransform();h.applyTransform(c);var d=Math.max(h.x,0),f=Math.max(h.y,0),p=Math.min(h.width+h.x,a.getWidth()),v=Math.min(h.height+h.y,a.getHeight()),g=p-d,m=v-f,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],_=l.mapArray(y,function(S,M,A){var T=r.dataToPoint([S,M]);return T[0]-=d,T[1]-=f,T.push(A),T}),x=n.getExtent(),w=n.type==="visualMap.continuous"?AOe(x,n.option.range):TOe(x,n.getPieceList(),n.option.selected);u.update(_,g,m,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},w);var b=new $r({style:{width:g,height:m,x:d,y:f,image:u.canvas},silent:!0});this.group.add(b)},t.type="heatmap",t}(kt);const DOe=COe;var POe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){return Ds(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var r=jg.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}($t);const LOe=POe;function EOe(e){e.registerChartView(DOe),e.registerSeriesModel(LOe)}var IOe=["itemStyle","borderWidth"],pF=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],K2=new To,OOe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=this.group,o=r.getData(),s=this._data,l=r.coordinateSystem,u=l.getBaseAxis(),h=u.isHorizontal(),c=l.master.getRect(),d={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:r,coordSys:l,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:h,valueDim:pF[+h],categoryDim:pF[1-+h]};return o.diff(s).add(function(f){if(o.hasValue(f)){var p=gF(o,f),v=vF(o,f,p,d),g=mF(o,d,v);o.setItemGraphicEl(f,g),a.add(g),_F(g,d,v)}}).update(function(f,p){var v=s.getItemGraphicEl(p);if(!o.hasValue(f)){a.remove(v);return}var g=gF(o,f),m=vF(o,f,g,d),y=Cq(o,m);v&&y!==v.__pictorialShapeStr&&(a.remove(v),o.setItemGraphicEl(f,null),v=null),v?VOe(v,d,m):v=mF(o,d,m,!0),o.setItemGraphicEl(f,v),v.__pictorialSymbolMeta=m,a.add(v),_F(v,d,m)}).remove(function(f){var p=s.getItemGraphicEl(f);p&&yF(s,f,p.__pictorialSymbolMeta.animationModel,p)}).execute(),this._data=o,this.group},t.prototype.remove=function(r,i){var n=this.group,a=this._data;r.get("animation")?a&&a.eachItemGraphicEl(function(o){yF(a,Re(o).dataIndex,r,o)}):n.removeAll()},t.type="pictorialBar",t}(kt);function vF(e,t,r,i){var n=e.getItemLayout(t),a=r.get("symbolRepeat"),o=r.get("symbolClip"),s=r.get("symbolPosition")||"start",l=r.get("symbolRotate"),u=(l||0)*Math.PI/180||0,h=r.get("symbolPatternSize")||2,c=r.isAnimationEnabled(),d={dataIndex:t,layout:n,itemModel:r,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:h,rotation:u,animationModel:c?r:null,hoverScale:c&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};ROe(r,a,n,i,d),zOe(e,t,n,a,o,d.boundingLength,d.pxSign,h,i,d),NOe(r,d.symbolScale,u,i,d);var f=d.symbolSize,p=bf(r.get("symbolOffset"),f);return kOe(r,f,n,a,o,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,i,d),d}function ROe(e,t,r,i,n){var a=i.valueDim,o=e.get("symbolBoundingData"),s=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),u=1-+(r[a.wh]<=0),h;if(ue(o)){var c=[J2(s,o[0])-l,J2(s,o[1])-l];c[1]<c[0]&&c.reverse(),h=c[u]}else o!=null?h=J2(s,o)-l:t?h=i.coordSysExtent[a.index][u]-l:h=r[a.wh];n.boundingLength=h,t&&(n.repeatCutLength=r[a.wh]),n.pxSign=h>0?1:-1}function J2(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function zOe(e,t,r,i,n,a,o,s,l,u){var h=l.valueDim,c=l.categoryDim,d=Math.abs(r[c.wh]),f=e.getItemVisual(t,"symbolSize"),p;ue(f)?p=f.slice():f==null?p=["100%","100%"]:p=[f,f],p[c.index]=ve(p[c.index],d),p[h.index]=ve(p[h.index],i?d:Math.abs(a)),u.symbolSize=p;var v=u.symbolScale=[p[0]/s,p[1]/s];v[h.index]*=(l.isHorizontal?-1:1)*o}function NOe(e,t,r,i,n){var a=e.get(IOe)||0;a&&(K2.attr({scaleX:t[0],scaleY:t[1],rotation:r}),K2.updateTransform(),a/=K2.getLineScale(),a*=t[i.valueDim.index]),n.valueLineWidth=a||0}function kOe(e,t,r,i,n,a,o,s,l,u,h,c){var d=h.categoryDim,f=h.valueDim,p=c.pxSign,v=Math.max(t[f.index]+s,0),g=v;if(i){var m=Math.abs(l),y=zr(e.get("symbolMargin"),"15%")+"",_=!1;y.lastIndexOf("!")===y.length-1&&(_=!0,y=y.slice(0,y.length-1));var x=ve(y,t[f.index]),w=Math.max(v+x*2,0),b=_?0:x*2,S=hW(i),M=S?i:xF((m+b)/w),A=m-M*v;x=A/2/(_?M:Math.max(M-1,1)),w=v+x*2,b=_?0:x*2,!S&&i!=="fixed"&&(M=u?xF((Math.abs(u)+b)/w):0),g=M*w-b,c.repeatTimes=M,c.symbolMargin=x}var T=p*(g/2),C=c.pathPosition=[];C[d.index]=r[d.wh]/2,C[f.index]=o==="start"?T:o==="end"?l-T:l/2,a&&(C[0]+=a[0],C[1]+=a[1]);var D=c.bundlePosition=[];D[d.index]=r[d.xy],D[f.index]=r[f.xy];var P=c.barRectShape=ae({},r);P[f.wh]=p*Math.max(Math.abs(r[f.wh]),Math.abs(C[f.index]+T)),P[d.wh]=r[d.wh];var E=c.clipShape={};E[d.xy]=-r[d.xy],E[d.wh]=h.ecSize[d.wh],E[f.xy]=0,E[f.wh]=r[f.wh]}function wq(e){var t=e.symbolPatternSize,r=vr(e.symbolType,-t/2,-t/2,t,t);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function Sq(e,t,r,i){var n=e.__pictorialBundle,a=r.symbolSize,o=r.valueLineWidth,s=r.pathPosition,l=t.valueDim,u=r.repeatTimes||0,h=0,c=a[t.valueDim.index]+o+r.symbolMargin*2;for(vE(e,function(v){v.__pictorialAnimationIndex=h,v.__pictorialRepeatTimes=u,h<u?xd(v,null,p(h),r,i):xd(v,null,{scaleX:0,scaleY:0},r,i,function(){n.remove(v)}),h++});h<u;h++){var d=wq(r);d.__pictorialAnimationIndex=h,d.__pictorialRepeatTimes=u,n.add(d);var f=p(h);xd(d,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},r,i)}function p(v){var g=s.slice(),m=r.pxSign,y=v;return(r.symbolRepeatDirection==="start"?m>0:m<0)&&(y=u-1-v),g[l.index]=c*(y-u/2+.5)+s[l.index],{x:g[0],y:g[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function Mq(e,t,r,i){var n=e.__pictorialBundle,a=e.__pictorialMainPath;a?xd(a,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,i):(a=e.__pictorialMainPath=wq(r),n.add(a),xd(a,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,i))}function Tq(e,t,r){var i=ae({},t.barRectShape),n=e.__pictorialBarRect;n?xd(n,null,{shape:i},t,r):(n=e.__pictorialBarRect=new rt({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,e.add(n))}function Aq(e,t,r,i){if(r.symbolClip){var n=e.__pictorialClipPath,a=ae({},r.clipShape),o=t.valueDim,s=r.animationModel,l=r.dataIndex;if(n)ut(n,{shape:a},s,l);else{a[o.wh]=0,n=new rt({shape:a}),e.__pictorialBundle.setClipPath(n),e.__pictorialClipPath=n;var u={};u[o.wh]=r.clipShape[o.wh],Hg[i?"updateProps":"initProps"](n,{shape:u},s,l)}}}function gF(e,t){var r=e.getItemModel(t);return r.getAnimationDelayParams=BOe,r.isAnimationEnabled=FOe,r}function BOe(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function FOe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function mF(e,t,r,i){var n=new Ie,a=new Ie;return n.add(a),n.__pictorialBundle=a,a.x=r.bundlePosition[0],a.y=r.bundlePosition[1],r.symbolRepeat?Sq(n,t,r):Mq(n,t,r),Tq(n,r,i),Aq(n,t,r,i),n.__pictorialShapeStr=Cq(e,r),n.__pictorialSymbolMeta=r,n}function VOe(e,t,r){var i=r.animationModel,n=r.dataIndex,a=e.__pictorialBundle;ut(a,{x:r.bundlePosition[0],y:r.bundlePosition[1]},i,n),r.symbolRepeat?Sq(e,t,r,!0):Mq(e,t,r,!0),Tq(e,r,!0),Aq(e,t,r,!0)}function yF(e,t,r,i){var n=i.__pictorialBarRect;n&&n.removeTextContent();var a=[];vE(i,function(o){a.push(o)}),i.__pictorialMainPath&&a.push(i.__pictorialMainPath),i.__pictorialClipPath&&(r=null),I(a,function(o){Bl(o,{scaleX:0,scaleY:0},r,t,function(){i.parent&&i.parent.remove(i)})}),e.setItemGraphicEl(t,null)}function Cq(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function vE(e,t,r){I(e.__pictorialBundle.children(),function(i){i!==e.__pictorialBarRect&&t.call(r,i)})}function xd(e,t,r,i,n,a){t&&e.attr(t),i.symbolClip&&!n?r&&e.attr(r):r&&Hg[n?"updateProps":"initProps"](e,r,i.animationModel,i.dataIndex,a)}function _F(e,t,r){var i=r.dataIndex,n=r.itemModel,a=n.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=n.getModel(["blur","itemStyle"]).getItemStyle(),l=n.getModel(["select","itemStyle"]).getItemStyle(),u=n.getShallow("cursor"),h=a.get("focus"),c=a.get("blurScope"),d=a.get("scale");vE(e,function(v){if(v instanceof $r){var g=v.style;v.useStyle(ae({image:g.image,x:g.x,y:g.y,width:g.width,height:g.height},r.style))}else v.useStyle(r.style);var m=v.ensureState("emphasis");m.style=o,d&&(m.scaleX=v.scaleX*1.1,m.scaleY=v.scaleY*1.1),v.ensureState("blur").style=s,v.ensureState("select").style=l,u&&(v.cursor=u),v.z2=r.z2});var f=t.valueDim.posDesc[+(r.boundingLength>0)],p=e.__pictorialBarRect;Wr(p,Pr(n),{labelFetcher:t.seriesModel,labelDataIndex:i,defaultText:Fd(t.seriesModel.getData(),i),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:f}),Zt(e,h,c,a.get("disabled"))}function xF(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}const UOe=OOe;var GOe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return t.prototype.getInitialData=function(r){return r.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=Yl(I_.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(I_);const HOe=GOe;function jOe(e){e.registerChartView(UOe),e.registerSeriesModel(HOe),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,Ne(l7,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,u7("pictorialBar"))}var WOe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._layers=[],r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this,s=this.group,l=r.getLayerSeries(),u=a.getLayout("layoutInfo"),h=u.rect,c=u.boundaryGap;s.x=0,s.y=h.y+c[0];function d(g){return g.name}var f=new ws(this._layersSeries||[],l,d,d),p=[];f.add(me(v,this,"add")).update(me(v,this,"update")).remove(me(v,this,"remove")).execute();function v(g,m,y){var _=o._layers;if(g==="remove"){s.remove(_[m]);return}for(var x=[],w=[],b,S=l[m].indices,M=0;M<S.length;M++){var A=a.getItemLayout(S[M]),T=A.x,C=A.y0,D=A.y;x.push(T,C),w.push(T,C+D),b=a.getItemVisual(S[M],"style")}var P,E=a.getItemLayout(S[0]),O=r.getModel("label"),z=O.get("margin"),B=r.getModel("emphasis");if(g==="add"){var N=p[m]=new Ie;P=new K7({shape:{points:x,stackedOnPoints:w,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),N.add(P),s.add(N),r.isAnimationEnabled()&&P.setClipPath($Oe(P.getBoundingRect(),r,function(){P.removeClipPath()}))}else{var N=_[y];P=N.childAt(0),s.add(N),p[m]=N,ut(P,{shape:{points:x,stackedOnPoints:w}},r),Ca(P)}Wr(P,Pr(r),{labelDataIndex:S[M-1],defaultText:a.getName(S[M-1]),inheritColor:b.fill},{normal:{verticalAlign:"middle"}}),P.setTextConfig({position:null,local:!0});var F=P.getTextContent();F&&(F.x=E.x-z,F.y=E.y0+E.y/2),P.useStyle(b),a.setItemGraphicEl(m,P),jr(P,r),Zt(P,B.get("focus"),B.get("blurScope"),B.get("disabled"))}this._layersSeries=l,this._layers=p},t.type="themeRiver",t}(kt);function $Oe(e,t,r){var i=new rt({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return Ut(i,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,r),i}const qOe=WOe;var Q2=2,XOe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new em(me(this.getData,this),me(this.getRawData,this))},t.prototype.fixData=function(r){var i=r.length,n={},a=wA(r,function(d){return n.hasOwnProperty(d[0]+"")||(n[d[0]+""]=-1),d[2]}),o=[];a.buckets.each(function(d,f){o.push({name:f,dataList:d})});for(var s=o.length,l=0;l<s;++l){for(var u=o[l].name,h=0;h<o[l].dataList.length;++h){var c=o[l].dataList[h][0]+"";n[c]=l}for(var c in n)n.hasOwnProperty(c)&&n[c]!==l&&(n[c]=l,r[i]=[c,0,u],i++)}return r},t.prototype.getInitialData=function(r,i){for(var n=this.getReferringComponents("singleAxis",dr).models[0],a=n.get("type"),o=xt(r.data,function(p){return p[2]!==void 0}),s=this.fixData(o||[]),l=[],u=this.nameMap=Me(),h=0,c=0;c<s.length;++c)l.push(s[c][Q2]),u.get(s[c][Q2])||(u.set(s[c][Q2],h),h++);var d=qg(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:C_(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new xi(d,this);return f.initData(s),f},t.prototype.getLayerSeries=function(){for(var r=this.getData(),i=r.count(),n=[],a=0;a<i;++a)n[a]=a;var o=r.mapDimension("single"),s=wA(n,function(u){return r.get("name",u)}),l=[];return s.buckets.each(function(u,h){u.sort(function(c,d){return r.get(o,c)-r.get(o,d)}),l.push({name:h,indices:u})}),l},t.prototype.getAxisTooltipData=function(r,i,n){ue(r)||(r=r?[r]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,u,h=0;h<l;++h){for(var c=Number.MAX_VALUE,d=-1,f=o[h].indices.length,p=0;p<f;++p){var v=a.get(r[0],o[h].indices[p]),g=Math.abs(v-i);g<=c&&(u=v,c=g,d=o[h].indices[p])}s.push(d)}return{dataIndices:s,nestestValue:u}},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=a.getName(r),s=a.get(a.mapDimension("value"),r);return Lr("nameValue",{name:o,value:s})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}($t);const YOe=XOe;function ZOe(e,t){e.eachSeriesByType("themeRiver",function(r){var i=r.getData(),n=r.coordinateSystem,a={},o=n.getRect();a.rect=o;var s=r.get("boundaryGap"),l=n.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=ve(s[0],o.height),s[1]=ve(s[1],o.height);var u=o.height-s[0]-s[1];bF(i,r,u)}else{s[0]=ve(s[0],o.width),s[1]=ve(s[1],o.width);var h=o.width-s[0]-s[1];bF(i,r,h)}i.setLayout("layoutInfo",a)})}function bF(e,t,r){if(e.count())for(var i=t.coordinateSystem,n=t.getLayerSeries(),a=e.mapDimension("single"),o=e.mapDimension("value"),s=ce(n,function(g){return ce(g.indices,function(m){var y=i.dataToPoint(e.get(a,m));return y[1]=e.get(o,m),y})}),l=KOe(s),u=l.y0,h=r/l.max,c=n.length,d=n[0].indices.length,f,p=0;p<d;++p){f=u[p]*h,e.setItemLayout(n[0].indices[p],{layerIndex:0,x:s[0][p][0],y0:f,y:s[0][p][1]*h});for(var v=1;v<c;++v)f+=s[v-1][p][1]*h,e.setItemLayout(n[v].indices[p],{layerIndex:v,x:s[v][p][0],y0:f,y:s[v][p][1]*h})}}function KOe(e){for(var t=e.length,r=e[0].length,i=[],n=[],a=0,o=0;o<r;++o){for(var s=0,l=0;l<t;++l)s+=e[l][o][1];s>a&&(a=s),i.push(s)}for(var u=0;u<r;++u)n[u]=(a-i[u])/2;a=0;for(var h=0;h<r;++h){var c=i[h]+n[h];c>a&&(a=c)}return{y0:n,max:a}}function JOe(e){e.registerChartView(qOe),e.registerSeriesModel(YOe),e.registerLayout(ZOe),e.registerProcessor(Qg("themeRiver"))}var QOe=2,e3e=4,t3e=function(e){Y(t,e);function t(r,i,n,a){var o=e.call(this)||this;o.z2=QOe,o.textConfig={inside:!0},Re(o).seriesIndex=i.seriesIndex;var s=new ot({z2:e3e,silent:r.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,r,i,n,a),o}return t.prototype.updateData=function(r,i,n,a,o){this.node=i,i.piece=this,n=n||this._seriesModel,a=a||this._ecModel;var s=this;Re(s).dataIndex=i.dataIndex;var l=i.getModel(),u=l.getModel("emphasis"),h=i.getLayout(),c=ae({},h);c.label=null;var d=i.getVisual("style");d.lineJoin="bevel";var f=i.getVisual("decal");f&&(d.decal=kd(f,o));var p=ah(l.getModel("itemStyle"),c,!0);ae(c,p),I(Si,function(y){var _=s.ensureState(y),x=l.getModel([y,"itemStyle"]);_.style=x.getItemStyle();var w=ah(x,c);w&&(_.shape=w)}),r?(s.setShape(c),s.shape.r=h.r0,Ut(s,{shape:{r:h.r}},n,i.dataIndex)):(ut(s,{shape:c},n),Ca(s)),s.useStyle(d),this._updateLabel(n);var v=l.getShallow("cursor");v&&s.attr("cursor",v),this._seriesModel=n||this._seriesModel,this._ecModel=a||this._ecModel;var g=u.get("focus"),m=g==="ancestor"?i.getAncestorsIndices():g==="descendant"?i.getDescendantIndices():g;Zt(this,m,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(r){var i=this,n=this.node.getModel(),a=n.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,u=Math.cos(l),h=Math.sin(l),c=this,d=c.getTextContent(),f=this.node.dataIndex,p=a.get("minAngle")/180*Math.PI,v=a.get("show")&&!(p!=null&&Math.abs(s)<p);d.ignore=!v,I(tg,function(m){var y=m==="normal"?n.getModel("label"):n.getModel([m,"label"]),_=m==="normal",x=_?d:d.ensureState(m),w=r.getFormattedLabel(f,m);_&&(w=w||i.node.name),x.style=zt(y,{},null,m!=="normal",!0),w&&(x.style.text=w);var b=y.get("show");b!=null&&!_&&(x.ignore=!b);var S=g(y,"position"),M=_?c:c.states[m],A=M.style.fill;M.textConfig={outsideFill:y.get("color")==="inherit"?A:null,inside:S!=="outside"};var T,C=g(y,"distance")||0,D=g(y,"align");S==="outside"?(T=o.r+C,D=l>Math.PI/2?"right":"left"):!D||D==="center"?(s===2*Math.PI&&o.r0===0?T=0:T=(o.r+o.r0)/2,D="center"):D==="left"?(T=o.r0+C,l>Math.PI/2&&(D="right")):D==="right"&&(T=o.r-C,l>Math.PI/2&&(D="left")),x.style.align=D,x.style.verticalAlign=g(y,"verticalAlign")||"middle",x.x=T*u+o.cx,x.y=T*h+o.cy;var P=g(y,"rotate"),E=0;P==="radial"?(E=ts(-l),E>Math.PI/2&&E<Math.PI*1.5&&(E+=Math.PI)):P==="tangential"?(E=Math.PI/2-l,E>Math.PI/2?E-=Math.PI:E<-Math.PI/2&&(E+=Math.PI)):st(P)&&(E=P*Math.PI/180),x.rotation=E});function g(m,y){var _=m.get(y);return _??a.get(y)}d.dirtyStyle()},t}($i);const wF=t3e;var xC="sunburstRootToNode",SF="sunburstHighlight",r3e="sunburstUnhighlight";function i3e(e){e.registerAction({type:xC,update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"sunburst",query:t},i);function i(n,a){var o=vg(t,[xC],n);if(o){var s=n.getViewRoot();s&&(t.direction=eE(s,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}}}),e.registerAction({type:SF,update:"none"},function(t,r,i){t=ae({},t),r.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(a){var o=vg(t,[SF],a);o&&(t.dataIndex=o.node.dataIndex)}i.dispatchAction(ae(t,{type:"highlight"}))}),e.registerAction({type:r3e,update:"updateView"},function(t,r,i){t=ae({},t),i.dispatchAction(ae(t,{type:"downplay"}))})}var n3e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){var o=this;this.seriesModel=r,this.api=n,this.ecModel=i;var s=r.getData(),l=s.tree.root,u=r.getViewRoot(),h=this.group,c=r.get("renderLabelForZeroData"),d=[];u.eachNode(function(y){d.push(y)});var f=this._oldChildren||[];p(d,f),m(l,u),this._initEvents(),this._oldChildren=d;function p(y,_){if(y.length===0&&_.length===0)return;new ws(_,y,x,x).add(w).update(w).remove(Ne(w,null)).execute();function x(b){return b.getId()}function w(b,S){var M=b==null?null:y[b],A=S==null?null:_[S];v(M,A)}}function v(y,_){if(!c&&y&&!y.getValue()&&(y=null),y!==l&&_!==l){if(_&&_.piece)y?(_.piece.updateData(!1,y,r,i,n),s.setItemGraphicEl(y.dataIndex,_.piece)):g(_);else if(y){var x=new wF(y,r,i,n);h.add(x),s.setItemGraphicEl(y.dataIndex,x)}}}function g(y){y&&y.piece&&(h.remove(y.piece),y.piece=null)}function m(y,_){_.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,y,r,i,n):(o.virtualPiece=new wF(y,r,i,n),h.add(o.virtualPiece)),_.piece.off("click"),o.virtualPiece.on("click",function(x){o._rootToNode(_.parentNode)})):o.virtualPiece&&(h.remove(o.virtualPiece),o.virtualPiece=null)}},t.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(i){var n=!1,a=r.seriesModel.getViewRoot();a.eachNode(function(o){if(!n&&o.piece&&o.piece===i.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")r._rootToNode(o);else if(s==="link"){var l=o.getModel(),u=l.get("link");if(u){var h=l.get("target",!0)||"_blank";__(u,h)}}n=!0}})})},t.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:xC,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},t.prototype.containPoint=function(r,i){var n=i.getData(),a=n.getItemLayout(0);if(a){var o=r[0]-a.cx,s=r[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="sunburst",t}(kt);const a3e=n3e;var o3e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r,i){var n={name:r.name,children:r.data};Dq(n);var a=this._levelModels=ce(r.levels||[],function(l){return new Nt(l,this,i)},this),o=QL.createTree(n,this,s);function s(l){l.wrapMethod("getItemModel",function(u,h){var c=o.getNodeByDataIndex(h),d=a[c.depth];return d&&(u.parentModel=d),u})}return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treePathInfo=mb(n,this),i},t.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var i=this.getRawData().tree.root;(!r||r!==i&&!i.contains(r))&&(this._viewRoot=i)},t.prototype.enableAriaDecal=function(){I$(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}($t);function Dq(e){var t=0;I(e.children,function(i){Dq(i);var n=i.value;ue(n)&&(n=n[0]),t+=n});var r=e.value;ue(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),ue(e.value)?e.value[0]=r:e.value=r}const s3e=o3e;var MF=Math.PI/180;function l3e(e,t,r){t.eachSeriesByType(e,function(i){var n=i.get("center"),a=i.get("radius");ue(a)||(a=[0,a]),ue(n)||(n=[n,n]);var o=r.getWidth(),s=r.getHeight(),l=Math.min(o,s),u=ve(n[0],o),h=ve(n[1],s),c=ve(a[0],l/2),d=ve(a[1],l/2),f=-i.get("startAngle")*MF,p=i.get("minAngle")*MF,v=i.getData().tree.root,g=i.getViewRoot(),m=g.depth,y=i.get("sort");y!=null&&Pq(g,y);var _=0;I(g.children,function(z){!isNaN(z.getValue())&&_++});var x=g.getValue(),w=Math.PI/(x||_)*2,b=g.depth>0,S=g.height-(b?-1:1),M=(d-c)/(S||1),A=i.get("clockwise"),T=i.get("stillShowZeroSum"),C=A?1:-1,D=function(z,B){if(z){var N=B;if(z!==v){var F=z.getValue(),G=x===0&&T?w:F*w;G<p&&(G=p),N=B+C*G;var H=z.depth-m-(b?-1:1),$=c+M*H,Z=c+M*(H+1),X=i.getLevelModel(z);if(X){var ne=X.get("r0",!0),te=X.get("r",!0),U=X.get("radius",!0);U!=null&&(ne=U[0],te=U[1]),ne!=null&&($=ve(ne,l/2)),te!=null&&(Z=ve(te,l/2))}z.setLayout({angle:G,startAngle:B,endAngle:N,clockwise:A,cx:u,cy:h,r0:$,r:Z})}if(z.children&&z.children.length){var W=0;I(z.children,function(j){W+=D(j,B+W)})}return N-B}};if(b){var P=c,E=c+M,O=Math.PI*2;v.setLayout({angle:O,startAngle:f,endAngle:f+O,clockwise:A,cx:u,cy:h,r0:P,r:E})}D(g,f)})}function Pq(e,t){var r=e.children||[];e.children=u3e(r,t),r.length&&I(e.children,function(i){Pq(i,t)})}function u3e(e,t){if(Ae(t)){var r=ce(e,function(n,a){var o=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return o}},index:a}});return r.sort(function(n,a){return t(n.params,a.params)}),ce(r,function(n){return e[n.index]})}else{var i=t==="asc";return e.sort(function(n,a){var o=(n.getValue()-a.getValue())*(i?1:-1);return o===0?(n.dataIndex-a.dataIndex)*(i?-1:1):o})}}function h3e(e){var t={};function r(i,n,a){for(var o=i;o&&o.depth>1;)o=o.parentNode;var s=n.getColorFromPalette(o.name||o.dataIndex+"",t);return i.depth>1&&ge(s)&&(s=dA(s,(i.depth-1)/(a-1)*.5)),s}e.eachSeriesByType("sunburst",function(i){var n=i.getData(),a=n.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=r(o,i,a.root.height));var u=n.ensureUniqueItemVisual(o.dataIndex,"style");ae(u,l)})})}function c3e(e){e.registerChartView(a3e),e.registerSeriesModel(s3e),e.registerLayout(Ne(l3e,"sunburst")),e.registerProcessor(Ne(Qg,"sunburst")),e.registerVisual(h3e),i3e(e)}var TF={color:"fill",borderColor:"stroke"},d3e={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},cs=it(),f3e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,i){return Ds(null,this)},t.prototype.getDataParams=function(r,i,n){var a=e.prototype.getDataParams.call(this,r,i);return n&&(a.info=cs(n).info),a},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}($t);const p3e=f3e;function v3e(e,t){return t=t||[0,0],ce(["x","y"],function(r,i){var n=this.getAxis(r),a=t[i],o=e[i]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(a-o)-n.dataToCoord(a+o))},this)}function g3e(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:me(v3e,e)}}}function m3e(e,t){return t=t||[0,0],ce([0,1],function(r){var i=t[r],n=e[r]/2,a=[],o=[];return a[r]=i-n,o[r]=i+n,a[1-r]=o[1-r]=t[1-r],Math.abs(this.dataToPoint(a)[r]-this.dataToPoint(o)[r])},this)}function y3e(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:me(m3e,e)}}}function _3e(e,t){var r=this.getAxis(),i=t instanceof Array?t[0]:t,n=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(i-n)-r.dataToCoord(i+n))}function x3e(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:me(_3e,e)}}}function b3e(e,t){return t=t||[0,0],ce(["Radius","Angle"],function(r,i){var n="get"+r+"Axis",a=this[n](),o=t[i],s=e[i]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function w3e(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),i=t.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:i[1],r0:i[0]},api:{coord:function(n){var a=t.dataToRadius(n[0]),o=r.dataToAngle(n[1]),s=e.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:me(b3e,e)}}}function S3e(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(i,n){return e.dataToPoint(i,n)}}}}function Lq(e,t,r,i){return e&&(e.legacy||e.legacy!==!1&&!r&&!i&&t!=="tspan"&&(t==="text"||_e(e,"text")))}function Eq(e,t,r){var i=e,n,a,o;if(t==="text")o=i;else{o={},_e(i,"text")&&(o.text=i.text),_e(i,"rich")&&(o.rich=i.rich),_e(i,"textFill")&&(o.fill=i.textFill),_e(i,"textStroke")&&(o.stroke=i.textStroke),_e(i,"fontFamily")&&(o.fontFamily=i.fontFamily),_e(i,"fontSize")&&(o.fontSize=i.fontSize),_e(i,"fontStyle")&&(o.fontStyle=i.fontStyle),_e(i,"fontWeight")&&(o.fontWeight=i.fontWeight),a={type:"text",style:o,silent:!0},n={};var s=_e(i,"textPosition");r?n.position=s?i.textPosition:"inside":s&&(n.position=i.textPosition),_e(i,"textPosition")&&(n.position=i.textPosition),_e(i,"textOffset")&&(n.offset=i.textOffset),_e(i,"textRotation")&&(n.rotation=i.textRotation),_e(i,"textDistance")&&(n.distance=i.textDistance)}return AF(o,e),I(o.rich,function(l){AF(l,l)}),{textConfig:n,textContent:a}}function AF(e,t){t&&(t.font=t.textFont||t.font,_e(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),_e(t,"textAlign")&&(e.align=t.textAlign),_e(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),_e(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),_e(t,"textWidth")&&(e.width=t.textWidth),_e(t,"textHeight")&&(e.height=t.textHeight),_e(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),_e(t,"textPadding")&&(e.padding=t.textPadding),_e(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),_e(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),_e(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),_e(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),_e(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),_e(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),_e(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function CF(e,t,r){var i=e;i.textPosition=i.textPosition||r.position||"inside",r.offset!=null&&(i.textOffset=r.offset),r.rotation!=null&&(i.textRotation=r.rotation),r.distance!=null&&(i.textDistance=r.distance);var n=i.textPosition.indexOf("inside")>=0,a=e.fill||"#000";DF(i,t);var o=i.textFill==null;return n?o&&(i.textFill=r.insideFill||"#fff",!i.textStroke&&r.insideStroke&&(i.textStroke=r.insideStroke),!i.textStroke&&(i.textStroke=a),i.textStrokeWidth==null&&(i.textStrokeWidth=2)):(o&&(i.textFill=e.fill||r.outsideFill||"#000"),!i.textStroke&&r.outsideStroke&&(i.textStroke=r.outsideStroke)),i.text=t.text,i.rich=t.rich,I(t.rich,function(s){DF(s,s)}),i}function DF(e,t){t&&(_e(t,"fill")&&(e.textFill=t.fill),_e(t,"stroke")&&(e.textStroke=t.fill),_e(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),_e(t,"font")&&(e.font=t.font),_e(t,"fontStyle")&&(e.fontStyle=t.fontStyle),_e(t,"fontWeight")&&(e.fontWeight=t.fontWeight),_e(t,"fontSize")&&(e.fontSize=t.fontSize),_e(t,"fontFamily")&&(e.fontFamily=t.fontFamily),_e(t,"align")&&(e.textAlign=t.align),_e(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),_e(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),_e(t,"width")&&(e.textWidth=t.width),_e(t,"height")&&(e.textHeight=t.height),_e(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),_e(t,"padding")&&(e.textPadding=t.padding),_e(t,"borderColor")&&(e.textBorderColor=t.borderColor),_e(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),_e(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),_e(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),_e(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),_e(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),_e(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),_e(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),_e(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),_e(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),_e(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var Iq={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},PF=Ze(Iq);xo(wo,function(e,t){return e[t]=1,e},{});wo.join(", ");var V_=["","style","shape","extra"],Gd=it();function gE(e,t,r,i,n){var a=e+"Animation",o=cf(e,i,n)||{},s=Gd(t).userDuring;return o.duration>0&&(o.during=s?me(D3e,{el:t,userDuring:s}):null,o.setToFinal=!0,o.scope=e),ae(o,r[a]),o}function t1(e,t,r,i){i=i||{};var n=i.dataIndex,a=i.isInit,o=i.clearStyle,s=r.isAnimationEnabled(),l=Gd(e),u=t.style;l.userDuring=t.during;var h={},c={};if(L3e(e,t,c),EF("shape",t,c),EF("extra",t,c),!a&&s&&(P3e(e,t,h),LF("shape",e,t,h),LF("extra",e,t,h),E3e(e,t,u,h)),c.style=u,M3e(e,c,o),A3e(e,t),s)if(a){var d={};I(V_,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(d[p]=d[p]||{}),ae(p?d[p]:d,v.enterFrom))});var f=gE("enter",e,t,r,n);f.duration>0&&e.animateFrom(d,f)}else T3e(e,t,n||0,r,h);Oq(e,t),u?e.dirty():e.markRedraw()}function Oq(e,t){for(var r=Gd(e).leaveToProps,i=0;i<V_.length;i++){var n=V_[i],a=n?t[n]:t;a&&a.leaveTo&&(r||(r=Gd(e).leaveToProps={}),n&&(r[n]=r[n]||{}),ae(n?r[n]:r,a.leaveTo))}}function xb(e,t,r,i){if(e){var n=e.parent,a=Gd(e).leaveToProps;if(a){var o=gE("update",e,t,r,0);o.done=function(){n.remove(e),i&&i()},e.animateTo(a,o)}else n.remove(e),i&&i()}}function Sh(e){return e==="all"}function M3e(e,t,r){var i=t.style;if(!e.isGroup&&i){if(r){e.useStyle({});for(var n=e.animators,a=0;a<n.length;a++){var o=n[a];o.targetName==="style"&&o.changeTarget(e.style)}}e.setStyle(i)}t&&(t.style=null,t&&e.attr(t),t.style=i)}function T3e(e,t,r,i,n){if(n){var a=gE("update",e,t,i,r);a.duration>0&&e.animateFrom(n,a)}}function A3e(e,t){_e(t,"silent")&&(e.silent=t.silent),_e(t,"ignore")&&(e.ignore=t.ignore),e instanceof Hn&&_e(t,"invisible")&&(e.invisible=t.invisible),e instanceof qe&&_e(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var Xa={},C3e={setTransform:function(e,t){return Xa.el[e]=t,this},getTransform:function(e){return Xa.el[e]},setShape:function(e,t){var r=Xa.el,i=r.shape||(r.shape={});return i[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=Xa.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=Xa.el,i=r.style;return i&&(i[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=Xa.el.style;if(t)return t[e]},setExtra:function(e,t){var r=Xa.el.extra||(Xa.el.extra={});return r[e]=t,this},getExtra:function(e){var t=Xa.el.extra;if(t)return t[e]}};function D3e(){var e=this,t=e.el;if(t){var r=Gd(t).userDuring,i=e.userDuring;if(r!==i){e.el=e.userDuring=null;return}Xa.el=t,i(C3e)}}function LF(e,t,r,i){var n=r[e];if(n){var a=t[e],o;if(a){var s=r.transition,l=n.transition;if(l)if(!o&&(o=i[e]={}),Sh(l))ae(o,a);else for(var u=Mt(l),h=0;h<u.length;h++){var c=u[h],d=a[c];o[c]=d}else if(Sh(s)||We(s,e)>=0){!o&&(o=i[e]={});for(var f=Ze(a),h=0;h<f.length;h++){var c=f[h],d=a[c];I3e(n[c],d)&&(o[c]=d)}}}}}function EF(e,t,r){var i=t[e];if(i)for(var n=r[e]={},a=Ze(i),o=0;o<a.length;o++){var s=a[o];n[s]=cv(i[s])}}function P3e(e,t,r){for(var i=t.transition,n=Sh(i)?wo:Mt(i||[]),a=0;a<n.length;a++){var o=n[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=e[o];r[o]=s}}}function L3e(e,t,r){for(var i=0;i<PF.length;i++){var n=PF[i],a=Iq[n],o=t[n];o&&(r[a[0]]=o[0],r[a[1]]=o[1])}for(var i=0;i<wo.length;i++){var s=wo[i];t[s]!=null&&(r[s]=t[s])}}function E3e(e,t,r,i){if(r){var n=e.style,a;if(n){var o=r.transition,s=t.transition;if(o&&!Sh(o)){var l=Mt(o);!a&&(a=i.style={});for(var u=0;u<l.length;u++){var h=l[u],c=n[h];a[h]=c}}else if(e.getAnimationStyleProps&&(Sh(s)||Sh(o)||We(s,"style")>=0)){var d=e.getAnimationStyleProps(),f=d?d.style:null;if(f){!a&&(a=i.style={});for(var p=Ze(r),u=0;u<p.length;u++){var h=p[u];if(f[h]){var c=n[h];a[h]=c}}}}}}}function I3e(e,t){return ai(e)?e!==t:e!=null&&isFinite(e)}var Rq=it(),O3e=["percent","easing","shape","style","extra"];function zq(e){e.stopAnimation("keyframe"),e.attr(Rq(e))}function U_(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(ue(t)){I(t,function(s){U_(e,s,r)});return}var i=t.keyframes,n=t.duration;if(r&&n==null){var a=cf("enter",r,0);n=a&&a.duration}if(!(!i||!n)){var o=Rq(e);I(V_,function(s){if(!(s&&!e[s])){var l;i.sort(function(u,h){return u.percent-h.percent}),I(i,function(u){var h=e.animators,c=s?u[s]:u;if(c){var d=Ze(c);if(s||(d=xt(d,function(v){return We(O3e,v)<0})),!!d.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var f=0;f<h.length;f++)h[f]!==l&&h[f].targetName===l.targetName&&h[f].stopTracks(d);s&&(o[s]=o[s]||{});var p=s?o[s]:o;I(d,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(n*u.percent,c,d,u.easing)}}}),l&&l.delay(t.delay||0).duration(n).start(t.easing)}})}}}var ds="emphasis",bl="normal",mE="blur",yE="select",Hl=[bl,ds,mE,yE],eM={normal:["itemStyle"],emphasis:[ds,"itemStyle"],blur:[mE,"itemStyle"],select:[yE,"itemStyle"]},tM={normal:["label"],emphasis:[ds,"label"],blur:[mE,"label"],select:[yE,"label"]},R3e=["x","y"],z3e="e\0\0",_n={normal:{},emphasis:{},blur:{},select:{}},N3e={cartesian2d:g3e,geo:y3e,single:x3e,polar:w3e,calendar:S3e};function bC(e){return e instanceof qe}function wC(e){return e instanceof Hn}function k3e(e,t){t.copyTransform(e),wC(t)&&wC(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,bC(t)&&bC(e)&&t.setShape(e.shape))}var B3e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){this._progressiveEls=null;var o=this._data,s=r.getData(),l=this.group,u=IF(r,s,i,n);o||l.removeAll(),s.diff(o).add(function(c){rM(n,null,c,u(c,a),r,l,s)}).remove(function(c){var d=o.getItemGraphicEl(c);d&&xb(d,cs(d).option,r)}).update(function(c,d){var f=o.getItemGraphicEl(d);rM(n,f,c,u(c,a),r,l,s)}).execute();var h=r.get("clip",!0)?pb(r.coordinateSystem,!1,r):null;h?l.setClipPath(h):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,i,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,i,n,a,o){var s=i.getData(),l=IF(i,s,n,a),u=this._progressiveEls=[];function h(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var c=r.start;c<r.end;c++){var d=rM(null,null,c,l(c,o),i,this.group,s);d&&(d.traverse(h),u.push(d))}},t.prototype.eachRendered=function(r){Xl(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,i,n,a){var o=i.element;if(o==null||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},t.type="custom",t}(kt);const F3e=B3e;function _E(e){var t=e.type,r;if(t==="path"){var i=e.shape,n=i.width!=null&&i.height!=null?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,a=Bq(i);r=Zx(a,null,n,i.layout||"center"),cs(r).customPathData=a}else if(t==="image")r=new $r({}),cs(r).customImagePath=e.style.image;else if(t==="text")r=new ot({});else if(t==="group")r=new Ie;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=lL(t);if(!o){var s="";dt(s)}r=new o}return cs(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function xE(e,t,r,i,n,a,o){zq(t);var s=n&&n.normal.cfg;s&&t.setTextConfig(s),i&&i.transition==null&&(i.transition=R3e);var l=i&&i.style;if(l){if(t.type==="text"){var u=l;_e(u,"textFill")&&(u.fill=u.textFill),_e(u,"textStroke")&&(u.stroke=u.textStroke)}var h=void 0,c=bC(t)?l.decal:null;e&&c&&(c.dirty=!0,h=kd(c,e)),l.__decalPattern=h}if(wC(t)&&l){var h=l.__decalPattern;h&&(l.decal=h)}t1(t,i,a,{dataIndex:r,isInit:o,clearStyle:!0}),U_(t,i.keyframeAnimation,a)}function Nq(e,t,r,i,n){var a=t.isGroup?null:t,o=n&&n[e].cfg;if(a){var s=a.ensureState(e);if(i===!1){var l=a.getState(e);l&&(l.style=null)}else s.style=i||null;o&&(s.textConfig=o),Oh(a)}}function V3e(e,t,r){if(!e.isGroup){var i=e,n=r.currentZ,a=r.currentZLevel;i.z=n,i.zlevel=a;var o=t.z2;o!=null&&(i.z2=o||0);for(var s=0;s<Hl.length;s++)U3e(i,t,Hl[s])}}function U3e(e,t,r){var i=r===bl,n=i?t:G_(t,r),a=n?n.z2:null,o;a!=null&&(o=i?e:e.ensureState(r),o.z2=a||0)}function IF(e,t,r,i){var n=e.get("renderItem"),a=e.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):N3e[a.type](a));for(var s=De({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:x,style:b,ordinalRawValue:w,styleEmphasis:S,visual:T,barLayout:C,currentSeriesIndices:D,font:P},o.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:G3e(e.getData())},u,h,c={},d={},f={},p={},v=0;v<Hl.length;v++){var g=Hl[v];f[g]=e.getModel(eM[g]),p[g]=e.getModel(tM[g])}function m(E){return E===u?h||(h=t.getItemModel(E)):t.getItemModel(E)}function y(E,O){return t.hasItemOption?E===u?c[O]||(c[O]=m(E).getModel(eM[O])):m(E).getModel(eM[O]):f[O]}function _(E,O){return t.hasItemOption?E===u?d[O]||(d[O]=m(E).getModel(tM[O])):m(E).getModel(tM[O]):p[O]}return function(E,O){return u=E,h=null,c={},d={},n&&n(De({dataIndexInside:E,dataIndex:t.getRawIndex(E),actionType:O?O.type:null},l),s)};function x(E,O){return O==null&&(O=u),t.getStore().get(t.getDimensionIndex(E||0),O)}function w(E,O){O==null&&(O=u),E=E||0;var z=t.getDimensionInfo(E);if(!z){var B=t.getDimensionIndex(E);return B>=0?t.getStore().get(B,O):void 0}var N=t.get(z.name,O),F=z&&z.ordinalMeta;return F?F.categories[N]:N}function b(E,O){O==null&&(O=u);var z=t.getItemVisual(O,"style"),B=z&&z.fill,N=z&&z.opacity,F=y(O,bl).getItemStyle();B!=null&&(F.fill=B),N!=null&&(F.opacity=N);var G={inheritColor:ge(B)?B:"#000"},H=_(O,bl),$=zt(H,null,G,!1,!0);$.text=H.getShallow("show")?Ve(e.getFormattedLabel(O,bl),Fd(t,O)):null;var Z=m_(H,G,!1);return A(E,F),F=CF(F,$,Z),E&&M(F,E),F.legacy=!0,F}function S(E,O){O==null&&(O=u);var z=y(O,ds).getItemStyle(),B=_(O,ds),N=zt(B,null,null,!0,!0);N.text=B.getShallow("show")?ss(e.getFormattedLabel(O,ds),e.getFormattedLabel(O,bl),Fd(t,O)):null;var F=m_(B,null,!0);return A(E,z),z=CF(z,N,F),E&&M(z,E),z.legacy=!0,z}function M(E,O){for(var z in O)_e(O,z)&&(E[z]=O[z])}function A(E,O){E&&(E.textFill&&(O.textFill=E.textFill),E.textPosition&&(O.textPosition=E.textPosition))}function T(E,O){if(O==null&&(O=u),_e(TF,E)){var z=t.getItemVisual(O,"style");return z?z[TF[E]]:null}if(_e(d3e,E))return t.getItemVisual(O,E)}function C(E){if(a.type==="cartesian2d"){var O=a.getBaseAxis();return j2e(De({axis:O},E))}}function D(){return r.getCurrentSeriesIndices()}function P(E){return v8(E,r)}}function G3e(e){var t={};return I(e.dimensions,function(r){var i=e.getDimensionInfo(r);if(!i.isExtraCoord){var n=i.coordDim,a=t[n]=t[n]||[];a[i.coordDimIndex]=e.getDimensionIndex(r)}}),t}function rM(e,t,r,i,n,a,o){if(!i){a.remove(t);return}var s=bE(e,t,r,i,n,a);return s&&o.setItemGraphicEl(r,s),s&&Zt(s,i.focus,i.blurScope,i.emphasisDisabled),s}function bE(e,t,r,i,n,a){var o=-1,s=t;t&&kq(t,i,n)&&(o=We(a.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=_E(i),s&&k3e(s,u)),i.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),_n.normal.cfg=_n.normal.conOpt=_n.emphasis.cfg=_n.emphasis.conOpt=_n.blur.cfg=_n.blur.conOpt=_n.select.cfg=_n.select.conOpt=null,_n.isLegacy=!1,j3e(u,r,i,n,l,_n),H3e(u,r,i,n,l),xE(e,u,r,i,_n,n,l),_e(i,"info")&&(cs(u).info=i.info);for(var h=0;h<Hl.length;h++){var c=Hl[h];if(c!==bl){var d=G_(i,c),f=wE(i,d,c);Nq(c,u,d,f,_n)}}return V3e(u,i,n),i.type==="group"&&W3e(e,u,r,i,n),o>=0?a.replaceAt(u,o):a.add(u),u}function kq(e,t,r){var i=cs(e),n=t.type,a=t.shape,o=t.style;return r.isUniversalTransitionEnabled()||n!=null&&n!==i.customGraphicType||n==="path"&&Y3e(a)&&Bq(a)!==i.customPathData||n==="image"&&_e(o,"image")&&o.image!==i.customImagePath}function H3e(e,t,r,i,n){var a=r.clipPath;if(a===!1)e&&e.getClipPath()&&e.removeClipPath();else if(a){var o=e.getClipPath();o&&kq(o,a,i)&&(o=null),o||(o=_E(a),e.setClipPath(o)),xE(null,o,t,a,null,i,n)}}function j3e(e,t,r,i,n,a){if(!e.isGroup){OF(r,null,a),OF(r,ds,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,u=a.select.conOpt;if(o!=null||s!=null||u!=null||l!=null){var h=e.getTextContent();if(o===!1)h&&e.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},h?h.clearStates():(h=_E(o),e.setTextContent(h)),xE(null,h,t,o,null,i,n);for(var c=o&&o.style,d=0;d<Hl.length;d++){var f=Hl[d];if(f!==bl){var p=a[f].conOpt;Nq(f,h,p,wE(o,p,f),null)}}c?h.dirty():h.markRedraw()}}}}function OF(e,t,r){var i=t?G_(e,t):e,n=t?wE(e,i,ds):e.style,a=e.type,o=i?i.textConfig:null,s=e.textContent,l=s?t?G_(s,t):s:null;if(n&&(r.isLegacy||Lq(n,a,!!o,!!l))){r.isLegacy=!0;var u=Eq(n,a,!t);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var h=l;!h.type&&(h.type="text")}var c=t?r[t]:r.normal;c.cfg=o,c.conOpt=l}function G_(e,t){return t?e?e[t]:null:e}function wE(e,t,r){var i=t&&t.style;return i==null&&r===ds&&e&&(i=e.styleEmphasis),i}function W3e(e,t,r,i,n){var a=i.children,o=a?a.length:0,s=i.$mergeChildren,l=s==="byName"||i.diffChildrenByName,u=s===!1;if(!(!o&&!l&&!u)){if(l){q3e({api:e,oldChildren:t.children()||[],newChildren:a||[],dataIndex:r,seriesModel:n,group:t});return}u&&t.removeAll();for(var h=0;h<o;h++){var c=a[h],d=t.childAt(h);c?(c.ignore==null&&(c.ignore=!1),bE(e,d,r,c,n,t)):d.ignore=!0}for(var f=t.childCount()-1;f>=h;f--){var p=t.childAt(f);$3e(t,p,n)}}}function $3e(e,t,r){t&&xb(t,cs(e).option,r)}function q3e(e){new ws(e.oldChildren,e.newChildren,RF,RF,e).add(zF).update(zF).remove(X3e).execute()}function RF(e,t){var r=e&&e.name;return r??z3e+t}function zF(e,t){var r=this.context,i=e!=null?r.newChildren[e]:null,n=t!=null?r.oldChildren[t]:null;bE(r.api,n,r.dataIndex,i,r.seriesModel,r.group)}function X3e(e){var t=this.context,r=t.oldChildren[e];r&&xb(r,cs(r).option,t.seriesModel)}function Bq(e){return e&&(e.pathData||e.d)}function Y3e(e){return e&&(_e(e,"pathData")||_e(e,"d"))}function Z3e(e){e.registerChartView(F3e),e.registerSeriesModel(p3e)}var Yu=it(),NF=Ee,iM=me,K3e=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,i,n){var a=r.get("value"),o=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=i,!(!n&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,t,r,i);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new Ie,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),i.getZr().add(s);else{var d=Ne(kF,r,c);this.updatePointerEl(s,u,d),this.updateLabelEl(s,u,d,r)}FF(s,r,!0),this._renderHandle(a)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var i=r.get("animation"),n=t.axis,a=n.type==="category",o=r.get("snap");if(!o&&!a)return!1;if(i==="auto"||i==null){var s=this.animationThreshold;if(a&&n.getBandWidth()>s)return!0;if(o){var l=$L(t).seriesDataCount,u=n.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return i===!0},e.prototype.makeElOption=function(t,r,i,n,a){},e.prototype.createPointerEl=function(t,r,i,n){var a=r.pointer;if(a){var o=Yu(t).pointerEl=new Hg[a.type](NF(r.pointer));t.add(o)}},e.prototype.createLabelEl=function(t,r,i,n){if(r.label){var a=Yu(t).labelEl=new ot(NF(r.label));t.add(a),BF(a,n)}},e.prototype.updatePointerEl=function(t,r,i){var n=Yu(t).pointerEl;n&&r.pointer&&(n.setStyle(r.pointer.style),i(n,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,i,n){var a=Yu(t).labelEl;a&&(a.setStyle(r.label.style),i(a,{x:r.label.x,y:r.label.y}),BF(a,n))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,i=this._api.getZr(),n=this._handle,a=r.getModel("handle"),o=r.get("status");if(!a.get("show")||!o||o==="hide"){n&&i.remove(n),this._handle=null;return}var s;this._handle||(s=!0,n=this._handle=Gg(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){ys(u.event)},onmousedown:iM(this._onHandleDragMove,this,0,0),drift:iM(this._onHandleDragMove,this),ondragend:iM(this._onHandleDragEnd,this)}),i.add(n)),FF(n,r,!1),n.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");ue(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,xf(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){kF(this._axisPointerModel,!r&&this._moveAnimation,this._handle,nM(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(nM(i),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(nM(n)),Yu(i).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),i=this._group,n=this._handle;r&&i&&(this._lastGraphicKey=null,i&&r.remove(i),n&&r.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),lg(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,i){return i=i||0,{x:t[i],y:t[1-i],width:r[i],height:r[1-i]}},e}();function kF(e,t,r,i){Fq(Yu(r).lastProp,i)||(Yu(r).lastProp=i,t?ut(r,i,e):(r.stopAnimation(),r.attr(i)))}function Fq(e,t){if(Pe(e)&&Pe(t)){var r=!0;return I(t,function(i,n){r=r&&Fq(e[n],i)}),!!r}else return e===t}function BF(e,t){e[t.get(["label","show"])?"show":"hide"]()}function nM(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function FF(e,t,r){var i=t.get("z"),n=t.get("zlevel");e&&e.traverse(function(a){a.type!=="group"&&(i!=null&&(a.z=i),n!=null&&(a.zlevel=n),a.silent=r)})}const SE=K3e;function ME(e){var t=e.get("type"),r=e.getModel(t+"Style"),i;return t==="line"?(i=r.getLineStyle(),i.fill=null):t==="shadow"&&(i=r.getAreaStyle(),i.stroke=null),i}function Vq(e,t,r,i,n){var a=r.get("value"),o=Uq(a,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=vf(s.get("padding")||0),u=s.getFont(),h=Bg(o,u),c=n.position,d=h.width+l[1]+l[3],f=h.height+l[0]+l[2],p=n.align;p==="right"&&(c[0]-=d),p==="center"&&(c[0]-=d/2);var v=n.verticalAlign;v==="bottom"&&(c[1]-=f),v==="middle"&&(c[1]-=f/2),J3e(c,d,f,i);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=t.get(["axisLine","lineStyle","color"])),e.label={x:c[0],y:c[1],style:zt(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function J3e(e,t,r,i){var n=i.getWidth(),a=i.getHeight();e[0]=Math.min(e[0]+t,n)-t,e[1]=Math.min(e[1]+r,a)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function Uq(e,t,r,i,n){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:n.precision}),o=n.formatter;if(o){var s={value:kL(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};I(i,function(l){var u=r.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,c=u&&u.getDataParams(h);c&&s.seriesData.push(c)}),ge(o)?a=o.replace("{value}",a):Ae(o)&&(a=o(s))}return a}function TE(e,t,r){var i=Gn();return Wh(i,i,r.rotation),bo(i,i,r.position),Sa([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],i)}function Gq(e,t,r,i,n,a){var o=Ss.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=n.get(["label","margin"]),Vq(t,i,n,a,{position:TE(i.axis,e,r),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function AE(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function Hq(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}function VF(e,t,r,i,n,a){return{cx:e,cy:t,r0:r,r:i,startAngle:n,endAngle:a,clockwise:!0}}var Q3e=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,a,o){var s=n.axis,l=s.grid,u=a.get("type"),h=UF(l,s).getOtherAxis(s).getGlobalExtent(),c=s.toGlobalCoord(s.dataToCoord(i,!0));if(u&&u!=="none"){var d=ME(a),f=eRe[u](s,c,h);f.style=d,r.graphicKey=f.type,r.pointer=f}var p=nC(l.model,n);Gq(i,r,p,n,a,o)},t.prototype.getHandleTransform=function(r,i,n){var a=nC(i.axis.grid.model,i,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var o=TE(i.axis,r,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,i,n,a){var o=n.axis,s=o.grid,l=o.getGlobalExtent(!0),u=UF(s,o).getOtherAxis(o).getGlobalExtent(),h=o.dim==="x"?0:1,c=[r.x,r.y];c[h]+=i[h],c[h]=Math.min(l[1],c[h]),c[h]=Math.max(l[0],c[h]);var d=(u[1]+u[0])/2,f=[d,d];f[h]=c[h];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:r.rotation,cursorPoint:f,tooltipOption:p[h]}},t}(SE);function UF(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var eRe={line:function(e,t,r){var i=AE([t,r[0]],[t,r[1]],GF(e));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(e,t,r){var i=Math.max(1,e.getBandWidth()),n=r[1]-r[0];return{type:"Rect",shape:Hq([t-i/2,r[0]],[i,n],GF(e))}}};function GF(e){return e.dim==="x"?0:1}const tRe=Q3e;var rRe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(nt);const iRe=rRe;var rs=it(),nRe=I;function jq(e,t,r){if(!at.node){var i=t.getZr();rs(i).records||(rs(i).records={}),aRe(i,t);var n=rs(i).records[e]||(rs(i).records[e]={});n.handler=r}}function aRe(e,t){if(rs(e).initialized)return;rs(e).initialized=!0,r("click",Ne(HF,"click")),r("mousemove",Ne(HF,"mousemove")),r("globalout",sRe);function r(i,n){e.on(i,function(a){var o=lRe(t);nRe(rs(e).records,function(s){s&&n(s,a,o.dispatchAction)}),oRe(o.pendings,t)})}}function oRe(e,t){var r=e.showTip.length,i=e.hideTip.length,n;r?n=e.showTip[r-1]:i&&(n=e.hideTip[i-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function sRe(e,t,r){e.handler("leave",null,r)}function HF(e,t,r,i){t.handler(e,r,i)}function lRe(e){var t={showTip:[],hideTip:[]},r=function(i){var n=t[i.type];n?n.push(i):(i.dispatchAction=r,e.dispatchAction(i))};return{dispatchAction:r,pendings:t}}function SC(e,t){if(!at.node){var r=t.getZr(),i=(rs(r).records||{})[e];i&&(rs(r).records[e]=null)}}var uRe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=i.getComponent("tooltip"),o=r.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";jq("axisPointer",n,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,i){SC("axisPointer",i)},t.prototype.dispose=function(r,i){SC("axisPointer",i)},t.type="axisPointer",t}(Kt);const hRe=uRe;function Wq(e,t){var r=[],i=e.seriesIndex,n;if(i==null||!(n=t.getSeriesByIndex(i)))return{point:[]};var a=n.getData(),o=Eh(a,e);if(o==null||o<0||ue(o))return{point:[]};var s=a.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),c=h.dim,d=u.dim,f=c==="x"||c==="radius"?1:0,p=a.mapDimension(d),v=[];v[f]=a.get(p,o),v[1-f]=a.get(a.getCalculationInfo("stackResultDimension"),o),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(a.getValues(ce(l.dimensions,function(m){return a.mapDimension(m)}),o))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),r=[g.x+g.width/2,g.y+g.height/2]}return{point:r,el:s}}var jF=it();function cRe(e,t,r){var i=e.currTrigger,n=[e.x,e.y],a=e,o=e.dispatchAction||me(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){r1(n)&&(n=Wq({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var l=r1(n),u=a.axesInfo,h=s.axesInfo,c=i==="leave"||r1(n),d={},f={},p={list:[],map:{}},v={showPointer:Ne(fRe,f),showTooltip:Ne(pRe,p)};I(s.coordSysMap,function(m,y){var _=l||m.containPoint(n);I(s.coordSysAxesInfo[y],function(x,w){var b=x.axis,S=yRe(u,x);if(!c&&_&&(!u||S)){var M=S&&S.value;M==null&&!l&&(M=b.pointToData(n)),M!=null&&WF(x,M,v,!1,d)}})});var g={};return I(h,function(m,y){var _=m.linkGroup;_&&!f[y]&&I(_.axesInfo,function(x,w){var b=f[w];if(x!==m&&b){var S=b.value;_.mapper&&(S=m.axis.scale.parse(_.mapper(S,$F(x),$F(m)))),g[m.key]=S}})}),I(g,function(m,y){WF(h[y],m,v,!0,d)}),vRe(f,h,d),gRe(p,n,e,o),mRe(h,o,r),d}}function WF(e,t,r,i,n){var a=e.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var o=dRe(t,e),s=o.payloadBatch,l=o.snapToValue;s[0]&&n.seriesIndex==null&&ae(n,s[0]),!i&&e.snap&&a.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,o,l)}}function dRe(e,t){var r=t.axis,i=r.dim,n=e,a=[],o=Number.MAX_VALUE,s=-1;return I(t.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(i),c,d;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(h,e,r);d=f.dataIndices,c=f.nestestValue}else{if(d=l.getData().indicesOfNearest(h[0],e,r.type==="category"?.5:null),!d.length)return;c=l.getData().get(h[0],d[0])}if(!(c==null||!isFinite(c))){var p=e-c,v=Math.abs(p);v<=o&&((v<o||p>=0&&s<0)&&(o=v,s=p,n=c,a.length=0),I(d,function(g){a.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:a,snapToValue:n}}function fRe(e,t,r,i){e[t.key]={value:r,payloadBatch:i}}function pRe(e,t,r,i){var n=r.payloadBatch,a=t.axis,o=a.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var l=t.coordSys.model,u=pg(l),h=e.map[u];h||(h=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(h)),h.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:i,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function vRe(e,t,r){var i=r.axesInfo=[];I(t,function(n,a){var o=n.axisPointerModel.option,s=e[a];s?(!n.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&i.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function gRe(e,t,r,i){if(r1(t)||!e.list.length){i({type:"hideTip"});return}var n=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:e.list})}function mRe(e,t,r){var i=r.getZr(),n="axisPointerLastHighlights",a=jF(i)[n]||{},o=jF(i)[n]={};I(e,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&I(c.seriesDataIndices,function(d){var f=d.seriesIndex+" | "+d.dataIndex;o[f]=d})});var s=[],l=[];I(a,function(u,h){!o[h]&&l.push(u)}),I(o,function(u,h){!a[h]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function yRe(e,t){for(var r=0;r<(e||[]).length;r++){var i=e[r];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}function $F(e){var t=e.axis.model,r={},i=r.axisDim=e.axis.dim;return r.axisIndex=r[i+"AxisIndex"]=t.componentIndex,r.axisName=r[i+"AxisName"]=t.name,r.axisId=r[i+"AxisId"]=t.id,r}function r1(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function im(e){Yh.registerAxisPointerClass("CartesianAxisPointer",tRe),e.registerComponentModel(iRe),e.registerComponentView(hRe),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!ue(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=aCe(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},cRe)}function _Re(e){$e(m$),$e(im)}var xRe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,a,o){var s=n.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,u=l.getOtherAxis(s),h=u.getExtent(),c=s.dataToCoord(i),d=a.get("type");if(d&&d!=="none"){var f=ME(a),p=wRe[d](s,l,c,h);p.style=f,r.graphicKey=p.type,r.pointer=p}var v=a.get(["label","margin"]),g=bRe(i,n,a,l,v);Vq(r,n,a,o,g)},t}(SE);function bRe(e,t,r,i,n){var a=t.axis,o=a.dataToCoord(e),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=i.getRadiusAxis().getExtent(),u,h,c;if(a.dim==="radius"){var d=Gn();Wh(d,d,s),bo(d,d,[i.cx,i.cy]),u=Sa([o,-n],d);var f=t.getModel("axisLabel").get("rotate")||0,p=Ss.innerTextLayout(s,f*Math.PI/180,-1);h=p.textAlign,c=p.textVerticalAlign}else{var v=l[1];u=i.coordToPoint([v+n,o]);var g=i.cx,m=i.cy;h=Math.abs(u[0]-g)/v<.3?"center":u[0]>g?"left":"right",c=Math.abs(u[1]-m)/v<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:h,verticalAlign:c}}var wRe={line:function(e,t,r,i){return e.dim==="angle"?{type:"Line",shape:AE(t.coordToPoint([i[0],r]),t.coordToPoint([i[1],r]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r}}},shadow:function(e,t,r,i){var n=Math.max(1,e.getBandWidth()),a=Math.PI/180;return e.dim==="angle"?{type:"Sector",shape:VF(t.cx,t.cy,i[0],i[1],(-r-n/2)*a,(-r+n/2)*a)}:{type:"Sector",shape:VF(t.cx,t.cy,r-n/2,r+n/2,0,Math.PI*2)}}};const SRe=xRe;var MRe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.findAxisModel=function(r){var i,n=this.ecModel;return n.eachComponent(r,function(a){a.getCoordSysModel()===this&&(i=a)},this),i},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(nt);const TRe=MRe;var CE=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",dr).models[0]},t.type="polarAxis",t}(nt);gr(CE,Yg);var ARe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="angleAxis",t}(CE),CRe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="radiusAxis",t}(CE),DE=function(e){Y(t,e);function t(r,i){return e.call(this,"radius",r,i)||this}return t.prototype.pointToData=function(r,i){return this.polar.pointToData(r,i)[this.dim==="radius"?0:1]},t}(Ea);DE.prototype.dataToRadius=Ea.prototype.dataToCoord;DE.prototype.radiusToData=Ea.prototype.coordToData;const DRe=DE;var PRe=it(),PE=function(e){Y(t,e);function t(r,i){return e.call(this,"angle",r,i||[0,360])||this}return t.prototype.pointToData=function(r,i){return this.polar.pointToData(r,i)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var r=this,i=r.getLabelModel(),n=r.scale,a=n.getExtent(),o=n.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=r.dataToCoord(s+1)-r.dataToCoord(s),u=Math.abs(l),h=Bg(s==null?"":s+"",i.getFont(),"center","top"),c=Math.max(h.height,7),d=c/u;isNaN(d)&&(d=1/0);var f=Math.max(0,Math.floor(d)),p=PRe(r.model),v=p.lastAutoInterval,g=p.lastTickCount;return v!=null&&g!=null&&Math.abs(v-f)<=1&&Math.abs(g-o)<=1&&v>f?f=v:(p.lastTickCount=o,p.lastAutoInterval=f),f},t}(Ea);PE.prototype.dataToAngle=Ea.prototype.dataToCoord;PE.prototype.angleToData=Ea.prototype.coordToData;const LRe=PE;var $q=["radius","angle"],ERe=function(){function e(t){this.dimensions=$q,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new DRe,this._angleAxis=new LRe,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(t){var r=this.pointToCoord(t);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},e.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},e.prototype.getAxis=function(t){var r="_"+t+"Axis";return this[r]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(t){var r=[],i=this._angleAxis,n=this._radiusAxis;return i.scale.type===t&&r.push(i),n.scale.type===t&&r.push(n),r},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(t){var r=this._angleAxis;return t===r?this._radiusAxis:r},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(t){var r=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},e.prototype.dataToPoint=function(t,r){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],r),this._angleAxis.dataToAngle(t[1],r)])},e.prototype.pointToData=function(t,r){var i=this.pointToCoord(t);return[this._radiusAxis.radiusToData(i[0],r),this._angleAxis.angleToData(i[1],r)]},e.prototype.pointToCoord=function(t){var r=t[0]-this.cx,i=t[1]-this.cy,n=this.getAngleAxis(),a=n.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);n.inverse?o=s-360:s=o+360;var l=Math.sqrt(r*r+i*i);r/=l,i/=l;for(var u=Math.atan2(-i,r)/Math.PI*180,h=u<o?1:-1;u<o||u>s;)u+=h*360;return[l,u]},e.prototype.coordToPoint=function(t){var r=t[0],i=t[1]/180*Math.PI,n=Math.cos(i)*r+this.cx,a=-Math.sin(i)*r+this.cy;return[n,a]},e.prototype.getArea=function(){var t=this.getAngleAxis(),r=this.getRadiusAxis(),i=r.getExtent().slice();i[0]>i[1]&&i.reverse();var n=t.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:i[0],r:i[1],startAngle:-n[0]*a,endAngle:-n[1]*a,clockwise:t.inverse,contain:function(o,s){var l=o-this.cx,u=s-this.cy,h=l*l+u*u-1e-4,c=this.r,d=this.r0;return h<=c*c&&h>=d*d}}},e.prototype.convertToPixel=function(t,r,i){var n=qF(r);return n===this?this.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=qF(r);return n===this?this.pointToData(i):null},e}();function qF(e){var t=e.seriesModel,r=e.polarModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}const IRe=ERe;function ORe(e,t,r){var i=t.get("center"),n=r.getWidth(),a=r.getHeight();e.cx=ve(i[0],n),e.cy=ve(i[1],a);var o=e.getRadiusAxis(),s=Math.min(n,a)/2,l=t.get("radius");l==null?l=[0,"100%"]:ue(l)||(l=[0,l]);var u=[ve(l[0],s),ve(l[1],s)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}function RRe(e,t){var r=this,i=r.getAngleAxis(),n=r.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),e.eachSeries(function(s){if(s.coordinateSystem===r){var l=s.getData();I(D_(l,"radius"),function(u){n.scale.unionExtentFromData(l,u)}),I(D_(l,"angle"),function(u){i.scale.unionExtentFromData(l,u)})}}),Bd(i.scale,i.model),Bd(n.scale,n.model),i.type==="category"&&!i.onBand){var a=i.getExtent(),o=360/i.scale.count();i.inverse?a[1]+=o:a[1]-=o,i.setExtent(a[0],a[1])}}function zRe(e){return e.mainType==="angleAxis"}function XF(e,t){if(e.type=t.get("type"),e.scale=db(t),e.onBand=t.get("boundaryGap")&&e.type==="category",e.inverse=t.get("inverse"),zRe(t)){e.inverse=e.inverse!==t.get("clockwise");var r=t.get("startAngle");e.setExtent(r,r+(e.inverse?-360:360))}t.axis=e,e.model=t}var NRe={dimensions:$q,create:function(e,t){var r=[];return e.eachComponent("polar",function(i,n){var a=new IRe(n+"");a.update=RRe;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=i.findAxisModel("radiusAxis"),u=i.findAxisModel("angleAxis");XF(o,l),XF(s,u),ORe(a,i,t),r.push(a),i.coordinateSystem=a,a.model=i}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="polar"){var n=i.getReferringComponents("polar",dr).models[0];i.coordinateSystem=n.coordinateSystem}}),r}};const kRe=NRe;var BRe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function l0(e,t,r){t[1]>t[0]&&(t=t.slice().reverse());var i=e.coordToPoint([t[0],r]),n=e.coordToPoint([t[1],r]);return{x1:i[0],y1:i[1],x2:n[0],y2:n[1]}}function u0(e){var t=e.getRadiusAxis();return t.inverse?0:1}function YF(e){var t=e[0],r=e[e.length-1];t&&r&&Math.abs(Math.abs(t.coord-r.coord)-360)<1e-4&&e.pop()}var FRe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,i){if(this.group.removeAll(),!!r.get("show")){var n=r.axis,a=n.polar,o=a.getRadiusAxis().getExtent(),s=n.getTicksCoords(),l=n.getMinorTicksCoords(),u=ce(n.getViewLabels(),function(h){h=Ee(h);var c=n.scale,d=c.type==="ordinal"?c.getRawOrdinalNumber(h.tickValue):h.tickValue;return h.coord=n.dataToCoord(d),h});YF(u),YF(s),I(BRe,function(h){r.get([h,"show"])&&(!n.scale.isBlank()||h==="axisLine")&&VRe[h](this.group,r,a,s,l,o,u)},this)}},t.type="angleAxis",t}(Yh),VRe={axisLine:function(e,t,r,i,n,a){var o=t.getModel(["axisLine","lineStyle"]),s=u0(r),l=s?0:1,u;a[l]===0?u=new To({shape:{cx:r.cx,cy:r.cy,r:a[s]},style:o.getLineStyle(),z2:1,silent:!0}):u=new Xx({shape:{cx:r.cx,cy:r.cy,r:a[s],r0:a[l]},style:o.getLineStyle(),z2:1,silent:!0}),u.style.fill=null,e.add(u)},axisTick:function(e,t,r,i,n,a){var o=t.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[u0(r)],u=ce(i,function(h){return new Nr({shape:l0(r,[l,l+s],h.coord)})});e.add(In(u,{style:De(o.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,r,i,n,a){if(n.length){for(var o=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),u=a[u0(r)],h=[],c=0;c<n.length;c++)for(var d=0;d<n[c].length;d++)h.push(new Nr({shape:l0(r,[u,u+l],n[c][d].coord)}));e.add(In(h,{style:De(s.getModel("lineStyle").getLineStyle(),De(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,r,i,n,a,o){var s=t.getCategories(!0),l=t.getModel("axisLabel"),u=l.get("margin"),h=t.get("triggerEvent");I(o,function(c,d){var f=l,p=c.tickValue,v=a[u0(r)],g=r.coordToPoint([v+u,c.coord]),m=r.cx,y=r.cy,_=Math.abs(g[0]-m)/v<.3?"center":g[0]>m?"left":"right",x=Math.abs(g[1]-y)/v<.3?"middle":g[1]>y?"top":"bottom";if(s&&s[p]){var w=s[p];Pe(w)&&w.textStyle&&(f=new Nt(w.textStyle,l,l.ecModel))}var b=new ot({silent:Ss.isLabelSilent(t),style:zt(f,{x:g[0],y:g[1],fill:f.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:c.formattedLabel,align:_,verticalAlign:x})});if(e.add(b),h){var S=Ss.makeAxisEventDataBase(t);S.targetType="axisLabel",S.value=c.rawLabel,Re(b).eventData=S}},this)},splitLine:function(e,t,r,i,n,a){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=0;c<i.length;c++){var d=u++%l.length;h[d]=h[d]||[],h[d].push(new Nr({shape:l0(r,a,i[c].coord)}))}for(var c=0;c<h.length;c++)e.add(In(h[c],{style:De({stroke:l[c%l.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,r,i,n,a){if(n.length){for(var o=t.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],u=0;u<n.length;u++)for(var h=0;h<n[u].length;h++)l.push(new Nr({shape:l0(r,a,n[u][h].coord)}));e.add(In(l,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,r,i,n,a){if(i.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=Math.PI/180,d=-i[0].coord*c,f=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]),v=t.get("clockwise"),g=1,m=i.length;g<=m;g++){var y=g===m?i[0].coord:i[g].coord,_=u++%l.length;h[_]=h[_]||[],h[_].push(new $i({shape:{cx:r.cx,cy:r.cy,r0:f,r:p,startAngle:d,endAngle:-y*c,clockwise:v},silent:!0})),d=-y*c}for(var g=0;g<h.length;g++)e.add(In(h[g],{style:De({fill:l[g%l.length]},s.getAreaStyle()),silent:!0}))}}};const URe=FRe;var GRe=["axisLine","axisTickLabel","axisName"],HRe=["splitLine","splitArea","minorSplitLine"],jRe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,i){if(this.group.removeAll(),!!r.get("show")){var n=this._axisGroup,a=this._axisGroup=new Ie;this.group.add(a);var o=r.axis,s=o.polar,l=s.getAngleAxis(),u=o.getTicksCoords(),h=o.getMinorTicksCoords(),c=l.getExtent()[0],d=o.getExtent(),f=$Re(s,r,c),p=new Ss(r,f);I(GRe,p.add,p),a.add(p.getGroup()),Ug(n,a,r),I(HRe,function(v){r.get([v,"show"])&&!o.scale.isBlank()&&WRe[v](this.group,r,s,c,d,u,h)},this)}},t.type="radiusAxis",t}(Yh),WRe={splitLine:function(e,t,r,i,n,a){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=0;c<a.length;c++){var d=u++%l.length;h[d]=h[d]||[],h[d].push(new To({shape:{cx:r.cx,cy:r.cy,r:Math.max(a[c].coord,0)}}))}for(var c=0;c<h.length;c++)e.add(In(h[c],{style:De({stroke:l[c%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,r,i,n,a,o){if(o.length){for(var s=t.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=[],h=0;h<o.length;h++)for(var c=0;c<o[h].length;c++)u.push(new To({shape:{cx:r.cx,cy:r.cy,r:o[h][c].coord}}));e.add(In(u,{style:De({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(e,t,r,i,n,a){if(a.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=a[0].coord,d=1;d<a.length;d++){var f=u++%l.length;h[f]=h[f]||[],h[f].push(new $i({shape:{cx:r.cx,cy:r.cy,r0:c,r:a[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),c=a[d].coord}for(var d=0;d<h.length;d++)e.add(In(h[d],{style:De({fill:l[d%l.length]},s.getAreaStyle()),silent:!0}))}}};function $Re(e,t,r){return{position:[e.cx,e.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}const qRe=jRe;function qq(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function Xq(e,t){return t.dim+e.model.componentIndex}function XRe(e,t,r){var i={},n=YRe(xt(t.getSeriesByType(e),function(a){return!t.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));t.eachSeriesByType(e,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),u=Xq(s,l),h=qq(a),c=n[u][h],d=c.offset,f=c.width,p=s.getOtherAxis(l),v=a.coordinateSystem.cx,g=a.coordinateSystem.cy,m=a.get("barMinHeight")||0,y=a.get("barMinAngle")||0;i[h]=i[h]||[];for(var _=o.mapDimension(p.dim),x=o.mapDimension(l.dim),w=Vl(o,_),b=l.dim!=="radius"||!a.get("roundCap",!0),S=p.dataToCoord(0),M=0,A=o.count();M<A;M++){var T=o.get(_,M),C=o.get(x,M),D=T>=0?"p":"n",P=S;w&&(i[h][C]||(i[h][C]={p:S,n:S}),P=i[h][C][D]);var E=void 0,O=void 0,z=void 0,B=void 0;if(p.dim==="radius"){var N=p.dataToCoord(T)-S,F=l.dataToCoord(C);Math.abs(N)<m&&(N=(N<0?-1:1)*m),E=P,O=P+N,z=F-d,B=z-f,w&&(i[h][C][D]=O)}else{var G=p.dataToCoord(T,b)-S,H=l.dataToCoord(C);Math.abs(G)<y&&(G=(G<0?-1:1)*y),E=H+d,O=E+f,z=P,B=P+G,w&&(i[h][C][D]=B)}o.setItemLayout(M,{cx:v,cy:g,r0:E,r:O,startAngle:-z*Math.PI/180,endAngle:-B*Math.PI/180,clockwise:z>=B})}}})}function YRe(e){var t={};I(e,function(i,n){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=Xq(o,s),u=s.getExtent(),h=s.type==="category"?s.getBandWidth():Math.abs(u[1]-u[0])/a.count(),c=t[l]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=c.stacks;t[l]=c;var f=qq(i);d[f]||c.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var p=ve(i.get("barWidth"),h),v=ve(i.get("barMaxWidth"),h),g=i.get("barGap"),m=i.get("barCategoryGap");p&&!d[f].width&&(p=Math.min(c.remainedWidth,p),d[f].width=p,c.remainedWidth-=p),v&&(d[f].maxWidth=v),g!=null&&(c.gap=g),m!=null&&(c.categoryGap=m)});var r={};return I(t,function(i,n){r[n]={};var a=i.stacks,o=i.bandWidth,s=ve(i.categoryGap,o),l=ve(i.gap,1),u=i.remainedWidth,h=i.autoWidthCount,c=(u-s)/(h+(h-1)*l);c=Math.max(c,0),I(a,function(v,g){var m=v.maxWidth;m&&m<c&&(m=Math.min(m,u),v.width&&(m=Math.min(m,v.width)),u-=m,v.width=m,h--)}),c=(u-s)/(h+(h-1)*l),c=Math.max(c,0);var d=0,f;I(a,function(v,g){v.width||(v.width=c),f=v,d+=v.width*(1+l)}),f&&(d-=f.width*l);var p=-d/2;I(a,function(v,g){r[n][g]=r[n][g]||{offset:p,width:v.width},p+=v.width*(1+l)})}),r}var ZRe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},KRe={splitNumber:5},JRe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="polar",t}(Kt);function QRe(e){$e(im),Yh.registerAxisPointerClass("PolarAxisPointer",SRe),e.registerCoordinateSystem("polar",kRe),e.registerComponentModel(TRe),e.registerComponentView(JRe),Vd(e,"angle",ARe,ZRe),Vd(e,"radius",CRe,KRe),e.registerComponentView(URe),e.registerComponentView(qRe),e.registerLayout(Ne(XRe,"bar"))}function MC(e,t){t=t||{};var r=e.coordinateSystem,i=e.axis,n={},a=i.position,o=i.orient,s=r.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};n.position=[o==="vertical"?u.vertical[a]:l[0],o==="horizontal"?u.horizontal[a]:l[3]];var h={horizontal:0,vertical:1};n.rotation=Math.PI/2*h[o];var c={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=c[a],e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),zr(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var d=t.rotate;return d==null&&(d=e.get(["axisLabel","rotate"])),n.labelRotation=a==="top"?-d:d,n.z2=1,n}var eze=["axisLine","axisTickLabel","axisName"],tze=["splitArea","splitLine"],rze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="SingleAxisPointer",r}return t.prototype.render=function(r,i,n,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new Ie;var l=MC(r),u=new Ss(r,l);I(eze,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),I(tze,function(h){r.get([h,"show"])&&ize[h](this,this.group,this._axisGroup,r)},this),Ug(s,this._axisGroup,r),e.prototype.render.call(this,r,i,n,a)},t.prototype.remove=function(){p$(this)},t.type="singleAxis",t}(Yh),ize={splitLine:function(e,t,r,i){var n=i.axis;if(!n.scale.isBlank()){var a=i.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),u=i.coordinateSystem.getRect(),h=n.isHorizontal(),c=[],d=0,f=n.getTicksCoords({tickModel:a}),p=[],v=[],g=0;g<f.length;++g){var m=n.toGlobalCoord(f[g].coord);h?(p[0]=m,p[1]=u.y,v[0]=m,v[1]=u.y+u.height):(p[0]=u.x,p[1]=m,v[0]=u.x+u.width,v[1]=m);var y=new Nr({shape:{x1:p[0],y1:p[1],x2:v[0],y2:v[1]},silent:!0});zd(y.shape,l);var _=d++%s.length;c[_]=c[_]||[],c[_].push(y)}for(var x=o.getLineStyle(["color"]),g=0;g<c.length;++g)t.add(In(c[g],{style:De({stroke:s[g%s.length]},x),silent:!0}))}},splitArea:function(e,t,r,i){f$(e,r,i,i)}};const nze=rze;var Yq=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(nt);gr(Yq,Yg.prototype);const aM=Yq;var aze=function(e){Y(t,e);function t(r,i,n,a,o){var s=e.call(this,r,i,n)||this;return s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.pointToData=function(r,i){return this.coordinateSystem.pointToData(r)[0]},t}(Ea);const oze=aze;var Zq=["single"],sze=function(){function e(t,r,i){this.type="single",this.dimension="single",this.dimensions=Zq,this.axisPointerEnabled=!0,this.model=t,this._init(t,r,i)}return e.prototype._init=function(t,r,i){var n=this.dimension,a=new oze(n,db(t),[0,0],t.get("type"),t.get("position")),o=a.type==="category";a.onBand=o&&t.get("boundaryGap"),a.inverse=t.get("inverse"),a.orient=t.get("orient"),t.axis=a,a.model=t,a.coordinateSystem=this,this._axis=a},e.prototype.update=function(t,r){t.eachSeries(function(i){if(i.coordinateSystem===this){var n=i.getData();I(n.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(n,a)},this),Bd(this._axis.scale,this._axis.model)}},this)},e.prototype.resize=function(t,r){this._rect=br({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var t=this._rect,r=this._axis,i=r.isHorizontal(),n=i?[0,t.width]:[0,t.height],a=r.inverse?1:0;r.setExtent(n[a],n[1-a]),this._updateAxisTransform(r,i?t.x:t.y)},e.prototype._updateAxisTransform=function(t,r){var i=t.getExtent(),n=i[0]+i[1],a=t.isHorizontal();t.toGlobalCoord=a?function(o){return o+r}:function(o){return n-o+r},t.toLocalCoord=a?function(o){return o-r}:function(o){return n-o+r}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(t){var r=this.getRect(),i=this.getAxis(),n=i.orient;return n==="horizontal"?i.contain(i.toLocalCoord(t[0]))&&t[1]>=r.y&&t[1]<=r.y+r.height:i.contain(i.toLocalCoord(t[1]))&&t[0]>=r.y&&t[0]<=r.y+r.height},e.prototype.pointToData=function(t){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(t[r.orient==="horizontal"?0:1]))]},e.prototype.dataToPoint=function(t){var r=this.getAxis(),i=this.getRect(),n=[],a=r.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),n[a]=r.toGlobalCoord(r.dataToCoord(+t)),n[1-a]=a===0?i.y+i.height/2:i.x+i.width/2,n},e.prototype.convertToPixel=function(t,r,i){var n=ZF(r);return n===this?this.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=ZF(r);return n===this?this.pointToData(i):null},e}();function ZF(e){var t=e.seriesModel,r=e.singleAxisModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}function lze(e,t){var r=[];return e.eachComponent("singleAxis",function(i,n){var a=new sze(i,e,t);a.name="single_"+n,a.resize(i,t),i.coordinateSystem=a,r.push(a)}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="singleAxis"){var n=i.getReferringComponents("singleAxis",dr).models[0];i.coordinateSystem=n&&n.coordinateSystem}}),r}var uze={create:lze,dimensions:Zq};const hze=uze;var KF=["x","y"],cze=["width","height"],dze=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,a,o){var s=n.axis,l=s.coordinateSystem,u=oM(l,1-H_(s)),h=l.dataToPoint(i)[0],c=a.get("type");if(c&&c!=="none"){var d=ME(a),f=fze[c](s,h,u);f.style=d,r.graphicKey=f.type,r.pointer=f}var p=MC(n);Gq(i,r,p,n,a,o)},t.prototype.getHandleTransform=function(r,i,n){var a=MC(i,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var o=TE(i.axis,r,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,i,n,a){var o=n.axis,s=o.coordinateSystem,l=H_(o),u=oM(s,l),h=[r.x,r.y];h[l]+=i[l],h[l]=Math.min(u[1],h[l]),h[l]=Math.max(u[0],h[l]);var c=oM(s,1-l),d=(c[1]+c[0])/2,f=[d,d];return f[l]=h[l],{x:h[0],y:h[1],rotation:r.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},t}(SE),fze={line:function(e,t,r){var i=AE([t,r[0]],[t,r[1]],H_(e));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(e,t,r){var i=e.getBandWidth(),n=r[1]-r[0];return{type:"Rect",shape:Hq([t-i/2,r[0]],[i,n],H_(e))}}};function H_(e){return e.isHorizontal()?0:1}function oM(e,t){var r=e.getRect();return[r[KF[t]],r[KF[t]]+r[cze[t]]]}const pze=dze;var vze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="single",t}(Kt);function gze(e){$e(im),Yh.registerAxisPointerClass("SingleAxisPointer",pze),e.registerComponentView(vze),e.registerComponentView(nze),e.registerComponentModel(aM),Vd(e,"single",aM,aM.defaultOption),e.registerCoordinateSystem("single",hze)}var mze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i,n){var a=gf(r);e.prototype.init.apply(this,arguments),JF(r,a)},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),JF(this.option,r)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(nt);function JF(e,t){var r=e.cellSize,i;ue(r)?i=r:i=e.cellSize=[r,r],i.length===1&&(i[1]=i[0]);var n=ce([0,1],function(a){return Tbe(t,a)&&(i[a]="auto"),i[a]!=null&&i[a]!=="auto"});Fl(e,t,{type:"box",ignoreSize:n})}const yze=mze;var _ze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=this.group;a.removeAll();var o=r.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),u=i.getLocaleModel();this._renderDayRect(r,s,a),this._renderLines(r,s,l,a),this._renderYearText(r,s,l,a),this._renderMonthText(r,u,l,a),this._renderWeekText(r,u,s,l,a)},t.prototype._renderDayRect=function(r,i,n){for(var a=r.coordinateSystem,o=r.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),u=i.start.time;u<=i.end.time;u=a.getNextNDay(u,1).time){var h=a.dataToRect([u],!1).tl,c=new rt({shape:{x:h[0],y:h[1],width:s,height:l},cursor:"default",style:o});n.add(c)}},t.prototype._renderLines=function(r,i,n,a){var o=this,s=r.coordinateSystem,l=r.getModel(["splitLine","lineStyle"]).getLineStyle(),u=r.get(["splitLine","show"]),h=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=i.start,d=0;c.time<=i.end.time;d++){p(c.formatedDate),d===0&&(c=s.getDateInfo(i.start.y+"-"+i.start.m));var f=c.date;f.setMonth(f.getMonth()+1),c=s.getDateInfo(f)}p(s.getNextNDay(i.end.time,1).formatedDate);function p(v){o._firstDayOfMonth.push(s.getDateInfo(v)),o._firstDayPoints.push(s.dataToRect([v],!1).tl);var g=o._getLinePointsOfOneWeek(r,v,n);o._tlpoints.push(g[0]),o._blpoints.push(g[g.length-1]),u&&o._drawSplitline(g,l,a)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,h,n),l,a),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,h,n),l,a)},t.prototype._getEdgesPoints=function(r,i,n){var a=[r[0].slice(),r[r.length-1].slice()],o=n==="horizontal"?0:1;return a[0][o]=a[0][o]-i/2,a[1][o]=a[1][o]+i/2,a},t.prototype._drawSplitline=function(r,i,n){var a=new Yi({z2:20,shape:{points:r},style:i});n.add(a)},t.prototype._getLinePointsOfOneWeek=function(r,i,n){for(var a=r.coordinateSystem,o=a.getDateInfo(i),s=[],l=0;l<7;l++){var u=a.getNextNDay(o.time,l),h=a.dataToRect([u.time],!1);s[2*u.day]=h.tl,s[2*u.day+1]=h[n==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(r,i){return ge(r)&&r?wbe(r,i):Ae(r)?r(i):i.nameMap},t.prototype._yearTextPositionControl=function(r,i,n,a,o){var s=i[0],l=i[1],u=["center","bottom"];a==="bottom"?(l+=o,u=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,u=["center","top"]):l-=o;var h=0;return(a==="left"||a==="right")&&(h=Math.PI/2),{rotation:h,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(r,i,n,a){var o=r.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],h=(u[0][0]+u[1][0])/2,c=(u[0][1]+u[1][1])/2,d=n==="horizontal"?0:1,f={top:[h,u[d][1]],bottom:[h,u[1-d][1]],left:[u[1-d][0],c],right:[u[d][0],c]},p=i.start.y;+i.end.y>+i.start.y&&(p=p+"-"+i.end.y);var v=o.get("formatter"),g={start:i.start.y,end:i.end.y,nameMap:p},m=this._formatterLabel(v,g),y=new ot({z2:30,style:zt(o,{text:m})});y.attr(this._yearTextPositionControl(y,f[l],n,l,s)),a.add(y)}},t.prototype._monthTextPositionControl=function(r,i,n,a,o){var s="left",l="top",u=r[0],h=r[1];return n==="horizontal"?(h=h+o,i&&(s="center"),a==="start"&&(l="bottom")):(u=u+o,i&&(l="middle"),a==="start"&&(s="right")),{x:u,y:h,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(r,i,n,a){var o=r.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),u=o.get("position"),h=o.get("align"),c=[this._tlpoints,this._blpoints];(!s||ge(s))&&(s&&(i=RA(s)||i),s=i.get(["time","monthAbbr"])||[]);var d=u==="start"?0:1,f=n==="horizontal"?0:1;l=u==="start"?-l:l;for(var p=h==="center",v=0;v<c[d].length-1;v++){var g=c[d][v].slice(),m=this._firstDayOfMonth[v];if(p){var y=this._firstDayPoints[v];g[f]=(y[f]+c[0][v+1][f])/2}var _=o.get("formatter"),x=s[+m.m-1],w={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:x},b=this._formatterLabel(_,w),S=new ot({z2:30,style:ae(zt(o,{text:b}),this._monthTextPositionControl(g,p,n,u,l))});a.add(S)}}},t.prototype._weekTextPositionControl=function(r,i,n,a,o){var s="center",l="middle",u=r[0],h=r[1],c=n==="start";return i==="horizontal"?(u=u+a+(c?1:-1)*o[0]/2,s=c?"right":"left"):(h=h+a+(c?1:-1)*o[1]/2,l=c?"bottom":"top"),{x:u,y:h,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(r,i,n,a,o){var s=r.getModel("dayLabel");if(s.get("show")){var l=r.coordinateSystem,u=s.get("position"),h=s.get("nameMap"),c=s.get("margin"),d=l.getFirstDayOfWeek();if(!h||ge(h)){h&&(i=RA(h)||i);var f=i.get(["time","dayOfWeekShort"]);h=f||ce(i.get(["time","dayOfWeekAbbr"]),function(w){return w[0]})}var p=l.getNextNDay(n.end.time,7-n.lweek).time,v=[l.getCellWidth(),l.getCellHeight()];c=ve(c,Math.min(v[1],v[0])),u==="start"&&(p=l.getNextNDay(n.start.time,-(7+n.fweek)).time,c=-c);for(var g=0;g<7;g++){var m=l.getNextNDay(p,g),y=l.dataToRect([m.time],!1).center,_=g;_=Math.abs((g+d)%7);var x=new ot({z2:30,style:ae(zt(s,{text:h[_]}),this._weekTextPositionControl(y,a,u,c,v))});o.add(x)}}},t.type="calendar",t}(Kt);const xze=_ze;var sM=864e5,bze=function(){function e(t,r,i){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(t){t=So(t);var r=t.getFullYear(),i=t.getMonth()+1,n=i<10?"0"+i:""+i,a=t.getDate(),o=a<10?"0"+a:""+a,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:r+"",m:n,d:o,day:s,time:t.getTime(),formatedDate:r+"-"+n+"-"+o,date:t}},e.prototype.getNextNDay=function(t,r){return r=r||0,r===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+r),this.getDateInfo(t))},e.prototype.update=function(t,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,n=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[i,7]:[7,i];I([0,1],function(c){h(a,c)&&(o[n[c]]=a[c]*s[c])});var l={width:r.getWidth(),height:r.getHeight()},u=this._rect=br(o,l);I([0,1],function(c){h(a,c)||(a[c]=u[n[c]]/s[c])});function h(c,d){return c[d]!=null&&c[d]!=="auto"}this._sw=a[0],this._sh=a[1]},e.prototype.dataToPoint=function(t,r){ue(t)&&(t=t[0]),r==null&&(r=!0);var i=this.getDateInfo(t),n=this._rangeInfo,a=i.formatedDate;if(r&&!(i.time>=n.start.time&&i.time<n.end.time+sM))return[NaN,NaN];var o=i.day,s=this._getRangeInfo([n.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},e.prototype.pointToData=function(t){var r=this.pointToDate(t);return r&&r.time},e.prototype.dataToRect=function(t,r){var i=this.dataToPoint(t,r);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},e.prototype.pointToDate=function(t){var r=Math.floor((t[0]-this._rect.x)/this._sw)+1,i=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(i,r-1,n):this._getDateByWeeksAndDay(r,i-1,n)},e.prototype.convertToPixel=function(t,r,i){var n=QF(r);return n===this?n.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=QF(r);return n===this?n.pointToData(i):null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var t=this._model.get("range"),r;if(ue(t)&&t.length===1&&(t=t[0]),ue(t))r=t;else{var i=t.toString();if(/^\d{4}$/.test(i)&&(r=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var n=this.getDateInfo(i),a=n.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);r=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(r=[i,i])}if(!r)return t;var s=this._getRangeInfo(r);return s.start.time>s.end.time&&r.reverse(),r},e.prototype._getRangeInfo=function(t){var r=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],i;r[0].time>r[1].time&&(i=!0,r.reverse());var n=Math.floor(r[1].time/sM)-Math.floor(r[0].time/sM)+1,a=new Date(r[0].time),o=a.getDate(),s=r[1].date.getDate();a.setDate(o+n-1);var l=a.getDate();if(l!==s)for(var u=a.getTime()-r[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-r[1].time)*u>0;)n-=u,a.setDate(l-u);var h=Math.floor((n+r[0].day+6)/7),c=i?-h+1:h-1;return i&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:n,weeks:h,nthWeek:c,fweek:r[0].day,lweek:r[1].day}},e.prototype._getDateByWeeksAndDay=function(t,r,i){var n=this._getRangeInfo(i);if(t>n.weeks||t===0&&r<n.fweek||t===n.weeks&&r>n.lweek)return null;var a=(t-1)*7-n.fweek+r,o=new Date(n.start.time);return o.setDate(+n.start.d+a),this.getDateInfo(o)},e.create=function(t,r){var i=[];return t.eachComponent("calendar",function(n){var a=new e(n);i.push(a),n.coordinateSystem=a}),t.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=i[n.get("calendarIndex")||0])}),i},e.dimensions=["time","value"],e}();function QF(e){var t=e.calendarModel,r=e.seriesModel,i=t?t.coordinateSystem:r?r.coordinateSystem:null;return i}const wze=bze;function Sze(e){e.registerComponentModel(yze),e.registerComponentView(xze),e.registerCoordinateSystem("calendar",wze)}function Mze(e,t){var r=e.existing;if(t.id=e.keyInfo.id,!t.type&&r&&(t.type=r.type),t.parentId==null){var i=t.parentOption;i?t.parentId=i.id:r&&(t.parentId=r.parentId)}t.parentOption=null}function eV(e,t){var r;return I(t,function(i){e[i]!=null&&e[i]!=="auto"&&(r=!0)}),r}function Tze(e,t,r){var i=ae({},r),n=e[t],a=r.$action||"merge";a==="merge"?n?(Ue(n,i,!0),Fl(n,i,{ignoreSize:!0}),R8(r,n),h0(r,n),h0(r,n,"shape"),h0(r,n,"style"),h0(r,n,"extra"),r.clipPath=n.clipPath):e[t]=i:a==="replace"?e[t]=i:a==="remove"&&n&&(e[t]=null)}var Kq=["transition","enterFrom","leaveTo"],Aze=Kq.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function h0(e,t,r){if(r&&(!e[r]&&t[r]&&(e[r]={}),e=e[r],t=t[r]),!(!e||!t))for(var i=r?Kq:Aze,n=0;n<i.length;n++){var a=i[n];e[a]==null&&t[a]!=null&&(e[a]=t[a])}}function Cze(e,t){if(e&&(e.hv=t.hv=[eV(t,["left","right"]),eV(t,["top","bottom"])],e.type==="group")){var r=e,i=t;r.width==null&&(r.width=i.width=0),r.height==null&&(r.height=i.height=0)}}var Dze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.preventAutoZ=!0,r}return t.prototype.mergeOption=function(r,i){var n=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,r,i),this.option.elements=n},t.prototype.optionUpdated=function(r,i){var n=this.option,a=(i?n:r).elements,o=n.elements=i?[]:n.elements,s=[];this._flatten(a,s,null);var l=vW(o,s,"normalMerge"),u=this._elOptionsToUpdate=[];I(l,function(h,c){var d=h.newOption;d&&(u.push(d),Mze(h,d),Tze(o,c,d),Cze(o[c],d))},this),n.elements=xt(o,function(h){return h&&delete h.$action,h!=null})},t.prototype._flatten=function(r,i,n){I(r,function(a){if(a){n&&(a.parentOption=n),i.push(a);var o=a.children;o&&o.length&&this._flatten(o,i,a),delete a.children}},this)},t.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},t.type="graphic",t.defaultOption={elements:[]},t}(nt),tV={path:null,compoundPath:null,group:Ie,image:$r,text:ot},An=it(),Pze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._elMap=Me()},t.prototype.render=function(r,i,n){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,n)},t.prototype._updateElements=function(r){var i=r.useElOptionsToUpdate();if(i){var n=this._elMap,a=this.group,o=r.get("z"),s=r.get("zlevel");I(i,function(l){var u=xr(l.id,null),h=u!=null?n.get(u):null,c=xr(l.parentId,null),d=c!=null?n.get(c):a,f=l.type,p=l.style;f==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var v=l.textContent,g=l.textConfig;if(p&&Lq(p,f,!!g,!!v)){var m=Eq(p,f,!0);!g&&m.textConfig&&(g=l.textConfig=m.textConfig),!v&&m.textContent&&(v=m.textContent)}var y=Lze(l),_=l.$action||"merge",x=_==="merge",w=_==="replace";if(x){var b=!h,S=h;b?S=rV(u,d,l.type,n):(S&&(An(S).isNew=!1),zq(S)),S&&(t1(S,y,r,{isInit:b}),iV(S,l,o,s))}else if(w){i1(h,l,n,r);var M=rV(u,d,l.type,n);M&&(t1(M,y,r,{isInit:!0}),iV(M,l,o,s))}else _==="remove"&&(Oq(h,l),i1(h,l,n,r));var A=n.get(u);if(A&&v)if(x){var T=A.getTextContent();T?T.attr(v):A.setTextContent(new ot(v))}else w&&A.setTextContent(new ot(v));if(A){var C=l.clipPath;if(C){var D=C.type,P=void 0,b=!1;if(x){var E=A.getClipPath();b=!E||An(E).type!==D,P=b?TC(D):E}else w&&(b=!0,P=TC(D));A.setClipPath(P),t1(P,C,r,{isInit:b}),U_(P,C.keyframeAnimation,r)}var O=An(A);A.setTextConfig(g),O.option=l,Eze(A,r,l),df({el:A,componentModel:r,itemName:A.name,itemTooltipOption:l.tooltip}),U_(A,l.keyframeAnimation,r)}})}},t.prototype._relocate=function(r,i){for(var n=r.option.elements,a=this.group,o=this._elMap,s=i.getWidth(),l=i.getHeight(),u=["x","y"],h=0;h<n.length;h++){var c=n[h],d=xr(c.id,null),f=d!=null?o.get(d):null;if(!(!f||!f.isGroup)){var p=f.parent,v=p===a,g=An(f),m=An(p);g.width=ve(g.option.width,v?s:m.width)||0,g.height=ve(g.option.height,v?l:m.height)||0}}for(var h=n.length-1;h>=0;h--){var c=n[h],d=xr(c.id,null),f=d!=null?o.get(d):null;if(f){var p=f.parent,m=An(p),y=p===a?{width:s,height:l}:{width:m.width,height:m.height},_={},x=nb(f,c,y,null,{hv:c.hv,boundingMode:c.bounding},_);if(!An(f).isNew&&x){for(var w=c.transition,b={},S=0;S<u.length;S++){var M=u[S],A=_[M];w&&(Sh(w)||We(w,M)>=0)?b[M]=A:f[M]=A}ut(f,b,r,0)}else f.attr(_)}}},t.prototype._clear=function(){var r=this,i=this._elMap;i.each(function(n){i1(n,An(n).option,i,r._lastGraphicModel)}),this._elMap=Me()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(Kt);function TC(e){var t=_e(tV,e)?tV[e]:lL(e),r=new t({});return An(r).type=e,r}function rV(e,t,r,i){var n=TC(r);return t.add(n),i.set(e,n),An(n).id=e,An(n).isNew=!0,n}function i1(e,t,r,i){var n=e&&e.parent;n&&(e.type==="group"&&e.traverse(function(a){i1(a,t,r,i)}),xb(e,t,i),r.removeKey(An(e).id))}function iV(e,t,r,i){e.isGroup||I([["cursor",Hn.prototype.cursor],["zlevel",i||0],["z",r||0],["z2",0]],function(n){var a=n[0];_e(t,a)?e[a]=Ve(t[a],n[1]):e[a]==null&&(e[a]=n[1])}),I(Ze(t),function(n){if(n.indexOf("on")===0){var a=t[n];e[n]=Ae(a)?a:null}}),_e(t,"draggable")&&(e.draggable=t.draggable),t.name!=null&&(e.name=t.name),t.id!=null&&(e.id=t.id)}function Lze(e){return e=ae({},e),I(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(O8),function(t){delete e[t]}),e}function Eze(e,t,r){var i=Re(e).eventData;!e.silent&&!e.ignore&&!i&&(i=Re(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),i&&(i.info=r.info)}function Ize(e){e.registerComponentModel(Dze),e.registerComponentView(Pze),e.registerPreprocessor(function(t){var r=t.graphic;ue(r)?!r[0]||!r[0].elements?t.graphic=[{elements:r}]:t.graphic=[t.graphic[0]]:r&&!r.elements&&(t.graphic=[{elements:[r]}])})}var nV=["x","y","radius","angle","single"],Oze=["cartesian2d","polar","singleAxis"];function Rze(e){var t=e.get("coordinateSystem");return We(Oze,t)>=0}function wl(e){return e+"Axis"}function zze(e,t){var r=Me(),i=[],n=Me();e.eachComponent({mainType:"dataZoom",query:t},function(h){n.get(h.uid)||s(h)});var a;do a=!1,e.eachComponent("dataZoom",o);while(a);function o(h){!n.get(h.uid)&&l(h)&&(s(h),a=!0)}function s(h){n.set(h.uid,!0),i.push(h),u(h)}function l(h){var c=!1;return h.eachTargetAxis(function(d,f){var p=r.get(d);p&&p[f]&&(c=!0)}),c}function u(h){h.eachTargetAxis(function(c,d){(r.get(c)||r.set(c,[]))[d]=!0})}return i}function Jq(e){var t=e.ecModel,r={infoList:[],infoMap:Me()};return e.eachTargetAxis(function(i,n){var a=t.getComponent(wl(i),n);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=r.infoMap.get(s);l||(l={model:o,axisModels:[]},r.infoList.push(l),r.infoMap.set(s,l)),l.axisModels.push(a)}}}),r}var lM=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),Nze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return t.prototype.init=function(r,i,n){var a=aV(r);this.settledOption=a,this.mergeDefaultAndTheme(r,n),this._doInit(a)},t.prototype.mergeOption=function(r){var i=aV(r);Ue(this.option,r,!0),Ue(this.settledOption,i,!0),this._doInit(i)},t.prototype._doInit=function(r){var i=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var n=this.settledOption;I([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(i[a[0]]=n[a[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var r=this.get("orient",!0),i=this._targetAxisInfoMap=Me(),n=this._fillSpecifiedTargetAxis(i);n?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(i,this._orient)),this._noTarget=!0,i.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(r){var i=!1;return I(nV,function(n){var a=this.getReferringComponents(wl(n),r_e);if(a.specified){i=!0;var o=new lM;I(a.models,function(s){o.add(s.componentIndex)}),r.set(n,o)}},this),i},t.prototype._fillAutoTargetAxisByOrient=function(r,i){var n=this.ecModel,a=!0;if(a){var o=i==="vertical"?"y":"x",s=n.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=n.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===i}});l(s,"single")}function l(u,h){var c=u[0];if(c){var d=new lM;if(d.add(c.componentIndex),r.set(h,d),a=!1,h==="x"||h==="y"){var f=c.getReferringComponents("grid",dr).models[0];f&&I(u,function(p){c.componentIndex!==p.componentIndex&&f===p.getReferringComponents("grid",dr).models[0]&&d.add(p.componentIndex)})}}}a&&I(nV,function(u){if(a){var h=n.findComponents({mainType:wl(u),filter:function(d){return d.get("type",!0)==="category"}});if(h[0]){var c=new lM;c.add(h[0].componentIndex),r.set(u,c),a=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(i){!r&&(r=i)},this),r==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var i=this.ecModel.option;this.option.throttle=i.animation&&i.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(r){var i=this._rangePropMode,n=this.get("rangeMode");I([["start","startValue"],["end","endValue"]],function(a,o){var s=r[a[0]]!=null,l=r[a[1]]!=null;s&&!l?i[o]="percent":!s&&l?i[o]="value":n?i[o]=n[o]:s&&(i[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(i,n){r==null&&(r=this.ecModel.getComponent(wl(i),n))},this),r},t.prototype.eachTargetAxis=function(r,i){this._targetAxisInfoMap.each(function(n,a){I(n.indexList,function(o){r.call(i,a,o)})})},t.prototype.getAxisProxy=function(r,i){var n=this.getAxisModel(r,i);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(r,i){var n=this._targetAxisInfoMap.get(r);if(n&&n.indexMap[i])return this.ecModel.getComponent(wl(r),i)},t.prototype.setRawRange=function(r){var i=this.option,n=this.settledOption;I([["start","startValue"],["end","endValue"]],function(a){(r[a[0]]!=null||r[a[1]]!=null)&&(i[a[0]]=n[a[0]]=r[a[0]],i[a[1]]=n[a[1]]=r[a[1]])},this),this._updateRangeUse(r)},t.prototype.setCalculatedRange=function(r){var i=this.option;I(["start","startValue","end","endValue"],function(n){i[n]=r[n]})},t.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},t.prototype.getValueRange=function(r,i){if(r==null&&i==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(r,i).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var i,n=this._targetAxisInfoMap.keys(),a=0;a<n.length;a++)for(var o=n[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;i||(i=u)}return i},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(nt);function aV(e){var t={};return I(["start","end","startValue","endValue","throttle"],function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t}const xg=Nze;var kze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(xg);const Bze=kze;var Fze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){this.dataZoomModel=r,this.ecModel=i,this.api=n},t.type="dataZoom",t}(Kt);const LE=Fze;var Vze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(LE);const Uze=Vze;var Wc=I,oV=zn,Gze=function(){function e(t,r,i,n){this._dimName=t,this._axisIndex=r,this.ecModel=n,this._dataZoomModel=i}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(r){if(Rze(r)){var i=wl(this._dimName),n=r.getReferringComponents(i,dr).models[0];n&&this._axisIndex===n.componentIndex&&t.push(r)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return Ee(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var r=this._dataExtent,i=this.getAxisModel(),n=i.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;Wc(["start","end"],function(d,f){var p=t[d],v=t[d+"Value"];a[f]==="percent"?(p==null&&(p=o[f]),v=n.parse(mt(p,o,r))):(u=!0,v=v==null?r[f]:n.parse(v),p=mt(v,r,o)),l[f]=v==null||isNaN(v)?r[f]:v,s[f]=p==null||isNaN(p)?o[f]:p}),oV(l),oV(s);var h=this._minMaxSpan;u?c(l,s,r,o,!1):c(s,l,o,r,!0);function c(d,f,p,v,g){var m=g?"Span":"ValueSpan";Zh(0,d,p,"all",h["min"+m],h["max"+m]);for(var y=0;y<2;y++)f[y]=mt(d[y],p,v,!0),g&&(f[y]=n.parse(f[y]))}return{valueWindow:l,percentWindow:s}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=Hze(this,this._dimName,r),this._updateMinMaxSpan();var i=this.calculateDataWindow(t.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,r){if(t!==this._dataZoomModel)return;var i=this._dimName,n=this.getTargetSeriesModels(),a=t.get("filterMode"),o=this._valueWindow;if(a==="none")return;Wc(n,function(l){var u=l.getData(),h=u.mapDimensionsAll(i);if(h.length){if(a==="weakFilter"){var c=u.getStore(),d=ce(h,function(f){return u.getDimensionIndex(f)},u);u.filterSelf(function(f){for(var p,v,g,m=0;m<h.length;m++){var y=c.get(d[m],f),_=!isNaN(y),x=y<o[0],w=y>o[1];if(_&&!x&&!w)return!0;_&&(g=!0),x&&(p=!0),w&&(v=!0)}return g&&p&&v})}else Wc(h,function(f){if(a==="empty")l.setData(u=u.map(f,function(v){return s(v)?v:NaN}));else{var p={};p[f]=o,u.selectRange(p)}});Wc(h,function(f){u.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},r=this._dataZoomModel,i=this._dataExtent;Wc(["min","max"],function(n){var a=r.get(n+"Span"),o=r.get(n+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=mt(i[0]+o,i,[0,100],!0):a!=null&&(o=mt(a,[0,100],i,!0)-i[0]),t[n+"Span"]=a,t[n+"ValueSpan"]=o},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),r=this._percentWindow,i=this._valueWindow;if(r){var n=sW(i,[0,500]);n=Math.min(n,20);var a=t.axis.scale.rawExtentInfo;r[0]!==0&&a.setDeterminedMinMax("min",+i[0].toFixed(n)),r[1]!==100&&a.setDeterminedMinMax("max",+i[1].toFixed(n)),a.freeze()}},e}();function Hze(e,t,r){var i=[1/0,-1/0];Wc(r,function(o){fMe(i,o.getData(),t)});var n=e.getAxisModel(),a=v7(n.axis.scale,n,i).calculate();return[a.min,a.max]}const jze=Gze;var Wze={getTargetSeries:function(e){function t(n){e.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=e.getComponent(wl(o),s);n(o,s,l,a)})})}t(function(n,a,o,s){o.__dzAxisProxy=null});var r=[];t(function(n,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new jze(n,a,s,e),r.push(o.__dzAxisProxy))});var i=Me();return I(r,function(n){I(n.getTargetSeriesModels(),function(a){i.set(a.uid,a)})}),i},overallReset:function(e,t){e.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(i,n){r.getAxisProxy(i,n).reset(r)}),r.eachTargetAxis(function(i,n){r.getAxisProxy(i,n).filterData(r,t)})}),e.eachComponent("dataZoom",function(r){var i=r.findRepresentativeAxisProxy();if(i){var n=i.getDataPercentWindow(),a=i.getDataValueWindow();r.setCalculatedRange({start:n[0],end:n[1],startValue:a[0],endValue:a[1]})}})}};const $ze=Wze;function qze(e){e.registerAction("dataZoom",function(t,r){var i=zze(r,t);I(i,function(n){n.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var sV=!1;function EE(e){sV||(sV=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,$ze),qze(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Xze(e){e.registerComponentModel(Bze),e.registerComponentView(Uze),EE(e)}var Ln=function(){function e(){}return e}(),Qq={};function $c(e,t){Qq[e]=t}function eX(e){return Qq[e]}var Yze=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;I(this.option.feature,function(i,n){var a=eX(n);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(r)),Ue(i,a.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(nt);const Zze=Yze;function Kze(e,t,r){var i=t.getBoxLayoutParams(),n=t.get("padding"),a={width:r.getWidth(),height:r.getHeight()},o=br(i,a,n);xh(t.get("orient"),e,t.get("itemGap"),o.width,o.height),nb(e,i,a,n)}function tX(e,t){var r=vf(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),e=new rt({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1}),e}var Jze=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n,a){var o=this.group;if(o.removeAll(),!r.get("show"))return;var s=+r.get("itemSize"),l=r.get("orient")==="vertical",u=r.get("feature")||{},h=this._features||(this._features={}),c=[];I(u,function(p,v){c.push(v)}),new ws(this._featureNames||[],c).add(d).update(d).remove(Ne(d,null)).execute(),this._featureNames=c;function d(p,v){var g=c[p],m=c[v],y=u[g],_=new Nt(y,r,r.ecModel),x;if(a&&a.newTitle!=null&&a.featureName===g&&(y.title=a.newTitle),g&&!m){if(Qze(g))x={onclick:_.option.onclick,featureName:g};else{var w=eX(g);if(!w)return;x=new w}h[g]=x}else if(x=h[m],!x)return;x.uid=pf("toolbox-feature"),x.model=_,x.ecModel=i,x.api=n;var b=x instanceof Ln;if(!g&&m){b&&x.dispose&&x.dispose(i,n);return}if(!_.get("show")||b&&x.unusable){b&&x.remove&&x.remove(i,n);return}f(_,x,g),_.setIconStatus=function(S,M){var A=this.option,T=this.iconPaths;A.iconStatus=A.iconStatus||{},A.iconStatus[S]=M,T[S]&&(M==="emphasis"?xs:bs)(T[S])},x instanceof Ln&&x.render&&x.render(_,i,n,a)}function f(p,v,g){var m=p.getModel("iconStyle"),y=p.getModel(["emphasis","iconStyle"]),_=v instanceof Ln&&v.getIcons?v.getIcons():p.get("icon"),x=p.get("title")||{},w,b;ge(_)?(w={},w[g]=_):w=_,ge(x)?(b={},b[g]=x):b=x;var S=p.iconPaths={};I(w,function(M,A){var T=Gg(M,{},{x:-s/2,y:-s/2,width:s,height:s});T.setStyle(m.getItemStyle());var C=T.ensureState("emphasis");C.style=y.getItemStyle();var D=new ot({style:{text:b[A],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null},ignore:!0});T.setTextContent(D),df({el:T,componentModel:r,itemName:A,formatterParamsExtra:{title:b[A]}}),T.__title=b[A],T.on("mouseover",function(){var P=y.getItemStyle(),E=l?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";D.setStyle({fill:y.get("textFill")||P.fill||P.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),T.setTextConfig({position:y.get("textPosition")||E}),D.ignore=!r.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",A])!=="emphasis"&&n.leaveEmphasis(this),D.hide()}),(p.get(["iconStatus",A])==="emphasis"?xs:bs)(T),o.add(T),T.on("click",me(v.onclick,v,i,n,A)),S[A]=T})}Kze(o,r,n),o.add(tX(o.getBoundingRect(),r)),l||o.eachChild(function(p){var v=p.__title,g=p.ensureState("emphasis"),m=g.textConfig||(g.textConfig={}),y=p.getTextContent(),_=y&&y.ensureState("emphasis");if(_&&!Ae(_)&&v){var x=_.style||(_.style={}),w=Bg(v,ot.makeFont(x)),b=p.x+o.x,S=p.y+o.y+s,M=!1;S+w.height>n.getHeight()&&(m.position="top",M=!0);var A=M?-5-w.height:s+10;b+w.width/2>n.getWidth()?(m.position=["100%",A],x.align="right"):b-w.width/2<0&&(m.position=[0,A],x.align="left")}})},t.prototype.updateView=function(r,i,n,a){I(this._features,function(o){o instanceof Ln&&o.updateView&&o.updateView(o.model,i,n,a)})},t.prototype.remove=function(r,i){I(this._features,function(n){n instanceof Ln&&n.remove&&n.remove(r,i)}),this.group.removeAll()},t.prototype.dispose=function(r,i){I(this._features,function(n){n instanceof Ln&&n.dispose&&n.dispose(r,i)})},t.type="toolbox",t}(Kt);function Qze(e){return e.indexOf("my")===0}const eNe=Jze;var tNe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){var n=this.model,a=n.get("name")||r.get("title.0.text")||"echarts",o=i.getZr().painter.getType()==="svg",s=o?"svg":n.get("type",!0)||"png",l=i.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||r.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=at.browser;if(Ae(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var h=document.createElement("a");h.download=a+"."+s,h.target="_blank",h.href=l;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});h.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||o){var d=l.split(","),f=d[0].indexOf("base64")>-1,p=o?decodeURIComponent(d[1]):d[1];f&&(p=window.atob(p));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=p.length,m=new Uint8Array(g);g--;)m[g]=p.charCodeAt(g);var y=new Blob([m]);window.navigator.msSaveOrOpenBlob(y,v)}else{var _=document.createElement("iframe");document.body.appendChild(_);var x=_.contentWindow,w=x.document;w.open("image/svg+xml","replace"),w.write(p),w.close(),x.focus(),w.execCommand("SaveAs",!0,v),document.body.removeChild(_)}}else{var b=n.get("lang"),S='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(b&&b[0]||"")+'" /></body>',M=window.open();M.document.write(S),M.document.title=a}},t.getDefaultOption=function(r){var i={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return i},t}(Ln);const rNe=tNe;var lV="__ec_magicType_stack__",iNe=[["line","bar"],["stack"]],nNe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getIcons=function(){var r=this.model,i=r.get("icon"),n={};return I(r.get("type"),function(a){i[a]&&(n[a]=i[a])}),n},t.getDefaultOption=function(r){var i={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return i},t.prototype.onclick=function(r,i,n){var a=this.model,o=a.get(["seriesIndex",n]);if(uV[n]){var s={series:[]},l=function(c){var d=c.subType,f=c.id,p=uV[n](d,f,c,a);p&&(De(p,c.option),s.series.push(p));var v=c.coordinateSystem;if(v&&v.type==="cartesian2d"&&(n==="line"||n==="bar")){var g=v.getAxesByScale("ordinal")[0];if(g){var m=g.dim,y=m+"Axis",_=c.getReferringComponents(y,dr).models[0],x=_.componentIndex;s[y]=s[y]||[];for(var w=0;w<=x;w++)s[y][x]=s[y][x]||{};s[y][x].boundaryGap=n==="bar"}}};I(iNe,function(c){We(c,n)>=0&&I(c,function(d){a.setIconStatus(d,"normal")})}),a.setIconStatus(n,"emphasis"),r.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,h=n;n==="stack"&&(u=Ue({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",n])!=="emphasis"&&(h="tiled")),i.dispatchAction({type:"changeMagicType",currentType:h,newOption:s,newTitle:u,featureName:"magicType"})}},t}(Ln),uV={line:function(e,t,r,i){if(e==="bar")return Ue({id:t,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(e,t,r,i){if(e==="line")return Ue({id:t,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(e,t,r,i){var n=r.get("stack")===lV;if(e==="line"||e==="bar")return i.setIconStatus("stack",n?"normal":"emphasis"),Ue({id:t,stack:n?"":lV},i.get(["option","stack"])||{},!0)}};Po({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});const aNe=nNe;var bb=new Array(60).join("-"),Hd="	";function oNe(e){var t={},r=[],i=[];return e.eachRawSeries(function(n){var a=n.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},i.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(n)}else r.push(n)}else r.push(n)}),{seriesGroupByCategoryAxis:t,other:r,meta:i}}function sNe(e){var t=[];return I(e,function(r,i){var n=r.categoryAxis,a=r.valueAxis,o=a.dim,s=[" "].concat(ce(r.series,function(f){return f.name})),l=[n.model.getCategories()];I(r.series,function(f){var p=f.getRawData();l.push(f.getRawData().mapArray(p.mapDimension(o),function(v){return v}))});for(var u=[s.join(Hd)],h=0;h<l[0].length;h++){for(var c=[],d=0;d<l.length;d++)c.push(l[d][h]);u.push(c.join(Hd))}t.push(u.join(`
`))}),t.join(`

`+bb+`

`)}function lNe(e){return ce(e,function(t){var r=t.getRawData(),i=[t.name],n=[];return r.each(r.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=r.getName(o),l=0;l<a-1;l++)n[l]=arguments[l];i.push((s?s+Hd:"")+n.join(Hd))}),i.join(`
`)}).join(`

`+bb+`

`)}function uNe(e){var t=oNe(e);return{value:xt([sNe(t.seriesGroupByCategoryAxis),lNe(t.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+bb+`

`),meta:t.meta}}function j_(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function hNe(e){var t=e.slice(0,e.indexOf(`
`));if(t.indexOf(Hd)>=0)return!0}var AC=new RegExp("["+Hd+"]+","g");function cNe(e){for(var t=e.split(/\n+/g),r=j_(t.shift()).split(AC),i=[],n=ce(r,function(l){return{name:l,data:[]}}),a=0;a<t.length;a++){var o=j_(t[a]).split(AC);i.push(o.shift());for(var s=0;s<o.length;s++)n[s]&&(n[s].data[a]=o[s])}return{series:n,categories:i}}function dNe(e){for(var t=e.split(/\n+/g),r=j_(t.shift()),i=[],n=0;n<t.length;n++){var a=j_(t[n]);if(a){var o=a.split(AC),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),i[n]={name:s,value:[]},l=i[n].value):l=i[n]=[];for(var h=0;h<o.length;h++)l.push(+o[h]);l.length===1&&(u?i[n].value=l[0]:i[n]=l[0])}}return{name:r,data:i}}function fNe(e,t){var r=e.split(new RegExp(`
*`+bb+`
*`,"g")),i={series:[]};return I(r,function(n,a){if(hNe(n)){var o=cNe(n),s=t[a],l=s.axisDim+"Axis";s&&(i[l]=i[l]||[],i[l][s.axisIndex]={data:o.categories},i.series=i.series.concat(o.series))}else{var o=dNe(n);i.series.push(o)}}),i}var pNe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){setTimeout(function(){i.dispatchAction({type:"hideTip"})});var n=i.getDom(),a=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),h=document.createElement("textarea");u.style.cssText="overflow:auto";var c=a.get("optionToContent"),d=a.get("contentToOption"),f=uNe(r);if(Ae(c)){var p=c(i.getOption());ge(p)?u.innerHTML=p:Xv(p)&&u.appendChild(p)}else{h.readOnly=a.get("readOnly");var v=h.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),h.value=f.value,u.appendChild(h)}var g=f.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",_=document.createElement("div"),x=document.createElement("div");y+=";background-color:"+a.get("buttonColor"),y+=";color:"+a.get("buttonTextColor");var w=this;function b(){n.removeChild(o),w._dom=null}sA(_,"click",b),sA(x,"click",function(){if(d==null&&c!=null||d!=null&&c==null){b();return}var S;try{Ae(d)?S=d(u,i.getOption()):S=fNe(h.value,g)}catch(M){throw b(),new Error("Data view format error "+M)}S&&i.dispatchAction({type:"changeDataView",newOption:S}),b()}),_.innerHTML=l[1],x.innerHTML=l[2],x.style.cssText=_.style.cssText=y,!a.get("readOnly")&&m.appendChild(x),m.appendChild(_),o.appendChild(s),o.appendChild(u),o.appendChild(m),u.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},t.prototype.remove=function(r,i){this._dom&&i.getDom().removeChild(this._dom)},t.prototype.dispose=function(r,i){this.remove(r,i)},t.getDefaultOption=function(r){var i={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return i},t}(Ln);function vNe(e,t){return ce(e,function(r,i){var n=t&&t[i];if(Pe(n)&&!ue(n)){var a=Pe(r)&&!ue(r);a||(r={value:r});var o=n.name!=null&&r.name==null;return r=De(r,n),o&&delete r.name,r}else return r})}Po({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var r=[];I(e.newOption.series,function(i){var n=t.getSeriesByName(i.name)[0];if(!n)r.push(ae({type:"scatter"},i));else{var a=n.get("data");r.push({name:i.name,data:vNe(i.data,a)})}}),t.mergeOption(De({series:r},e.newOption))});const gNe=pNe;var rX=I,iX=it();function mNe(e,t){var r=IE(e);rX(t,function(i,n){for(var a=r.length-1;a>=0;a--){var o=r[a];if(o[n])break}if(a<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();r[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),r.push(t)}function yNe(e){var t=IE(e),r=t[t.length-1];t.length>1&&t.pop();var i={};return rX(r,function(n,a){for(var o=t.length-1;o>=0;o--)if(n=t[o][a],n){i[a]=n;break}}),i}function _Ne(e){iX(e).snapshots=null}function xNe(e){return IE(e).length}function IE(e){var t=iX(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var bNe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){_Ne(r),i.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(r){var i={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return i},t}(Ln);Po({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});const wNe=bNe;var SNe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],MNe=function(){function e(t,r,i){var n=this;this._targetInfoList=[];var a=hV(r,t);I(TNe,function(o,s){(!i||!i.include||We(i.include,s)>=0)&&o(a,n._targetInfoList)})}return e.prototype.setOutputRanges=function(t,r){return this.matchOutputRanges(t,r,function(i,n,a){if((i.coordRanges||(i.coordRanges=[])).push(n),!i.coordRange){i.coordRange=n;var o=uM[i.brushType](0,a,n);i.__rangeOffset={offset:pV[i.brushType](o.values,i.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},e.prototype.matchOutputRanges=function(t,r,i){I(t,function(n){var a=this.findTargetInfo(n,r);a&&a!==!0&&I(a.coordSyses,function(o){var s=uM[n.brushType](1,o,n.range,!0);i(n,s.values,o,r)})},this)},e.prototype.setInputRanges=function(t,r){I(t,function(i){var n=this.findTargetInfo(i,r);if(i.range=i.range||[],n&&n!==!0){i.panelId=n.panelId;var a=uM[i.brushType](0,n.coordSys,i.coordRange),o=i.__rangeOffset;i.range=o?pV[i.brushType](a.values,o.offset,ANe(a.xyMinMax,o.xyMinMax)):a.values}},this)},e.prototype.makePanelOpts=function(t,r){return ce(this._targetInfoList,function(i){var n=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:r?r(i):null,clipPath:hq(n),isTargetByCursor:dq(n,t,i.coordSysModel),getLinearBrushOtherExtent:cq(n)}})},e.prototype.controlSeries=function(t,r,i){var n=this.findTargetInfo(t,i);return n===!0||n&&We(n.coordSyses,r.coordinateSystem)>=0},e.prototype.findTargetInfo=function(t,r){for(var i=this._targetInfoList,n=hV(r,t),a=0;a<i.length;a++){var o=i[a],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<cV.length;l++)if(cV[l](n,o))return o}return!0},e}();function CC(e){return e[0]>e[1]&&e.reverse(),e}function hV(e,t){return fv(e,t,{includeMainTypes:SNe})}var TNe={grid:function(e,t){var r=e.xAxisModels,i=e.yAxisModels,n=e.gridModels,a=Me(),o={},s={};!r&&!i&&!n||(I(r,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),I(i,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),I(n,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,h=[];I(u.getCartesians(),function(c,d){(We(r,c.getAxis("x").model)>=0||We(i,c.getAxis("y").model)>=0)&&h.push(c)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:h[0],coordSyses:h,getPanelRect:dV.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,t){I(e.geoModels,function(r){var i=r.coordinateSystem;t.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:i,coordSyses:[i],getPanelRect:dV.geo})})}},cV=[function(e,t){var r=e.xAxisModel,i=e.yAxisModel,n=e.gridModel;return!n&&r&&(n=r.axis.grid.model),!n&&i&&(n=i.axis.grid.model),n&&n===t.gridModel},function(e,t){var r=e.geoModel;return r&&r===t.geoModel}],dV={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(_h(e)),t}},uM={lineX:Ne(fV,0),lineY:Ne(fV,1),rect:function(e,t,r,i){var n=e?t.pointToData([r[0][0],r[1][0]],i):t.dataToPoint([r[0][0],r[1][0]],i),a=e?t.pointToData([r[0][1],r[1][1]],i):t.dataToPoint([r[0][1],r[1][1]],i),o=[CC([n[0],a[0]]),CC([n[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,r,i){var n=[[1/0,-1/0],[1/0,-1/0]],a=ce(r,function(o){var s=e?t.pointToData(o,i):t.dataToPoint(o,i);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:a,xyMinMax:n}}};function fV(e,t,r,i){var n=r.getAxis(["x","y"][e]),a=CC(ce([0,1],function(s){return t?n.coordToData(n.toLocalCoord(i[s]),!0):n.toGlobalCoord(n.dataToCoord(i[s]))})),o=[];return o[e]=a,o[1-e]=[NaN,NaN],{values:a,xyMinMax:o}}var pV={lineX:Ne(vV,0),lineY:Ne(vV,1),rect:function(e,t,r){return[[e[0][0]-r[0]*t[0][0],e[0][1]-r[0]*t[0][1]],[e[1][0]-r[1]*t[1][0],e[1][1]-r[1]*t[1][1]]]},polygon:function(e,t,r){return ce(e,function(i,n){return[i[0]-r[0]*t[n][0],i[1]-r[1]*t[n][1]]})}};function vV(e,t,r,i){return[t[0]-i[e]*r[0],t[1]-i[e]*r[1]]}function ANe(e,t){var r=gV(e),i=gV(t),n=[r[0]/i[0],r[1]/i[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function gV(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}const OE=MNe;var DC=I,CNe=K1e("toolbox-dataZoom_"),DNe=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n,a){this._brushController||(this._brushController=new fE(n.getZr()),this._brushController.on("brush",me(this._onBrush,this)).mount()),ENe(r,i,this,a,n),LNe(r,i)},t.prototype.onclick=function(r,i,n){PNe[n].call(this)},t.prototype.remove=function(r,i){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(r,i){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(r){var i=r.areas;if(!r.isEnd||!i.length)return;var n={},a=this.ecModel;this._brushController.updateCovers([]);var o=new OE(RE(this.model),a,{include:["grid"]});o.matchOutputRanges(i,a,function(u,h,c){if(c.type==="cartesian2d"){var d=u.brushType;d==="rect"?(s("x",c,h[0]),s("y",c,h[1])):s({lineX:"x",lineY:"y"}[d],c,h)}}),mNe(a,n),this._dispatchZoomAction(n);function s(u,h,c){var d=h.getAxis(u),f=d.model,p=l(u,f,a),v=p.findRepresentativeAxisProxy(f).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(c=Zh(0,c.slice(),d.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),p&&(n[p.id]={dataZoomId:p.id,startValue:c[0],endValue:c[1]})}function l(u,h,c){var d;return c.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var p=f.getAxisModel(u,h.componentIndex);p&&(d=f)}),d}},t.prototype._dispatchZoomAction=function(r){var i=[];DC(r,function(n,a){i.push(Ee(n))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},t.getDefaultOption=function(r){var i={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return i},t}(Ln),PNe={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(yNe(this.ecModel))}};function RE(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function LNe(e,t){e.setIconStatus("back",xNe(t)>1?"emphasis":"normal")}function ENe(e,t,r,i,n){var a=r._isZoomActive;i&&i.type==="takeGlobalCursor"&&(a=i.key==="dataZoomSelect"?i.dataZoomSelectActive:!1),r._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var o=new OE(RE(e),t,{include:["grid"]}),s=o.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}Ebe("dataZoom",function(e){var t=e.getComponent("toolbox",0),r=["feature","dataZoom"];if(!t||t.get(r)==null)return;var i=t.getModel(r),n=[],a=RE(i),o=fv(e,a);DC(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),DC(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,h){var c=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:CNe+u+c};d[h]=c,n.push(d)}return n});const INe=DNe;function ONe(e){e.registerComponentModel(Zze),e.registerComponentView(eNe),$c("saveAsImage",rNe),$c("magicType",aNe),$c("dataView",gNe),$c("dataZoom",INe),$c("restore",wNe),$e(Xze)}var RNe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(nt);const zNe=RNe;function nX(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function aX(e){if(at.domSupported){for(var t=document.documentElement.style,r=0,i=e.length;r<i;r++)if(e[r]in t)return e[r]}}var oX=aX(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),NNe=aX(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function sX(e,t){if(!e)return t;t=E8(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function kNe(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var BNe=sX(NNe,"transition"),zE=sX(oX,"transform"),FNe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(at.transform3dSupported?"will-change:transform;":"");function VNe(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function UNe(e,t,r){if(!ge(r)||r==="inside")return"";var i=e.get("backgroundColor"),n=e.get("borderWidth");t=zh(t);var a=VNe(r),o=Math.max(Math.round(n)*1.5,6),s="",l=zE+":",u;We(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=o+n,d=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),f=Math.round(((d-Math.SQRT2*n)/2+Math.SQRT2*n-(d-c)/2)*100)/100;s+=";"+a+":-"+f+"px";var p=t+" solid "+n+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+i+";"];return'<div style="'+v.join("")+'"></div>'}function GNe(e,t){var r="cubic-bezier(0.23,1,0.32,1)",i=" "+e/2+"s "+r,n="opacity"+i+",visibility"+i;return t||(i=" "+e+"s "+r,n+=at.transformSupported?","+zE+i:",left"+i+",top"+i),BNe+":"+n}function mV(e,t,r){var i=e.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!at.transformSupported)return r?"top:"+n+";left:"+i+";":[["top",n],["left",i]];var a=at.transform3dSupported,o="translate"+(a?"3d":"")+"("+i+","+n+(a?",0":"")+")";return r?"top:0;left:0;"+zE+":"+o+";":[["top",0],["left",0],[oX,o]]}function HNe(e){var t=[],r=e.get("fontSize"),i=e.getTextColor();i&&t.push("color:"+i),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var n=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,o=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return n&&a&&t.push("text-shadow:"+o+"px "+s+"px "+a+"px "+n),I(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function jNe(e,t,r){var i=[],n=e.get("transitionDuration"),a=e.get("backgroundColor"),o=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),h=e.getModel("textStyle"),c=f9(e,"html"),d=l+"px "+u+"px "+o+"px "+s;return i.push("box-shadow:"+d),t&&n&&i.push(GNe(n,r)),a&&i.push("background-color:"+a),I(["width","color","radius"],function(f){var p="border-"+f,v=E8(p),g=e.get(v);g!=null&&i.push(p+":"+g+(f==="color"?"":"px"))}),i.push(HNe(h)),c!=null&&i.push("padding:"+vf(c).join("px ")+"px"),i.join(";")+";"}function yV(e,t,r,i,n){var a=t&&t.painter;if(r){var o=a&&a.getViewportRoot();o&&w0e(e,o,document.body,i,n)}else{e[0]=i,e[1]=n;var s=a&&a.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var WNe=function(){function e(t,r,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,at.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var a=this._zr=r.getZr(),o=this._appendToBody=i&&i.appendToBody;yV(this._styleCoord,a,o,r.getWidth()/2,r.getHeight()/2),o?document.body.appendChild(n):t.appendChild(n),this._container=t;var s=this;n.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},n.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=a.handler,h=a.painter.getViewportRoot();wn(h,l,!0),u.dispatch("mousemove",l)}},n.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,i=kNe(r,"position"),n=r.style;n.position!=="absolute"&&i!=="absolute"&&(n.position="relative");var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,n=i.style,a=this._styleCoord;i.innerHTML?n.cssText=FNe+jNe(t,!this._firstShow,this._longHide)+mV(a[0],a[1],!0)+("border-color:"+zh(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,i,n,a){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(ge(a)&&i.get("trigger")==="item"&&!nX(i)&&(s=UNe(i,n,a)),ge(t))o.innerHTML=t+s;else if(t){o.innerHTML="",ue(t)||(t=[t]);for(var l=0;l<t.length;l++)Xv(t[l])&&t[l].parentNode!==o&&o.appendChild(t[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var i=this._styleCoord;if(yV(i,this._zr,this._appendToBody,t,r),i[0]!=null&&i[1]!=null){var n=this.el.style,a=mV(i[0],i[1]);I(a,function(o){n[o[0]]=o[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",at.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(me(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const $Ne=WNe;var qNe=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),xV(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,i,n,a){var o=this;Pe(t)&&dt(""),this.el&&this._zr.remove(this.el);var s=i.getModel("textStyle");this.el=new ot({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:s.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:f9(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),I(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=i.get(u)}),I(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),i=_V(t.style);return[r.width+i.left+i.right,r.height+i.top+i.bottom]},e.prototype.moveTo=function(t,r){var i=this.el;if(i){var n=this._styleCoord;xV(n,this._zr,t,r),t=n[0],r=n[1];var a=i.style,o=Zs(a.borderWidth||0),s=_V(a);i.x=t+o+s.left,i.y=r+o+s.top,i.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(me(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function Zs(e){return Math.max(0,e)}function _V(e){var t=Zs(e.shadowBlur||0),r=Zs(e.shadowOffsetX||0),i=Zs(e.shadowOffsetY||0);return{left:Zs(t-r),right:Zs(t+r),top:Zs(t-i),bottom:Zs(t+i)}}function xV(e,t,r,i){e[0]=r,e[1]=i,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const XNe=qNe;var YNe=new rt({shape:{x:-1,y:-1,width:2,height:2}}),ZNe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){if(!(at.node||!i.getDom())){var n=r.getComponent("tooltip"),a=this._renderMode=n_e(n.get("renderMode"));this._tooltipContent=a==="richText"?new XNe(i):new $Ne(i.getDom(),i,{appendToBody:n.get("appendToBody",!0)})}},t.prototype.render=function(r,i,n){if(!(at.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=i,this._api=n;var a=this._tooltipContent;a.update(r),a.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?xf(this,"_updatePosition",50,"fixRate"):lg(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,i=r.get("triggerOn");jq("itemTooltip",this._api,me(function(n,a,o){i!=="none"&&(i.indexOf(n)>=0?this._tryShow(a,o):n==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,i=this._ecModel,n=this._api,a=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(r,i,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,i,n,a){if(!(a.from===this.uid||at.node||!n.getDom())){var o=bV(a,n);this._ticket="";var s=a.dataByCoordSys,l=eke(a,i,n);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var h=YNe;h.x=a.x,h.y=a.y,h.update(),Re(h).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:h},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(r,i,n,a))return;var c=Wq(a,i),d=c.point[0],f=c.point[1];d!=null&&f!=null&&this._tryShow({offsetX:d,offsetY:f,target:c.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:n.getZr().findHover(a.x,a.y).target},o))}},t.prototype.manuallyHideTip=function(r,i,n,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(bV(a,n))},t.prototype._manuallyAxisShowTip=function(r,i,n,a){var o=a.seriesIndex,s=a.dataIndex,l=i.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=i.getSeriesByIndex(o);if(u){var h=u.getData(),c=xp([h.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},t.prototype._tryShow=function(r,i){var n=r.target,a=this._tooltipModel;if(a){this._lastX=r.offsetX,this._lastY=r.offsetY;var o=r.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,r);else if(n){this._lastDataByCoordSys=null;var s,l;rh(n,function(u){if(Re(u).dataIndex!=null)return s=u,!0;if(Re(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(r,s,i):l?this._showComponentItemTooltip(r,l,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},t.prototype._showOrMove=function(r,i){var n=r.get("showDelay");i=me(i,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(i,n):i()},t.prototype._showAxisTooltip=function(r,i){var n=this._ecModel,a=this._tooltipModel,o=[i.offsetX,i.offsetY],s=xp([i.tooltipOption],a),l=this._renderMode,u=[],h=Lr("section",{blocks:[],noHeader:!0}),c=[],d=new XS;I(r,function(y){I(y.dataByAxis,function(_){var x=n.getComponent(_.axisDim+"Axis",_.axisIndex),w=_.value;if(!(!x||w==null)){var b=Uq(w,x.axis,n,_.seriesDataIndices,_.valueLabelOpt),S=Lr("section",{header:b,noHeader:!va(b),sortBlocks:!0,blocks:[]});h.blocks.push(S),I(_.seriesDataIndices,function(M){var A=n.getSeriesByIndex(M.seriesIndex),T=M.dataIndexInside,C=A.getDataParams(T);if(!(C.dataIndex<0)){C.axisDim=_.axisDim,C.axisIndex=_.axisIndex,C.axisType=_.axisType,C.axisId=_.axisId,C.axisValue=kL(x.axis,{value:w}),C.axisValueLabel=b,C.marker=d.makeTooltipMarker("item",zh(C.color),l);var D=lk(A.formatTooltip(T,!0,null)),P=D.frag;if(P){var E=xp([A],a).get("valueFormatter");S.blocks.push(E?ae({valueFormatter:E},P):P)}D.text&&c.push(D.text),u.push(C)}})}})}),h.blocks.reverse(),c.reverse();var f=i.position,p=s.get("order"),v=pk(h,d,l,p,n.get("useUTC"),s.get("textStyle"));v&&c.unshift(v);var g=l==="richText"?`

`:"<br/>",m=c.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",o[0],o[1],f,null,d)})},t.prototype._showSeriesItemTooltip=function(r,i,n){var a=this._ecModel,o=Re(i),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,h=o.dataIndex,c=o.dataType,d=u.getData(c),f=this._renderMode,p=r.positionDefault,v=xp([d.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var m=u.getDataParams(h,c),y=new XS;m.marker=y.makeTooltipMarker("item",zh(m.color),f);var _=lk(u.formatTooltip(h,!1,c)),x=v.get("order"),w=v.get("valueFormatter"),b=_.frag,S=b?pk(w?ae({valueFormatter:w},b):b,y,f,x,a.get("useUTC"),v.get("textStyle")):_.text,M="item_"+u.name+"_"+h;this._showOrMove(v,function(){this._showTooltipContent(v,S,m,M,r.offsetX,r.offsetY,r.position,r.target,y)}),n({type:"showTip",dataIndexInside:h,dataIndex:d.getRawIndex(h),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,i,n){var a=Re(i),o=a.tooltipConfig,s=o.option||{};if(ge(s)){var l=s;s={content:l,formatter:l}}var u=[s],h=this._ecModel.getComponent(a.componentMainType,a.componentIndex);h&&u.push(h),u.push({formatter:s.content});var c=r.positionDefault,d=xp(u,this._tooltipModel,c?{position:c}:null),f=d.get("content"),p=Math.random()+"",v=new XS;this._showOrMove(d,function(){var g=Ee(d.get("formatterParams")||{});this._showTooltipContent(d,f,g,p,r.offsetX,r.offsetY,r.position,i,v)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,i,n,a,o,s,l,u,h){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var c=this._tooltipContent;c.setEnterable(r.get("enterable"));var d=r.get("formatter");l=l||r.get("position");var f=i,p=this._getNearestPoint([o,s],n,r.get("trigger"),r.get("borderColor")),v=p.color;if(d)if(ge(d)){var g=r.ecModel.get("useUTC"),m=ue(n)?n[0]:n,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;f=d,y&&(f=Qx(m.axisValue,f,g)),f=I8(f,n,!0)}else if(Ae(d)){var _=me(function(x,w){x===this._ticket&&(c.setContent(w,h,r,v,l),this._updatePosition(r,l,o,s,c,n,u))},this);this._ticket=a,f=d(n,a,_)}else f=d;c.setContent(f,h,r,v,l),c.show(r,v),this._updatePosition(r,l,o,s,c,n,u)}},t.prototype._getNearestPoint=function(r,i,n,a){if(n==="axis"||ue(i))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!ue(i))return{color:a||i.color||i.borderColor}},t.prototype._updatePosition=function(r,i,n,a,o,s,l){var u=this._api.getWidth(),h=this._api.getHeight();i=i||r.get("position");var c=o.getSize(),d=r.get("align"),f=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ae(i)&&(i=i([n,a],s,o.el,p,{viewSize:[u,h],contentSize:c.slice()})),ue(i))n=ve(i[0],u),a=ve(i[1],h);else if(Pe(i)){var v=i;v.width=c[0],v.height=c[1];var g=br(v,{width:u,height:h});n=g.x,a=g.y,d=null,f=null}else if(ge(i)&&l){var m=QNe(i,p,c,r.get("borderWidth"));n=m[0],a=m[1]}else{var m=KNe(n,a,o,u,h,d?null:20,f?null:20);n=m[0],a=m[1]}if(d&&(n-=wV(d)?c[0]/2:d==="right"?c[0]:0),f&&(a-=wV(f)?c[1]/2:f==="bottom"?c[1]:0),nX(r)){var m=JNe(n,a,o,u,h);n=m[0],a=m[1]}o.moveTo(n,a)},t.prototype._updateContentNotChangedOnAxis=function(r,i){var n=this._lastDataByCoordSys,a=this._cbParamsList,o=!!n&&n.length===r.length;return o&&I(n,function(s,l){var u=s.dataByAxis||[],h=r[l]||{},c=h.dataByAxis||[];o=o&&u.length===c.length,o&&I(u,function(d,f){var p=c[f]||{},v=d.seriesDataIndices||[],g=p.seriesDataIndices||[];o=o&&d.value===p.value&&d.axisType===p.axisType&&d.axisId===p.axisId&&v.length===g.length,o&&I(v,function(m,y){var _=g[y];o=o&&m.seriesIndex===_.seriesIndex&&m.dataIndex===_.dataIndex}),a&&I(d.seriesDataIndices,function(m){var y=m.seriesIndex,_=i[y],x=a[y];_&&x&&x.data!==_.data&&(o=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=i,!!o},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,i){at.node||!i.getDom()||(lg(this,"_updatePosition"),this._tooltipContent.dispose(),SC("itemTooltip",i))},t.type="tooltip",t}(Kt);function xp(e,t,r){var i=t.ecModel,n;r?(n=new Nt(r,i,i),n=new Nt(t.option,n,i)):n=t;for(var a=e.length-1;a>=0;a--){var o=e[a];o&&(o instanceof Nt&&(o=o.get("tooltip",!0)),ge(o)&&(o={formatter:o}),o&&(n=new Nt(o,n,i)))}return n}function bV(e,t){return e.dispatchAction||me(t.dispatchAction,t)}function KNe(e,t,r,i,n,a,o){var s=r.getSize(),l=s[0],u=s[1];return a!=null&&(e+l+a+2>i?e-=l+a:e+=a),o!=null&&(t+u+o>n?t-=u+o:t+=o),[e,t]}function JNe(e,t,r,i,n){var a=r.getSize(),o=a[0],s=a[1];return e=Math.min(e+o,i)-o,t=Math.min(t+s,n)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function QNe(e,t,r,i){var n=r[0],a=r[1],o=Math.ceil(Math.SQRT2*i)+8,s=0,l=0,u=t.width,h=t.height;switch(e){case"inside":s=t.x+u/2-n/2,l=t.y+h/2-a/2;break;case"top":s=t.x+u/2-n/2,l=t.y-a-o;break;case"bottom":s=t.x+u/2-n/2,l=t.y+h+o;break;case"left":s=t.x-n-o,l=t.y+h/2-a/2;break;case"right":s=t.x+u+o,l=t.y+h/2-a/2}return[s,l]}function wV(e){return e==="center"||e==="middle"}function eke(e,t,r){var i=YP(e).queryOptionMap,n=i.keys()[0];if(!(!n||n==="series")){var a=Fg(t,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=r.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var h=Re(u).tooltipConfig;if(h&&h.name===e.name)return l=u,!0}),l)return{componentMainType:n,componentIndex:o.componentIndex,el:l}}}}const tke=ZNe;function rke(e){$e(im),e.registerComponentModel(zNe),e.registerComponentView(tke),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},sr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},sr)}var ike=["rect","polygon","keep","clear"];function nke(e,t){var r=Mt(e?e.brush:[]);if(r.length){var i=[];I(r,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(i=i.concat(u))});var n=e&&e.toolbox;ue(n)&&(n=n[0]),n||(n={feature:{}},e.toolbox=[n]);var a=n.feature||(n.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,i),ake(s),t&&!s.length&&s.push.apply(s,ike)}}function ake(e){var t={};I(e,function(r){t[r]=1}),e.length=0,I(t,function(r,i){e.push(i)})}var SV=I;function MV(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function PC(e,t,r){var i={};return SV(t,function(a){var o=i[a]=n();SV(e[a],function(s,l){if(Hr.isValidType(l)){var u={type:l,visual:s};r&&r(u,a),o[l]=new Hr(u),l==="opacity"&&(u=Ee(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new Hr(u))}})}),i;function n(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function lX(e,t,r){var i;I(r,function(n){t.hasOwnProperty(n)&&MV(t[n])&&(i=!0)}),i&&I(r,function(n){t.hasOwnProperty(n)&&MV(t[n])?e[n]=Ee(t[n]):delete e[n]})}function oke(e,t,r,i,n,a){var o={};I(e,function(c){var d=Hr.prepareVisualTypes(t[c]);o[c]=d});var s;function l(c){return AL(r,s,c)}function u(c,d){S9(r,s,c,d)}a==null?r.each(h):r.each([a],h);function h(c,d){s=a==null?c:d;var f=r.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var p=i.call(n,c),v=t[p],g=o[p],m=0,y=g.length;m<y;m++){var _=g[m];v[_]&&v[_].applyVisual(c,l,u)}}}function ske(e,t,r,i){var n={};return I(e,function(a){var o=Hr.prepareVisualTypes(t[a]);n[a]=o}),{progress:function(o,s){var l;i!=null&&(l=s.getDimensionIndex(i));function u(w){return AL(s,c,w)}function h(w,b){S9(s,c,w,b)}for(var c,d=s.getStore();(c=o.next())!=null;){var f=s.getRawDataItem(c);if(!(f&&f.visualMap===!1))for(var p=i!=null?d.get(l,c):c,v=r(p),g=t[v],m=n[v],y=0,_=m.length;y<_;y++){var x=m[y];g[x]&&g[x].applyVisual(p,u,h)}}}}}function lke(e){var t=e.brushType,r={point:function(i){return TV[t].point(i,r,e)},rect:function(i){return TV[t].rect(i,r,e)}};return r}var TV={lineX:AV(0),lineY:AV(1),rect:{point:function(e,t,r){return e&&r.boundingRect.contain(e[0],e[1])},rect:function(e,t,r){return e&&r.boundingRect.intersect(e)}},polygon:{point:function(e,t,r){return e&&r.boundingRect.contain(e[0],e[1])&&qu(r.range,e[0],e[1])},rect:function(e,t,r){var i=r.range;if(!e||i.length<=1)return!1;var n=e.x,a=e.y,o=e.width,s=e.height,l=i[0];if(qu(i,n,a)||qu(i,n+o,a)||qu(i,n,a+s)||qu(i,n+o,a+s)||Ge.create(e).contain(l[0],l[1])||kp(n,a,n+o,a,i)||kp(n,a,n,a+s,i)||kp(n+o,a,n+o,a+s,i)||kp(n,a+s,n+o,a+s,i))return!0}}};function AV(e){var t=["x","y"],r=["width","height"];return{point:function(i,n,a){if(i){var o=a.range,s=i[e];return bp(s,o)}},rect:function(i,n,a){if(i){var o=a.range,s=[i[t[e]],i[t[e]]+i[r[e]]];return s[1]<s[0]&&s.reverse(),bp(s[0],o)||bp(s[1],o)||bp(o[0],s)||bp(o[1],s)}}}}function bp(e,t){return t[0]<=e&&e<=t[1]}var CV=["inBrush","outOfBrush"],hM="__ecBrushSelect",LC="__ecInBrushSelectEvent";function uX(e){e.eachComponent({mainType:"brush"},function(t){var r=t.brushTargetManager=new OE(t.option,e);r.setInputRanges(t.areas,e)})}function uke(e,t,r){var i=[],n,a;e.eachComponent({mainType:"brush"},function(o){r&&r.type==="takeGlobalCursor"&&o.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),uX(e),e.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Ee(o.areas),selected:[]};i.push(l);var u=o.option,h=u.brushLink,c=[],d=[],f=[],p=!1;s||(n=u.throttleType,a=u.throttleDelay);var v=ce(o.areas,function(w){var b=fke[w.brushType],S=De({boundingRect:b?b(w):void 0},w);return S.selectors=lke(S),S}),g=PC(o.option,CV,function(w){w.mappingMethod="fixed"});ue(h)&&I(h,function(w){c[w]=1});function m(w){return h==="all"||!!c[w]}function y(w){return!!w.length}e.eachSeries(function(w,b){var S=f[b]=[];w.subType==="parallel"?_(w,b):x(w,b,S)});function _(w,b){var S=w.coordinateSystem;p=p||S.hasAxisBrushed(),m(b)&&S.eachActiveState(w.getData(),function(M,A){M==="active"&&(d[A]=1)})}function x(w,b,S){if(!(!w.brushSelector||dke(o,b))&&(I(v,function(A){o.brushTargetManager.controlSeries(A,w,e)&&S.push(A),p=p||y(S)}),m(b)&&y(S))){var M=w.getData();M.each(function(A){DV(w,S,M,A)&&(d[A]=1)})}}e.eachSeries(function(w,b){var S={seriesId:w.id,seriesIndex:b,seriesName:w.name,dataIndex:[]};l.selected.push(S);var M=f[b],A=w.getData(),T=m(b)?function(C){return d[C]?(S.dataIndex.push(A.getRawIndex(C)),"inBrush"):"outOfBrush"}:function(C){return DV(w,M,A,C)?(S.dataIndex.push(A.getRawIndex(C)),"inBrush"):"outOfBrush"};(m(b)?p:y(M))&&oke(CV,g,A,T)})}),hke(t,n,a,i,r)}function hke(e,t,r,i,n){if(n){var a=e.getZr();if(!a[LC]){a[hM]||(a[hM]=cke);var o=xf(a,hM,r,t);o(e,i)}}}function cke(e,t){if(!e.isDisposed()){var r=e.getZr();r[LC]=!0,e.dispatchAction({type:"brushSelect",batch:t}),r[LC]=!1}}function DV(e,t,r,i){for(var n=0,a=t.length;n<a;n++){var o=t[n];if(e.brushSelector(i,r,o.selectors,o))return!0}}function dke(e,t){var r=e.option.seriesIndex;return r!=null&&r!=="all"&&(ue(r)?We(r,t)<0:t!==r)}var fke={rect:function(e){return PV(e.range)},polygon:function(e){for(var t,r=e.range,i=0,n=r.length;i<n;i++){t=t||[[1/0,-1/0],[1/0,-1/0]];var a=r[i];a[0]<t[0][0]&&(t[0][0]=a[0]),a[0]>t[0][1]&&(t[0][1]=a[0]),a[1]<t[1][0]&&(t[1][0]=a[1]),a[1]>t[1][1]&&(t[1][1]=a[1])}return t&&PV(t)}};function PV(e){return new Ge(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var pke=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){this.ecModel=r,this.api=i,this.model,(this._brushController=new fE(i.getZr())).on("brush",me(this._onBrush,this)).mount()},t.prototype.render=function(r,i,n,a){this.model=r,this._updateController(r,i,n,a)},t.prototype.updateTransform=function(r,i,n,a){uX(i),this._updateController(r,i,n,a)},t.prototype.updateVisual=function(r,i,n,a){this.updateTransform(r,i,n,a)},t.prototype.updateView=function(r,i,n,a){this._updateController(r,i,n,a)},t.prototype._updateController=function(r,i,n,a){(!a||a.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(n)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(r){var i=this.model.id,n=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:Ee(n),$from:i}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:i,areas:Ee(n),$from:i})},t.type="brush",t}(Kt);const vke=pke;var gke="#ddd",mke=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.areas=[],r.brushOption={},r}return t.prototype.optionUpdated=function(r,i){var n=this.option;!i&&lX(n,r,["inBrush","outOfBrush"]);var a=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:gke},a.hasOwnProperty("liftZ")||(a.liftZ=5)},t.prototype.setAreas=function(r){r&&(this.areas=ce(r,function(i){return LV(this.option,i)},this))},t.prototype.setBrushOption=function(r){this.brushOption=LV(this.option,r),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(nt);function LV(e,t){return Ue({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Nt(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}const yke=mke;var _ke=["rect","polygon","lineX","lineY","keep","clear"],xke=function(e){Y(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n){var a,o,s;i.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,I(r.get("type",!0),function(l){r.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},t.prototype.updateView=function(r,i,n){this.render(r,i,n)},t.prototype.getIcons=function(){var r=this.model,i=r.get("icon",!0),n={};return I(r.get("type",!0),function(a){i[a]&&(n[a]=i[a])}),n},t.prototype.onclick=function(r,i,n){var a=this._brushType,o=this._brushMode;n==="clear"?(i.dispatchAction({type:"axisAreaSelect",intervals:[]}),i.dispatchAction({type:"brush",command:"clear",areas:[]})):i.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?a:a===n?!1:n,brushMode:n==="keep"?o==="multiple"?"single":"multiple":o}})},t.getDefaultOption=function(r){var i={show:!0,type:_ke.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return i},t}(Ln);const bke=xke;function wke(e){e.registerComponentView(vke),e.registerComponentModel(yke),e.registerPreprocessor(nke),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,uke),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,r){r.eachComponent({mainType:"brush",query:t},function(i){i.setAreas(t.areas)})}),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},sr),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},sr),$c("brush",bke)}var Ske=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(nt),Mke=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){if(this.group.removeAll(),!!r.get("show")){var a=this.group,o=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=Ve(r.get("textBaseline"),r.get("textVerticalAlign")),h=new ot({style:zt(o,{text:r.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),d=r.get("subtext"),f=new ot({style:zt(s,{text:d,fill:s.getTextColor(),y:c.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),g=r.get("triggerEvent",!0);h.silent=!p&&!g,f.silent=!v&&!g,p&&h.on("click",function(){__(p,"_"+r.get("target"))}),v&&f.on("click",function(){__(v,"_"+r.get("subtarget"))}),Re(h).eventData=Re(f).eventData=g?{componentType:"title",componentIndex:r.componentIndex}:null,a.add(h),d&&a.add(f);var m=a.getBoundingRect(),y=r.getBoxLayoutParams();y.width=m.width,y.height=m.height;var _=br(y,{width:n.getWidth(),height:n.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),a.x=_.x,a.y=_.y,a.markRedraw();var x={align:l,verticalAlign:u};h.setStyle(x),f.setStyle(x),m=a.getBoundingRect();var w=_.margin,b=r.getItemStyle(["color","opacity"]);b.fill=r.get("backgroundColor");var S=new rt({shape:{x:m.x-w[3],y:m.y-w[0],width:m.width+w[1]+w[3],height:m.height+w[0]+w[2],r:r.get("borderRadius")},style:b,subPixelOptimize:!0,silent:!0});a.add(S)}},t.type="title",t}(Kt);function Tke(e){e.registerComponentModel(Ske),e.registerComponentView(Mke)}var Ake=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode="box",r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),this._initData()},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var i=this._data.count();this.option.loop?r=(r%i+i)%i:(r>=i&&(r=i-1),r<0&&(r=0)),this.option.currentIndex=r},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(r){this.option.autoPlay=!!r},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var r=this.option,i=r.data||[],n=r.axisType,a=this._names=[],o;n==="category"?(o=[],I(i,function(u,h){var c=xr(uf(u),""),d;Pe(u)?(d=Ee(u),d.value=h):d=h,o.push(d),a.push(c)})):o=i;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new xi([{name:"value",type:s}],this);l.initData(o,a)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(nt);const EV=Ake;var hX=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline.slider",t.defaultOption=Yl(EV.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(EV);gr(hX,bL.prototype);const Cke=hX;var Dke=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline",t}(Kt);const Pke=Dke;var Lke=function(e){Y(t,e);function t(r,i,n,a){var o=e.call(this,r,i,n)||this;return o.type=a||"value",o}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Ea);const Eke=Lke;var cM=Math.PI,IV=it(),Ike=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){this.api=i},t.prototype.render=function(r,i,n){if(this.model=r,this.api=n,this.ecModel=i,this.group.removeAll(),r.get("show",!0)){var a=this._layout(r,n),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,r);r.formatTooltip=function(u){var h=l.scale.getLabel({value:u});return Lr("nameValue",{noName:!0,value:h})},I(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,o,l,r)},this),this._renderAxisLabel(a,s,l,r),this._position(a,r)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(r,i){var n=r.get(["label","position"]),a=r.get("orient"),o=Rke(r,i),s;n==null||n==="auto"?s=a==="horizontal"?o.y+o.height/2<i.getHeight()/2?"-":"+":o.x+o.width/2<i.getWidth()/2?"+":"-":ge(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},h={horizontal:0,vertical:cM/2},c=a==="vertical"?o.height:o.width,d=r.getModel("controlStyle"),f=d.get("show",!0),p=f?d.get("itemSize"):0,v=f?d.get("itemGap"):0,g=p+v,m=r.get(["label","rotate"])||0;m=m*cM/180;var y,_,x,w=d.get("position",!0),b=f&&d.get("showPlayBtn",!0),S=f&&d.get("showPrevBtn",!0),M=f&&d.get("showNextBtn",!0),A=0,T=c;w==="left"||w==="bottom"?(b&&(y=[0,0],A+=g),S&&(_=[A,0],A+=g),M&&(x=[T-p,0],T-=g)):(b&&(y=[T-p,0],T-=g),S&&(_=[0,0],A+=g),M&&(x=[T-p,0],T-=g));var C=[A,T];return r.get("inverse")&&C.reverse(),{viewRect:o,mainLength:c,orient:a,rotation:h[a],labelRotation:m,labelPosOpt:s,labelAlign:r.get(["label","align"])||l[a],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||u[a],playPosition:y,prevBtnPosition:_,nextBtnPosition:x,axisExtent:C,controlSize:p,controlGap:v}},t.prototype._position=function(r,i){var n=this._mainGroup,a=this._labelGroup,o=r.viewRect;if(r.orient==="vertical"){var s=Gn(),l=o.x,u=o.y+o.height;bo(s,s,[-l,-u]),Wh(s,s,-cM/2),bo(s,s,[l,u]),o=o.clone(),o.applyTransform(s)}var h=y(o),c=y(n.getBoundingRect()),d=y(a.getBoundingRect()),f=[n.x,n.y],p=[a.x,a.y];p[0]=f[0]=h[0][0];var v=r.labelPosOpt;if(v==null||ge(v)){var g=v==="+"?0:1;_(f,c,h,1,g),_(p,d,h,1,1-g)}else{var g=v>=0?0:1;_(f,c,h,1,g),p[1]=f[1]+v}n.setPosition(f),a.setPosition(p),n.rotation=a.rotation=r.rotation,m(n),m(a);function m(x){x.originX=h[0][0]-x.x,x.originY=h[1][0]-x.y}function y(x){return[[x.x,x.x+x.width],[x.y,x.y+x.height]]}function _(x,w,b,S,M){x[S]+=b[S][M]-w[S][M]}},t.prototype._createAxis=function(r,i){var n=i.getData(),a=i.get("axisType"),o=Oke(i,a);o.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var s=n.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new Eke("value",o,r.axisExtent,a);return l.model=i,l},t.prototype._createGroup=function(r){var i=this[r]=new Ie;return this.group.add(i),i},t.prototype._renderAxisLine=function(r,i,n,a){var o=n.getExtent();if(a.get(["lineStyle","show"])){var s=new Nr({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:ae({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});i.add(s);var l=this._progressLine=new Nr({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:De({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});i.add(l)}},t.prototype._renderAxisTick=function(r,i,n,a){var o=this,s=a.getData(),l=n.scale.getTicks();this._tickSymbols=[],I(l,function(u){var h=n.dataToCoord(u.value),c=s.getItemModel(u.value),d=c.getModel("itemStyle"),f=c.getModel(["emphasis","itemStyle"]),p=c.getModel(["progress","itemStyle"]),v={x:h,y:0,onclick:me(o._changeTimeline,o,u.value)},g=OV(c,d,i,v);g.ensureState("emphasis").style=f.getItemStyle(),g.ensureState("progress").style=p.getItemStyle(),yh(g);var m=Re(g);c.get("tooltip")?(m.dataIndex=u.value,m.dataModel=a):m.dataIndex=m.dataModel=null,o._tickSymbols.push(g)})},t.prototype._renderAxisLabel=function(r,i,n,a){var o=this,s=n.getLabelModel();if(s.get("show")){var l=a.getData(),u=n.getViewLabels();this._tickLabels=[],I(u,function(h){var c=h.tickValue,d=l.getItemModel(c),f=d.getModel("label"),p=d.getModel(["emphasis","label"]),v=d.getModel(["progress","label"]),g=n.dataToCoord(h.tickValue),m=new ot({x:g,y:0,rotation:r.labelRotation-r.rotation,onclick:me(o._changeTimeline,o,c),silent:!1,style:zt(f,{text:h.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});m.ensureState("emphasis").style=zt(p),m.ensureState("progress").style=zt(v),i.add(m),yh(m),IV(m).dataIndex=c,o._tickLabels.push(m)})}},t.prototype._renderControl=function(r,i,n,a){var o=r.controlSize,s=r.rotation,l=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),h=a.getPlayState(),c=a.get("inverse",!0);d(r.nextBtnPosition,"next",me(this._changeTimeline,this,c?"-":"+")),d(r.prevBtnPosition,"prev",me(this._changeTimeline,this,c?"+":"-")),d(r.playPosition,h?"stop":"play",me(this._handlePlayClick,this,!h),!0);function d(f,p,v,g){if(f){var m=Aa(Ve(a.get(["controlStyle",p+"BtnSize"]),o),o),y=[0,-m/2,m,m],_=zke(a,p+"Icon",y,{x:f[0],y:f[1],originX:o/2,originY:0,rotation:g?-s:0,rectHover:!0,style:l,onclick:v});_.ensureState("emphasis").style=u,i.add(_),yh(_)}}},t.prototype._renderCurrentPointer=function(r,i,n,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),u=this,h={onCreate:function(c){c.draggable=!0,c.drift=me(u._handlePointerDrag,u),c.ondragend=me(u._handlePointerDragend,u),RV(c,u._progressLine,s,n,a,!0)},onUpdate:function(c){RV(c,u._progressLine,s,n,a)}};this._currentPointer=OV(l,l,this._mainGroup,{},this._currentPointer,h)},t.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},t.prototype._handlePointerDrag=function(r,i,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},t.prototype._pointerChangeTimeline=function(r,i){var n=this._toAxisCoord(r)[0],a=this._axis,o=zn(a.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),u=this.model;(i||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var i=r.model;r._changeTimeline(i.getCurrentIndex()+(i.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(r){var i=this._mainGroup.getLocalTransform();return Sa(r,i,!0)},t.prototype._findNearestTick=function(r){var i=this.model.getData(),n=1/0,a,o=this._axis;return i.each(["value"],function(s,l){var u=o.dataToCoord(s),h=Math.abs(u-r);h<n&&(n=h,a=l)}),a},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(r){var i=this.model.getCurrentIndex();r==="+"?r=i+1:r==="-"&&(r=i-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},t.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),i=this._tickSymbols,n=this._tickLabels;if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",a<r);if(n)for(var a=0;a<n.length;a++)n&&n[a]&&n[a].toggleState("progress",IV(n[a]).dataIndex<=r)},t.type="timeline.slider",t}(Pke);function Oke(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new OL({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new f7({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new Ul}}function Rke(e,t){return br(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}function zke(e,t,r,i){var n=i.style,a=Gg(e.get(["controlStyle",t]),i||{},new Ge(r[0],r[1],r[2],r[3]));return n&&a.setStyle(n),a}function OV(e,t,r,i,n,a){var o=t.get("color");if(n)n.setColor(o),r.add(n),a&&a.onUpdate(n);else{var s=e.get("symbol");n=vr(s,-1,-1,2,2,o),n.setStyle("strokeNoScale",!0),r.add(n),a&&a.onCreate(n)}var l=t.getItemStyle(["color"]);n.setStyle(l),i=Ue({rectHover:!0,z2:100},i,!0);var u=$g(e.get("symbolSize"));i.scaleX=u[0]/2,i.scaleY=u[1]/2;var h=bf(e.get("symbolOffset"),u);h&&(i.x=(i.x||0)+h[0],i.y=(i.y||0)+h[1]);var c=e.get("symbolRotate");return i.rotation=(c||0)*Math.PI/180||0,n.attr(i),n.updateTransform(),n}function RV(e,t,r,i,n,a){if(!e.dragging){var o=n.getModel("checkpointStyle"),s=i.dataToCoord(n.getData().get("value",r));if(a||!o.get("animation",!0))e.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}const Nke=Ike;function kke(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,r,i){var n=r.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),r.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),De({currentIndex:n.option.currentIndex},t)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,r){var i=r.getComponent("timeline");i&&t.playState!=null&&i.setPlayState(t.playState)})}function Bke(e){var t=e&&e.timeline;ue(t)||(t=t?[t]:[]),I(t,function(r){r&&Fke(r)})}function Fke(e){var t=e.type,r={number:"value",time:"time"};if(r[t]&&(e.axisType=r[t],delete e.type),zV(e),Zu(e,"controlPosition")){var i=e.controlStyle||(e.controlStyle={});Zu(i,"position")||(i.position=e.controlPosition),i.position==="none"&&!Zu(i,"show")&&(i.show=!1,delete i.position),delete e.controlPosition}I(e.data||[],function(n){Pe(n)&&!ue(n)&&(!Zu(n,"value")&&Zu(n,"name")&&(n.value=n.name),zV(n))})}function zV(e){var t=e.itemStyle||(e.itemStyle={}),r=t.emphasis||(t.emphasis={}),i=e.label||e.label||{},n=i.normal||(i.normal={}),a={normal:1,emphasis:1};I(i,function(o,s){!a[s]&&!Zu(n,s)&&(n[s]=o)}),r.label&&!Zu(i,"emphasis")&&(i.emphasis=r.label,delete r.label)}function Zu(e,t){return e.hasOwnProperty(t)}function Vke(e){e.registerComponentModel(Cke),e.registerComponentView(Nke),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),kke(e),e.registerPreprocessor(Bke)}function NE(e,t){if(!e)return!1;for(var r=ue(e)?e:[e],i=0;i<r.length;i++)if(r[i]&&r[i][t])return!0;return!1}function c0(e){Lh(e,"label",["show"])}var d0=it(),cX=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),this._mergeOption(r,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(at.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,i){this._mergeOption(r,i,!1,!1)},t.prototype._mergeOption=function(r,i,n,a){var o=this.mainType;n||i.eachSeries(function(s){var l=s.get(this.mainType,!0),u=d0(s)[o];if(!l||!l.data){d0(s)[o]=null;return}u?u._mergeOption(l,i,!0):(a&&c0(l),I(l.data,function(h){h instanceof Array?(c0(h[0]),c0(h[1])):c0(h)}),u=this.createMarkerModelFromSeries(l,this,i),ae(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),d0(s)[o]=u},this)},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=this.getRawValue(r),s=a.getName(r);return Lr("section",{header:this.name,blocks:[Lr("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,i){return d0(r)[i]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(nt);gr(cX,bL.prototype);const jl=cX;var Uke=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(jl);const Gke=Uke;function EC(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Hke(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function f0(e,t,r,i,n,a){var o=[],s=Vl(t,i),l=s?t.getCalculationInfo("stackResultDimension"):i,u=kE(t,l,e),h=t.indicesOfNearest(l,u)[0];o[n]=t.get(r,h),o[a]=t.get(l,h);var c=t.get(i,h),d=uo(t.get(i,h));return d=Math.min(d,20),d>=0&&(o[a]=+o[a].toFixed(d)),[o,c]}var dM={min:Ne(f0,"min"),max:Ne(f0,"max"),average:Ne(f0,"average"),median:Ne(f0,"median")};function bg(e,t){if(t){var r=e.getData(),i=e.coordinateSystem,n=i&&i.dimensions;if(!Hke(t)&&!ue(t.coord)&&ue(n)){var a=dX(t,r,i,e);if(t=Ee(t),t.type&&dM[t.type]&&a.baseAxis&&a.valueAxis){var o=We(n,a.baseAxis.dim),s=We(n,a.valueAxis.dim),l=dM[t.type](r,a.baseDataDim,a.valueDataDim,o,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!ue(n))t.coord=[];else for(var u=t.coord,h=0;h<2;h++)dM[u[h]]&&(u[h]=kE(r,r.mapDimension(n[h]),u[h]));return t}}function dX(e,t,r,i){var n={};return e.valueIndex!=null||e.valueDim!=null?(n.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,n.valueAxis=r.getAxis(jke(i,n.valueDataDim)),n.baseAxis=r.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=i.getBaseAxis(),n.valueAxis=r.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function jke(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function wg(e,t){return e&&e.containData&&t.coord&&!EC(t)?e.containData(t.coord):!0}function Wke(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!EC(t)&&!EC(r)?e.containZone(t.coord,r.coord):!0}function fX(e,t){return e?function(r,i,n,a){var o=a<2?r.coord&&r.coord[a]:r.value;return Ll(o,t[a])}:function(r,i,n,a){return Ll(r.value,t[a])}}function kE(e,t,r){if(r==="average"){var i=0,n=0;return e.each(t,function(a,o){isNaN(a)||(i+=a,n++)}),i/n}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var fM=it(),$ke=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=Me()},t.prototype.render=function(r,i,n){var a=this,o=this.markerGroupMap;o.each(function(s){fM(s).keep=!1}),i.eachSeries(function(s){var l=jl.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,i,n)}),o.each(function(s){!fM(s).keep&&a.group.remove(s.group)})},t.prototype.markKeep=function(r){fM(r).keep=!0},t.prototype.toggleBlurSeries=function(r,i){var n=this;I(r,function(a){var o=jl.getMarkerModelFromSeries(a,n.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(i?FW(l):tL(l))})}})},t.type="marker",t}(Kt);const BE=$ke;function NV(e,t,r){var i=t.coordinateSystem;e.each(function(n){var a=e.getItemModel(n),o,s=ve(a.get("x"),r.getWidth()),l=ve(a.get("y"),r.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(t.getMarkerPosition)o=t.getMarkerPosition(e.getValues(e.dimensions,n));else if(i){var u=e.get(i.dimensions[0],n),h=e.get(i.dimensions[1],n);o=i.dataToPoint([u,h])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),e.setItemLayout(n,o)})}var qke=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(a){var o=jl.getMarkerModelFromSeries(a,"markPoint");o&&(NV(o.getData(),a,n),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(r,i,n,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,new Kg),c=Xke(o,r,i);i.setData(c),NV(i.getData(),r,a),c.each(function(d){var f=c.getItemModel(d),p=f.getShallow("symbol"),v=f.getShallow("symbolSize"),g=f.getShallow("symbolRotate"),m=f.getShallow("symbolOffset"),y=f.getShallow("symbolKeepAspect");if(Ae(p)||Ae(v)||Ae(g)||Ae(m)){var _=i.getRawValue(d),x=i.getDataParams(d);Ae(p)&&(p=p(_,x)),Ae(v)&&(v=v(_,x)),Ae(g)&&(g=g(_,x)),Ae(m)&&(m=m(_,x))}var w=f.getModel("itemStyle").getItemStyle(),b=Wg(l,"color");w.fill||(w.fill=b),c.setItemVisual(d,{symbol:p,symbolSize:v,symbolRotate:g,symbolOffset:m,symbolKeepAspect:y,style:w})}),h.updateData(c),this.group.add(h.group),c.eachItemGraphicEl(function(d){d.traverse(function(f){Re(f).dataModel=i})}),this.markKeep(h),h.group.silent=i.get("silent")||r.get("silent")},t.type="markPoint",t}(BE);function Xke(e,t,r){var i;e?i=ce(e&&e.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return ae(ae({},l),{name:s,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new xi(i,r),a=ce(r.get("data"),Ne(bg,t));e&&(a=xt(a,Ne(wg,e)));var o=fX(!!e,i);return n.initData(a,null,o),n}const Yke=qke;function Zke(e){e.registerComponentModel(Gke),e.registerComponentView(Yke),e.registerPreprocessor(function(t){NE(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var Kke=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(jl);const Jke=Kke;var p0=it(),Qke=function(e,t,r,i){var n=e.getData(),a;if(ue(i))a=i;else{var o=i.type;if(o==="min"||o==="max"||o==="average"||o==="median"||i.xAxis!=null||i.yAxis!=null){var s=void 0,l=void 0;if(i.yAxis!=null||i.xAxis!=null)s=t.getAxis(i.yAxis!=null?"y":"x"),l=zr(i.yAxis,i.xAxis);else{var u=dX(i,n,t,e);s=u.valueAxis;var h=Q9(n,u.valueDataDim);l=kE(n,h,o)}var c=s.dim==="x"?0:1,d=1-c,f=Ee(i),p={coord:[]};f.type=null,f.coord=[],f.coord[d]=-1/0,p.coord[d]=1/0;var v=r.get("precision");v>=0&&st(l)&&(l=+l.toFixed(Math.min(v,20))),f.coord[c]=p.coord[c]=l,a=[f,p,{type:o,valueIndex:i.valueIndex,value:l}]}else a=[]}var g=[bg(e,a[0]),bg(e,a[1]),ae({},a[2])];return g[2].type=g[2].type||null,Ue(g[2],g[0]),Ue(g[2],g[1]),g};function W_(e){return!isNaN(e)&&!isFinite(e)}function kV(e,t,r,i){var n=1-e,a=i.dimensions[e];return W_(t[n])&&W_(r[n])&&t[e]===r[e]&&i.getAxis(a).containData(t[e])}function eBe(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,i=t[1].coord;if(r&&i&&(kV(1,r,i,e)||kV(0,r,i,e)))return!0}return wg(e,t[0])&&wg(e,t[1])}function pM(e,t,r,i,n){var a=i.coordinateSystem,o=e.getItemModel(t),s,l=ve(o.get("x"),n.getWidth()),u=ve(o.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(i.getMarkerPosition)s=i.getMarkerPosition(e.getValues(e.dimensions,t));else{var h=a.dimensions,c=e.get(h[0],t),d=e.get(h[1],t);s=a.dataToPoint([c,d])}if(Xh(a,"cartesian2d")){var f=a.getAxis("x"),p=a.getAxis("y"),h=a.dimensions;W_(e.get(h[0],t))?s[0]=f.toGlobalCoord(f.getExtent()[r?0:1]):W_(e.get(h[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var tBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(a){var o=jl.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=p0(o).from,u=p0(o).to;l.each(function(h){pM(l,h,!0,a,n),pM(u,h,!1,a,n)}),s.each(function(h){s.setItemLayout(h,[l.getItemLayout(h),u.getItemLayout(h)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,i,n,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,new sE);this.group.add(h.group);var c=rBe(o,r,i),d=c.from,f=c.to,p=c.line;p0(i).from=d,p0(i).to=f,i.setData(p);var v=i.get("symbol"),g=i.get("symbolSize"),m=i.get("symbolRotate"),y=i.get("symbolOffset");ue(v)||(v=[v,v]),ue(g)||(g=[g,g]),ue(m)||(m=[m,m]),ue(y)||(y=[y,y]),c.from.each(function(x){_(d,x,!0),_(f,x,!1)}),p.each(function(x){var w=p.getItemModel(x).getModel("lineStyle").getLineStyle();p.setItemLayout(x,[d.getItemLayout(x),f.getItemLayout(x)]),w.stroke==null&&(w.stroke=d.getItemVisual(x,"style").fill),p.setItemVisual(x,{fromSymbolKeepAspect:d.getItemVisual(x,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(x,"symbolOffset"),fromSymbolRotate:d.getItemVisual(x,"symbolRotate"),fromSymbolSize:d.getItemVisual(x,"symbolSize"),fromSymbol:d.getItemVisual(x,"symbol"),toSymbolKeepAspect:f.getItemVisual(x,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(x,"symbolOffset"),toSymbolRotate:f.getItemVisual(x,"symbolRotate"),toSymbolSize:f.getItemVisual(x,"symbolSize"),toSymbol:f.getItemVisual(x,"symbol"),style:w})}),h.updateData(p),c.line.eachItemGraphicEl(function(x){Re(x).dataModel=i,x.traverse(function(w){Re(w).dataModel=i})});function _(x,w,b){var S=x.getItemModel(w);pM(x,w,b,r,a);var M=S.getModel("itemStyle").getItemStyle();M.fill==null&&(M.fill=Wg(l,"color")),x.setItemVisual(w,{symbolKeepAspect:S.get("symbolKeepAspect"),symbolOffset:Ve(S.get("symbolOffset",!0),y[b?0:1]),symbolRotate:Ve(S.get("symbolRotate",!0),m[b?0:1]),symbolSize:Ve(S.get("symbolSize"),g[b?0:1]),symbol:Ve(S.get("symbol",!0),v[b?0:1]),style:M})}this.markKeep(h),h.group.silent=i.get("silent")||r.get("silent")},t.type="markLine",t}(BE);function rBe(e,t,r){var i;e?i=ce(e&&e.dimensions,function(u){var h=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ae(ae({},h),{name:u,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new xi(i,r),a=new xi(i,r),o=new xi([],r),s=ce(r.get("data"),Ne(Qke,t,e,r));e&&(s=xt(s,Ne(eBe,e)));var l=fX(!!e,i);return n.initData(ce(s,function(u){return u[0]}),null,l),a.initData(ce(s,function(u){return u[1]}),null,l),o.initData(ce(s,function(u){return u[2]})),o.hasItemOption=!0,{from:n,to:a,line:o}}const iBe=tBe;function nBe(e){e.registerComponentModel(Jke),e.registerComponentView(iBe),e.registerPreprocessor(function(t){NE(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var aBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(jl);const oBe=aBe;var v0=it(),sBe=function(e,t,r,i){var n=i[0],a=i[1];if(!(!n||!a)){var o=bg(e,n),s=bg(e,a),l=o.coord,u=s.coord;l[0]=zr(l[0],-1/0),l[1]=zr(l[1],-1/0),u[0]=zr(u[0],1/0),u[1]=zr(u[1],1/0);var h=kP([{},o,s]);return h.coord=[o.coord,s.coord],h.x0=o.x,h.y0=o.y,h.x1=s.x,h.y1=s.y,h}};function $_(e){return!isNaN(e)&&!isFinite(e)}function BV(e,t,r,i){var n=1-e;return $_(t[n])&&$_(r[n])}function lBe(e,t){var r=t.coord[0],i=t.coord[1],n={coord:r,x:t.x0,y:t.y0},a={coord:i,x:t.x1,y:t.y1};return Xh(e,"cartesian2d")?r&&i&&(BV(1,r,i)||BV(0,r,i))?!0:Wke(e,n,a):wg(e,n)||wg(e,a)}function FV(e,t,r,i,n){var a=i.coordinateSystem,o=e.getItemModel(t),s,l=ve(o.get(r[0]),n.getWidth()),u=ve(o.get(r[1]),n.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(i.getMarkerPosition){var h=e.getValues(["x0","y0"],t),c=e.getValues(["x1","y1"],t),d=a.clampData(h),f=a.clampData(c),p=[];r[0]==="x0"?p[0]=d[0]>f[0]?c[0]:h[0]:p[0]=d[0]>f[0]?h[0]:c[0],r[1]==="y0"?p[1]=d[1]>f[1]?c[1]:h[1]:p[1]=d[1]>f[1]?h[1]:c[1],s=i.getMarkerPosition(p,r,!0)}else{var v=e.get(r[0],t),g=e.get(r[1],t),m=[v,g];a.clampData&&a.clampData(m,m),s=a.dataToPoint(m,!0)}if(Xh(a,"cartesian2d")){var y=a.getAxis("x"),_=a.getAxis("y"),v=e.get(r[0],t),g=e.get(r[1],t);$_(v)?s[0]=y.toGlobalCoord(y.getExtent()[r[0]==="x0"?0:1]):$_(g)&&(s[1]=_.toGlobalCoord(_.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var VV=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],uBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(a){var o=jl.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var u=ce(VV,function(c){return FV(s,l,c,a,n)});s.setItemLayout(l,u);var h=s.getItemGraphicEl(l);h.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,i,n,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,{group:new Ie});this.group.add(h.group),this.markKeep(h);var c=hBe(o,r,i);i.setData(c),c.each(function(d){var f=ce(VV,function(M){return FV(c,d,M,r,a)}),p=o.getAxis("x").scale,v=o.getAxis("y").scale,g=p.getExtent(),m=v.getExtent(),y=[p.parse(c.get("x0",d)),p.parse(c.get("x1",d))],_=[v.parse(c.get("y0",d)),v.parse(c.get("y1",d))];zn(y),zn(_);var x=!(g[0]>y[1]||g[1]<y[0]||m[0]>_[1]||m[1]<_[0]),w=!x;c.setItemLayout(d,{points:f,allClipped:w});var b=c.getItemModel(d).getModel("itemStyle").getItemStyle(),S=Wg(l,"color");b.fill||(b.fill=S,ge(b.fill)&&(b.fill=o_(b.fill,.4))),b.stroke||(b.stroke=S),c.setItemVisual(d,"style",b)}),c.diff(v0(h).data).add(function(d){var f=c.getItemLayout(d);if(!f.allClipped){var p=new qi({shape:{points:f.points}});c.setItemGraphicEl(d,p),h.group.add(p)}}).update(function(d,f){var p=v0(h).data.getItemGraphicEl(f),v=c.getItemLayout(d);v.allClipped?p&&h.group.remove(p):(p?ut(p,{shape:{points:v.points}},i,d):p=new qi({shape:{points:v.points}}),c.setItemGraphicEl(d,p),h.group.add(p))}).remove(function(d){var f=v0(h).data.getItemGraphicEl(d);h.group.remove(f)}).execute(),c.eachItemGraphicEl(function(d,f){var p=c.getItemModel(f),v=c.getItemVisual(f,"style");d.useStyle(c.getItemVisual(f,"style")),Wr(d,Pr(p),{labelFetcher:i,labelDataIndex:f,defaultText:c.getName(f)||"",inheritColor:ge(v.fill)?o_(v.fill,1):"#000"}),jr(d,p),Zt(d,null,null,p.get(["emphasis","disabled"])),Re(d).dataModel=i}),v0(h).data=c,h.group.silent=i.get("silent")||r.get("silent")},t.type="markArea",t}(BE);function hBe(e,t,r){var i,n,a=["x0","y0","x1","y1"];if(e){var o=ce(e&&e.dimensions,function(u){var h=t.getData(),c=h.getDimensionInfo(h.mapDimension(u))||{};return ae(ae({},c),{name:u,ordinalMeta:null})});n=ce(a,function(u,h){return{name:u,type:o[h%2].type}}),i=new xi(n,r)}else n=[{name:"value",type:"float"}],i=new xi(n,r);var s=ce(r.get("data"),Ne(sBe,t,e,r));e&&(s=xt(s,Ne(lBe,e)));var l=e?function(u,h,c,d){var f=u.coord[Math.floor(d/2)][d%2];return Ll(f,n[d])}:function(u,h,c,d){return Ll(u.value,n[d])};return i.initData(s,null,l),i.hasItemOption=!0,i}const cBe=uBe;function dBe(e){e.registerComponentModel(oBe),e.registerComponentView(cBe),e.registerPreprocessor(function(t){NE(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var fBe=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},pBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),this._updateSelector(r)},t.prototype._updateSelector=function(r){var i=r.selector,n=this.ecModel;i===!0&&(i=r.selector=["all","inverse"]),ue(i)&&I(i,function(a,o){ge(a)&&(a={type:a}),i[o]=Ue(a,fBe(n,a.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var i=!1,n=0;n<r.length;n++){var a=r[n].get("name");if(this.isSelected(a)){this.select(a),i=!0;break}}!i&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var i=[],n=[];r.eachRawSeries(function(l){var u=l.name;n.push(u);var h;if(l.legendVisualProvider){var c=l.legendVisualProvider,d=c.getAllNames();r.isSeriesFiltered(l)||(n=n.concat(d)),d.length?i=i.concat(d):h=!0}else h=!0;h&&XP(l)&&i.push(l.name)}),this._availableNames=n;var a=this.get("data")||i,o=Me(),s=ce(a,function(l){return(ge(l)||st(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new Nt(l,this,this.ecModel))},this);this._data=xt(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var i=this.option.selected,n=this.get("selectedMode");if(n==="single"){var a=this._data;I(a,function(o){i[o.get("name")]=!1})}i[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var i=this.option.selected;i.hasOwnProperty(r)||(i[r]=!0),this[i[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,i=this.option.selected;I(r,function(n){i[n.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,i=this.option.selected;I(r,function(n){var a=n.get("name",!0);i.hasOwnProperty(a)||(i[a]=!0),i[a]=!i[a]})},t.prototype.isSelected=function(r){var i=this.option.selected;return!(i.hasOwnProperty(r)&&!i[r])&&We(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(nt);const IC=pBe;var Rc=Ne,OC=I,g0=Ie,vBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new g0),this.group.add(this._selectorGroup=new g0),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,i,n){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var o=r.get("align"),s=r.get("orient");(!o||o==="auto")&&(o=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,r,i,n,l,s,u);var h=r.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},d=r.get("padding"),f=br(h,c,d),p=this.layoutInner(r,o,f,a,l,u),v=br(De({width:p.width,height:p.height},h),c,d);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=tX(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,i,n,a,o,s,l){var u=this.getContentGroup(),h=Me(),c=i.get("selectedMode"),d=[];n.eachRawSeries(function(f){!f.get("legendHoverLink")&&d.push(f.id)}),OC(i.getData(),function(f,p){var v=f.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new g0;g.newline=!0,u.add(g);return}var m=n.getSeriesByName(v)[0];if(!h.get(v))if(m){var y=m.getData(),_=y.getVisual("legendLineStyle")||{},x=y.getVisual("legendIcon"),w=y.getVisual("style"),b=this._createItem(m,v,p,f,i,r,_,w,x,c,a);b.on("click",Rc(UV,v,null,a,d)).on("mouseover",Rc(RC,m.name,null,a,d)).on("mouseout",Rc(zC,m.name,null,a,d)),h.set(v,!0)}else n.eachRawSeries(function(S){if(!h.get(v)&&S.legendVisualProvider){var M=S.legendVisualProvider;if(!M.containName(v))return;var A=M.indexOfName(v),T=M.getItemVisual(A,"style"),C=M.getItemVisual(A,"legendIcon"),D=ln(T.fill);D&&D[3]===0&&(D[3]=.2,T=ae(ae({},T),{fill:hs(D,"rgba")}));var P=this._createItem(S,v,p,f,i,r,{},T,C,c,a);P.on("click",Rc(UV,null,v,a,d)).on("mouseover",Rc(RC,null,v,a,d)).on("mouseout",Rc(zC,null,v,a,d)),h.set(v,!0)}},this)},this),o&&this._createSelector(o,i,a,s,l)},t.prototype._createSelector=function(r,i,n,a,o){var s=this.getSelectorGroup();OC(r,function(u){var h=u.type,c=new ot({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(c);var d=i.getModel("selectorLabel"),f=i.getModel(["emphasis","selectorLabel"]);Wr(c,{normal:d,emphasis:f},{defaultText:u.title}),yh(c)})},t.prototype._createItem=function(r,i,n,a,o,s,l,u,h,c,d){var f=r.visualDrawType,p=o.get("itemWidth"),v=o.get("itemHeight"),g=o.isSelected(i),m=a.get("symbolRotate"),y=a.get("symbolKeepAspect"),_=a.get("icon");h=_||h||"roundRect";var x=gBe(h,a,l,u,f,g,d),w=new g0,b=a.getModel("textStyle");if(Ae(r.getLegendIcon)&&(!_||_==="inherit"))w.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:h,iconRotate:m,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:y}));else{var S=_==="inherit"&&r.getData().getVisual("symbol")?m==="inherit"?r.getData().getVisual("symbolRotate"):m:0;w.add(mBe({itemWidth:p,itemHeight:v,icon:h,iconRotate:S,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:y}))}var M=s==="left"?p+5:-5,A=s,T=o.get("formatter"),C=i;ge(T)&&T?C=T.replace("{name}",i??""):Ae(T)&&(C=T(i));var D=a.get("inactiveColor");w.add(new ot({style:zt(b,{text:C,x:M,y:v/2,fill:g?b.getTextColor():D,align:A,verticalAlign:"middle"})}));var P=new rt({shape:w.getBoundingRect(),invisible:!0}),E=a.getModel("tooltip");return E.get("show")&&df({el:P,componentModel:o,itemName:i,itemTooltipOption:E.option}),w.add(P),w.eachChild(function(O){O.silent=!0}),P.silent=!c,this.getContentGroup().add(w),yh(w),w.__legendDataIndex=n,w},t.prototype.layoutInner=function(r,i,n,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();xh(r.get("orient"),l,r.get("itemGap"),n.width,n.height);var h=l.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),l.markRedraw(),o){xh("horizontal",u,r.get("selectorItemGap",!0));var d=u.getBoundingRect(),f=[-d.x,-d.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,g=v===0?"width":"height",m=v===0?"height":"width",y=v===0?"y":"x";s==="end"?f[v]+=h[g]+p:c[v]+=d[g]+p,f[1-v]+=h[m]/2-d[m]/2,u.x=f[0],u.y=f[1],l.x=c[0],l.y=c[1];var _={x:0,y:0};return _[g]=h[g]+p+d[g],_[m]=Math.max(h[m],d[m]),_[y]=Math.min(0,d[y]+f[1-v]),_}else return l.x=c[0],l.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Kt);function gBe(e,t,r,i,n,a,o){function s(g,m){g.lineWidth==="auto"&&(g.lineWidth=m.lineWidth>0?2:0),OC(g,function(y,_){g[_]==="inherit"&&(g[_]=m[_])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),h=e.lastIndexOf("empty",0)===0?"fill":"stroke",c=l.getShallow("decal");u.decal=!c||c==="inherit"?i.decal:kd(c,o),u.fill==="inherit"&&(u.fill=i[n]),u.stroke==="inherit"&&(u.stroke=i[h]),u.opacity==="inherit"&&(u.opacity=(n==="fill"?i:r).opacity),s(u,i);var d=t.getModel("lineStyle"),f=d.getLineStyle();if(s(f,r),u.fill==="auto"&&(u.fill=i.fill),u.stroke==="auto"&&(u.stroke=i.fill),f.stroke==="auto"&&(f.stroke=i.fill),!a){var p=t.get("inactiveBorderWidth"),v=u[h];u.lineWidth=p==="auto"?i.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),f.stroke=d.get("inactiveColor"),f.lineWidth=d.get("inactiveWidth")}return{itemStyle:u,lineStyle:f}}function mBe(e){var t=e.icon||"roundRect",r=vr(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function UV(e,t,r,i){zC(e,t,r,i),r.dispatchAction({type:"legendToggleSelect",name:e??t}),RC(e,t,r,i)}function pX(e){for(var t=e.getZr().storage.getDisplayList(),r,i=0,n=t.length;i<n&&!(r=t[i].states.emphasis);)i++;return r&&r.hoverLayer}function RC(e,t,r,i){pX(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function zC(e,t,r,i){pX(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}const vX=vBe;function yBe(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var i=0;i<t.length;i++)if(!t[i].isSelected(r.name))return!1;return!0})}function wp(e,t,r){var i={},n=e==="toggleSelected",a;return r.eachComponent("legend",function(o){n&&a!=null?o[a?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?o[e]():(o[e](t.name),a=o.isSelected(t.name));var s=o.getData();I(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var h=o.isSelected(u);i.hasOwnProperty(u)?i[u]=i[u]&&h:i[u]=h}})}),e==="allSelect"||e==="inverseSelect"?{selected:i}:{name:t.name,selected:i}}function _Be(e){e.registerAction("legendToggleSelect","legendselectchanged",Ne(wp,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",Ne(wp,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",Ne(wp,"inverseSelect")),e.registerAction("legendSelect","legendselected",Ne(wp,"select")),e.registerAction("legendUnSelect","legendunselected",Ne(wp,"unSelect"))}function gX(e){e.registerComponentModel(IC),e.registerComponentView(vX),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,yBe),e.registerSubTypeDefaulter("legend",function(){return"plain"}),_Be(e)}var xBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,i,n){var a=gf(r);e.prototype.init.call(this,r,i,n),GV(this,r,a)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),GV(this,this.option,r)},t.type="legend.scroll",t.defaultOption=Yl(IC.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(IC);function GV(e,t,r){var i=e.getOrient(),n=[1,1];n[i.index]=0,Fl(t,r,{type:"box",ignoreSize:!!n})}const bBe=xBe;var HV=Ie,vM=["width","height"],gM=["x","y"],wBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new HV),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new HV)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,i,n,a,o,s,l){var u=this;e.prototype.renderInner.call(this,r,i,n,a,o,s,l);var h=this._controllerGroup,c=i.get("pageIconSize",!0),d=ue(c)?c:[c,c];p("pagePrev",0);var f=i.getModel("pageTextStyle");h.add(new ot({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,g){var m=v+"DataIndex",y=Gg(i.get("pageIcons",!0)[i.getOrient().name][g],{onclick:me(u._pageGo,u,m,i,a)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});y.name=v,h.add(y)}},t.prototype.layoutInner=function(r,i,n,a,o,s){var l=this.getSelectorGroup(),u=r.getOrient().index,h=vM[u],c=gM[u],d=vM[1-u],f=gM[1-u];o&&xh("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],m=Ee(n);o&&(m[h]=n[h]-v[h]-p);var y=this._layoutContentAndController(r,a,m,u,h,d,f,c);if(o){if(s==="end")g[u]+=y[h]+p;else{var _=v[h]+p;g[u]-=_,y[c]-=_}y[h]+=v[h]+p,g[1-u]+=y[f]+y[d]/2-v[d]/2,y[d]=Math.max(y[d],v[d]),y[f]=Math.min(y[f],v[f]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,i,n,a,o,s,l,u){var h=this.getContentGroup(),c=this._containerGroup,d=this._controllerGroup;xh(r.get("orient"),h,r.get("itemGap"),a?n.width:null,a?null:n.height),xh("horizontal",d,r.get("pageButtonItemGap",!0));var f=h.getBoundingRect(),p=d.getBoundingRect(),v=this._showController=f[o]>n[o],g=[-f.x,-f.y];i||(g[a]=h[u]);var m=[0,0],y=[-p.x,-p.y],_=Ve(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var x=r.get("pageButtonPosition",!0);x==="end"?y[a]+=n[o]-p[o]:m[a]+=p[o]+_}y[1-a]+=f[s]/2-p[s]/2,h.setPosition(g),c.setPosition(m),d.setPosition(y);var w={x:0,y:0};if(w[o]=v?n[o]:f[o],w[s]=Math.max(f[s],p[s]),w[l]=Math.min(0,p[l]+y[1-a]),c.__rectSize=n[o],v){var b={x:0,y:0};b[o]=Math.max(n[o]-p[o]-_,0),b[s]=w[s],c.setClipPath(new rt({shape:b})),c.__rectSize=b[o]}else d.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var S=this._getPageInfo(r);return S.pageIndex!=null&&ut(h,{x:S.contentPosition[0],y:S.contentPosition[1]},v?r:null),this._updatePageInfoView(r,S),w},t.prototype._pageGo=function(r,i,n){var a=this._getPageInfo(i)[r];a!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:i.id})},t.prototype._updatePageInfoView=function(r,i){var n=this._controllerGroup;I(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",d=i[c]!=null,f=n.childOfName(h);f&&(f.setStyle("fill",d?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),f.cursor=d?"pointer":"default")});var a=n.childOfName("pageText"),o=r.get("pageFormatter"),s=i.pageIndex,l=s!=null?s+1:0,u=i.pageCount;a&&o&&a.setStyle("text",ge(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},t.prototype._getPageInfo=function(r){var i=r.get("scrollDataIndex",!0),n=this.getContentGroup(),a=this._containerGroup.__rectSize,o=r.getOrient().index,s=vM[o],l=gM[o],u=this._findTargetItemIndex(i),h=n.children(),c=h[u],d=h.length,f=d?1:0,p={contentPosition:[n.x,n.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return p;var v=x(c);p.contentPosition[o]=-v.s;for(var g=u+1,m=v,y=v,_=null;g<=d;++g)_=x(h[g]),(!_&&y.e>m.s+a||_&&!w(_,m.s))&&(y.i>m.i?m=y:m=_,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),y=_;for(var g=u-1,m=v,y=v,_=null;g>=-1;--g)_=x(h[g]),(!_||!w(y,_.s))&&m.i<y.i&&(y=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=_;return p;function x(b){if(b){var S=b.getBoundingRect(),M=S[l]+b[l];return{s:M,e:M+S[s],i:b.__legendDataIndex}}}function w(b,S){return b.e>=S&&b.s<=S+a}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var i,n=this.getContentGroup(),a;return n.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===r&&(i=s)}),i??a},t.type="legend.scroll",t}(vX);const SBe=wBe;function MBe(e){e.registerAction("legendScroll","legendscroll",function(t,r){var i=t.scrollDataIndex;i!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(n){n.setScrollDataIndex(i)})})}function TBe(e){$e(gX),e.registerComponentModel(bBe),e.registerComponentView(SBe),MBe(e)}function ABe(e){$e(gX),$e(TBe)}var CBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.inside",t.defaultOption=Yl(xg.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(xg);const DBe=CBe;var FE=it();function PBe(e,t,r){FE(e).coordSysRecordMap.each(function(i){var n=i.dataZoomInfoMap.get(t.uid);n&&(n.getRange=r)})}function LBe(e,t){for(var r=FE(e).coordSysRecordMap,i=r.keys(),n=0;n<i.length;n++){var a=i[n],o=r.get(a),s=o.dataZoomInfoMap;if(s){var l=t.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||mX(r,o))}}}function mX(e,t){if(t){e.removeKey(t.model.uid);var r=t.controller;r&&r.dispose()}}function EBe(e,t){var r={model:t,containsPoint:Ne(OBe,t),dispatchAction:Ne(IBe,e),dataZoomInfoMap:null,controller:null},i=r.controller=new tm(e.getZr());return I(["pan","zoom","scrollMove"],function(n){i.on(n,function(a){var o=[];r.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[n],u=l&&l(s.dzReferCoordSysInfo,r.model.mainType,r.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&r.dispatchAction(o)})}),r}function IBe(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function OBe(e,t,r,i){return e.coordinateSystem.containPoint([r,i])}function RBe(e){var t,r="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return e.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;i[r+s]>i[r+t]&&(t=s),n=n&&o.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function zBe(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,r){var i=FE(r),n=i.coordSysRecordMap||(i.coordSysRecordMap=Me());n.each(function(a){a.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=Jq(a);I(o.infoList,function(s){var l=s.model.uid,u=n.get(l)||n.set(l,EBe(r,s.model)),h=u.dataZoomInfoMap||(u.dataZoomInfoMap=Me());h.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),n.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){mX(n,a);return}var h=RBe(l);o.enable(h.controlType,h.opt),o.setPointerChecker(a.containsPoint),xf(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var NBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return t.prototype.render=function(r,i,n){if(e.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),PBe(n,r,{pan:me(mM.pan,this),zoom:me(mM.zoom,this),scrollMove:me(mM.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){LBe(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(LE),mM={zoom:function(e,t,r,i){var n=this.range,a=n.slice(),o=e.axisModels[0];if(o){var s=yM[t](null,[i.originX,i.originY],o,r,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/i.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Zh(0,a,[0,100],0,h.minSpan,h.maxSpan),this.range=a,n[0]!==a[0]||n[1]!==a[1])return a}},pan:jV(function(e,t,r,i,n,a){var o=yM[i]([a.oldX,a.oldY],[a.newX,a.newY],t,n,r);return o.signal*(e[1]-e[0])*o.pixel/o.pixelLength}),scrollMove:jV(function(e,t,r,i,n,a){var o=yM[i]([0,0],[a.scrollDelta,a.scrollDelta],t,n,r);return o.signal*(e[1]-e[0])*a.scrollDelta})};function jV(e){return function(t,r,i,n){var a=this.range,o=a.slice(),s=t.axisModels[0];if(s){var l=e(o,s,t,r,i,n);if(Zh(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var yM={grid:function(e,t,r,i,n){var a=r.axis,o={},s=n.model.coordinateSystem.getRect();return e=e||[0,0],a.dim==="x"?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(e,t,r,i,n){var a=r.axis,o={},s=n.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),r.mainType==="radiusAxis"?(o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(e,t,r,i,n){var a=r.axis,o=n.model.coordinateSystem.getRect(),s={};return e=e||[0,0],a.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};const kBe=NBe;function yX(e){EE(e),e.registerComponentModel(DBe),e.registerComponentView(kBe),zBe(e)}var BBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Yl(xg.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(xg);const FBe=BBe;var Sp=rt,WV=7,VBe=1,_M=30,UBe=7,Mp="horizontal",$V="vertical",GBe=5,HBe=["line","bar","candlestick","scatter"],jBe={easing:"cubicOut",duration:100,delay:0},WBe=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._displayables={},r}return t.prototype.init=function(r,i){this.api=i,this._onBrush=me(this._onBrush,this),this._onBrushEnd=me(this._onBrushEnd,this)},t.prototype.render=function(r,i,n,a){if(e.prototype.render.apply(this,arguments),xf(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){lg(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var i=this._displayables.sliderGroup=new Ie;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(i),this._positionGroup()},t.prototype._resetLocation=function(){var r=this.dataZoomModel,i=this.api,n=r.get("brushSelect"),a=n?UBe:0,o=this._findCoordRect(),s={width:i.getWidth(),height:i.getHeight()},l=this._orient===Mp?{right:s.width-o.x-o.width,top:s.height-_M-WV-a,width:o.width,height:_M}:{right:WV,top:o.y,width:_M,height:o.height},u=gf(r.option);I(["right","top","width","height"],function(c){u[c]==="ph"&&(u[c]=l[c])});var h=br(u,s);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===$V&&this._size.reverse()},t.prototype._positionGroup=function(){var r=this.group,i=this._location,n=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(n===Mp&&!o?{scaleY:l?1:-1,scaleX:1}:n===Mp&&o?{scaleY:l?1:-1,scaleX:-1}:n===$V&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=r.getBoundingRect([s]);r.x=i.x-u.x,r.y=i.y-u.y,r.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var r=this.dataZoomModel,i=this._size,n=this._displayables.sliderGroup,a=r.get("brushSelect");n.add(new Sp({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var o=new Sp({shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:"transparent"},z2:0,onclick:me(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),n.add(o)},t.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var i=this._size,n=this._shadowSize||[],a=r.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():r.otherDim;if(l==null)return;var u=this._shadowPolygonPts,h=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||i[0]!==n[0]||i[1]!==n[1]){var c=o.getDataExtent(l),d=(c[1]-c[0])*.3;c=[c[0]-d,c[1]+d];var f=[0,i[1]],p=[0,i[0]],v=[[i[0],0],[0,0]],g=[],m=p[1]/(o.count()-1),y=0,_=Math.round(o.count()/i[0]),x;o.each([l],function(A,T){if(_>0&&T%_){y+=m;return}var C=A==null||isNaN(A)||A==="",D=C?0:mt(A,c,f,!0);C&&!x&&T?(v.push([v[v.length-1][0],0]),g.push([g[g.length-1][0],0])):!C&&x&&(v.push([y,0]),g.push([y,0])),v.push([y,D]),g.push([y,D]),y+=m,x=C}),u=this._shadowPolygonPts=v,h=this._shadowPolylinePts=g}this._shadowData=o,this._shadowDim=l,this._shadowSize=[i[0],i[1]];var w=this.dataZoomModel;function b(A){var T=w.getModel(A?"selectedDataBackground":"dataBackground"),C=new Ie,D=new qi({shape:{points:u},segmentIgnoreThreshold:1,style:T.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),P=new Yi({shape:{points:h},segmentIgnoreThreshold:1,style:T.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return C.add(D),C.add(P),C}for(var S=0;S<3;S++){var M=b(S===1);this._displayables.sliderGroup.add(M),this._displayables.dataShadowSegs.push(M)}},t.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,i=r.get("showDataShadow");if(i!==!1){var n,a=this.ecModel;return r.eachTargetAxis(function(o,s){var l=r.getAxisProxy(o,s).getTargetSeriesModels();I(l,function(u){if(!n&&!(i!==!0&&We(HBe,u.get("type"))<0)){var h=a.getComponent(wl(o),s).axis,c=$Be(o),d,f=u.coordinateSystem;c!=null&&f.getOtherAxis&&(d=f.getOtherAxis(h).inverse),c=u.getData().mapDimension(c),n={thisAxis:h,series:u,thisDim:o,otherDim:c,otherAxisInverse:d}}},this)},this),n}},t.prototype._renderHandle=function(){var r=this.group,i=this._displayables,n=i.handles=[null,null],a=i.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,h=l.get("borderRadius")||0,c=l.get("brushSelect"),d=i.filler=new Sp({silent:c,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new Sp({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:h},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:VBe,fill:"rgba(0,0,0,0)"}})),I([0,1],function(_){var x=l.get("handleIcon");!w_[x]&&x.indexOf("path://")<0&&x.indexOf("image://")<0&&(x="path://"+x);var w=vr(x,-1,0,2,2,null,!0);w.attr({cursor:qV(this._orient),draggable:!0,drift:me(this._onDragMove,this,_),ondragend:me(this._onDragEnd,this),onmouseover:me(this._showDataInfo,this,!0),onmouseout:me(this._showDataInfo,this,!1),z2:5});var b=w.getBoundingRect(),S=l.get("handleSize");this._handleHeight=ve(S,this._size[1]),this._handleWidth=b.width/b.height*this._handleHeight,w.setStyle(l.getModel("handleStyle").getItemStyle()),w.style.strokeNoScale=!0,w.rectHover=!0,w.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),yh(w);var M=l.get("handleColor");M!=null&&(w.style.fill=M),o.add(n[_]=w);var A=l.getModel("textStyle");r.add(a[_]=new ot({silent:!0,invisible:!0,style:zt(A,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:A.getTextColor(),font:A.getFont()}),z2:10}))},this);var f=d;if(c){var p=ve(l.get("moveHandleSize"),s[1]),v=i.moveHandle=new rt({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),g=p*.8,m=i.moveHandleIcon=vr(l.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);m.silent=!0,m.y=s[1]+p/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(s[1]/2,Math.max(p,10));f=i.moveZone=new rt({invisible:!0,shape:{y:s[1]-y,height:p+y}}),f.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),o.add(v),o.add(m),o.add(f)}f.attr({draggable:!0,cursor:qV(this._orient),drift:me(this._onDragMove,this,"all"),ondragstart:me(this._showDataInfo,this,!0),ondragend:me(this._onDragEnd,this),onmouseover:me(this._showDataInfo,this,!0),onmouseout:me(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),i=this._getViewExtent();this._handleEnds=[mt(r[0],[0,100],i,!0),mt(r[1],[0,100],i,!0)]},t.prototype._updateInterval=function(r,i){var n=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=n.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Zh(i,a,o,n.get("zoomLock")?"all":r,s.minSpan!=null?mt(s.minSpan,l,o,!0):null,s.maxSpan!=null?mt(s.maxSpan,l,o,!0):null);var u=this._range,h=this._range=zn([mt(a[0],o,l,!0),mt(a[1],o,l,!0)]);return!u||u[0]!==h[0]||u[1]!==h[1]},t.prototype._updateView=function(r){var i=this._displayables,n=this._handleEnds,a=zn(n.slice()),o=this._size;I([0,1],function(f){var p=i.handles[f],v=this._handleHeight;p.attr({scaleX:v/2,scaleY:v/2,x:n[f]+(f?-1:1),y:o[1]/2-v/2})},this),i.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};i.moveHandle&&(i.moveHandle.setShape(s),i.moveZone.setShape(s),i.moveZone.getBoundingRect(),i.moveHandleIcon&&i.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=i.dataShadowSegs,u=[0,a[0],a[1],o[0]],h=0;h<l.length;h++){var c=l[h],d=c.getClipPath();d||(d=new rt,c.setClipPath(d)),d.setShape({x:u[h],y:0,width:u[h+1]-u[h],height:o[1]})}this._updateDataInfo(r)},t.prototype._updateDataInfo=function(r){var i=this.dataZoomModel,n=this._displayables,a=n.handleLabels,o=this._orient,s=["",""];if(i.get("showDetail")){var l=i.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,h=this._range,c=r?l.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(c[0],u),this._formatLabel(c[1],u)]}}var d=zn(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(p){var v=_h(n.handles[p].parent,this.group),g=Kx(p===0?"right":"left",v),m=this._handleWidth/2+GBe,y=Sa([d[p]+(p===0?-m:m),this._size[1]/2],v);a[p].setStyle({x:y[0],y:y[1],verticalAlign:o===Mp?"middle":g,align:o===Mp?g:"center",text:s[p]})}},t.prototype._formatLabel=function(r,i){var n=this.dataZoomModel,a=n.get("labelFormatter"),o=n.get("labelPrecision");(o==null||o==="auto")&&(o=i.getPixelPrecision());var s=r==null||isNaN(r)?"":i.type==="category"||i.type==="time"?i.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(o,20));return Ae(a)?a(r,s):ge(a)?a.replace("{value}",s):s},t.prototype._showDataInfo=function(r){r=this._dragging||r;var i=this._displayables,n=i.handleLabels;n[0].attr("invisible",!r),n[1].attr("invisible",!r),i.moveHandle&&this.api[r?"enterEmphasis":"leaveEmphasis"](i.moveHandle,1)},t.prototype._onDragMove=function(r,i,n,a){this._dragging=!0,ys(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Sa([i,n],o,!0),l=this._updateInterval(r,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(r){var i=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(n[0]<0||n[0]>i[0]||n[1]<0||n[1]>i[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",n[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(r){var i=r.offsetX,n=r.offsetY;this._brushStart=new Fe(i,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(r){if(this._brushing){var i=this._displayables.brushRect;if(this._brushing=!1,!!i){i.attr("ignore",!0);var n=i.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=zn([mt(n.x,o,s,!0),mt(n.x+n.width,o,s,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(r){this._brushing&&(ys(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},t.prototype._updateBrushRect=function(r,i){var n=this._displayables,a=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new Sp({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(r,i),h=l.transformCoordToLocal(s.x,s.y),c=this._size;u[0]=Math.max(Math.min(c[0],u[0]),0),o.setShape({x:h[0],y:0,width:u[0]-h[0],height:c[1]})},t.prototype._dispatchZoomAction=function(r){var i=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?jBe:null,start:i[0],end:i[1]})},t.prototype._findCoordRect=function(){var r,i=Jq(this.dataZoomModel).infoList;if(!r&&i.length){var n=i[0].model.coordinateSystem;r=n.getRect&&n.getRect()}if(!r){var a=this.api.getWidth(),o=this.api.getHeight();r={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return r},t.type="dataZoom.slider",t}(LE);function $Be(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function qV(e){return e==="vertical"?"ns-resize":"ew-resize"}const qBe=WBe;function _X(e){e.registerComponentModel(FBe),e.registerComponentView(qBe),EE(e)}function XBe(e){$e(yX),$e(_X)}var YBe={get:function(e,t,r){var i=Ee((ZBe[e]||{})[t]);return r&&ue(i)?i[i.length-1]:i}},ZBe={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const xX=YBe;var XV=Hr.mapVisual,KBe=Hr.eachVisual,JBe=ue,YV=I,QBe=zn,e5e=mt,t5e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n)},t.prototype.optionUpdated=function(r,i){var n=this.option;!i&&lX(n,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var i=this.stateList;r=me(r,this),this.controllerVisuals=PC(this.option.controller,i,r),this.targetVisuals=PC(this.option.target,i,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,i=[];return r==null||r==="all"?this.ecModel.eachSeries(function(n,a){i.push(a)}):i=Mt(r),i},t.prototype.eachTargetSeries=function(r,i){I(this.getTargetSeriesIndices(),function(n){var a=this.ecModel.getSeriesByIndex(n);a&&r.call(i,a)},this)},t.prototype.isTargetSeries=function(r){var i=!1;return this.eachTargetSeries(function(n){n===r&&(i=!0)}),i},t.prototype.formatValueText=function(r,i,n){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;n=n||["<",">"],ue(r)&&(r=r.slice(),u=!0);var h=i?r:u?[c(r[0]),c(r[1])]:c(r);if(ge(l))return l.replace("{value}",u?h[0]:h).replace("{value2}",u?h[1]:h);if(Ae(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?n[0]+" "+h[1]:r[1]===s[1]?n[1]+" "+h[0]:h[0]+" - "+h[1];return h;function c(d){return d===s[0]?"min":d===s[1]?"max":(+d).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var r=this.option,i=QBe([r.min,r.max]);this._dataExtent=i},t.prototype.getDataDimensionIndex=function(r){var i=this.option.dimension;if(i!=null)return r.getDimensionIndex(i);for(var n=r.dimensions,a=n.length-1;a>=0;a--){var o=n[a],s=r.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,i=this.option,n={inRange:i.inRange,outOfRange:i.outOfRange},a=i.target||(i.target={}),o=i.controller||(i.controller={});Ue(a,n),Ue(o,n);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),h.call(this,o);function l(c){JBe(i.color)&&!c.inRange&&(c.inRange={color:i.color.slice().reverse()}),c.inRange=c.inRange||{color:r.get("gradientColor")}}function u(c,d,f){var p=c[d],v=c[f];p&&!v&&(v=c[f]={},YV(p,function(g,m){if(Hr.isValidType(m)){var y=xX.get(m,"inactive",s);y!=null&&(v[m]=y,m==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function h(c){var d=(c.inRange||{}).symbol||(c.outOfRange||{}).symbol,f=(c.inRange||{}).symbolSize||(c.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";YV(this.stateList,function(m){var y=this.itemSize,_=c[m];_||(_=c[m]={color:s?p:[p]}),_.symbol==null&&(_.symbol=d&&Ee(d)||(s?g:[g])),_.symbolSize==null&&(_.symbolSize=f&&Ee(f)||(s?y[0]:[y[0],y[0]])),_.symbol=XV(_.symbol,function(b){return b==="none"?g:b});var x=_.symbolSize;if(x!=null){var w=-1/0;KBe(x,function(b){b>w&&(w=b)}),_.symbolSize=XV(x,function(b){return e5e(b,[0,w],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(nt);const q_=t5e;var ZV=[20,140],r5e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=ZV[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=ZV[1])},t.prototype._resetRange=function(){var r=this.getExtent(),i=this.option.range;!i||i.auto?(r.auto=1,this.option.range=r):ue(i)&&(i[0]>i[1]&&i.reverse(),i[0]=Math.max(i[0],r[0]),i[1]=Math.min(i[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),I(this.stateList,function(r){var i=this.option.controller[r].symbolSize;i&&i[0]!==i[1]&&(i[0]=i[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),i=zn((this.get("range")||[]).slice());return i[0]>r[1]&&(i[0]=r[1]),i[1]>r[1]&&(i[1]=r[1]),i[0]<r[0]&&(i[0]=r[0]),i[1]<r[0]&&(i[1]=r[0]),i},t.prototype.getValueState=function(r){var i=this.option.range,n=this.getExtent();return(i[0]<=n[0]||i[0]<=r)&&(i[1]>=n[1]||r<=i[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var i=[];return this.eachTargetSeries(function(n){var a=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(s,l){r[0]<=s&&s<=r[1]&&a.push(l)},this),i.push({seriesId:n.id,dataIndex:a})},this),i},t.prototype.getVisualMeta=function(r){var i=KV(this,"outOfRange",this.getExtent()),n=KV(this,"inRange",this.option.range.slice()),a=[];function o(f,p){a.push({value:f,color:r(f,p)})}for(var s=0,l=0,u=n.length,h=i.length;l<h&&(!n.length||i[l]<=n[0]);l++)i[l]<n[s]&&o(i[l],"outOfRange");for(var c=1;s<u;s++,c=0)c&&a.length&&o(n[s],"outOfRange"),o(n[s],"inRange");for(var c=1;l<h;l++)(!n.length||n[n.length-1]<i[l])&&(c&&(a.length&&o(a[a.length-1].value,"outOfRange"),c=0),o(i[l],"outOfRange"));var d=a.length;return{stops:a,outerColors:[d?a[0].color:"transparent",d?a[d-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Yl(q_.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(q_);function KV(e,t,r){if(r[0]===r[1])return r.slice();for(var i=200,n=(r[1]-r[0])/i,a=r[0],o=[],s=0;s<=i&&a<r[1];s++)o.push(a),a+=n;return o.push(r[1]),o}const i5e=r5e;var n5e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,i){this.ecModel=r,this.api=i},t.prototype.render=function(r,i,n,a){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,i,n,a)},t.prototype.renderBackground=function(r){var i=this.visualMapModel,n=vf(i.get("padding")||0),a=r.getBoundingRect();r.add(new rt({z2:-1,silent:!0,shape:{x:a.x-n[3],y:a.y-n[0],width:a.width+n[3]+n[1],height:a.height+n[0]+n[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,i,n){n=n||{};var a=n.forceState,o=this.visualMapModel,s={};if(i==="color"){var l=o.get("contentColor");s.color=l}function u(f){return s[f]}function h(f,p){s[f]=p}var c=o.controllerVisuals[a||o.getValueState(r)],d=Hr.prepareVisualTypes(c);return I(d,function(f){var p=c[f];n.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",p=c.__alphaForOpacity),Hr.dependsOn(f,i)&&p&&p.applyVisual(r,u,h)}),s[i]},t.prototype.positionGroup=function(r){var i=this.visualMapModel,n=this.api;nb(r,i.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(r,i,n,a){},t.type="visualMap",t}(Kt);const bX=n5e;var JV=[["left","right","width"],["top","bottom","height"]];function wX(e,t,r){var i=e.option,n=i.align;if(n!=null&&n!=="auto")return n;for(var a={width:t.getWidth(),height:t.getHeight()},o=i.orient==="horizontal"?1:0,s=JV[o],l=[0,null,10],u={},h=0;h<3;h++)u[JV[1-o][h]]=l[h],u[s[h]]=h===2?r[0]:i[s[h]];var c=[["x","width",3],["y","height",0]][o],d=br(u,a,i.padding);return s[(d.margin[c[2]]||0)+d[c[0]]+d[c[1]]*.5<a[c[1]]*.5?0:1]}function n1(e,t){return I(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var Ya=mt,a5e=I,QV=Math.min,xM=Math.max,o5e=12,s5e=6,l5e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,i,n,a){this._api=n,(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,i=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(i);var n=r.get("text");this._renderEndsText(i,n,0),this._renderEndsText(i,n,1),this._updateView(!0),this.renderBackground(i),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(i)},t.prototype._renderEndsText=function(r,i,n){if(i){var a=i[1-n];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,h=this._applyTransform([l[0]/2,n===0?-s:l[1]+s],u),c=this._applyTransform(n===0?"bottom":"top",u),d=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new ot({style:zt(f,{x:h[0],y:h[1],verticalAlign:d==="horizontal"?"middle":c,align:d==="horizontal"?c:"center",text:a})}))}},t.prototype._renderBar=function(r){var i=this.visualMapModel,n=this._shapes,a=i.itemSize,o=this._orient,s=this._useHandle,l=wX(i,this.api,a),u=n.mainGroup=this._createBarGroup(l),h=new Ie;u.add(h),h.add(n.outOfRange=e4()),h.add(n.inRange=e4(null,s?r4(this._orient):null,me(this._dragHandle,this,"all",!1),me(this._dragHandle,this,"all",!0))),h.setClipPath(new rt({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var c=i.textStyleModel.getTextRect("国"),d=xM(c.width,c.height);s&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(i,u,0,a,d,o),this._createHandle(i,u,1,a,d,o)),this._createIndicator(i,u,a,d,o),r.add(u)},t.prototype._createHandle=function(r,i,n,a,o,s){var l=me(this._dragHandle,this,n,!1),u=me(this._dragHandle,this,n,!0),h=Aa(r.get("handleSize"),a[0]),c=vr(r.get("handleIcon"),-h/2,-h/2,h,h,null,!0),d=r4(this._orient);c.attr({cursor:d,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){ys(m.event)}}),c.x=a[0]/2,c.useStyle(r.getModel("handleStyle").getItemStyle()),c.setStyle({strokeNoScale:!0,strokeFirst:!0}),c.style.lineWidth*=2,c.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),eh(c,!0),i.add(c);var f=this.visualMapModel.textStyleModel,p=new ot({cursor:d,draggable:!0,drift:l,onmousemove:function(m){ys(m.event)},ondragend:u,style:zt(f,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[h,0],g=this._shapes;g.handleThumbs[n]=c,g.handleLabelPoints[n]=v,g.handleLabels[n]=p},t.prototype._createIndicator=function(r,i,n,a,o){var s=Aa(r.get("indicatorSize"),n[0]),l=vr(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof $r){var h=l.style;l.useStyle(ae({image:h.image,x:h.x,y:h.y,width:h.width,height:h.height},u))}else l.useStyle(u);i.add(l);var c=this.visualMapModel.textStyleModel,d=new ot({silent:!0,invisible:!0,style:zt(c,{x:0,y:0,text:""})});this.group.add(d);var f=[(o==="horizontal"?a/2:s5e)+n[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=d,p.indicatorLabelPoint=f,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,i,n,a){if(this._useHandle){if(this._dragging=!i,!i){var o=this._applyTransform([n,a],this._shapes.mainGroup,!0);this._updateInterval(r,o[1]),this._hideIndicator(),this._updateView()}i===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),i?!this._hovering&&this._clearHoverLinkToSeries():t4(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,i=this._dataInterval=r.getSelected(),n=r.getExtent(),a=[0,r.itemSize[1]];this._handleEnds=[Ya(i[0],n,a,!0),Ya(i[1],n,a,!0)]},t.prototype._updateInterval=function(r,i){i=i||0;var n=this.visualMapModel,a=this._handleEnds,o=[0,n.itemSize[1]];Zh(i,a,o,r,0);var s=n.getExtent();this._dataInterval=[Ya(a[0],o,s,!0),Ya(a[1],o,s,!0)]},t.prototype._updateView=function(r){var i=this.visualMapModel,n=i.getExtent(),a=this._shapes,o=[0,i.itemSize[1]],s=r?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,n,s,"inRange"),u=this._createBarVisual(n,n,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,i,n,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,o),l=[this.getControllerVisual(r[0],"symbolSize",o),this.getControllerVisual(r[1],"symbolSize",o)],u=this._createBarPoints(n,l);return{barColor:new Rh(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,i){var n=100,a=[],o=(r[1]-r[0])/n;a.push({color:this.getControllerVisual(r[0],"color",i),offset:0});for(var s=1;s<n;s++){var l=r[0]+o*s;if(l>r[1])break;a.push({color:this.getControllerVisual(l,"color",i),offset:s/n})}return a.push({color:this.getControllerVisual(r[1],"color",i),offset:1}),a},t.prototype._createBarPoints=function(r,i){var n=this.visualMapModel.itemSize;return[[n[0]-i[0],r[0]],[n[0],r[0]],[n[0],r[1]],[n[0]-i[1],r[1]]]},t.prototype._createBarGroup=function(r){var i=this._orient,n=this.visualMapModel.get("inverse");return new Ie(i==="horizontal"&&!n?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:i==="horizontal"&&n?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:i==="vertical"&&!n?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,i){if(this._useHandle){var n=this._shapes,a=this.visualMapModel,o=n.handleThumbs,s=n.handleLabels,l=a.itemSize,u=a.getExtent();a5e([0,1],function(h){var c=o[h];c.setStyle("fill",i.handlesColor[h]),c.y=r[h];var d=Ya(r[h],[0,l[1]],u,!0),f=this.getControllerVisual(d,"symbolSize");c.scaleX=c.scaleY=f/l[0],c.x=l[0]-f/2;var p=Sa(n.handleLabelPoints[h],_h(c,this.group));s[h].setStyle({x:p[0],y:p[1],text:a.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,i,n,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],h=this._shapes,c=h.indicator;if(c){c.attr("invisible",!1);var d={convertOpacityToAlpha:!0},f=this.getControllerVisual(r,"color",d),p=this.getControllerVisual(r,"symbolSize"),v=Ya(r,s,u,!0),g=l[0]-p/2,m={x:c.x,y:c.y};c.y=v,c.x=g;var y=Sa(h.indicatorLabelPoint,_h(c,this.group)),_=h.indicatorLabel;_.attr("invisible",!1);var x=this._applyTransform("left",h.mainGroup),w=this._orient,b=w==="horizontal";_.setStyle({text:(n||"")+o.formatValueText(i),verticalAlign:b?x:"middle",align:b?"center":x});var S={x:g,y:v,style:{fill:f}},M={style:{x:y[0],y:y[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};c.x=m.x,c.y=m.y,c.animateTo(S,A),_.animateTo(M,A)}else c.attr(S),_.attr(M);this._firstShowIndicator=!1;var T=this._shapes.handleLabels;if(T)for(var C=0;C<T.length;C++)this._api.enterBlur(T[C])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(i){if(r._hovering=!0,!r._dragging){var n=r.visualMapModel.itemSize,a=r._applyTransform([i.offsetX,i.offsetY],r._shapes.mainGroup,!0,!0);a[1]=QV(xM(0,a[1]),n[1]),r._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=n[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,i){var n=this.visualMapModel,a=n.itemSize;if(n.option.hoverLink){var o=[0,a[1]],s=n.getExtent();r=QV(xM(o[0],r),o[1]);var l=u5e(n,s,o),u=[r-l,r+l],h=Ya(r,o,s,!0),c=[Ya(u[0],o,s,!0),Ya(u[1],o,s,!0)];u[0]<o[0]&&(c[0]=-1/0),u[1]>o[1]&&(c[1]=1/0),i&&(c[0]===-1/0?this._showIndicator(h,c[1],"< ",l):c[1]===1/0?this._showIndicator(h,c[0],"> ",l):this._showIndicator(h,h,"≈ ",l));var d=this._hoverLinkDataIndices,f=[];(i||t4(n))&&(f=this._hoverLinkDataIndices=n.findTargetDataIndices(c));var p=e_e(d,f);this._dispatchHighDown("downplay",n1(p[0],n)),this._dispatchHighDown("highlight",n1(p[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var i;if(rh(r.target,function(l){var u=Re(l);if(u.dataIndex!=null)return i=u,!0},!0),!!i){var n=this.ecModel.getSeriesByIndex(i.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(n)){var o=n.getData(i.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),i.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var i=this._shapes.handleLabels;if(i)for(var n=0;n<i.length;n++)this._api.leaveBlur(i[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",n1(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,i,n,a){var o=_h(i,a?null:this.group);return ue(r)?Sa(r,o,n):Kx(r,o,n)},t.prototype._dispatchHighDown=function(r,i){i&&i.length&&this.api.dispatchAction({type:r,batch:i})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(bX);function e4(e,t,r,i){return new qi({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(n){ys(n.event)},ondragend:i})}function u5e(e,t,r){var i=o5e/2,n=e.get("hoverLinkDataSize");return n&&(i=Ya(n,t,r,!0)/2),i}function t4(e){var t=e.get("hoverLinkOnHandle");return!!(t??e.get("realtime"))}function r4(e){return e==="vertical"?"ns-resize":"ew-resize"}const h5e=l5e;var c5e={type:"selectDataRange",event:"dataRangeSelected",update:"update"},d5e=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},f5e=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(i){var n=e.pipelineContext;!i.isTargetSeries(e)||n&&n.large||r.push(ske(i.stateList,i.targetVisuals,me(i.getValueState,i),i.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),i=[];t.eachComponent("visualMap",function(n){if(n.isTargetSeries(e)){var a=n.getVisualMeta(me(p5e,null,e,n))||{stops:[],outerColors:[]},o=n.getDataDimensionIndex(r);o>=0&&(a.dimension=o,i.push(a))}}),e.getData().setVisual("visualMeta",i)}}];function p5e(e,t,r,i){for(var n=t.targetVisuals[i],a=Hr.prepareVisualTypes(n),o={color:Wg(e.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],h=n[u==="opacity"?"__alphaForOpacity":u];h&&h.applyVisual(r,c,d)}return o.color;function c(f){return o[f]}function d(f,p){o[f]=p}}var i4=I;function v5e(e){var t=e&&e.visualMap;ue(t)||(t=t?[t]:[]),i4(t,function(r){if(r){zc(r,"splitList")&&!zc(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var i=r.pieces;i&&ue(i)&&i4(i,function(n){Pe(n)&&(zc(n,"start")&&!zc(n,"min")&&(n.min=n.start),zc(n,"end")&&!zc(n,"max")&&(n.max=n.end))})}})}function zc(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var n4=!1;function SX(e){n4||(n4=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(c5e,d5e),I(f5e,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(v5e))}function MX(e){e.registerComponentModel(i5e),e.registerComponentView(h5e),SX(e)}var g5e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],m5e[this._mode].call(this,this._pieceList),this._resetSelected(r,i);var a=this.option.categories;this.resetVisual(function(o,s){n==="categories"?(o.mappingMethod="category",o.categories=Ee(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=ce(this._pieceList,function(l){return l=Ee(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,i={},n=Hr.listVisualTypes(),a=this.isCategory();I(r.pieces,function(s){I(n,function(l){s.hasOwnProperty(l)&&(i[l]=1)})}),I(i,function(s,l){var u=!1;I(this.stateList,function(h){u=u||o(r,h,l)||o(r.target,h,l)},this),!u&&I(this.stateList,function(h){(r[h]||(r[h]={}))[l]=xX.get(l,h==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,i){var n=this.option,a=this._pieceList,o=(i?n:r).selected||{};if(n.selected=o,I(a,function(l,u){var h=this.getSelectedMapKey(l);o.hasOwnProperty(h)||(o[h]=!0)},this),n.selectedMode==="single"){var s=!1;I(a,function(l,u){var h=this.getSelectedMapKey(l);o[h]&&(s?o[h]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=Ee(r)},t.prototype.getValueState=function(r){var i=Hr.findPieceIndex(r,this._pieceList);return i!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[i])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var i=[],n=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var h=Hr.findPieceIndex(l,n);h===r&&o.push(u)},this),i.push({seriesId:a.id,dataIndex:o})},this),i},t.prototype.getRepresentValue=function(r){var i;if(this.isCategory())i=r.value;else if(r.value!=null)i=r.value;else{var n=r.interval||[];i=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return i},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var i=[],n=["",""],a=this;function o(h,c){var d=a.getRepresentValue({interval:h});c||(c=a.getValueState(d));var f=r(d,c);h[0]===-1/0?n[0]=f:h[1]===1/0?n[1]=f:i.push({value:h[0],color:f},{value:h[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return I(s,function(h){var c=h.interval;c&&(c[0]>u&&o([u,c[0]],"outOfRange"),o(c.slice()),u=c[1])},this),{stops:i,outerColors:n}},t.type="visualMap.piecewise",t.defaultOption=Yl(q_.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(q_),m5e={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),i=this.getExtent(),n=t.splitNumber;n=Math.max(parseInt(n,10),1),t.splitNumber=n;for(var a=(i[1]-i[0])/n;+a.toFixed(r)!==a&&r<5;)r++;t.precision=r,a=+a.toFixed(r),t.minOpen&&e.push({interval:[-1/0,i[0]],close:[0,0]});for(var o=0,s=i[0];o<n;s+=a,o++){var l=o===n-1?i[1]:s+a;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[i[1],1/0],close:[0,0]}),Jz(e),I(e,function(u,h){u.index=h,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;I(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),a4(t,e)},pieces:function(e){var t=this.option;I(t.pieces,function(r,i){Pe(r)||(r={value:r});var n={text:"",index:i};if(r.label!=null&&(n.text=r.label),r.hasOwnProperty("value")){var a=n.value=r.value;n.interval=[a,a],n.close=[1,1]}else{for(var o=n.interval=[],s=n.close=[0,0],l=[1,0,1],u=[-1/0,1/0],h=[],c=0;c<2;c++){for(var d=[["gte","gt","min"],["lte","lt","max"]][c],f=0;f<3&&o[c]==null;f++)o[c]=r[d[f]],s[c]=l[f],h[c]=f===2;o[c]==null&&(o[c]=u[c])}h[0]&&o[1]===1/0&&(s[0]=0),h[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(n.value=o[0])}n.visual=Hr.retrieveVisuals(r),e.push(n)},this),a4(t,e),Jz(e),I(e,function(r){var i=r.close,n=[["<","≤"][i[1]],[">","≥"][i[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,n)},this)}};function a4(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const y5e=g5e;var _5e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var i=this.visualMapModel,n=i.get("textGap"),a=i.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=i.itemSize,h=this._getViewData(),c=h.endsText,d=zr(i.get("showLabel",!0),!c);c&&this._renderEndsText(r,c[0],u,d,l),I(h.viewPieceList,function(f){var p=f.piece,v=new Ie;v.onclick=me(this._onItemClick,this,p),this._enableHoverLink(v,f.indexInModelPieceList);var g=i.getRepresentValue(p);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),d){var m=this.visualMapModel.getValueState(g);v.add(new ot({style:{x:l==="right"?-n:u[0]+n,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:m==="outOfRange"?.5:1}}))}r.add(v)},this),c&&this._renderEndsText(r,c[1],u,d,l),xh(i.get("orient"),r,i.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,i){var n=this;r.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=n.visualMapModel;s.option.hoverLink&&n.api.dispatchAction({type:o,batch:n1(s.findTargetDataIndices(i),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,i=r.option;if(i.orient==="vertical")return wX(r,this.api,r.itemSize);var n=i.align;return(!n||n==="auto")&&(n="left"),n},t.prototype._renderEndsText=function(r,i,n,a,o){if(i){var s=new Ie,l=this.visualMapModel.textStyleModel;s.add(new ot({style:zt(l,{x:a?o==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:a?o:"center",text:i})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,i=ce(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),n=r.get("text"),a=r.get("orient"),o=r.get("inverse");return(a==="horizontal"?o:!o)?i.reverse():n&&(n=n.slice().reverse()),{viewPieceList:i,endsText:n}},t.prototype._createItemSymbol=function(r,i,n){r.add(vr(this.getControllerVisual(i,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(i,"color")))},t.prototype._onItemClick=function(r){var i=this.visualMapModel,n=i.option,a=n.selectedMode;if(a){var o=Ee(n.selected),s=i.getSelectedMapKey(r);a==="single"||a===!0?(o[s]=!0,I(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(bX);const x5e=_5e;function TX(e){e.registerComponentModel(y5e),e.registerComponentView(x5e),SX(e)}function b5e(e){$e(MX),$e(TX)}var w5e={label:{enabled:!0},decal:{show:!1}},o4=it(),S5e={};function M5e(e,t){var r=e.getModel("aria");if(!r.get("enabled"))return;var i=Ee(w5e);Ue(i.label,e.getLocaleModel().get("aria"),!1),Ue(r.option,i,!1),n(),a();function n(){var u=r.getModel("decal"),h=u.get("show");if(h){var c=Me();e.eachSeries(function(d){if(!d.isColorBySeries()){var f=c.get(d.type);f||(f={},c.set(d.type,f)),o4(d).scope=f}}),e.eachRawSeries(function(d){if(e.isSeriesFiltered(d))return;if(Ae(d.enableAriaDecal)){d.enableAriaDecal();return}var f=d.getData();if(d.isColorBySeries()){var y=kA(d.ecModel,d.name,S5e,e.getSeriesCount()),_=f.getVisual("decal");f.setVisual("decal",x(_,y))}else{var p=d.getRawData(),v={},g=o4(d).scope;f.each(function(w){var b=f.getRawIndex(w);v[b]=w});var m=p.count();p.each(function(w){var b=v[w],S=p.getName(w)||w+"",M=kA(d.ecModel,S,g,m),A=f.getItemVisual(b,"decal");f.setItemVisual(b,"decal",x(A,M))})}function x(w,b){var S=w?ae(ae({},b),w):b;return S.dirty=!0,S}})}}function a(){var u=e.getLocaleModel().get("aria"),h=r.getModel("label");if(h.option=De(h.option,u),!!h.get("enabled")){var c=t.getZr().dom;if(h.get("description")){c.setAttribute("aria-label",h.get("description"));return}var d=e.getSeriesCount(),f=h.get(["data","maxCount"])||10,p=h.get(["series","maxCount"])||10,v=Math.min(d,p),g;if(!(d<1)){var m=s();if(m){var y=h.get(["general","withTitle"]);g=o(y,{title:m})}else g=h.get(["general","withoutTitle"]);var _=[],x=d>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);g+=o(x,{seriesCount:d}),e.eachSeries(function(M,A){if(A<v){var T=void 0,C=M.get("name"),D=C?"withName":"withoutName";T=d>1?h.get(["series","multiple",D]):h.get(["series","single",D]),T=o(T,{seriesId:M.seriesIndex,seriesName:M.get("name"),seriesType:l(M.subType)});var P=M.getData();if(P.count()>f){var E=h.get(["data","partialData"]);T+=o(E,{displayCnt:f})}else T+=h.get(["data","allData"]);for(var O=h.get(["data","separator","middle"]),z=h.get(["data","separator","end"]),B=[],N=0;N<P.count();N++)if(N<f){var F=P.getName(N),G=P.getValues(N),H=h.get(["data",F?"withName":"withoutName"]);B.push(o(H,{name:F,value:G.join(O)}))}T+=B.join(O)+z,_.push(T)}});var w=h.getModel(["series","multiple","separator"]),b=w.get("middle"),S=w.get("end");g+=_.join(b)+S,c.setAttribute("aria-label",g)}}}function o(u,h){if(!ge(u))return u;var c=u;return I(h,function(d,f){c=c.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),d)}),c}function s(){var u=e.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){return e.getLocaleModel().get(["series","typeNames"])[u]||"自定义图"}}function T5e(e){if(!(!e||!e.aria)){var t=e.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},I(["description","general","series","data"],function(r){t[r]!=null&&(t.label[r]=t[r])})}}function A5e(e){e.registerPreprocessor(T5e),e.registerVisual(e.PRIORITY.VISUAL.ARIA,M5e)}var s4={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},C5e=function(){function e(t){var r=this._condVal=ge(t)?new RegExp(t):c0e(t)?t:null;if(r==null){var i="";dt(i)}}return e.prototype.evaluate=function(t){var r=typeof t;return ge(r)?this._condVal.test(t):st(r)?this._condVal.test(t+""):!1},e}(),D5e=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),P5e=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),L5e=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),E5e=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),I5e=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,i=r(this.valueGetterParam),n=t?this.valueParser(i):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(t?n:i))return!1;return!0},e}();function VE(e,t){if(e===!0||e===!1){var r=new D5e;return r.value=e,r}var i="";return AX(e)||dt(i),e.and?l4("and",e,t):e.or?l4("or",e,t):e.not?O5e(e,t):R5e(e,t)}function l4(e,t,r){var i=t[e],n="";ue(i)||dt(n),i.length||dt(n);var a=e==="and"?new P5e:new L5e;return a.children=ce(i,function(o){return VE(o,r)}),a.children.length||dt(n),a}function O5e(e,t){var r=e.not,i="";AX(r)||dt(i);var n=new E5e;return n.child=VE(r,t),n.child||dt(i),n}function R5e(e,t){for(var r="",i=t.prepareGetValue(e),n=[],a=Ze(e),o=e.parser,s=o?e9(o):null,l=0;l<a.length;l++){var u=a[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var h=_e(s4,u)?s4[u]:u,c=e[u],d=s?s(c):c,f=vwe(h,d)||h==="reg"&&new C5e(d);f||dt(r),n.push(f)}}n.length||dt(r);var p=new I5e;return p.valueGetterParam=i,p.valueParser=s,p.getValue=t.getValue,p.subCondList=n,p}function AX(e){return Pe(e)&&!ai(e)}var z5e=function(){function e(t,r){this._cond=VE(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function N5e(e,t){return new z5e(e,t)}var k5e={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,i=N5e(e.config,{valueGetterAttrMap:Me({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;_e(s,"dimension")||dt(l);var h=t.getDimensionInfo(u);return h||dt(l),{dimIdx:h.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),n=[],a=0,o=t.count();a<o;a++)r=t.getRawDataItem(a),i.evaluate()&&n.push(r);return{data:n}}},B5e={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,i="",n=Mt(r);n.length||dt(i);var a=[];I(n,function(h){var c=h.dimension,d=h.order,f=h.parser,p=h.incomparable;if(c==null&&dt(i),d!=="asc"&&d!=="desc"&&dt(i),p&&p!=="min"&&p!=="max"){var v="";dt(v)}if(d!=="asc"&&d!=="desc"){var g="";dt(g)}var m=t.getDimensionInfo(c);m||dt(i);var y=f?e9(f):null;f&&!y&&dt(i),a.push({dimIdx:m.index,parser:y,comparator:new r9(d,p)})});var o=t.sourceFormat;o!==oi&&o!==$n&&dt(i);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(h,c){for(var d=0;d<a.length;d++){var f=a[d],p=t.retrieveValueFromItem(h,f.dimIdx),v=t.retrieveValueFromItem(c,f.dimIdx);f.parser&&(p=f.parser(p),v=f.parser(v));var g=f.comparator.evaluate(p,v);if(g!==0)return g}return 0}),{data:s}}};function F5e(e){e.registerTransform(k5e),e.registerTransform(B5e)}var V5e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,i,n){e.prototype.init.call(this,r,i,n),this._sourceManager=new o9(this),dk(this)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),dk(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:go},t}(nt),U5e=function(e){Y(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(Kt);function G5e(e){e.registerComponentModel(V5e),e.registerComponentView(U5e)}var $a=Mo.CMD;function nd(e,t){return Math.abs(e-t)<1e-5}function NC(e){var t=e.data,r=e.len(),i=[],n,a=0,o=0,s=0,l=0;function u(P,E){n&&n.length>2&&i.push(n),n=[P,E]}function h(P,E,O,z){nd(P,O)&&nd(E,z)||n.push(P,E,O,z,O,z)}function c(P,E,O,z,B,N){var F=Math.abs(E-P),G=Math.tan(F/4)*4/3,H=E<P?-1:1,$=Math.cos(P),Z=Math.sin(P),X=Math.cos(E),ne=Math.sin(E),te=$*B+O,U=Z*N+z,W=X*B+O,j=ne*N+z,K=B*G*H,ee=N*G*H;n.push(te-K*Z,U+ee*$,W+K*ne,j-ee*X,W,j)}for(var d,f,p,v,g=0;g<r;){var m=t[g++],y=g===1;switch(y&&(a=t[g],o=t[g+1],s=a,l=o,(m===$a.L||m===$a.C||m===$a.Q)&&(n=[s,l])),m){case $a.M:a=s=t[g++],o=l=t[g++],u(s,l);break;case $a.L:d=t[g++],f=t[g++],h(a,o,d,f),a=d,o=f;break;case $a.C:n.push(t[g++],t[g++],t[g++],t[g++],a=t[g++],o=t[g++]);break;case $a.Q:d=t[g++],f=t[g++],p=t[g++],v=t[g++],n.push(a+2/3*(d-a),o+2/3*(f-o),p+2/3*(d-p),v+2/3*(f-v),p,v),a=p,o=v;break;case $a.A:var _=t[g++],x=t[g++],w=t[g++],b=t[g++],S=t[g++],M=t[g++]+S;g+=1;var A=!t[g++];d=Math.cos(S)*w+_,f=Math.sin(S)*b+x,y?(s=d,l=f,u(s,l)):h(a,o,d,f),a=Math.cos(M)*w+_,o=Math.sin(M)*b+x;for(var T=(A?-1:1)*Math.PI/2,C=S;A?C>M:C<M;C+=T){var D=A?Math.max(C+T,M):Math.min(C+T,M);c(C,D,_,x,w,b)}break;case $a.R:s=a=t[g++],l=o=t[g++],d=s+t[g++],f=l+t[g++],u(d,l),h(d,l,d,f),h(d,f,s,f),h(s,f,s,l),h(s,l,d,l);break;case $a.Z:n&&h(a,o,s,l),a=s,o=l;break}}return n&&n.length>2&&i.push(n),i}function kC(e,t,r,i,n,a,o,s,l,u){if(nd(e,r)&&nd(t,i)&&nd(n,o)&&nd(a,s)){l.push(o,s);return}var h=2/u,c=h*h,d=o-e,f=s-t,p=Math.sqrt(d*d+f*f);d/=p,f/=p;var v=r-e,g=i-t,m=n-o,y=a-s,_=v*v+g*g,x=m*m+y*y;if(_<c&&x<c){l.push(o,s);return}var w=d*v+f*g,b=-d*m-f*y,S=_-w*w,M=x-b*b;if(S<c&&w>=0&&M<c&&b>=0){l.push(o,s);return}var A=[],T=[];kl(e,r,n,o,.5,A),kl(t,i,a,s,.5,T),kC(A[0],T[0],A[1],T[1],A[2],T[2],A[3],T[3],l,u),kC(A[4],T[4],A[5],T[5],A[6],T[6],A[7],T[7],l,u)}function H5e(e,t){var r=NC(e),i=[];t=t||1;for(var n=0;n<r.length;n++){var a=r[n],o=[],s=a[0],l=a[1];o.push(s,l);for(var u=2;u<a.length;){var h=a[u++],c=a[u++],d=a[u++],f=a[u++],p=a[u++],v=a[u++];kC(s,l,h,c,d,f,p,v,o,t),s=p,l=v}i.push(o)}return i}function CX(e,t,r){var i=e[t],n=e[1-t],a=Math.abs(i/n),o=Math.ceil(Math.sqrt(a*r)),s=Math.floor(r/o);s===0&&(s=1,o=r);for(var l=[],u=0;u<o;u++)l.push(s);var h=o*s,c=r-h;if(c>0)for(var u=0;u<c;u++)l[u%o]+=1;return l}function u4(e,t,r){for(var i=e.r0,n=e.r,a=e.startAngle,o=e.endAngle,s=Math.abs(o-a),l=s*n,u=n-i,h=l>Math.abs(u),c=CX([l,u],h?0:1,t),d=(h?s:u)/c.length,f=0;f<c.length;f++)for(var p=(h?u:s)/c[f],v=0;v<c[f];v++){var g={};h?(g.startAngle=a+d*f,g.endAngle=a+d*(f+1),g.r0=i+p*v,g.r=i+p*(v+1)):(g.startAngle=a+p*v,g.endAngle=a+p*(v+1),g.r0=i+d*f,g.r=i+d*(f+1)),g.clockwise=e.clockwise,g.cx=e.cx,g.cy=e.cy,r.push(g)}}function j5e(e,t,r){for(var i=e.width,n=e.height,a=i>n,o=CX([i,n],a?0:1,t),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",h=a?"y":"x",c=e[s]/o.length,d=0;d<o.length;d++)for(var f=e[l]/o[d],p=0;p<o[d];p++){var v={};v[u]=d*c,v[h]=p*f,v[s]=c,v[l]=f,v.x+=e.x,v.y+=e.y,r.push(v)}}function h4(e,t,r,i){return e*i-r*t}function W5e(e,t,r,i,n,a,o,s){var l=r-e,u=i-t,h=o-n,c=s-a,d=h4(h,c,l,u);if(Math.abs(d)<1e-6)return null;var f=e-n,p=t-a,v=h4(f,p,h,c)/d;return v<0||v>1?null:new Fe(v*l+e,v*u+t)}function $5e(e,t,r){var i=new Fe;Fe.sub(i,r,t),i.normalize();var n=new Fe;Fe.sub(n,e,t);var a=n.dot(i);return a}function Nc(e,t){var r=e[e.length-1];r&&r[0]===t[0]&&r[1]===t[1]||e.push(t)}function q5e(e,t,r){for(var i=e.length,n=[],a=0;a<i;a++){var o=e[a],s=e[(a+1)%i],l=W5e(o[0],o[1],s[0],s[1],t.x,t.y,r.x,r.y);l&&n.push({projPt:$5e(l,t,r),pt:l,idx:a})}if(n.length<2)return[{points:e},{points:e}];n.sort(function(g,m){return g.projPt-m.projPt});var u=n[0],h=n[n.length-1];if(h.idx<u.idx){var c=u;u=h,h=c}for(var d=[u.pt.x,u.pt.y],f=[h.pt.x,h.pt.y],p=[d],v=[f],a=u.idx+1;a<=h.idx;a++)Nc(p,e[a].slice());Nc(p,f),Nc(p,d);for(var a=h.idx+1;a<=u.idx+i;a++)Nc(v,e[a%i].slice());return Nc(v,d),Nc(v,f),[{points:p},{points:v}]}function c4(e){var t=e.points,r=[],i=[];Wx(t,r,i);var n=new Ge(r[0],r[1],i[0]-r[0],i[1]-r[1]),a=n.width,o=n.height,s=n.x,l=n.y,u=new Fe,h=new Fe;return a>o?(u.x=h.x=s+a/2,u.y=l,h.y=l+o):(u.y=h.y=l+o/2,u.x=s,h.x=s+a),q5e(t,u,h)}function X_(e,t,r,i){if(r===1)i.push(t);else{var n=Math.floor(r/2),a=e(t);X_(e,a[0],n,i),X_(e,a[1],r-n,i)}return i}function X5e(e,t){for(var r=[],i=0;i<t;i++)r.push(iL(e));return r}function Y5e(e,t){t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel}function Z5e(e){for(var t=[],r=0;r<e.length;)t.push([e[r++],e[r++]]);return t}function K5e(e,t){var r=[],i=e.shape,n;switch(e.type){case"rect":j5e(i,t,r),n=rt;break;case"sector":u4(i,t,r),n=$i;break;case"circle":u4({r0:0,r:i.r,startAngle:0,endAngle:Math.PI*2,cx:i.cx,cy:i.cy},t,r),n=$i;break;default:var a=e.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=ce(H5e(e.getUpdatedPathProxy(),o),function(m){return Z5e(m)}),l=s.length;if(l===0)X_(c4,{points:s[0]},t,r);else if(l===t)for(var u=0;u<l;u++)r.push({points:s[u]});else{var h=0,c=ce(s,function(m){var y=[],_=[];Wx(m,y,_);var x=(_[1]-y[1])*(_[0]-y[0]);return h+=x,{poly:m,area:x}});c.sort(function(m,y){return y.area-m.area});for(var d=t,u=0;u<l;u++){var f=c[u];if(d<=0)break;var p=u===l-1?d:Math.ceil(f.area/h*t);p<0||(X_(c4,{points:f.poly},p,r),d-=p)}}n=qi;break}if(!n)return X5e(e,t);for(var v=[],u=0;u<r.length;u++){var g=new n;g.setShape(r[u]),Y5e(e,g),v.push(g)}return v}function J5e(e,t){var r=e.length,i=t.length;if(r===i)return[e,t];for(var n=[],a=[],o=r<i?e:t,s=Math.min(r,i),l=Math.abs(i-r)/6,u=(s-2)/6,h=Math.ceil(l/u)+1,c=[o[0],o[1]],d=l,f=2;f<s;){var p=o[f-2],v=o[f-1],g=o[f++],m=o[f++],y=o[f++],_=o[f++],x=o[f++],w=o[f++];if(d<=0){c.push(g,m,y,_,x,w);continue}for(var b=Math.min(d,h-1)+1,S=1;S<=b;S++){var M=S/b;kl(p,g,y,x,M,n),kl(v,m,_,w,M,a),p=n[3],v=a[3],c.push(n[1],a[1],n[2],a[2],p,v),g=n[5],m=a[5],y=n[6],_=a[6]}d-=b-1}return o===e?[c,t]:[e,c]}function d4(e,t){for(var r=e.length,i=e[r-2],n=e[r-1],a=[],o=0;o<t.length;)a[o++]=i,a[o++]=n;return a}function Q5e(e,t){for(var r,i,n,a=[],o=[],s=0;s<Math.max(e.length,t.length);s++){var l=e[s],u=t[s],h=void 0,c=void 0;l?u?(r=J5e(l,u),h=r[0],c=r[1],i=h,n=c):(c=d4(n||l,l),h=l):(h=d4(i||u,u),c=u),a.push(h),o.push(c)}return[a,o]}function f4(e){for(var t=0,r=0,i=0,n=e.length,a=0,o=n-2;a<n;o=a,a+=2){var s=e[o],l=e[o+1],u=e[a],h=e[a+1],c=s*h-u*l;t+=c,r+=(s+u)*c,i+=(l+h)*c}return t===0?[e[0]||0,e[1]||0]:[r/t/3,i/t/3,t]}function eFe(e,t,r,i){for(var n=(e.length-2)/6,a=1/0,o=0,s=e.length,l=s-2,u=0;u<n;u++){for(var h=u*6,c=0,d=0;d<s;d+=2){var f=d===0?h:(h+d-2)%l+2,p=e[f]-r[0],v=e[f+1]-r[1],g=t[d]-i[0],m=t[d+1]-i[1],y=g-p,_=m-v;c+=y*y+_*_}c<a&&(a=c,o=u)}return o}function tFe(e){for(var t=[],r=e.length,i=0;i<r;i+=2)t[i]=e[r-i-2],t[i+1]=e[r-i-1];return t}function rFe(e,t,r,i){for(var n=[],a,o=0;o<e.length;o++){var s=e[o],l=t[o],u=f4(s),h=f4(l);a==null&&(a=u[2]<0!=h[2]<0);var c=[],d=[],f=0,p=1/0,v=[],g=s.length;a&&(s=tFe(s));for(var m=eFe(s,l,u,h)*6,y=g-2,_=0;_<y;_+=2){var x=(m+_)%y+2;c[_+2]=s[x]-u[0],c[_+3]=s[x+1]-u[1]}if(c[0]=s[m]-u[0],c[1]=s[m+1]-u[1],r>0)for(var w=i/r,b=-i/2;b<=i/2;b+=w){for(var S=Math.sin(b),M=Math.cos(b),A=0,_=0;_<s.length;_+=2){var T=c[_],C=c[_+1],D=l[_]-h[0],P=l[_+1]-h[1],E=D*M-P*S,O=D*S+P*M;v[_]=E,v[_+1]=O;var z=E-T,B=O-C;A+=z*z+B*B}if(A<p){p=A,f=b;for(var N=0;N<v.length;N++)d[N]=v[N]}}else for(var F=0;F<g;F+=2)d[F]=l[F]-h[0],d[F+1]=l[F+1]-h[1];n.push({from:c,to:d,fromCp:u,toCp:h,rotation:-f})}return n}function Y_(e){return e.__isCombineMorphing}var DX="__mOriginal_";function Z_(e,t,r){var i=DX+t,n=e[i]||e[t];e[i]||(e[i]=e[t]);var a=r.replace,o=r.after,s=r.before;e[t]=function(){var l=arguments,u;return s&&s.apply(this,l),a?u=a.apply(this,l):u=n.apply(this,l),o&&o.apply(this,l),u}}function Mv(e,t){var r=DX+t;e[r]&&(e[t]=e[r],e[r]=null)}function p4(e,t){for(var r=0;r<e.length;r++)for(var i=e[r],n=0;n<i.length;){var a=i[n],o=i[n+1];i[n++]=t[0]*a+t[2]*o+t[4],i[n++]=t[1]*a+t[3]*o+t[5]}}function PX(e,t){var r=e.getUpdatedPathProxy(),i=t.getUpdatedPathProxy(),n=Q5e(NC(r),NC(i)),a=n[0],o=n[1],s=e.getComputedTransform(),l=t.getComputedTransform();function u(){this.transform=null}s&&p4(a,s),l&&p4(o,l),Z_(t,"updateTransform",{replace:u}),t.transform=null;var h=rFe(a,o,10,Math.PI),c=[];Z_(t,"buildPath",{replace:function(d){for(var f=t.__morphT,p=1-f,v=[],g=0;g<h.length;g++){var m=h[g],y=m.from,_=m.to,x=m.rotation*f,w=m.fromCp,b=m.toCp,S=Math.sin(x),M=Math.cos(x);V0(v,w,b,f);for(var A=0;A<y.length;A+=2){var T=y[A],C=y[A+1],D=_[A],P=_[A+1],E=T*p+D*f,O=C*p+P*f;c[A]=E*M-O*S+v[0],c[A+1]=E*S+O*M+v[1]}var z=c[0],B=c[1];d.moveTo(z,B);for(var A=2;A<y.length;){var D=c[A++],P=c[A++],N=c[A++],F=c[A++],G=c[A++],H=c[A++];z===D&&B===P&&N===G&&F===H?d.lineTo(G,H):d.bezierCurveTo(D,P,N,F,G,H),z=G,B=H}}}})}function UE(e,t,r){if(!e||!t)return t;var i=r.done,n=r.during;PX(e,t),t.__morphT=0;function a(){Mv(t,"buildPath"),Mv(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},De({during:function(o){t.dirtyShape(),n&&n(o)},done:function(){a(),i&&i()}},r)),t}function iFe(e,t,r,i,n,a){var o=16;e=n===r?0:Math.round(32767*(e-r)/(n-r)),t=a===i?0:Math.round(32767*(t-i)/(a-i));for(var s=0,l,u=(1<<o)/2;u>0;u/=2){var h=0,c=0;(e&u)>0&&(h=1),(t&u)>0&&(c=1),s+=u*u*(3*h^c),c===0&&(h===1&&(e=u-1-e,t=u-1-t),l=e,e=t,t=l)}return s}function K_(e){var t=1/0,r=1/0,i=-1/0,n=-1/0,a=ce(e,function(s){var l=s.getBoundingRect(),u=s.getComputedTransform(),h=l.x+l.width/2+(u?u[4]:0),c=l.y+l.height/2+(u?u[5]:0);return t=Math.min(h,t),r=Math.min(c,r),i=Math.max(h,i),n=Math.max(c,n),[h,c]}),o=ce(a,function(s,l){return{cp:s,z:iFe(s[0],s[1],t,r,i,n),path:e[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function LX(e){return K5e(e.path,e.count)}function BC(){return{fromIndividuals:[],toIndividuals:[],count:0}}function nFe(e,t,r){var i=[];function n(w){for(var b=0;b<w.length;b++){var S=w[b];Y_(S)?n(S.childrenRef()):S instanceof qe&&i.push(S)}}n(e);var a=i.length;if(!a)return BC();var o=r.dividePath||LX,s=o({path:t,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),BC();i=K_(i),s=K_(s);for(var l=r.done,u=r.during,h=r.individualDelay,c=new es,d=0;d<a;d++){var f=i[d],p=s[d];p.parent=t,p.copyTransform(c),h||PX(f,p)}t.__isCombineMorphing=!0,t.childrenRef=function(){return s};function v(w){for(var b=0;b<s.length;b++)s[b].addSelfToZr(w)}Z_(t,"addSelfToZr",{after:function(w){v(w)}}),Z_(t,"removeSelfFromZr",{after:function(w){for(var b=0;b<s.length;b++)s[b].removeSelfFromZr(w)}});function g(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,Mv(t,"addSelfToZr"),Mv(t,"removeSelfFromZr")}var m=s.length;if(h)for(var y=m,_=function(){y--,y===0&&(g(),l&&l())},d=0;d<m;d++){var x=h?De({delay:(r.delay||0)+h(d,m,i[d],s[d]),done:_},r):r;UE(i[d],s[d],x)}else t.__morphT=0,t.animateTo({__morphT:1},De({during:function(w){for(var b=0;b<m;b++){var S=s[b];S.__morphT=t.__morphT,S.dirtyShape()}u&&u(w)},done:function(){g();for(var w=0;w<e.length;w++)Mv(e[w],"updateTransform");l&&l()}},r));return t.__zr&&v(t.__zr),{fromIndividuals:i,toIndividuals:s,count:m}}function aFe(e,t,r){var i=t.length,n=[],a=r.dividePath||LX;function o(f){for(var p=0;p<f.length;p++){var v=f[p];Y_(v)?o(v.childrenRef()):v instanceof qe&&n.push(v)}}if(Y_(e)){o(e.childrenRef());var s=n.length;if(s<i)for(var l=0,u=s;u<i;u++)n.push(iL(n[l++%s]));n.length=i}else{n=a({path:e,count:i});for(var h=e.getComputedTransform(),u=0;u<n.length;u++)n[u].setLocalTransform(h);if(n.length!==i)return console.error("Invalid morphing: unmatched splitted path"),BC()}n=K_(n),t=K_(t);for(var c=r.individualDelay,u=0;u<i;u++){var d=c?De({delay:(r.delay||0)+c(u,i,n[u],t[u])},r):r;UE(n[u],t[u],d)}return{fromIndividuals:n,toIndividuals:t,count:t.length}}function v4(e){return ue(e[0])}function g4(e,t){for(var r=[],i=e.length,n=0;n<i;n++)r.push({one:e[n],many:[]});for(var n=0;n<t.length;n++){var a=t[n].length,o=void 0;for(o=0;o<a;o++)r[o%i].many.push(t[n][o])}for(var s=0,n=i-1;n>=0;n--)if(!r[n].many.length){var l=r[s].many;if(l.length<=1)if(s)s=0;else return r;var a=l.length,u=Math.ceil(a/2);r[n].many=l.slice(u,a),r[s].many=l.slice(0,u),s++}return r}var oFe={clone:function(e){for(var t=[],r=1-Math.pow(1-e.path.style.opacity,1/e.count),i=0;i<e.count;i++){var n=iL(e.path);n.setStyle("opacity",r),t.push(n)}return t},split:null};function bM(e,t,r,i,n,a){if(!e.length||!t.length)return;var o=cf("update",i,n);if(!(o&&o.duration>0))return;var s=i.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),u,h;v4(e)&&(u=e,h=t),v4(t)&&(u=t,h=e);function c(m,y,_,x,w){var b=m.many,S=m.one;if(b.length===1&&!w){var M=y?b[0]:S,A=y?S:b[0];if(Y_(M))c({many:[M],one:A},!0,_,x,!0);else{var T=s?De({delay:s(_,x)},l):l;UE(M,A,T),a(M,A,M,A,T)}}else for(var C=De({dividePath:oFe[r],individualDelay:s&&function(B,N,F,G){return s(B+_,x)}},l),D=y?nFe(b,S,C):aFe(S,b,C),P=D.fromIndividuals,E=D.toIndividuals,O=P.length,z=0;z<O;z++){var T=s?De({delay:s(z,O)},l):l;a(P[z],E[z],y?b[z]:m.one,y?m.one:b[z],T)}}for(var d=u?u===e:e.length>t.length,f=u?g4(h,u):g4(d?t:e,[d?e:t]),p=0,v=0;v<f.length;v++)p+=f[v].many.length;for(var g=0,v=0;v<f.length;v++)c(f[v],d,g,p),g+=f[v].many.length}function Vu(e){if(!e)return[];if(ue(e)){for(var t=[],r=0;r<e.length;r++)t.push(Vu(e[r]));return t}var i=[];return e.traverse(function(n){n instanceof qe&&!n.disableMorphing&&!n.invisible&&!n.ignore&&i.push(n)}),i}var EX=1e4,sFe=it();function lFe(e){for(var t=e.dimensions,r=0;r<t.length;r++){var i=e.getDimensionInfo(t[r]);if(i&&i.otherDims.itemGroupId===0)return t[r]}}function m4(e){var t=[];return I(e,function(r){var i=r.data;if(!(i.count()>EX))for(var n=i.getIndices(),a=lFe(i),o=0;o<n.length;o++)t.push({dataGroupId:r.dataGroupId,data:i,dim:r.dim||a,divide:r.divide,dataIndex:o})}),t}function wM(e,t,r){e.traverse(function(i){i instanceof qe&&Ut(i,{style:{opacity:0}},t,{dataIndex:r,isFrom:!0})})}function SM(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function kc(e){e.stopAnimation(),e.isGroup&&e.traverse(function(t){t.stopAnimation()})}function uFe(e,t,r){var i=cf("update",r,t);i&&e.traverse(function(n){if(n instanceof Hn){var a=Xxe(n);a&&n.animateFrom({style:a},i)}})}function hFe(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++){var n=e[i],a=t[i];if(n.data.getId(n.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function IX(e,t,r){var i=m4(e),n=m4(t);function a(m,y,_,x,w){(_||m)&&y.animateFrom({style:_&&_!==m?ae(ae({},_.style),m.style):m.style},w)}function o(m){for(var y=0;y<m.length;y++)if(m[y].dim)return m[y].dim}var s=o(i),l=o(n),u=!1;function h(m,y){return function(_){var x=_.data,w=_.dataIndex;if(y)return x.getId(w);var b=_.dataGroupId,S=m?s||l:l||s,M=S&&x.getDimensionInfo(S),A=M&&M.ordinalMeta;if(M){var T=x.get(M.name,w);return A&&A.categories[T]||T+""}var C=x.getRawDataItem(w);return C&&C.groupId?C.groupId+"":b||x.getId(w)}}var c=hFe(i,n),d={};if(!c)for(var f=0;f<n.length;f++){var p=n[f],v=p.data.getItemGraphicEl(p.dataIndex);v&&(d[v.id]=!0)}function g(m,y){var _=i[y],x=n[m],w=x.data.hostModel,b=_.data.getItemGraphicEl(_.dataIndex),S=x.data.getItemGraphicEl(x.dataIndex);if(b===S){S&&uFe(S,x.dataIndex,w);return}b&&d[b.id]||S&&(kc(S),b?(kc(b),SM(b),u=!0,bM(Vu(b),Vu(S),x.divide,w,m,a)):wM(S,w,m))}new ws(i,n,h(!0,c),h(!1,c),null,"multiple").update(g).updateManyToOne(function(m,y){var _=n[m],x=_.data,w=x.hostModel,b=x.getItemGraphicEl(_.dataIndex),S=xt(ce(y,function(M){return i[M].data.getItemGraphicEl(i[M].dataIndex)}),function(M){return M&&M!==b&&!d[M.id]});b&&(kc(b),S.length?(I(S,function(M){kc(M),SM(M)}),u=!0,bM(Vu(S),Vu(b),_.divide,w,m,a)):wM(b,w,_.dataIndex))}).updateOneToMany(function(m,y){var _=i[y],x=_.data.getItemGraphicEl(_.dataIndex);if(!(x&&d[x.id])){var w=xt(ce(m,function(S){return n[S].data.getItemGraphicEl(n[S].dataIndex)}),function(S){return S&&S!==x}),b=n[m[0]].data.hostModel;w.length&&(I(w,function(S){return kc(S)}),x?(kc(x),SM(x),u=!0,bM(Vu(x),Vu(w),_.divide,b,m[0],a)):I(w,function(S){return wM(S,b,m[0])}))}}).updateManyToMany(function(m,y){new ws(y,m,function(_){return i[_].data.getId(i[_].dataIndex)},function(_){return n[_].data.getId(n[_].dataIndex)}).update(function(_,x){g(m[_],y[x])}).execute()}).execute(),u&&I(t,function(m){var y=m.data,_=y.hostModel,x=_&&r.getViewOfSeriesModel(_),w=cf("update",_,0);x&&_.isAnimationEnabled()&&w&&w.duration>0&&x.group.traverse(function(b){b instanceof qe&&!b.animators.length&&b.animateFrom({style:{opacity:0}},w)})})}function y4(e){var t=e.getModel("universalTransition").get("seriesKey");return t||e.id}function _4(e){return ue(e)?e.sort().join(","):e}function il(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function cFe(e,t){var r=Me(),i=Me(),n=Me();return I(e.oldSeries,function(a,o){var s=e.oldDataGroupIds[o],l=e.oldData[o],u=y4(a),h=_4(u);i.set(h,{dataGroupId:s,data:l}),ue(u)&&I(u,function(c){n.set(c,{key:h,dataGroupId:s,data:l})})}),I(t.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=y4(a),u=_4(l),h=i.get(u);if(h)r.set(u,{oldSeries:[{dataGroupId:h.dataGroupId,divide:il(h.data),data:h.data}],newSeries:[{dataGroupId:o,divide:il(s),data:s}]});else if(ue(l)){var c=[];I(l,function(p){var v=i.get(p);v.data&&c.push({dataGroupId:v.dataGroupId,divide:il(v.data),data:v.data})}),c.length&&r.set(u,{oldSeries:c,newSeries:[{dataGroupId:o,data:s,divide:il(s)}]})}else{var d=n.get(l);if(d){var f=r.get(d.key);f||(f={oldSeries:[{dataGroupId:d.dataGroupId,data:d.data,divide:il(d.data)}],newSeries:[]},r.set(d.key,f)),f.newSeries.push({dataGroupId:o,data:s,divide:il(s)})}}}}),r}function x4(e,t){for(var r=0;r<e.length;r++){var i=t.seriesIndex!=null&&t.seriesIndex===e[r].seriesIndex||t.seriesId!=null&&t.seriesId===e[r].id;if(i)return r}}function dFe(e,t,r,i){var n=[],a=[];I(Mt(e.from),function(o){var s=x4(t.oldSeries,o);s>=0&&n.push({dataGroupId:t.oldDataGroupIds[s],data:t.oldData[s],divide:il(t.oldData[s]),dim:o.dimension})}),I(Mt(e.to),function(o){var s=x4(r.updatedSeries,o);if(s>=0){var l=r.updatedSeries[s].getData();a.push({dataGroupId:t.oldDataGroupIds[s],data:l,divide:il(l),dim:o.dimension})}}),n.length>0&&a.length>0&&IX(n,a,i)}function fFe(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,r,i){I(Mt(i.seriesTransition),function(n){I(Mt(n.to),function(a){for(var o=i.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][J0]=!0)})})}),e.registerUpdateLifecycle("series:transition",function(t,r,i){var n=sFe(r);if(n.oldSeries&&i.updatedSeries&&i.optionChanged){var a=i.seriesTransition;if(a)I(Mt(a),function(f){dFe(f,n,i,r)});else{var o=cFe(n,i);I(o.keys(),function(f){var p=o.get(f);IX(p.oldSeries,p.newSeries,r)})}I(i.updatedSeries,function(f){f[J0]&&(f[J0]=!1)})}for(var s=t.getSeries(),l=n.oldSeries=[],u=n.oldDataGroupIds=[],h=n.oldData=[],c=0;c<s.length;c++){var d=s[c].getData();d.count()<EX&&(l.push(s[c]),u.push(s[c].get("dataGroupId")),h.push(d))}})}$e([LTe]);$e([STe]);$e([eAe,yAe,EAe,yCe,zCe,PDe,oPe,$Pe,xLe,PLe,VLe,jEe,mIe,LIe,ZIe,iOe,bOe,EOe,jOe,JOe,c3e,Z3e]);$e(_Re);$e(QRe);$e(C$);$e(gze);$e(fq);$e(Sze);$e(Ize);$e(ONe);$e(rke);$e(im);$e(wke);$e(Tke);$e(Vke);$e(Zke);$e(nBe);$e(dBe);$e(ABe);$e(XBe);$e(yX);$e(_X);$e(b5e);$e(MX);$e(TX);$e(A5e);$e(F5e);$e(G5e);$e(fFe);$e(HMe);function pFe(e){const t=Mh(null);function r(){const{parkIncome:i}=e.value,n=H9(t.value),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"10px",left:"0px",right:"0px",bottom:"0px",containLabel:!0},xAxis:[{type:"category",axisTick:{alignWithLabel:!0,show:!1},data:i==null?void 0:i.xMonth}],yAxis:[{type:"value",splitLine:{show:!1}}],series:[{name:"园区年度收入",type:"bar",barWidth:"10px",data:i==null?void 0:i.yIncome.map((o,s)=>{const l=s%2===0?new Rh(0,0,0,1,[{offset:.23,color:"#74c0f8"},{offset:1,color:"rgba(116,192,248,0.00)"}]):new Rh(0,0,0,1,[{offset:.23,color:"#ff7152"},{offset:1,color:"rgba(255,113,82,0.00)"}]);return{value:o,itemStyle:{color:l}}})}],textStyle:{color:"#B4C0CC"}};a&&n.setOption(a)}return{initBarChart:r,barChart:t}}function vFe(e){const t=Mh(null);function r(){const{parkIndustry:i}=e.value,n=H9(t.value),a={color:["#00B2FF","#2CF2FF","#892CFF","#FF624D","#FFCF54","#86ECA2"],legend:{itemGap:20,bottom:"0",icon:"rect",itemHeight:10,itemWidth:10,textStyle:{color:"#c6d1db"}},tooltip:{trigger:"item"},series:[{name:"园区产业分析",type:"pie",radius:["55%","60%"],center:["50%","40%"],tooltip:{trigger:"item",formatter:o=>`${o.seriesName}</br><div style='display:flex;justify-content: space-between;'><div>${o.marker}${o.name}</div><div>${o.percent}%</div></div>`},label:{show:!1,position:"center"},data:i}]};a&&n.setOption(a)}return{pieChart:t,initPieChart:r}}const gFe={key:0,class:"loading"},mFe=tt("p",{class:"text"},"园区资源加载中…",-1),yFe=tt("div",{class:"loading-process"},[tt("div",{class:"process-wrapper"})],-1),_Fe=[mFe,yFe],xFe={__name:"LoadingComponent",props:{loading:{type:Boolean,default:!1}},setup(e){return(t,r)=>e.loading?(Mg(),cU("div",gFe,_Fe)):MZ("",!0)}};function bFe(e,t){let r;return function(...i){r&&clearTimeout(r),r=setTimeout(()=>{typeof e=="function"&&e.apply(null,i),clearTimeout(r)},t>0?t:100)}}const wFe=tD({name:"VScaleScreen",props:{width:{type:[String,Number],default:1920},height:{type:[String,Number],default:1080},fullScreen:{type:Boolean,default:!1},autoScale:{type:[Object,Boolean],default:!0},delay:{type:Number,default:500},boxStyle:{type:Object,default:()=>({})},wrapperStyle:{type:Object,default:()=>({})},bodyOverflowHidden:{type:Boolean,default:!0}},setup(e,{slots:t}){let r;const i=Sg({width:0,height:0,originalWidth:0,originalHeight:0,observer:null}),n={box:{overflow:"hidden",backgroundSize:"100% 100%",background:"#000",width:"100vw",height:"100vh"},wrapper:{transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms",position:"relative",overflow:"hidden",zIndex:100,transformOrigin:"left top"}},a=Mh(),o=()=>new Promise(f=>{s1(()=>{var p,v;e.width&&e.height?(i.width=e.width,i.height=e.height):(i.width=(p=a.value)==null?void 0:p.clientWidth,i.height=(v=a.value)==null?void 0:v.clientHeight),(!i.originalHeight||!i.originalWidth)&&(i.originalWidth=window.screen.width,i.originalHeight=window.screen.height),f()})});function s(){e.bodyOverflowHidden&&(r=document.body.style.overflow,document.body.style.overflow="hidden")}const l=()=>{i.width&&i.height?(a.value.style.width=`${i.width}px`,a.value.style.height=`${i.height}px`):(a.value.style.width=`${i.originalWidth}px`,a.value.style.height=`${i.originalHeight}px`)},u=f=>{if(!e.autoScale)return;const p=a.value.clientWidth,v=a.value.clientHeight,g=document.body.clientWidth,m=document.body.clientHeight;a.value.style.transform=`scale(${f},${f})`;let y=Math.max((g-p*f)/2,0),_=Math.max((m-v*f)/2,0);typeof e.autoScale=="object"&&(!e.autoScale.x&&(y=0),!e.autoScale.y&&(_=0)),a.value.style.margin=`${_}px ${y}px`},h=()=>{const f=document.body.clientWidth,p=document.body.clientHeight,v=i.width||i.originalWidth,g=i.height||i.originalHeight,m=f/+v,y=p/+g;if(e.fullScreen)return a.value.style.transform=`scale(${m},${y})`,!1;const _=Math.min(m,y);u(_)},c=bFe(async()=>{await o(),l(),h()},e.delay),d=()=>{(i.observer=new MutationObserver(()=>{c()})).observe(a.value,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0})};return rD(()=>{s(),s1(async()=>{await o(),l(),h(),window.addEventListener("resize",c),d()})}),iD(()=>{var f;window.removeEventListener("resize",c),(f=i.observer)==null||f.disconnect(),e.bodyOverflowHidden&&(document.body.style.overflow=r)}),()=>{var f;return c1("div",{className:"v-screen-box",style:{...n.box,...e.boxStyle}},[c1("div",{className:"screen-wrapper",style:{...n.wrapper,...e.wrapperStyle},ref:a},(f=t.default)==null?void 0:f.call(t))])}}}),qn=e=>(kY("data-v-7b2bb809"),e=e(),BY(),e),SFe={class:"all-charts"},MFe={class:"section-one"},TFe=qn(()=>tt("img",{class:"img-header",src:"https://yjy-teach-oss.oss-cn-beijing.aliyuncs.com/smartPark/%E5%A4%A7%E5%B1%8F%E5%88%87%E5%9B%BE/%E5%9B%AD%E5%8C%BA%E6%A6%82%E5%86%B5%402x.png",alt:""},null,-1)),AFe={class:"icons-container"},CFe={class:"item"},DFe={class:"icons-item building-icon"},PFe={class:"number"},LFe=qn(()=>tt("span",{class:"title"},"楼宇总数",-1)),EFe=qn(()=>tt("span",{class:"unity"},"（栋）",-1)),IFe={class:"item"},OFe={class:"icons-item enterprise-icon"},RFe={class:"number"},zFe=qn(()=>tt("span",{class:"title"},"入驻企业总数",-1)),NFe=qn(()=>tt("span",{class:"unity"},"（家）",-1)),kFe={class:"item"},BFe={class:"icons-item car-icon"},FFe={class:"number"},VFe=qn(()=>tt("span",{class:"title"},"车位总数",-1)),UFe=qn(()=>tt("span",{class:"unity"},"（个）",-1)),GFe={class:"item"},HFe={class:"icons-item rod-icon"},jFe={class:"number"},WFe=qn(()=>tt("span",{class:"title"},"一体杆总数",-1)),$Fe=qn(()=>tt("span",{class:"unity"},"（个）",-1)),qFe={class:"section-two"},XFe=qn(()=>tt("img",{class:"img-header",src:"https://yjy-teach-oss.oss-cn-beijing.aliyuncs.com/smartPark/%E5%A4%A7%E5%B1%8F%E5%88%87%E5%9B%BE/%E5%9B%AD%E5%8C%BA%E5%B9%B4%E5%BA%A6%E6%94%B6%E5%85%A5%E5%88%86%E6%9E%90%402x.png",alt:""},null,-1)),YFe=qn(()=>tt("div",{class:"bar-chart-titile"},[tt("span",null,"单位：元"),tt("div",null,[tt("span",{class:"bar-icon blue-bar-icon"}),tt("span",{class:"bar-icon red-bar-icon"}),fU(" 收入情况 ")])],-1)),ZFe={class:"section-three"},KFe=qn(()=>tt("img",{class:"img-header",src:"https://yjy-teach-oss.oss-cn-beijing.aliyuncs.com/smartPark/%E5%A4%A7%E5%B1%8F%E5%88%87%E5%9B%BE/%E5%9B%AD%E5%8C%BA%E4%BA%A7%E4%B8%9A%E5%88%86%E5%B8%83%402x.png",alt:""},null,-1)),JFe={class:"model-container"},QFe={__name:"big-index",setup(e){const{parkInfo:t,getUserInfo:r}=Xye(),{initBarChart:i,barChart:n}=pFe(t),{initPieChart:a,pieChart:o}=vFe(t),s=Mh(null),l=Mh(!1);return rD(async()=>{await r(),i(),a(),setTimeout(()=>{},500)}),(u,h)=>(Mg(),oD(En(wFe),{width:"1920",height:"1080"},{default:K4(()=>{var c,d,f,p;return[tt("div",SFe,[tt("div",MFe,[TFe,tt("div",AFe,[tt("div",CFe,[tt("div",DFe,[tt("span",PFe,sm((c=En(t).base)==null?void 0:c.buildingTotal),1)]),LFe,EFe]),tt("div",IFe,[tt("div",OFe,[tt("span",RFe,sm((d=En(t).base)==null?void 0:d.enterpriseTotal),1)]),zFe,NFe]),tt("div",kFe,[tt("div",BFe,[tt("span",FFe,sm((f=En(t).base)==null?void 0:f.parkingTotal),1)]),VFe,UFe]),tt("div",GFe,[tt("div",HFe,[tt("span",jFe,sm((p=En(t).base)==null?void 0:p.chargePoleTotal),1)]),WFe,$Fe])])]),tt("div",qFe,[XFe,YFe,tt("div",{class:"bar-chart",ref_key:"barChart",ref:n},null,512)]),tt("div",ZFe,[KFe,tt("div",{class:"pie-chart",ref_key:"pieChart",ref:o},null,512)])]),tt("div",JFe,[Vi(xFe,{loading:l.value},null,8,["loading"]),tt("canvas",{class:"canvas-3d",ref_key:"ref3d",ref:s},null,512)])]}),_:1}))}},eVe=DU(QFe,[["__scopeId","data-v-7b2bb809"]]),tVe=nJ({history:bK(),routes:[{path:"/",name:"home",component:uJ,redirect:"/big-screen"},{path:"/big-screen",name:"bigScreen",component:eVe}]});var wb={};/*!
 * vite-plugin-qiankun.js v1.0.14
 * (c) 2021-2022 Teng Mao Qing
 * Released under the MIT License.
 */Object.defineProperty(wb,"__esModule",{value:!0});var qc=typeof window<"u"?window.proxy||window:{},OX=function(e){qc!=null&&qc.__POWERED_BY_QIANKUN__&&(window.moudleQiankunAppLifeCycles||(window.moudleQiankunAppLifeCycles={}),qc.qiankunName&&(window.moudleQiankunAppLifeCycles[qc.qiankunName]=e))};wb.default=OX;var rVe=wb.qiankunWindow=qc,iVe=wb.renderWithQiankun=OX;iVe({mount(e){console.log("子应用完成挂载了mount"),RX(e)},bootstrap(){console.log("bootstrap")},unmount(e){console.log("unmount",e)}});rVe.__POWERED_BY_QIANKUN__||RX({});function RX(e={}){const{container:t}=e,r=rK(oJ);r.use(tVe),r.mount(t?t.querySelector("#app"):"#app")}});export default nVe();
